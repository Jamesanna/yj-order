(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function r1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sg={exports:{}},bl={},bg={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bo=Symbol.for("react.element"),s1=Symbol.for("react.portal"),i1=Symbol.for("react.fragment"),o1=Symbol.for("react.strict_mode"),a1=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),u1=Symbol.for("react.context"),c1=Symbol.for("react.forward_ref"),d1=Symbol.for("react.suspense"),h1=Symbol.for("react.memo"),f1=Symbol.for("react.lazy"),Jf=Symbol.iterator;function m1(t){return t===null||typeof t!="object"?null:(t=Jf&&t[Jf]||t["@@iterator"],typeof t=="function"?t:null)}var Ng={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ig=Object.assign,Ag={};function $s(t,e,n){this.props=t,this.context=e,this.refs=Ag,this.updater=n||Ng}$s.prototype.isReactComponent={};$s.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$s.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cg(){}Cg.prototype=$s.prototype;function Sd(t,e,n){this.props=t,this.context=e,this.refs=Ag,this.updater=n||Ng}var bd=Sd.prototype=new Cg;bd.constructor=Sd;Ig(bd,$s.prototype);bd.isPureReactComponent=!0;var Zf=Array.isArray,kg=Object.prototype.hasOwnProperty,Nd={current:null},Rg={key:!0,ref:!0,__self:!0,__source:!0};function jg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)kg.call(e,r)&&!Rg.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:bo,type:t,key:i,ref:o,props:s,_owner:Nd.current}}function p1(t,e){return{$$typeof:bo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Id(t){return typeof t=="object"&&t!==null&&t.$$typeof===bo}function g1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var em=/\/+/g;function Eu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?g1(""+t.key):e.toString(36)}function va(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case bo:case s1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Eu(o,0):r,Zf(s)?(n="",t!=null&&(n=t.replace(em,"$&/")+"/"),va(s,e,n,"",function(h){return h})):s!=null&&(Id(s)&&(s=p1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(em,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Zf(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Eu(i,u);o+=va(i,e,n,c,s)}else if(c=m1(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Eu(i,u++),o+=va(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qo(t,e,n){if(t==null)return t;var r=[],s=0;return va(t,r,"","",function(i){return e.call(n,i,s++)}),r}function y1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},xa={transition:null},v1={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:xa,ReactCurrentOwner:Nd};function Pg(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Qo,forEach:function(t,e,n){Qo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qo(t,function(){e++}),e},toArray:function(t){return Qo(t,function(e){return e})||[]},only:function(t){if(!Id(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=$s;he.Fragment=i1;he.Profiler=a1;he.PureComponent=Sd;he.StrictMode=o1;he.Suspense=d1;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v1;he.act=Pg;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ig({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Nd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)kg.call(e,c)&&!Rg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:bo,type:t.type,key:s,ref:i,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:u1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:l1,_context:t},t.Consumer=t};he.createElement=jg;he.createFactory=function(t){var e=jg.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:c1,render:t}};he.isValidElement=Id;he.lazy=function(t){return{$$typeof:f1,_payload:{_status:-1,_result:t},_init:y1}};he.memo=function(t,e){return{$$typeof:h1,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=xa.transition;xa.transition={};try{t()}finally{xa.transition=e}};he.unstable_act=Pg;he.useCallback=function(t,e){return St.current.useCallback(t,e)};he.useContext=function(t){return St.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return St.current.useDeferredValue(t)};he.useEffect=function(t,e){return St.current.useEffect(t,e)};he.useId=function(){return St.current.useId()};he.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return St.current.useMemo(t,e)};he.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};he.useRef=function(t){return St.current.useRef(t)};he.useState=function(t){return St.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return St.current.useTransition()};he.version="18.3.1";bg.exports=he;var q=bg.exports;const x1=r1(q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _1=q,w1=Symbol.for("react.element"),E1=Symbol.for("react.fragment"),T1=Object.prototype.hasOwnProperty,S1=_1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b1={key:!0,ref:!0,__self:!0,__source:!0};function Dg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)T1.call(e,r)&&!b1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:w1,type:t,key:i,ref:o,props:s,_owner:S1.current}}bl.Fragment=E1;bl.jsx=Dg;bl.jsxs=Dg;Sg.exports=bl;var l=Sg.exports,oc={},Vg={exports:{}},Ft={},Mg={exports:{}},Og={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,G){var J=H.length;H.push(G);e:for(;0<J;){var oe=J-1>>>1,_e=H[oe];if(0<s(_e,G))H[oe]=G,H[J]=_e,J=oe;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var G=H[0],J=H.pop();if(J!==G){H[0]=J;e:for(var oe=0,_e=H.length,et=_e>>>1;oe<et;){var He=2*(oe+1)-1,be=H[He],k=He+1,$=H[k];if(0>s(be,J))k<_e&&0>s($,be)?(H[oe]=$,H[k]=J,oe=k):(H[oe]=be,H[He]=J,oe=He);else if(k<_e&&0>s($,J))H[oe]=$,H[k]=J,oe=k;else break e}}return G}function s(H,G){var J=H.sortIndex-G.sortIndex;return J!==0?J:H.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],m=1,p=null,g=3,I=!1,C=!1,j=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(H){for(var G=n(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=H)r(h),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(h)}}function V(H){if(j=!1,N(H),!C)if(n(c)!==null)C=!0,F(M);else{var G=n(h);G!==null&&ie(V,G.startTime-H)}}function M(H,G){C=!1,j&&(j=!1,T(y),y=-1),I=!0;var J=g;try{for(N(G),p=n(c);p!==null&&(!(p.expirationTime>G)||H&&!b());){var oe=p.callback;if(typeof oe=="function"){p.callback=null,g=p.priorityLevel;var _e=oe(p.expirationTime<=G);G=t.unstable_now(),typeof _e=="function"?p.callback=_e:p===n(c)&&r(c),N(G)}else r(c);p=n(c)}if(p!==null)var et=!0;else{var He=n(h);He!==null&&ie(V,He.startTime-G),et=!1}return et}finally{p=null,g=J,I=!1}}var O=!1,x=null,y=-1,_=5,E=-1;function b(){return!(t.unstable_now()-E<_)}function A(){if(x!==null){var H=t.unstable_now();E=H;var G=!0;try{G=x(!0,H)}finally{G?S():(O=!1,x=null)}}else O=!1}var S;if(typeof w=="function")S=function(){w(A)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,K=ve.port2;ve.port1.onmessage=A,S=function(){K.postMessage(null)}}else S=function(){P(A,0)};function F(H){x=H,O||(O=!0,S())}function ie(H,G){y=P(function(){H(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){C||I||(C=!0,F(M))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var J=g;g=G;try{return H()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,G){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var J=g;g=H;try{return G()}finally{g=J}},t.unstable_scheduleCallback=function(H,G,J){var oe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?oe+J:oe):J=oe,H){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=J+_e,H={id:m++,callback:G,priorityLevel:H,startTime:J,expirationTime:_e,sortIndex:-1},J>oe?(H.sortIndex=J,e(h,H),n(c)===null&&H===n(h)&&(j?(T(y),y=-1):j=!0,ie(V,J-oe))):(H.sortIndex=_e,e(c,H),C||I||(C=!0,F(M))),H},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(H){var G=g;return function(){var J=g;g=G;try{return H.apply(this,arguments)}finally{g=J}}}})(Og);Mg.exports=Og;var N1=Mg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1=q,Lt=N1;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lg=new Set,Yi={};function Kr(t,e){Cs(t,e),Cs(t+"Capture",e)}function Cs(t,e){for(Yi[t]=e,t=0;t<e.length;t++)Lg.add(e[t])}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ac=Object.prototype.hasOwnProperty,A1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tm={},nm={};function C1(t){return ac.call(nm,t)?!0:ac.call(tm,t)?!1:A1.test(t)?nm[t]=!0:(tm[t]=!0,!1)}function k1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function R1(t,e,n,r){if(e===null||typeof e>"u"||k1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ad=/[\-:]([a-z])/g;function Cd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ad,Cd);dt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ad,Cd);dt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ad,Cd);dt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function kd(t,e,n,r){var s=dt.hasOwnProperty(e)?dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(R1(e,n,s,r)&&(n=null),r||s===null?C1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vn=I1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ko=Symbol.for("react.element"),ls=Symbol.for("react.portal"),us=Symbol.for("react.fragment"),Rd=Symbol.for("react.strict_mode"),lc=Symbol.for("react.profiler"),Fg=Symbol.for("react.provider"),zg=Symbol.for("react.context"),jd=Symbol.for("react.forward_ref"),uc=Symbol.for("react.suspense"),cc=Symbol.for("react.suspense_list"),Pd=Symbol.for("react.memo"),Wn=Symbol.for("react.lazy"),Ug=Symbol.for("react.offscreen"),rm=Symbol.iterator;function gi(t){return t===null||typeof t!="object"?null:(t=rm&&t[rm]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,Tu;function Ai(t){if(Tu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Tu=e&&e[1]||""}return`
`+Tu+t}var Su=!1;function bu(t,e){if(!t||Su)return"";Su=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Su=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ai(t):""}function j1(t){switch(t.tag){case 5:return Ai(t.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 2:case 15:return t=bu(t.type,!1),t;case 11:return t=bu(t.type.render,!1),t;case 1:return t=bu(t.type,!0),t;default:return""}}function dc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case us:return"Fragment";case ls:return"Portal";case lc:return"Profiler";case Rd:return"StrictMode";case uc:return"Suspense";case cc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zg:return(t.displayName||"Context")+".Consumer";case Fg:return(t._context.displayName||"Context")+".Provider";case jd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pd:return e=t.displayName||null,e!==null?e:dc(t.type)||"Memo";case Wn:e=t._payload,t=t._init;try{return dc(t(e))}catch{}}return null}function P1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dc(e);case 8:return e===Rd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $g(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function D1(t){var e=$g(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yo(t){t._valueTracker||(t._valueTracker=D1(t))}function Bg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$g(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Oa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hc(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qg(t,e){e=e.checked,e!=null&&kd(t,"checked",e,!1)}function fc(t,e){qg(t,e);var n=hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mc(t,e.type,n):e.hasOwnProperty("defaultValue")&&mc(t,e.type,hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function im(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mc(t,e,n){(e!=="number"||Oa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ci=Array.isArray;function _s(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function pc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function om(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Ci(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hr(n)}}function Hg(t,e){var n=hr(e.value),r=hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function am(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Wg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Wg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xo,Gg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xo=Xo||document.createElement("div"),Xo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},V1=["Webkit","ms","Moz","O"];Object.keys(Mi).forEach(function(t){V1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mi[e]=Mi[t]})});function Qg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mi.hasOwnProperty(t)&&Mi[t]?(""+e).trim():e+"px"}function Kg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Qg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var M1=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yc(t,e){if(e){if(M1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function vc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xc=null;function Dd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _c=null,ws=null,Es=null;function lm(t){if(t=Ao(t)){if(typeof _c!="function")throw Error(B(280));var e=t.stateNode;e&&(e=kl(e),_c(t.stateNode,t.type,e))}}function Yg(t){ws?Es?Es.push(t):Es=[t]:ws=t}function Xg(){if(ws){var t=ws,e=Es;if(Es=ws=null,lm(t),e)for(t=0;t<e.length;t++)lm(e[t])}}function Jg(t,e){return t(e)}function Zg(){}var Nu=!1;function e0(t,e,n){if(Nu)return t(e,n);Nu=!0;try{return Jg(t,e,n)}finally{Nu=!1,(ws!==null||Es!==null)&&(Zg(),Xg())}}function Ji(t,e){var n=t.stateNode;if(n===null)return null;var r=kl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var wc=!1;if(In)try{var yi={};Object.defineProperty(yi,"passive",{get:function(){wc=!0}}),window.addEventListener("test",yi,yi),window.removeEventListener("test",yi,yi)}catch{wc=!1}function O1(t,e,n,r,s,i,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var Oi=!1,La=null,Fa=!1,Ec=null,L1={onError:function(t){Oi=!0,La=t}};function F1(t,e,n,r,s,i,o,u,c){Oi=!1,La=null,O1.apply(L1,arguments)}function z1(t,e,n,r,s,i,o,u,c){if(F1.apply(this,arguments),Oi){if(Oi){var h=La;Oi=!1,La=null}else throw Error(B(198));Fa||(Fa=!0,Ec=h)}}function Yr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function t0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function um(t){if(Yr(t)!==t)throw Error(B(188))}function U1(t){var e=t.alternate;if(!e){if(e=Yr(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return um(s),t;if(i===r)return um(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function n0(t){return t=U1(t),t!==null?r0(t):null}function r0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=r0(t);if(e!==null)return e;t=t.sibling}return null}var s0=Lt.unstable_scheduleCallback,cm=Lt.unstable_cancelCallback,$1=Lt.unstable_shouldYield,B1=Lt.unstable_requestPaint,Be=Lt.unstable_now,q1=Lt.unstable_getCurrentPriorityLevel,Vd=Lt.unstable_ImmediatePriority,i0=Lt.unstable_UserBlockingPriority,za=Lt.unstable_NormalPriority,H1=Lt.unstable_LowPriority,o0=Lt.unstable_IdlePriority,Nl=null,dn=null;function W1(t){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Nl,t,void 0,(t.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:K1,G1=Math.log,Q1=Math.LN2;function K1(t){return t>>>=0,t===0?32:31-(G1(t)/Q1|0)|0}var Jo=64,Zo=4194304;function ki(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ua(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=ki(u):(i&=o,i!==0&&(r=ki(i)))}else o=n&~s,o!==0?r=ki(o):i!==0&&(r=ki(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Jt(e),s=1<<n,r|=t[n],e&=~s;return r}function Y1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Jt(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=Y1(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Tc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function a0(){var t=Jo;return Jo<<=1,!(Jo&4194240)&&(Jo=64),t}function Iu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function No(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jt(e),t[e]=n}function J1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Jt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Md(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Jt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Te=0;function l0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var u0,Od,c0,d0,h0,Sc=!1,ea=[],er=null,tr=null,nr=null,Zi=new Map,eo=new Map,Qn=[],Z1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dm(t,e){switch(t){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":tr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Zi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":eo.delete(e.pointerId)}}function vi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ao(e),e!==null&&Od(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function e_(t,e,n,r,s){switch(e){case"focusin":return er=vi(er,t,e,n,r,s),!0;case"dragenter":return tr=vi(tr,t,e,n,r,s),!0;case"mouseover":return nr=vi(nr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Zi.set(i,vi(Zi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,eo.set(i,vi(eo.get(i)||null,t,e,n,r,s)),!0}return!1}function f0(t){var e=Vr(t.target);if(e!==null){var n=Yr(e);if(n!==null){if(e=n.tag,e===13){if(e=t0(n),e!==null){t.blockedOn=e,h0(t.priority,function(){c0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _a(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xc=r,n.target.dispatchEvent(r),xc=null}else return e=Ao(n),e!==null&&Od(e),t.blockedOn=n,!1;e.shift()}return!0}function hm(t,e,n){_a(t)&&n.delete(e)}function t_(){Sc=!1,er!==null&&_a(er)&&(er=null),tr!==null&&_a(tr)&&(tr=null),nr!==null&&_a(nr)&&(nr=null),Zi.forEach(hm),eo.forEach(hm)}function xi(t,e){t.blockedOn===e&&(t.blockedOn=null,Sc||(Sc=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,t_)))}function to(t){function e(s){return xi(s,t)}if(0<ea.length){xi(ea[0],t);for(var n=1;n<ea.length;n++){var r=ea[n];r.blockedOn===t&&(r.blockedOn=null)}}for(er!==null&&xi(er,t),tr!==null&&xi(tr,t),nr!==null&&xi(nr,t),Zi.forEach(e),eo.forEach(e),n=0;n<Qn.length;n++)r=Qn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)f0(n),n.blockedOn===null&&Qn.shift()}var Ts=Vn.ReactCurrentBatchConfig,$a=!0;function n_(t,e,n,r){var s=Te,i=Ts.transition;Ts.transition=null;try{Te=1,Ld(t,e,n,r)}finally{Te=s,Ts.transition=i}}function r_(t,e,n,r){var s=Te,i=Ts.transition;Ts.transition=null;try{Te=4,Ld(t,e,n,r)}finally{Te=s,Ts.transition=i}}function Ld(t,e,n,r){if($a){var s=bc(t,e,n,r);if(s===null)Ou(t,e,r,Ba,n),dm(t,r);else if(e_(s,t,e,n,r))r.stopPropagation();else if(dm(t,r),e&4&&-1<Z1.indexOf(t)){for(;s!==null;){var i=Ao(s);if(i!==null&&u0(i),i=bc(t,e,n,r),i===null&&Ou(t,e,r,Ba,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ou(t,e,r,null,n)}}var Ba=null;function bc(t,e,n,r){if(Ba=null,t=Dd(r),t=Vr(t),t!==null)if(e=Yr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=t0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ba=t,null}function m0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(q1()){case Vd:return 1;case i0:return 4;case za:case H1:return 16;case o0:return 536870912;default:return 16}default:return 16}}var Xn=null,Fd=null,wa=null;function p0(){if(wa)return wa;var t,e=Fd,n=e.length,r,s="value"in Xn?Xn.value:Xn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return wa=s.slice(t,1<r?1-r:void 0)}function Ea(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ta(){return!0}function fm(){return!1}function zt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ta:fm,this.isPropagationStopped=fm,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),e}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zd=zt(Bs),Io=Oe({},Bs,{view:0,detail:0}),s_=zt(Io),Au,Cu,_i,Il=Oe({},Io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ud,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_i&&(_i&&t.type==="mousemove"?(Au=t.screenX-_i.screenX,Cu=t.screenY-_i.screenY):Cu=Au=0,_i=t),Au)},movementY:function(t){return"movementY"in t?t.movementY:Cu}}),mm=zt(Il),i_=Oe({},Il,{dataTransfer:0}),o_=zt(i_),a_=Oe({},Io,{relatedTarget:0}),ku=zt(a_),l_=Oe({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),u_=zt(l_),c_=Oe({},Bs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),d_=zt(c_),h_=Oe({},Bs,{data:0}),pm=zt(h_),f_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=p_[t])?!!e[t]:!1}function Ud(){return g_}var y_=Oe({},Io,{key:function(t){if(t.key){var e=f_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ea(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?m_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ud,charCode:function(t){return t.type==="keypress"?Ea(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ea(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),v_=zt(y_),x_=Oe({},Il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gm=zt(x_),__=Oe({},Io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ud}),w_=zt(__),E_=Oe({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),T_=zt(E_),S_=Oe({},Il,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),b_=zt(S_),N_=[9,13,27,32],$d=In&&"CompositionEvent"in window,Li=null;In&&"documentMode"in document&&(Li=document.documentMode);var I_=In&&"TextEvent"in window&&!Li,g0=In&&(!$d||Li&&8<Li&&11>=Li),ym=" ",vm=!1;function y0(t,e){switch(t){case"keyup":return N_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cs=!1;function A_(t,e){switch(t){case"compositionend":return v0(e);case"keypress":return e.which!==32?null:(vm=!0,ym);case"textInput":return t=e.data,t===ym&&vm?null:t;default:return null}}function C_(t,e){if(cs)return t==="compositionend"||!$d&&y0(t,e)?(t=p0(),wa=Fd=Xn=null,cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return g0&&e.locale!=="ko"?null:e.data;default:return null}}var k_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!k_[t.type]:e==="textarea"}function x0(t,e,n,r){Yg(r),e=qa(e,"onChange"),0<e.length&&(n=new zd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fi=null,no=null;function R_(t){k0(t,0)}function Al(t){var e=fs(t);if(Bg(e))return t}function j_(t,e){if(t==="change")return e}var _0=!1;if(In){var Ru;if(In){var ju="oninput"in document;if(!ju){var _m=document.createElement("div");_m.setAttribute("oninput","return;"),ju=typeof _m.oninput=="function"}Ru=ju}else Ru=!1;_0=Ru&&(!document.documentMode||9<document.documentMode)}function wm(){Fi&&(Fi.detachEvent("onpropertychange",w0),no=Fi=null)}function w0(t){if(t.propertyName==="value"&&Al(no)){var e=[];x0(e,no,t,Dd(t)),e0(R_,e)}}function P_(t,e,n){t==="focusin"?(wm(),Fi=e,no=n,Fi.attachEvent("onpropertychange",w0)):t==="focusout"&&wm()}function D_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Al(no)}function V_(t,e){if(t==="click")return Al(e)}function M_(t,e){if(t==="input"||t==="change")return Al(e)}function O_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tn=typeof Object.is=="function"?Object.is:O_;function ro(t,e){if(tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ac.call(e,s)||!tn(t[s],e[s]))return!1}return!0}function Em(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tm(t,e){var n=Em(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Em(n)}}function E0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?E0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function T0(){for(var t=window,e=Oa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Oa(t.document)}return e}function Bd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function L_(t){var e=T0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&E0(n.ownerDocument.documentElement,n)){if(r!==null&&Bd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Tm(n,i);var o=Tm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var F_=In&&"documentMode"in document&&11>=document.documentMode,ds=null,Nc=null,zi=null,Ic=!1;function Sm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ic||ds==null||ds!==Oa(r)||(r=ds,"selectionStart"in r&&Bd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zi&&ro(zi,r)||(zi=r,r=qa(Nc,"onSelect"),0<r.length&&(e=new zd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ds)))}function na(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hs={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionend:na("Transition","TransitionEnd")},Pu={},S0={};In&&(S0=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function Cl(t){if(Pu[t])return Pu[t];if(!hs[t])return t;var e=hs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in S0)return Pu[t]=e[n];return t}var b0=Cl("animationend"),N0=Cl("animationiteration"),I0=Cl("animationstart"),A0=Cl("transitionend"),C0=new Map,bm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(t,e){C0.set(t,e),Kr(e,[t])}for(var Du=0;Du<bm.length;Du++){var Vu=bm[Du],z_=Vu.toLowerCase(),U_=Vu[0].toUpperCase()+Vu.slice(1);_r(z_,"on"+U_)}_r(b0,"onAnimationEnd");_r(N0,"onAnimationIteration");_r(I0,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(A0,"onTransitionEnd");Cs("onMouseEnter",["mouseout","mouseover"]);Cs("onMouseLeave",["mouseout","mouseover"]);Cs("onPointerEnter",["pointerout","pointerover"]);Cs("onPointerLeave",["pointerout","pointerover"]);Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ri));function Nm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,z1(r,e,void 0,t),t.currentTarget=null}function k0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Nm(s,u,h),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Nm(s,u,h),i=c}}}if(Fa)throw t=Ec,Fa=!1,Ec=null,t}function Ce(t,e){var n=e[jc];n===void 0&&(n=e[jc]=new Set);var r=t+"__bubble";n.has(r)||(R0(e,t,2,!1),n.add(r))}function Mu(t,e,n){var r=0;e&&(r|=4),R0(n,t,r,e)}var ra="_reactListening"+Math.random().toString(36).slice(2);function so(t){if(!t[ra]){t[ra]=!0,Lg.forEach(function(n){n!=="selectionchange"&&($_.has(n)||Mu(n,!1,t),Mu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ra]||(e[ra]=!0,Mu("selectionchange",!1,e))}}function R0(t,e,n,r){switch(m0(e)){case 1:var s=n_;break;case 4:s=r_;break;default:s=Ld}n=s.bind(null,e,n,t),s=void 0,!wc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ou(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Vr(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}e0(function(){var h=i,m=Dd(n),p=[];e:{var g=C0.get(t);if(g!==void 0){var I=zd,C=t;switch(t){case"keypress":if(Ea(n)===0)break e;case"keydown":case"keyup":I=v_;break;case"focusin":C="focus",I=ku;break;case"focusout":C="blur",I=ku;break;case"beforeblur":case"afterblur":I=ku;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=mm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=o_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=w_;break;case b0:case N0:case I0:I=u_;break;case A0:I=T_;break;case"scroll":I=s_;break;case"wheel":I=b_;break;case"copy":case"cut":case"paste":I=d_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=gm}var j=(e&4)!==0,P=!j&&t==="scroll",T=j?g!==null?g+"Capture":null:g;j=[];for(var w=h,N;w!==null;){N=w;var V=N.stateNode;if(N.tag===5&&V!==null&&(N=V,T!==null&&(V=Ji(w,T),V!=null&&j.push(io(w,V,N)))),P)break;w=w.return}0<j.length&&(g=new I(g,C,null,n,m),p.push({event:g,listeners:j}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",g&&n!==xc&&(C=n.relatedTarget||n.fromElement)&&(Vr(C)||C[An]))break e;if((I||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,I?(C=n.relatedTarget||n.toElement,I=h,C=C?Vr(C):null,C!==null&&(P=Yr(C),C!==P||C.tag!==5&&C.tag!==6)&&(C=null)):(I=null,C=h),I!==C)){if(j=mm,V="onMouseLeave",T="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(j=gm,V="onPointerLeave",T="onPointerEnter",w="pointer"),P=I==null?g:fs(I),N=C==null?g:fs(C),g=new j(V,w+"leave",I,n,m),g.target=P,g.relatedTarget=N,V=null,Vr(m)===h&&(j=new j(T,w+"enter",C,n,m),j.target=N,j.relatedTarget=P,V=j),P=V,I&&C)t:{for(j=I,T=C,w=0,N=j;N;N=rs(N))w++;for(N=0,V=T;V;V=rs(V))N++;for(;0<w-N;)j=rs(j),w--;for(;0<N-w;)T=rs(T),N--;for(;w--;){if(j===T||T!==null&&j===T.alternate)break t;j=rs(j),T=rs(T)}j=null}else j=null;I!==null&&Im(p,g,I,j,!1),C!==null&&P!==null&&Im(p,P,C,j,!0)}}e:{if(g=h?fs(h):window,I=g.nodeName&&g.nodeName.toLowerCase(),I==="select"||I==="input"&&g.type==="file")var M=j_;else if(xm(g))if(_0)M=M_;else{M=D_;var O=P_}else(I=g.nodeName)&&I.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=V_);if(M&&(M=M(t,h))){x0(p,M,n,m);break e}O&&O(t,g,h),t==="focusout"&&(O=g._wrapperState)&&O.controlled&&g.type==="number"&&mc(g,"number",g.value)}switch(O=h?fs(h):window,t){case"focusin":(xm(O)||O.contentEditable==="true")&&(ds=O,Nc=h,zi=null);break;case"focusout":zi=Nc=ds=null;break;case"mousedown":Ic=!0;break;case"contextmenu":case"mouseup":case"dragend":Ic=!1,Sm(p,n,m);break;case"selectionchange":if(F_)break;case"keydown":case"keyup":Sm(p,n,m)}var x;if($d)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else cs?y0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(g0&&n.locale!=="ko"&&(cs||y!=="onCompositionStart"?y==="onCompositionEnd"&&cs&&(x=p0()):(Xn=m,Fd="value"in Xn?Xn.value:Xn.textContent,cs=!0)),O=qa(h,y),0<O.length&&(y=new pm(y,t,null,n,m),p.push({event:y,listeners:O}),x?y.data=x:(x=v0(n),x!==null&&(y.data=x)))),(x=I_?A_(t,n):C_(t,n))&&(h=qa(h,"onBeforeInput"),0<h.length&&(m=new pm("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:h}),m.data=x))}k0(p,e)})}function io(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ji(t,n),i!=null&&r.unshift(io(t,i,s)),i=Ji(t,e),i!=null&&r.push(io(t,i,s))),t=t.return}return r}function rs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Im(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,s?(c=Ji(n,i),c!=null&&o.unshift(io(n,c,u))):s||(c=Ji(n,i),c!=null&&o.push(io(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var B_=/\r\n?/g,q_=/\u0000|\uFFFD/g;function Am(t){return(typeof t=="string"?t:""+t).replace(B_,`
`).replace(q_,"")}function sa(t,e,n){if(e=Am(e),Am(t)!==e&&n)throw Error(B(425))}function Ha(){}var Ac=null,Cc=null;function kc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rc=typeof setTimeout=="function"?setTimeout:void 0,H_=typeof clearTimeout=="function"?clearTimeout:void 0,Cm=typeof Promise=="function"?Promise:void 0,W_=typeof queueMicrotask=="function"?queueMicrotask:typeof Cm<"u"?function(t){return Cm.resolve(null).then(t).catch(G_)}:Rc;function G_(t){setTimeout(function(){throw t})}function Lu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),to(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);to(e)}function rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function km(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qs=Math.random().toString(36).slice(2),cn="__reactFiber$"+qs,oo="__reactProps$"+qs,An="__reactContainer$"+qs,jc="__reactEvents$"+qs,Q_="__reactListeners$"+qs,K_="__reactHandles$"+qs;function Vr(t){var e=t[cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[An]||n[cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=km(t);t!==null;){if(n=t[cn])return n;t=km(t)}return e}t=n,n=t.parentNode}return null}function Ao(t){return t=t[cn]||t[An],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function kl(t){return t[oo]||null}var Pc=[],ms=-1;function wr(t){return{current:t}}function Re(t){0>ms||(t.current=Pc[ms],Pc[ms]=null,ms--)}function Ie(t,e){ms++,Pc[ms]=t.current,t.current=e}var fr={},_t=wr(fr),kt=wr(!1),$r=fr;function ks(t,e){var n=t.type.contextTypes;if(!n)return fr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Rt(t){return t=t.childContextTypes,t!=null}function Wa(){Re(kt),Re(_t)}function Rm(t,e,n){if(_t.current!==fr)throw Error(B(168));Ie(_t,e),Ie(kt,n)}function j0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,P1(t)||"Unknown",s));return Oe({},n,r)}function Ga(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fr,$r=_t.current,Ie(_t,t),Ie(kt,kt.current),!0}function jm(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=j0(t,e,$r),r.__reactInternalMemoizedMergedChildContext=t,Re(kt),Re(_t),Ie(_t,t)):Re(kt),Ie(kt,n)}var En=null,Rl=!1,Fu=!1;function P0(t){En===null?En=[t]:En.push(t)}function Y_(t){Rl=!0,P0(t)}function Er(){if(!Fu&&En!==null){Fu=!0;var t=0,e=Te;try{var n=En;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}En=null,Rl=!1}catch(s){throw En!==null&&(En=En.slice(t+1)),s0(Vd,Er),s}finally{Te=e,Fu=!1}}return null}var ps=[],gs=0,Qa=null,Ka=0,Ut=[],$t=0,Br=null,Tn=1,Sn="";function jr(t,e){ps[gs++]=Ka,ps[gs++]=Qa,Qa=t,Ka=e}function D0(t,e,n){Ut[$t++]=Tn,Ut[$t++]=Sn,Ut[$t++]=Br,Br=t;var r=Tn;t=Sn;var s=32-Jt(r)-1;r&=~(1<<s),n+=1;var i=32-Jt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Tn=1<<32-Jt(e)+s|n<<s|r,Sn=i+t}else Tn=1<<i|n<<s|r,Sn=t}function qd(t){t.return!==null&&(jr(t,1),D0(t,1,0))}function Hd(t){for(;t===Qa;)Qa=ps[--gs],ps[gs]=null,Ka=ps[--gs],ps[gs]=null;for(;t===Br;)Br=Ut[--$t],Ut[$t]=null,Sn=Ut[--$t],Ut[$t]=null,Tn=Ut[--$t],Ut[$t]=null}var Ot=null,Vt=null,Pe=!1,Xt=null;function V0(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Vt=rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Br!==null?{id:Tn,overflow:Sn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Vt=null,!0):!1;default:return!1}}function Dc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vc(t){if(Pe){var e=Vt;if(e){var n=e;if(!Pm(t,e)){if(Dc(t))throw Error(B(418));e=rr(n.nextSibling);var r=Ot;e&&Pm(t,e)?V0(r,n):(t.flags=t.flags&-4097|2,Pe=!1,Ot=t)}}else{if(Dc(t))throw Error(B(418));t.flags=t.flags&-4097|2,Pe=!1,Ot=t}}}function Dm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function ia(t){if(t!==Ot)return!1;if(!Pe)return Dm(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kc(t.type,t.memoizedProps)),e&&(e=Vt)){if(Dc(t))throw M0(),Error(B(418));for(;e;)V0(t,e),e=rr(e.nextSibling)}if(Dm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Ot?rr(t.stateNode.nextSibling):null;return!0}function M0(){for(var t=Vt;t;)t=rr(t.nextSibling)}function Rs(){Vt=Ot=null,Pe=!1}function Wd(t){Xt===null?Xt=[t]:Xt.push(t)}var X_=Vn.ReactCurrentBatchConfig;function wi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function oa(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vm(t){var e=t._init;return e(t._payload)}function O0(t){function e(T,w){if(t){var N=T.deletions;N===null?(T.deletions=[w],T.flags|=16):N.push(w)}}function n(T,w){if(!t)return null;for(;w!==null;)e(T,w),w=w.sibling;return null}function r(T,w){for(T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function s(T,w){return T=ar(T,w),T.index=0,T.sibling=null,T}function i(T,w,N){return T.index=N,t?(N=T.alternate,N!==null?(N=N.index,N<w?(T.flags|=2,w):N):(T.flags|=2,w)):(T.flags|=1048576,w)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function u(T,w,N,V){return w===null||w.tag!==6?(w=Wu(N,T.mode,V),w.return=T,w):(w=s(w,N),w.return=T,w)}function c(T,w,N,V){var M=N.type;return M===us?m(T,w,N.props.children,V,N.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Wn&&Vm(M)===w.type)?(V=s(w,N.props),V.ref=wi(T,w,N),V.return=T,V):(V=Ca(N.type,N.key,N.props,null,T.mode,V),V.ref=wi(T,w,N),V.return=T,V)}function h(T,w,N,V){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=Gu(N,T.mode,V),w.return=T,w):(w=s(w,N.children||[]),w.return=T,w)}function m(T,w,N,V,M){return w===null||w.tag!==7?(w=zr(N,T.mode,V,M),w.return=T,w):(w=s(w,N),w.return=T,w)}function p(T,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Wu(""+w,T.mode,N),w.return=T,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ko:return N=Ca(w.type,w.key,w.props,null,T.mode,N),N.ref=wi(T,null,w),N.return=T,N;case ls:return w=Gu(w,T.mode,N),w.return=T,w;case Wn:var V=w._init;return p(T,V(w._payload),N)}if(Ci(w)||gi(w))return w=zr(w,T.mode,N,null),w.return=T,w;oa(T,w)}return null}function g(T,w,N,V){var M=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return M!==null?null:u(T,w,""+N,V);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ko:return N.key===M?c(T,w,N,V):null;case ls:return N.key===M?h(T,w,N,V):null;case Wn:return M=N._init,g(T,w,M(N._payload),V)}if(Ci(N)||gi(N))return M!==null?null:m(T,w,N,V,null);oa(T,N)}return null}function I(T,w,N,V,M){if(typeof V=="string"&&V!==""||typeof V=="number")return T=T.get(N)||null,u(w,T,""+V,M);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ko:return T=T.get(V.key===null?N:V.key)||null,c(w,T,V,M);case ls:return T=T.get(V.key===null?N:V.key)||null,h(w,T,V,M);case Wn:var O=V._init;return I(T,w,N,O(V._payload),M)}if(Ci(V)||gi(V))return T=T.get(N)||null,m(w,T,V,M,null);oa(w,V)}return null}function C(T,w,N,V){for(var M=null,O=null,x=w,y=w=0,_=null;x!==null&&y<N.length;y++){x.index>y?(_=x,x=null):_=x.sibling;var E=g(T,x,N[y],V);if(E===null){x===null&&(x=_);break}t&&x&&E.alternate===null&&e(T,x),w=i(E,w,y),O===null?M=E:O.sibling=E,O=E,x=_}if(y===N.length)return n(T,x),Pe&&jr(T,y),M;if(x===null){for(;y<N.length;y++)x=p(T,N[y],V),x!==null&&(w=i(x,w,y),O===null?M=x:O.sibling=x,O=x);return Pe&&jr(T,y),M}for(x=r(T,x);y<N.length;y++)_=I(x,T,y,N[y],V),_!==null&&(t&&_.alternate!==null&&x.delete(_.key===null?y:_.key),w=i(_,w,y),O===null?M=_:O.sibling=_,O=_);return t&&x.forEach(function(b){return e(T,b)}),Pe&&jr(T,y),M}function j(T,w,N,V){var M=gi(N);if(typeof M!="function")throw Error(B(150));if(N=M.call(N),N==null)throw Error(B(151));for(var O=M=null,x=w,y=w=0,_=null,E=N.next();x!==null&&!E.done;y++,E=N.next()){x.index>y?(_=x,x=null):_=x.sibling;var b=g(T,x,E.value,V);if(b===null){x===null&&(x=_);break}t&&x&&b.alternate===null&&e(T,x),w=i(b,w,y),O===null?M=b:O.sibling=b,O=b,x=_}if(E.done)return n(T,x),Pe&&jr(T,y),M;if(x===null){for(;!E.done;y++,E=N.next())E=p(T,E.value,V),E!==null&&(w=i(E,w,y),O===null?M=E:O.sibling=E,O=E);return Pe&&jr(T,y),M}for(x=r(T,x);!E.done;y++,E=N.next())E=I(x,T,y,E.value,V),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?y:E.key),w=i(E,w,y),O===null?M=E:O.sibling=E,O=E);return t&&x.forEach(function(A){return e(T,A)}),Pe&&jr(T,y),M}function P(T,w,N,V){if(typeof N=="object"&&N!==null&&N.type===us&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ko:e:{for(var M=N.key,O=w;O!==null;){if(O.key===M){if(M=N.type,M===us){if(O.tag===7){n(T,O.sibling),w=s(O,N.props.children),w.return=T,T=w;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Wn&&Vm(M)===O.type){n(T,O.sibling),w=s(O,N.props),w.ref=wi(T,O,N),w.return=T,T=w;break e}n(T,O);break}else e(T,O);O=O.sibling}N.type===us?(w=zr(N.props.children,T.mode,V,N.key),w.return=T,T=w):(V=Ca(N.type,N.key,N.props,null,T.mode,V),V.ref=wi(T,w,N),V.return=T,T=V)}return o(T);case ls:e:{for(O=N.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){n(T,w.sibling),w=s(w,N.children||[]),w.return=T,T=w;break e}else{n(T,w);break}else e(T,w);w=w.sibling}w=Gu(N,T.mode,V),w.return=T,T=w}return o(T);case Wn:return O=N._init,P(T,w,O(N._payload),V)}if(Ci(N))return C(T,w,N,V);if(gi(N))return j(T,w,N,V);oa(T,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(n(T,w.sibling),w=s(w,N),w.return=T,T=w):(n(T,w),w=Wu(N,T.mode,V),w.return=T,T=w),o(T)):n(T,w)}return P}var js=O0(!0),L0=O0(!1),Ya=wr(null),Xa=null,ys=null,Gd=null;function Qd(){Gd=ys=Xa=null}function Kd(t){var e=Ya.current;Re(Ya),t._currentValue=e}function Mc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ss(t,e){Xa=t,Gd=ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(Gd!==t)if(t={context:t,memoizedValue:e,next:null},ys===null){if(Xa===null)throw Error(B(308));ys=t,Xa.dependencies={lanes:0,firstContext:t}}else ys=ys.next=t;return e}var Mr=null;function Yd(t){Mr===null?Mr=[t]:Mr.push(t)}function F0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Yd(e)):(n.next=s.next,s.next=n),e.interleaved=n,Cn(t,r)}function Cn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gn=!1;function Xd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Cn(t,n)}return s=r.interleaved,s===null?(e.next=e,Yd(r)):(e.next=s.next,s.next=e),r.interleaved=e,Cn(t,n)}function Ta(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Md(t,n)}}function Mm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ja(t,e,n,r){var s=t.updateQueue;Gn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==o&&(u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,m=h=c=null,u=i;do{var g=u.lane,I=u.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:I,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=t,j=u;switch(g=e,I=n,j.tag){case 1:if(C=j.payload,typeof C=="function"){p=C.call(I,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=j.payload,g=typeof C=="function"?C.call(I,p,g):C,g==null)break e;p=Oe({},p,g);break e;case 2:Gn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[u]:g.push(u))}else I={eventTime:I,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(h=m=I,c=p):m=m.next=I,o|=g;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;g=u,u=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(c=p),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Hr|=o,t.lanes=o,t.memoizedState=p}}function Om(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Co={},hn=wr(Co),ao=wr(Co),lo=wr(Co);function Or(t){if(t===Co)throw Error(B(174));return t}function Jd(t,e){switch(Ie(lo,e),Ie(ao,t),Ie(hn,Co),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gc(e,t)}Re(hn),Ie(hn,e)}function Ps(){Re(hn),Re(ao),Re(lo)}function U0(t){Or(lo.current);var e=Or(hn.current),n=gc(e,t.type);e!==n&&(Ie(ao,t),Ie(hn,n))}function Zd(t){ao.current===t&&(Re(hn),Re(ao))}var Ve=wr(0);function Za(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zu=[];function eh(){for(var t=0;t<zu.length;t++)zu[t]._workInProgressVersionPrimary=null;zu.length=0}var Sa=Vn.ReactCurrentDispatcher,Uu=Vn.ReactCurrentBatchConfig,qr=0,Me=null,Xe=null,st=null,el=!1,Ui=!1,uo=0,J_=0;function mt(){throw Error(B(321))}function th(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tn(t[n],e[n]))return!1;return!0}function nh(t,e,n,r,s,i){if(qr=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sa.current=t===null||t.memoizedState===null?nw:rw,t=n(r,s),Ui){i=0;do{if(Ui=!1,uo=0,25<=i)throw Error(B(301));i+=1,st=Xe=null,e.updateQueue=null,Sa.current=sw,t=n(r,s)}while(Ui)}if(Sa.current=tl,e=Xe!==null&&Xe.next!==null,qr=0,st=Xe=Me=null,el=!1,e)throw Error(B(300));return t}function rh(){var t=uo!==0;return uo=0,t}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Me.memoizedState=st=t:st=st.next=t,st}function Gt(){if(Xe===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=st===null?Me.memoizedState:st.next;if(e!==null)st=e,Xe=t;else{if(t===null)throw Error(B(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},st===null?Me.memoizedState=st=t:st=st.next=t}return st}function co(t,e){return typeof e=="function"?e(t):e}function $u(t){var e=Gt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Xe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,h=i;do{var m=h.lane;if((qr&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=p,o=r):c=c.next=p,Me.lanes|=m,Hr|=m}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=u,tn(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,Hr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bu(t){var e=Gt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);tn(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function $0(){}function B0(t,e){var n=Me,r=Gt(),s=e(),i=!tn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,sh(W0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,ho(9,H0.bind(null,n,r,s,e),void 0,null),it===null)throw Error(B(349));qr&30||q0(n,e,s)}return s}function q0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function H0(t,e,n,r){e.value=n,e.getSnapshot=r,G0(e)&&Q0(t)}function W0(t,e,n){return n(function(){G0(e)&&Q0(t)})}function G0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tn(t,n)}catch{return!0}}function Q0(t){var e=Cn(t,1);e!==null&&Zt(e,t,1,-1)}function Lm(t){var e=ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:t},e.queue=t,t=t.dispatch=tw.bind(null,Me,t),[e.memoizedState,t]}function ho(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function K0(){return Gt().memoizedState}function ba(t,e,n,r){var s=ln();Me.flags|=t,s.memoizedState=ho(1|e,n,void 0,r===void 0?null:r)}function jl(t,e,n,r){var s=Gt();r=r===void 0?null:r;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,r!==null&&th(r,o.deps)){s.memoizedState=ho(e,n,i,r);return}}Me.flags|=t,s.memoizedState=ho(1|e,n,i,r)}function Fm(t,e){return ba(8390656,8,t,e)}function sh(t,e){return jl(2048,8,t,e)}function Y0(t,e){return jl(4,2,t,e)}function X0(t,e){return jl(4,4,t,e)}function J0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Z0(t,e,n){return n=n!=null?n.concat([t]):null,jl(4,4,J0.bind(null,e,t),n)}function ih(){}function ey(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&th(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ty(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&th(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ny(t,e,n){return qr&21?(tn(n,e)||(n=a0(),Me.lanes|=n,Hr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function Z_(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=Uu.transition;Uu.transition={};try{t(!1),e()}finally{Te=n,Uu.transition=r}}function ry(){return Gt().memoizedState}function ew(t,e,n){var r=or(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sy(t))iy(e,n);else if(n=F0(t,e,n,r),n!==null){var s=Tt();Zt(n,t,r,s),oy(n,e,r)}}function tw(t,e,n){var r=or(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sy(t))iy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,tn(u,o)){var c=e.interleaved;c===null?(s.next=s,Yd(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=F0(t,e,s,r),n!==null&&(s=Tt(),Zt(n,t,r,s),oy(n,e,r))}}function sy(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function iy(t,e){Ui=el=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function oy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Md(t,n)}}var tl={readContext:Wt,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},nw={readContext:Wt,useCallback:function(t,e){return ln().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:Fm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ba(4194308,4,J0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ba(4194308,4,t,e)},useInsertionEffect:function(t,e){return ba(4,2,t,e)},useMemo:function(t,e){var n=ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ew.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=ln();return t={current:t},e.memoizedState=t},useState:Lm,useDebugValue:ih,useDeferredValue:function(t){return ln().memoizedState=t},useTransition:function(){var t=Lm(!1),e=t[0];return t=Z_.bind(null,t[1]),ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=ln();if(Pe){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),it===null)throw Error(B(349));qr&30||q0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Fm(W0.bind(null,r,i,t),[t]),r.flags|=2048,ho(9,H0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ln(),e=it.identifierPrefix;if(Pe){var n=Sn,r=Tn;n=(r&~(1<<32-Jt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=uo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=J_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rw={readContext:Wt,useCallback:ey,useContext:Wt,useEffect:sh,useImperativeHandle:Z0,useInsertionEffect:Y0,useLayoutEffect:X0,useMemo:ty,useReducer:$u,useRef:K0,useState:function(){return $u(co)},useDebugValue:ih,useDeferredValue:function(t){var e=Gt();return ny(e,Xe.memoizedState,t)},useTransition:function(){var t=$u(co)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:$0,useSyncExternalStore:B0,useId:ry,unstable_isNewReconciler:!1},sw={readContext:Wt,useCallback:ey,useContext:Wt,useEffect:sh,useImperativeHandle:Z0,useInsertionEffect:Y0,useLayoutEffect:X0,useMemo:ty,useReducer:Bu,useRef:K0,useState:function(){return Bu(co)},useDebugValue:ih,useDeferredValue:function(t){var e=Gt();return Xe===null?e.memoizedState=t:ny(e,Xe.memoizedState,t)},useTransition:function(){var t=Bu(co)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:$0,useSyncExternalStore:B0,useId:ry,unstable_isNewReconciler:!1};function Kt(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Oc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pl={isMounted:function(t){return(t=t._reactInternals)?Yr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=or(t),i=bn(r,s);i.payload=e,n!=null&&(i.callback=n),e=sr(t,i,s),e!==null&&(Zt(e,t,s,r),Ta(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=or(t),i=bn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=sr(t,i,s),e!==null&&(Zt(e,t,s,r),Ta(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=or(t),s=bn(n,r);s.tag=2,e!=null&&(s.callback=e),e=sr(t,s,r),e!==null&&(Zt(e,t,r,n),Ta(e,t,r))}};function zm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ro(n,r)||!ro(s,i):!0}function ay(t,e,n){var r=!1,s=fr,i=e.contextType;return typeof i=="object"&&i!==null?i=Wt(i):(s=Rt(e)?$r:_t.current,r=e.contextTypes,i=(r=r!=null)?ks(t,s):fr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Um(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pl.enqueueReplaceState(e,e.state,null)}function Lc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Xd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Wt(i):(i=Rt(e)?$r:_t.current,s.context=ks(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Oc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Pl.enqueueReplaceState(s,s.state,null),Ja(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ds(t,e){try{var n="",r=e;do n+=j1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function qu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var iw=typeof WeakMap=="function"?WeakMap:Map;function ly(t,e,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rl||(rl=!0,Kc=r),Fc(t,e)},n}function uy(t,e,n){n=bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Fc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Fc(t,e),typeof r!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $m(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new iw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=xw.bind(null,t,e,n),e.then(t,t))}function Bm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bn(-1,1),e.tag=2,sr(n,e,1))),n.lanes|=1),t)}var ow=Vn.ReactCurrentOwner,Ct=!1;function Et(t,e,n,r){e.child=t===null?L0(e,null,n,r):js(e,t.child,n,r)}function Hm(t,e,n,r,s){n=n.render;var i=e.ref;return Ss(e,s),r=nh(t,e,n,r,i,s),n=rh(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,kn(t,e,s)):(Pe&&n&&qd(e),e.flags|=1,Et(t,e,r,s),e.child)}function Wm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!fh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,cy(t,e,i,r,s)):(t=Ca(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ro,n(o,r)&&t.ref===e.ref)return kn(t,e,s)}return e.flags|=1,t=ar(i,r),t.ref=e.ref,t.return=e,e.child=t}function cy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ro(i,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,kn(t,e,s)}return zc(t,e,n,r,s)}function dy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(xs,Dt),Dt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(xs,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(xs,Dt),Dt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(xs,Dt),Dt|=r;return Et(t,e,s,n),e.child}function hy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zc(t,e,n,r,s){var i=Rt(n)?$r:_t.current;return i=ks(e,i),Ss(e,s),n=nh(t,e,n,r,i,s),r=rh(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,kn(t,e,s)):(Pe&&r&&qd(e),e.flags|=1,Et(t,e,n,s),e.child)}function Gm(t,e,n,r,s){if(Rt(n)){var i=!0;Ga(e)}else i=!1;if(Ss(e,s),e.stateNode===null)Na(t,e),ay(e,n,r),Lc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Wt(h):(h=Rt(n)?$r:_t.current,h=ks(e,h));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&Um(e,o,r,h),Gn=!1;var g=e.memoizedState;o.state=g,Ja(e,r,o,s),c=e.memoizedState,u!==r||g!==c||kt.current||Gn?(typeof m=="function"&&(Oc(e,n,m,r),c=e.memoizedState),(u=Gn||zm(e,n,u,r,g,c,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,z0(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Kt(e.type,u),o.props=h,p=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Wt(c):(c=Rt(n)?$r:_t.current,c=ks(e,c));var I=n.getDerivedStateFromProps;(m=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==p||g!==c)&&Um(e,o,r,c),Gn=!1,g=e.memoizedState,o.state=g,Ja(e,r,o,s);var C=e.memoizedState;u!==p||g!==C||kt.current||Gn?(typeof I=="function"&&(Oc(e,n,I,r),C=e.memoizedState),(h=Gn||zm(e,n,h,r,g,C,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Uc(t,e,n,r,i,s)}function Uc(t,e,n,r,s,i){hy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&jm(e,n,!1),kn(t,e,i);r=e.stateNode,ow.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=js(e,t.child,null,i),e.child=js(e,null,u,i)):Et(t,e,u,i),e.memoizedState=r.state,s&&jm(e,n,!0),e.child}function fy(t){var e=t.stateNode;e.pendingContext?Rm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rm(t,e.context,!1),Jd(t,e.containerInfo)}function Qm(t,e,n,r,s){return Rs(),Wd(s),e.flags|=256,Et(t,e,n,r),e.child}var $c={dehydrated:null,treeContext:null,retryLane:0};function Bc(t){return{baseLanes:t,cachePool:null,transitions:null}}function my(t,e,n){var r=e.pendingProps,s=Ve.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(Ve,s&1),t===null)return Vc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ml(o,r,0,null),t=zr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Bc(n),e.memoizedState=$c,t):oh(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return aw(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ar(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=ar(u,i):(i=zr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Bc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=$c,r}return i=t.child,t=i.sibling,r=ar(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function oh(t,e){return e=Ml({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function aa(t,e,n,r){return r!==null&&Wd(r),js(e,t.child,null,n),t=oh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aw(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=qu(Error(B(422))),aa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ml({mode:"visible",children:r.children},s,0,null),i=zr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&js(e,t.child,null,o),e.child.memoizedState=Bc(o),e.memoizedState=$c,i);if(!(e.mode&1))return aa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(B(419)),r=qu(i,r,void 0),aa(t,e,o,r)}if(u=(o&t.childLanes)!==0,Ct||u){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Cn(t,s),Zt(r,t,s,-1))}return hh(),r=qu(Error(B(421))),aa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=_w.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Vt=rr(s.nextSibling),Ot=e,Pe=!0,Xt=null,t!==null&&(Ut[$t++]=Tn,Ut[$t++]=Sn,Ut[$t++]=Br,Tn=t.id,Sn=t.overflow,Br=e),e=oh(e,r.children),e.flags|=4096,e)}function Km(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mc(t.return,e,n)}function Hu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function py(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Et(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Km(t,n,e);else if(t.tag===19)Km(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Za(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Hu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Za(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Hu(e,!0,n,null,i);break;case"together":Hu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Na(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lw(t,e,n){switch(e.tag){case 3:fy(e),Rs();break;case 5:U0(e);break;case 1:Rt(e.type)&&Ga(e);break;case 4:Jd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(Ya,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?my(t,e,n):(Ie(Ve,Ve.current&1),t=kn(t,e,n),t!==null?t.sibling:null);Ie(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return py(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,dy(t,e,n)}return kn(t,e,n)}var gy,qc,yy,vy;gy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qc=function(){};yy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Or(hn.current);var i=null;switch(n){case"input":s=hc(t,s),r=hc(t,r),i=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),i=[];break;case"textarea":s=pc(t,s),r=pc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ha)}yc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Yi.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Yi.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ce("scroll",t),i||u===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};vy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ei(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function uw(t,e,n){var r=e.pendingProps;switch(Hd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return Rt(e.type)&&Wa(),pt(e),null;case 3:return r=e.stateNode,Ps(),Re(kt),Re(_t),eh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ia(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xt!==null&&(Jc(Xt),Xt=null))),qc(t,e),pt(e),null;case 5:Zd(e);var s=Or(lo.current);if(n=e.type,t!==null&&e.stateNode!=null)yy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return pt(e),null}if(t=Or(hn.current),ia(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[cn]=e,r[oo]=i,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<Ri.length;s++)Ce(Ri[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":sm(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":om(r,i),Ce("invalid",r)}yc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&sa(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&sa(r.textContent,u,t),s=["children",""+u]):Yi.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Yo(r),im(r,i,!0);break;case"textarea":Yo(r),am(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ha)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Wg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[cn]=e,t[oo]=r,gy(t,e,!1,!1),e.stateNode=t;e:{switch(o=vc(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),s=r;break;case"iframe":case"object":case"embed":Ce("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ri.length;s++)Ce(Ri[s],t);s=r;break;case"source":Ce("error",t),s=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),s=r;break;case"details":Ce("toggle",t),s=r;break;case"input":sm(t,r),s=hc(t,r),Ce("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":om(t,r),s=pc(t,r),Ce("invalid",t);break;default:s=r}yc(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?Kg(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Gg(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Xi(t,c):typeof c=="number"&&Xi(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ce("scroll",t):c!=null&&kd(t,i,c,o))}switch(n){case"input":Yo(t),im(t,r,!1);break;case"textarea":Yo(t),am(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_s(t,!!r.multiple,i,!1):r.defaultValue!=null&&_s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ha)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)vy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Or(lo.current),Or(hn.current),ia(e)){if(r=e.stateNode,n=e.memoizedProps,r[cn]=e,(i=r.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:sa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cn]=e,e.stateNode=r}return pt(e),null;case 13:if(Re(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Vt!==null&&e.mode&1&&!(e.flags&128))M0(),Rs(),e.flags|=98560,i=!1;else if(i=ia(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[cn]=e}else Rs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),i=!1}else Xt!==null&&(Jc(Xt),Xt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?Je===0&&(Je=3):hh())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return Ps(),qc(t,e),t===null&&so(e.stateNode.containerInfo),pt(e),null;case 10:return Kd(e.type._context),pt(e),null;case 17:return Rt(e.type)&&Wa(),pt(e),null;case 19:if(Re(Ve),i=e.memoizedState,i===null)return pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ei(i,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Za(t),o!==null){for(e.flags|=128,Ei(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Be()>Vs&&(e.flags|=128,r=!0,Ei(i,!1),e.lanes=4194304)}else{if(!r)if(t=Za(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ei(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pe)return pt(e),null}else 2*Be()-i.renderingStartTime>Vs&&n!==1073741824&&(e.flags|=128,r=!0,Ei(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,n=Ve.current,Ie(Ve,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return dh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dt&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function cw(t,e){switch(Hd(e),e.tag){case 1:return Rt(e.type)&&Wa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ps(),Re(kt),Re(_t),eh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Zd(e),null;case 13:if(Re(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Rs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Ve),null;case 4:return Ps(),null;case 10:return Kd(e.type._context),null;case 22:case 23:return dh(),null;case 24:return null;default:return null}}var la=!1,vt=!1,dw=typeof WeakSet=="function"?WeakSet:Set,X=null;function vs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function Hc(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var Ym=!1;function hw(t,e){if(Ac=$a,t=T0(),Bd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,m=0,p=t,g=null;t:for(;;){for(var I;p!==n||s!==0&&p.nodeType!==3||(u=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(I=p.firstChild)!==null;)g=p,p=I;for(;;){if(p===t)break t;if(g===n&&++h===s&&(u=o),g===i&&++m===r&&(c=o),(I=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=I}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cc={focusedElem:t,selectionRange:n},$a=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var j=C.memoizedProps,P=C.memoizedState,T=e.stateNode,w=T.getSnapshotBeforeUpdate(e.elementType===e.type?j:Kt(e.type,j),P);T.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(V){Ue(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return C=Ym,Ym=!1,C}function $i(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hc(e,n,i)}s=s.next}while(s!==r)}}function Dl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function xy(t){var e=t.alternate;e!==null&&(t.alternate=null,xy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cn],delete e[oo],delete e[jc],delete e[Q_],delete e[K_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _y(t){return t.tag===5||t.tag===3||t.tag===4}function Xm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_y(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ha));else if(r!==4&&(t=t.child,t!==null))for(Gc(t,e,n),t=t.sibling;t!==null;)Gc(t,e,n),t=t.sibling}function Qc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qc(t,e,n),t=t.sibling;t!==null;)Qc(t,e,n),t=t.sibling}var at=null,Yt=!1;function Bn(t,e,n){for(n=n.child;n!==null;)wy(t,e,n),n=n.sibling}function wy(t,e,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Nl,n)}catch{}switch(n.tag){case 5:vt||vs(n,e);case 6:var r=at,s=Yt;at=null,Bn(t,e,n),at=r,Yt=s,at!==null&&(Yt?(t=at,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(Yt?(t=at,n=n.stateNode,t.nodeType===8?Lu(t.parentNode,n):t.nodeType===1&&Lu(t,n),to(t)):Lu(at,n.stateNode));break;case 4:r=at,s=Yt,at=n.stateNode.containerInfo,Yt=!0,Bn(t,e,n),at=r,Yt=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hc(n,e,o),s=s.next}while(s!==r)}Bn(t,e,n);break;case 1:if(!vt&&(vs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ue(n,e,u)}Bn(t,e,n);break;case 21:Bn(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,Bn(t,e,n),vt=r):Bn(t,e,n);break;default:Bn(t,e,n)}}function Jm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dw),e.forEach(function(r){var s=ww.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:at=u.stateNode,Yt=!1;break e;case 3:at=u.stateNode.containerInfo,Yt=!0;break e;case 4:at=u.stateNode.containerInfo,Yt=!0;break e}u=u.return}if(at===null)throw Error(B(160));wy(i,o,s),at=null,Yt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Ue(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ey(e,t),e=e.sibling}function Ey(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qt(e,t),on(t),r&4){try{$i(3,t,t.return),Dl(3,t)}catch(j){Ue(t,t.return,j)}try{$i(5,t,t.return)}catch(j){Ue(t,t.return,j)}}break;case 1:Qt(e,t),on(t),r&512&&n!==null&&vs(n,n.return);break;case 5:if(Qt(e,t),on(t),r&512&&n!==null&&vs(n,n.return),t.flags&32){var s=t.stateNode;try{Xi(s,"")}catch(j){Ue(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&qg(s,i),vc(u,o);var h=vc(u,i);for(o=0;o<c.length;o+=2){var m=c[o],p=c[o+1];m==="style"?Kg(s,p):m==="dangerouslySetInnerHTML"?Gg(s,p):m==="children"?Xi(s,p):kd(s,m,p,h)}switch(u){case"input":fc(s,i);break;case"textarea":Hg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?_s(s,!!i.multiple,I,!1):g!==!!i.multiple&&(i.defaultValue!=null?_s(s,!!i.multiple,i.defaultValue,!0):_s(s,!!i.multiple,i.multiple?[]:"",!1))}s[oo]=i}catch(j){Ue(t,t.return,j)}}break;case 6:if(Qt(e,t),on(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(j){Ue(t,t.return,j)}}break;case 3:if(Qt(e,t),on(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{to(e.containerInfo)}catch(j){Ue(t,t.return,j)}break;case 4:Qt(e,t),on(t);break;case 13:Qt(e,t),on(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(uh=Be())),r&4&&Jm(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(h=vt)||m,Qt(e,t),vt=h):Qt(e,t),on(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(X=t,m=t.child;m!==null;){for(p=X=m;X!==null;){switch(g=X,I=g.child,g.tag){case 0:case 11:case 14:case 15:$i(4,g,g.return);break;case 1:vs(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(j){Ue(r,n,j)}}break;case 5:vs(g,g.return);break;case 22:if(g.memoizedState!==null){ep(p);continue}}I!==null?(I.return=g,X=I):ep(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Qg("display",o))}catch(j){Ue(t,t.return,j)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(j){Ue(t,t.return,j)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Qt(e,t),on(t),r&4&&Jm(t);break;case 21:break;default:Qt(e,t),on(t)}}function on(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_y(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Xi(s,""),r.flags&=-33);var i=Xm(t);Qc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=Xm(t);Gc(t,u,o);break;default:throw Error(B(161))}}catch(c){Ue(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fw(t,e,n){X=t,Ty(t)}function Ty(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||la;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||vt;u=la;var h=vt;if(la=o,(vt=c)&&!h)for(X=s;X!==null;)o=X,c=o.child,o.tag===22&&o.memoizedState!==null?tp(s):c!==null?(c.return=o,X=c):tp(s);for(;i!==null;)X=i,Ty(i),i=i.sibling;X=s,la=u,vt=h}Zm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):Zm(t)}}function Zm(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Dl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Om(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Om(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&to(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}vt||e.flags&512&&Wc(e)}catch(g){Ue(e,e.return,g)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function ep(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function tp(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dl(4,e)}catch(c){Ue(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ue(e,s,c)}}var i=e.return;try{Wc(e)}catch(c){Ue(e,i,c)}break;case 5:var o=e.return;try{Wc(e)}catch(c){Ue(e,o,c)}}}catch(c){Ue(e,e.return,c)}if(e===t){X=null;break}var u=e.sibling;if(u!==null){u.return=e.return,X=u;break}X=e.return}}var mw=Math.ceil,nl=Vn.ReactCurrentDispatcher,ah=Vn.ReactCurrentOwner,Ht=Vn.ReactCurrentBatchConfig,ye=0,it=null,Ge=null,ct=0,Dt=0,xs=wr(0),Je=0,fo=null,Hr=0,Vl=0,lh=0,Bi=null,It=null,uh=0,Vs=1/0,wn=null,rl=!1,Kc=null,ir=null,ua=!1,Jn=null,sl=0,qi=0,Yc=null,Ia=-1,Aa=0;function Tt(){return ye&6?Be():Ia!==-1?Ia:Ia=Be()}function or(t){return t.mode&1?ye&2&&ct!==0?ct&-ct:X_.transition!==null?(Aa===0&&(Aa=a0()),Aa):(t=Te,t!==0||(t=window.event,t=t===void 0?16:m0(t.type)),t):1}function Zt(t,e,n,r){if(50<qi)throw qi=0,Yc=null,Error(B(185));No(t,n,r),(!(ye&2)||t!==it)&&(t===it&&(!(ye&2)&&(Vl|=n),Je===4&&Kn(t,ct)),jt(t,r),n===1&&ye===0&&!(e.mode&1)&&(Vs=Be()+500,Rl&&Er()))}function jt(t,e){var n=t.callbackNode;X1(t,e);var r=Ua(t,t===it?ct:0);if(r===0)n!==null&&cm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&cm(n),e===1)t.tag===0?Y_(np.bind(null,t)):P0(np.bind(null,t)),W_(function(){!(ye&6)&&Er()}),n=null;else{switch(l0(r)){case 1:n=Vd;break;case 4:n=i0;break;case 16:n=za;break;case 536870912:n=o0;break;default:n=za}n=Ry(n,Sy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Sy(t,e){if(Ia=-1,Aa=0,ye&6)throw Error(B(327));var n=t.callbackNode;if(bs()&&t.callbackNode!==n)return null;var r=Ua(t,t===it?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=il(t,r);else{e=r;var s=ye;ye|=2;var i=Ny();(it!==t||ct!==e)&&(wn=null,Vs=Be()+500,Fr(t,e));do try{yw();break}catch(u){by(t,u)}while(!0);Qd(),nl.current=i,ye=s,Ge!==null?e=0:(it=null,ct=0,e=Je)}if(e!==0){if(e===2&&(s=Tc(t),s!==0&&(r=s,e=Xc(t,s))),e===1)throw n=fo,Fr(t,0),Kn(t,r),jt(t,Be()),n;if(e===6)Kn(t,r);else{if(s=t.current.alternate,!(r&30)&&!pw(s)&&(e=il(t,r),e===2&&(i=Tc(t),i!==0&&(r=i,e=Xc(t,i))),e===1))throw n=fo,Fr(t,0),Kn(t,r),jt(t,Be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Pr(t,It,wn);break;case 3:if(Kn(t,r),(r&130023424)===r&&(e=uh+500-Be(),10<e)){if(Ua(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Rc(Pr.bind(null,t,It,wn),e);break}Pr(t,It,wn);break;case 4:if(Kn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Jt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mw(r/1960))-r,10<r){t.timeoutHandle=Rc(Pr.bind(null,t,It,wn),r);break}Pr(t,It,wn);break;case 5:Pr(t,It,wn);break;default:throw Error(B(329))}}}return jt(t,Be()),t.callbackNode===n?Sy.bind(null,t):null}function Xc(t,e){var n=Bi;return t.current.memoizedState.isDehydrated&&(Fr(t,e).flags|=256),t=il(t,e),t!==2&&(e=It,It=n,e!==null&&Jc(e)),t}function Jc(t){It===null?It=t:It.push.apply(It,t)}function pw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!tn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kn(t,e){for(e&=~lh,e&=~Vl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jt(e),r=1<<n;t[n]=-1,e&=~r}}function np(t){if(ye&6)throw Error(B(327));bs();var e=Ua(t,0);if(!(e&1))return jt(t,Be()),null;var n=il(t,e);if(t.tag!==0&&n===2){var r=Tc(t);r!==0&&(e=r,n=Xc(t,r))}if(n===1)throw n=fo,Fr(t,0),Kn(t,e),jt(t,Be()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pr(t,It,wn),jt(t,Be()),null}function ch(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(Vs=Be()+500,Rl&&Er())}}function Wr(t){Jn!==null&&Jn.tag===0&&!(ye&6)&&bs();var e=ye;ye|=1;var n=Ht.transition,r=Te;try{if(Ht.transition=null,Te=1,t)return t()}finally{Te=r,Ht.transition=n,ye=e,!(ye&6)&&Er()}}function dh(){Dt=xs.current,Re(xs)}function Fr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,H_(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(Hd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wa();break;case 3:Ps(),Re(kt),Re(_t),eh();break;case 5:Zd(r);break;case 4:Ps();break;case 13:Re(Ve);break;case 19:Re(Ve);break;case 10:Kd(r.type._context);break;case 22:case 23:dh()}n=n.return}if(it=t,Ge=t=ar(t.current,null),ct=Dt=e,Je=0,fo=null,lh=Vl=Hr=0,It=Bi=null,Mr!==null){for(e=0;e<Mr.length;e++)if(n=Mr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Mr=null}return t}function by(t,e){do{var n=Ge;try{if(Qd(),Sa.current=tl,el){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}el=!1}if(qr=0,st=Xe=Me=null,Ui=!1,uo=0,ah.current=null,n===null||n.return===null){Je=1,fo=e,Ge=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=ct,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=u,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var I=Bm(o);if(I!==null){I.flags&=-257,qm(I,o,u,i,e),I.mode&1&&$m(i,h,e),e=I,c=h;var C=e.updateQueue;if(C===null){var j=new Set;j.add(c),e.updateQueue=j}else C.add(c);break e}else{if(!(e&1)){$m(i,h,e),hh();break e}c=Error(B(426))}}else if(Pe&&u.mode&1){var P=Bm(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),qm(P,o,u,i,e),Wd(Ds(c,u));break e}}i=c=Ds(c,u),Je!==4&&(Je=2),Bi===null?Bi=[i]:Bi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=ly(i,c,e);Mm(i,T);break e;case 1:u=c;var w=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ir===null||!ir.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var V=uy(i,u,e);Mm(i,V);break e}}i=i.return}while(i!==null)}Ay(n)}catch(M){e=M,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function Ny(){var t=nl.current;return nl.current=tl,t===null?tl:t}function hh(){(Je===0||Je===3||Je===2)&&(Je=4),it===null||!(Hr&268435455)&&!(Vl&268435455)||Kn(it,ct)}function il(t,e){var n=ye;ye|=2;var r=Ny();(it!==t||ct!==e)&&(wn=null,Fr(t,e));do try{gw();break}catch(s){by(t,s)}while(!0);if(Qd(),ye=n,nl.current=r,Ge!==null)throw Error(B(261));return it=null,ct=0,Je}function gw(){for(;Ge!==null;)Iy(Ge)}function yw(){for(;Ge!==null&&!$1();)Iy(Ge)}function Iy(t){var e=ky(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?Ay(t):Ge=e,ah.current=null}function Ay(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cw(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,Ge=null;return}}else if(n=uw(n,e,Dt),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Je===0&&(Je=5)}function Pr(t,e,n){var r=Te,s=Ht.transition;try{Ht.transition=null,Te=1,vw(t,e,n,r)}finally{Ht.transition=s,Te=r}return null}function vw(t,e,n,r){do bs();while(Jn!==null);if(ye&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(J1(t,i),t===it&&(Ge=it=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ua||(ua=!0,Ry(za,function(){return bs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ht.transition,Ht.transition=null;var o=Te;Te=1;var u=ye;ye|=4,ah.current=null,hw(t,n),Ey(n,t),L_(Cc),$a=!!Ac,Cc=Ac=null,t.current=n,fw(n),B1(),ye=u,Te=o,Ht.transition=i}else t.current=n;if(ua&&(ua=!1,Jn=t,sl=s),i=t.pendingLanes,i===0&&(ir=null),W1(n.stateNode),jt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(rl)throw rl=!1,t=Kc,Kc=null,t;return sl&1&&t.tag!==0&&bs(),i=t.pendingLanes,i&1?t===Yc?qi++:(qi=0,Yc=t):qi=0,Er(),null}function bs(){if(Jn!==null){var t=l0(sl),e=Ht.transition,n=Te;try{if(Ht.transition=null,Te=16>t?16:t,Jn===null)var r=!1;else{if(t=Jn,Jn=null,sl=0,ye&6)throw Error(B(331));var s=ye;for(ye|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(X=h;X!==null;){var m=X;switch(m.tag){case 0:case 11:case 15:$i(8,m,i)}var p=m.child;if(p!==null)p.return=m,X=p;else for(;X!==null;){m=X;var g=m.sibling,I=m.return;if(xy(m),m===h){X=null;break}if(g!==null){g.return=I,X=g;break}X=I}}}var C=i.alternate;if(C!==null){var j=C.child;if(j!==null){C.child=null;do{var P=j.sibling;j.sibling=null,j=P}while(j!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$i(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,X=T;break e}X=i.return}}var w=t.current;for(X=w;X!==null;){o=X;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,X=N;else e:for(o=w;X!==null;){if(u=X,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Dl(9,u)}}catch(M){Ue(u,u.return,M)}if(u===o){X=null;break e}var V=u.sibling;if(V!==null){V.return=u.return,X=V;break e}X=u.return}}if(ye=s,Er(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Nl,t)}catch{}r=!0}return r}finally{Te=n,Ht.transition=e}}return!1}function rp(t,e,n){e=Ds(n,e),e=ly(t,e,1),t=sr(t,e,1),e=Tt(),t!==null&&(No(t,1,e),jt(t,e))}function Ue(t,e,n){if(t.tag===3)rp(t,t,n);else for(;e!==null;){if(e.tag===3){rp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ir===null||!ir.has(r))){t=Ds(n,t),t=uy(e,t,1),e=sr(e,t,1),t=Tt(),e!==null&&(No(e,1,t),jt(e,t));break}}e=e.return}}function xw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ct&n)===n&&(Je===4||Je===3&&(ct&130023424)===ct&&500>Be()-uh?Fr(t,0):lh|=n),jt(t,e)}function Cy(t,e){e===0&&(t.mode&1?(e=Zo,Zo<<=1,!(Zo&130023424)&&(Zo=4194304)):e=1);var n=Tt();t=Cn(t,e),t!==null&&(No(t,e,n),jt(t,n))}function _w(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Cy(t,n)}function ww(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),Cy(t,n)}var ky;ky=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,lw(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,Pe&&e.flags&1048576&&D0(e,Ka,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Na(t,e),t=e.pendingProps;var s=ks(e,_t.current);Ss(e,n),s=nh(null,e,r,t,s,n);var i=rh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(i=!0,Ga(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xd(e),s.updater=Pl,e.stateNode=s,s._reactInternals=e,Lc(e,r,t,n),e=Uc(null,e,r,!0,i,n)):(e.tag=0,Pe&&i&&qd(e),Et(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Na(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Tw(r),t=Kt(r,t),s){case 0:e=zc(null,e,r,t,n);break e;case 1:e=Gm(null,e,r,t,n);break e;case 11:e=Hm(null,e,r,t,n);break e;case 14:e=Wm(null,e,r,Kt(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),zc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Gm(t,e,r,s,n);case 3:e:{if(fy(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,z0(t,e),Ja(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ds(Error(B(423)),e),e=Qm(t,e,r,n,s);break e}else if(r!==s){s=Ds(Error(B(424)),e),e=Qm(t,e,r,n,s);break e}else for(Vt=rr(e.stateNode.containerInfo.firstChild),Ot=e,Pe=!0,Xt=null,n=L0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rs(),r===s){e=kn(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return U0(e),t===null&&Vc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,kc(r,s)?o=null:i!==null&&kc(r,i)&&(e.flags|=32),hy(t,e),Et(t,e,o,n),e.child;case 6:return t===null&&Vc(e),null;case 13:return my(t,e,n);case 4:return Jd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=js(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Hm(t,e,r,s,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ie(Ya,r._currentValue),r._currentValue=o,i!==null)if(tn(i.value,o)){if(i.children===s.children&&!kt.current){e=kn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=bn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Mc(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Mc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Et(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ss(e,n),s=Wt(s),r=r(s),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,s=Kt(r,e.pendingProps),s=Kt(r.type,s),Wm(t,e,r,s,n);case 15:return cy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Na(t,e),e.tag=1,Rt(r)?(t=!0,Ga(e)):t=!1,Ss(e,n),ay(e,r,s),Lc(e,r,s,n),Uc(null,e,r,!0,t,n);case 19:return py(t,e,n);case 22:return dy(t,e,n)}throw Error(B(156,e.tag))};function Ry(t,e){return s0(t,e)}function Ew(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new Ew(t,e,n,r)}function fh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Tw(t){if(typeof t=="function")return fh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jd)return 11;if(t===Pd)return 14}return 2}function ar(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ca(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")fh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case us:return zr(n.children,s,i,e);case Rd:o=8,s|=8;break;case lc:return t=qt(12,n,e,s|2),t.elementType=lc,t.lanes=i,t;case uc:return t=qt(13,n,e,s),t.elementType=uc,t.lanes=i,t;case cc:return t=qt(19,n,e,s),t.elementType=cc,t.lanes=i,t;case Ug:return Ml(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fg:o=10;break e;case zg:o=9;break e;case jd:o=11;break e;case Pd:o=14;break e;case Wn:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=qt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function zr(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function Ml(t,e,n,r){return t=qt(22,t,r,e),t.elementType=Ug,t.lanes=n,t.stateNode={isHidden:!1},t}function Wu(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function Gu(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Sw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Iu(0),this.expirationTimes=Iu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Iu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mh(t,e,n,r,s,i,o,u,c){return t=new Sw(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xd(i),t}function bw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ls,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jy(t){if(!t)return fr;t=t._reactInternals;e:{if(Yr(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Rt(n))return j0(t,n,e)}return e}function Py(t,e,n,r,s,i,o,u,c){return t=mh(n,r,!0,t,s,i,o,u,c),t.context=jy(null),n=t.current,r=Tt(),s=or(n),i=bn(r,s),i.callback=e??null,sr(n,i,s),t.current.lanes=s,No(t,s,r),jt(t,r),t}function Ol(t,e,n,r){var s=e.current,i=Tt(),o=or(s);return n=jy(n),e.context===null?e.context=n:e.pendingContext=n,e=bn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=sr(s,e,o),t!==null&&(Zt(t,s,o,i),Ta(t,s,o)),o}function ol(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ph(t,e){sp(t,e),(t=t.alternate)&&sp(t,e)}function Nw(){return null}var Dy=typeof reportError=="function"?reportError:function(t){console.error(t)};function gh(t){this._internalRoot=t}Ll.prototype.render=gh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Ol(t,e,null,null)};Ll.prototype.unmount=gh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wr(function(){Ol(null,t,null,null)}),e[An]=null}};function Ll(t){this._internalRoot=t}Ll.prototype.unstable_scheduleHydration=function(t){if(t){var e=d0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qn.length&&e!==0&&e<Qn[n].priority;n++);Qn.splice(n,0,t),n===0&&f0(t)}};function yh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ip(){}function Iw(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=ol(o);i.call(h)}}var o=Py(e,r,t,0,null,!1,!1,"",ip);return t._reactRootContainer=o,t[An]=o.current,so(t.nodeType===8?t.parentNode:t),Wr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=ol(c);u.call(h)}}var c=mh(t,0,!1,null,null,!1,!1,"",ip);return t._reactRootContainer=c,t[An]=c.current,so(t.nodeType===8?t.parentNode:t),Wr(function(){Ol(e,c,n,r)}),c}function zl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=ol(o);u.call(c)}}Ol(e,o,t,s)}else o=Iw(n,e,t,s,r);return ol(o)}u0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ki(e.pendingLanes);n!==0&&(Md(e,n|1),jt(e,Be()),!(ye&6)&&(Vs=Be()+500,Er()))}break;case 13:Wr(function(){var r=Cn(t,1);if(r!==null){var s=Tt();Zt(r,t,1,s)}}),ph(t,1)}};Od=function(t){if(t.tag===13){var e=Cn(t,134217728);if(e!==null){var n=Tt();Zt(e,t,134217728,n)}ph(t,134217728)}};c0=function(t){if(t.tag===13){var e=or(t),n=Cn(t,e);if(n!==null){var r=Tt();Zt(n,t,e,r)}ph(t,e)}};d0=function(){return Te};h0=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};_c=function(t,e,n){switch(e){case"input":if(fc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=kl(r);if(!s)throw Error(B(90));Bg(r),fc(r,s)}}}break;case"textarea":Hg(t,n);break;case"select":e=n.value,e!=null&&_s(t,!!n.multiple,e,!1)}};Jg=ch;Zg=Wr;var Aw={usingClientEntryPoint:!1,Events:[Ao,fs,kl,Yg,Xg,ch]},Ti={findFiberByHostInstance:Vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cw={bundleType:Ti.bundleType,version:Ti.version,rendererPackageName:Ti.rendererPackageName,rendererConfig:Ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=n0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ti.findFiberByHostInstance||Nw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ca=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ca.isDisabled&&ca.supportsFiber)try{Nl=ca.inject(Cw),dn=ca}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Aw;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yh(e))throw Error(B(200));return bw(t,e,null,n)};Ft.createRoot=function(t,e){if(!yh(t))throw Error(B(299));var n=!1,r="",s=Dy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=mh(t,1,!1,null,null,n,!1,r,s),t[An]=e.current,so(t.nodeType===8?t.parentNode:t),new gh(e)};Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=n0(e),t=t===null?null:t.stateNode,t};Ft.flushSync=function(t){return Wr(t)};Ft.hydrate=function(t,e,n){if(!Fl(e))throw Error(B(200));return zl(null,t,e,!0,n)};Ft.hydrateRoot=function(t,e,n){if(!yh(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Dy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Py(e,null,t,1,n??null,s,!1,i,o),t[An]=e.current,so(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ll(e)};Ft.render=function(t,e,n){if(!Fl(e))throw Error(B(200));return zl(null,t,e,!1,n)};Ft.unmountComponentAtNode=function(t){if(!Fl(t))throw Error(B(40));return t._reactRootContainer?(Wr(function(){zl(null,null,t,!1,function(){t._reactRootContainer=null,t[An]=null})}),!0):!1};Ft.unstable_batchedUpdates=ch;Ft.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fl(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return zl(t,e,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function Vy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vy)}catch(t){console.error(t)}}Vy(),Vg.exports=Ft;var kw=Vg.exports,op=kw;oc.createRoot=op.createRoot,oc.hydrateRoot=op.hydrateRoot;const Rw=()=>{};var ap={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},jw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Oy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,m=i>>2,p=(i&3)<<4|u>>4;let g=(u&15)<<2|h>>6,I=h&63;c||(I=64,o||(g=64)),r.push(n[m],n[p],n[g],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(My(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||h==null||p==null)throw new Pw;const g=i<<2|u>>4;if(r.push(g),h!==64){const I=u<<4&240|h>>2;if(r.push(I),p!==64){const C=h<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Pw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dw=function(t){const e=My(t);return Oy.encodeByteArray(e,!0)},al=function(t){return Dw(t).replace(/\./g,"")},Vw=function(t){try{return Oy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=()=>Mw().__FIREBASE_DEFAULTS__,Lw=()=>{if(typeof process>"u"||typeof ap>"u")return;const t=ap.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Fw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Vw(t[1]);return e&&JSON.parse(e)},vh=()=>{try{return Rw()||Ow()||Lw()||Fw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zw=t=>{var e,n;return(n=(e=vh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Uw=t=>{const e=zw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ly=()=>{var t;return(t=vh())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[al(JSON.stringify(n)),al(JSON.stringify(o)),""].join(".")}const Hi={};function Hw(){const t={prod:[],emulator:[]};for(const e of Object.keys(Hi))Hi[e]?t.emulator.push(e):t.prod.push(e);return t}function Ww(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let lp=!1;function Gw(t,e){if(typeof window>"u"||typeof document>"u"||!xh(window.location.host)||Hi[t]===e||Hi[t]||lp)return;Hi[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=Hw().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function u(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,I){g.setAttribute("width","24"),g.setAttribute("id",I),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{lp=!0,o()},g}function m(g,I){g.setAttribute("id",I),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=Ww(r),I=n("text"),C=document.getElementById(I)||document.createElement("span"),j=n("learnmore"),P=document.getElementById(j)||document.createElement("a"),T=n("preprendIcon"),w=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const N=g.element;u(N),m(P,j);const V=h();c(w,T),N.append(w,C,P,V),document.body.appendChild(N)}i?(C.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Kw(){var e;const t=(e=vh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Yw(){return!Kw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xw(){try{return typeof indexedDB=="object"}catch{return!1}}function Jw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="FirebaseError";class Hs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Zw,Object.setPrototypeOf(this,Hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fy.prototype.create)}}class Fy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?eE(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new Hs(s,u,r)}}function eE(t,e){return t.replace(tE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const tE=/\{\$([^}]+)}/g;function ll(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(up(i)&&up(o)){if(!ll(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function up(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t){return t&&t._delegate?t._delegate:t}class mo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $w;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sE(e))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dr){return this.instances.has(e)}getOptions(e=Dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Dr){return this.component?this.component.multipleInstances?e:Dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rE(t){return t===Dr?void 0:t}function sE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const oE={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},aE=ge.INFO,lE={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},uE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=lE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zy{constructor(e){this.name=e,this._logLevel=aE,this._logHandler=uE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const cE=(t,e)=>e.some(n=>t instanceof n);let cp,dp;function dE(){return cp||(cp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hE(){return dp||(dp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Uy=new WeakMap,Zc=new WeakMap,$y=new WeakMap,Qu=new WeakMap,_h=new WeakMap;function fE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(lr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Uy.set(n,t)}).catch(()=>{}),_h.set(e,t),e}function mE(t){if(Zc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Zc.set(t,e)}let ed={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$y.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pE(t){ed=t(ed)}function gE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ku(this),e,...n);return $y.set(r,e.sort?e.sort():[e]),lr(r)}:hE().includes(t)?function(...e){return t.apply(Ku(this),e),lr(Uy.get(this))}:function(...e){return lr(t.apply(Ku(this),e))}}function yE(t){return typeof t=="function"?gE(t):(t instanceof IDBTransaction&&mE(t),cE(t,dE())?new Proxy(t,ed):t)}function lr(t){if(t instanceof IDBRequest)return fE(t);if(Qu.has(t))return Qu.get(t);const e=yE(t);return e!==t&&(Qu.set(t,e),_h.set(e,t)),e}const Ku=t=>_h.get(t);function vE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=lr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(lr(o.result),c.oldVersion,c.newVersion,lr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const xE=["get","getKey","getAll","getAllKeys","count"],_E=["put","add","delete","clear"],Yu=new Map;function hp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yu.get(e))return Yu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=_E.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||xE.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return Yu.set(e,i),i}pE(t=>({...t,get:(e,n,r)=>hp(e,n)||t.get(e,n,r),has:(e,n)=>!!hp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function EE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const td="@firebase/app",fp="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new zy("@firebase/app"),TE="@firebase/app-compat",SE="@firebase/analytics-compat",bE="@firebase/analytics",NE="@firebase/app-check-compat",IE="@firebase/app-check",AE="@firebase/auth",CE="@firebase/auth-compat",kE="@firebase/database",RE="@firebase/data-connect",jE="@firebase/database-compat",PE="@firebase/functions",DE="@firebase/functions-compat",VE="@firebase/installations",ME="@firebase/installations-compat",OE="@firebase/messaging",LE="@firebase/messaging-compat",FE="@firebase/performance",zE="@firebase/performance-compat",UE="@firebase/remote-config",$E="@firebase/remote-config-compat",BE="@firebase/storage",qE="@firebase/storage-compat",HE="@firebase/firestore",WE="@firebase/ai",GE="@firebase/firestore-compat",QE="firebase",KE="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd="[DEFAULT]",YE={[td]:"fire-core",[TE]:"fire-core-compat",[bE]:"fire-analytics",[SE]:"fire-analytics-compat",[IE]:"fire-app-check",[NE]:"fire-app-check-compat",[AE]:"fire-auth",[CE]:"fire-auth-compat",[kE]:"fire-rtdb",[RE]:"fire-data-connect",[jE]:"fire-rtdb-compat",[PE]:"fire-fn",[DE]:"fire-fn-compat",[VE]:"fire-iid",[ME]:"fire-iid-compat",[OE]:"fire-fcm",[LE]:"fire-fcm-compat",[FE]:"fire-perf",[zE]:"fire-perf-compat",[UE]:"fire-rc",[$E]:"fire-rc-compat",[BE]:"fire-gcs",[qE]:"fire-gcs-compat",[HE]:"fire-fst",[GE]:"fire-fst-compat",[WE]:"fire-vertex","fire-js":"fire-js",[QE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=new Map,XE=new Map,rd=new Map;function mp(t,e){try{t.container.addComponent(e)}catch(n){jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cl(t){const e=t.name;if(rd.has(e))return jn.debug(`There were multiple attempts to register component ${e}.`),!1;rd.set(e,t);for(const n of ul.values())mp(n,t);for(const n of XE.values())mp(n,t);return!0}function JE(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ZE(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ur=new Fy("app","Firebase",e2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=KE;function By(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:nd,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ur.create("bad-app-name",{appName:String(s)});if(n||(n=Ly()),!n)throw ur.create("no-options");const i=ul.get(s);if(i){if(ll(n,i.options)&&ll(r,i.config))return i;throw ur.create("duplicate-app",{appName:s})}const o=new iE(s);for(const c of rd.values())o.addComponent(c);const u=new t2(n,r,o);return ul.set(s,u),u}function r2(t=nd){const e=ul.get(t);if(!e&&t===nd&&Ly())return By();if(!e)throw ur.create("no-app",{appName:t});return e}function Ns(t,e,n){let r=YE[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jn.warn(o.join(" "));return}cl(new mo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="firebase-heartbeat-database",i2=1,po="firebase-heartbeat-store";let Xu=null;function qy(){return Xu||(Xu=vE(s2,i2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(po)}catch(n){console.warn(n)}}}}).catch(t=>{throw ur.create("idb-open",{originalErrorMessage:t.message})})),Xu}async function o2(t){try{const n=(await qy()).transaction(po),r=await n.objectStore(po).get(Hy(t));return await n.done,r}catch(e){if(e instanceof Hs)jn.warn(e.message);else{const n=ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jn.warn(n.message)}}}async function pp(t,e){try{const r=(await qy()).transaction(po,"readwrite");await r.objectStore(po).put(e,Hy(t)),await r.done}catch(n){if(n instanceof Hs)jn.warn(n.message);else{const r=ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});jn.warn(r.message)}}}function Hy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=1024,l2=30;class u2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new d2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=gp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>l2){const o=h2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){jn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gp(),{heartbeatsToSend:r,unsentEntries:s}=c2(this._heartbeatsCache.heartbeats),i=al(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return jn.warn(n),""}}}function gp(){return new Date().toISOString().substring(0,10)}function c2(t,e=a2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),yp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),yp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class d2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xw()?Jw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await o2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yp(t){return al(JSON.stringify({version:2,heartbeats:t})).length}function h2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t){cl(new mo("platform-logger",e=>new wE(e),"PRIVATE")),cl(new mo("heartbeat",e=>new u2(e),"PRIVATE")),Ns(td,fp,t),Ns(td,fp,"esm2020"),Ns("fire-js","")}f2("");var m2="firebase",p2="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ns(m2,p2,"app");var vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cr,Wy;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function _(){}_.prototype=y.prototype,x.F=y.prototype,x.prototype=new _,x.prototype.constructor=x,x.D=function(E,b,A){for(var S=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)S[ve-2]=arguments[ve];return y.prototype[b].apply(E,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,y,_){_||(_=0);const E=Array(16);if(typeof y=="string")for(var b=0;b<16;++b)E[b]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(b=0;b<16;++b)E[b]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=x.g[0],_=x.g[1],b=x.g[2];let A=x.g[3],S;S=y+(A^_&(b^A))+E[0]+3614090360&4294967295,y=_+(S<<7&4294967295|S>>>25),S=A+(b^y&(_^b))+E[1]+3905402710&4294967295,A=y+(S<<12&4294967295|S>>>20),S=b+(_^A&(y^_))+E[2]+606105819&4294967295,b=A+(S<<17&4294967295|S>>>15),S=_+(y^b&(A^y))+E[3]+3250441966&4294967295,_=b+(S<<22&4294967295|S>>>10),S=y+(A^_&(b^A))+E[4]+4118548399&4294967295,y=_+(S<<7&4294967295|S>>>25),S=A+(b^y&(_^b))+E[5]+1200080426&4294967295,A=y+(S<<12&4294967295|S>>>20),S=b+(_^A&(y^_))+E[6]+2821735955&4294967295,b=A+(S<<17&4294967295|S>>>15),S=_+(y^b&(A^y))+E[7]+4249261313&4294967295,_=b+(S<<22&4294967295|S>>>10),S=y+(A^_&(b^A))+E[8]+1770035416&4294967295,y=_+(S<<7&4294967295|S>>>25),S=A+(b^y&(_^b))+E[9]+2336552879&4294967295,A=y+(S<<12&4294967295|S>>>20),S=b+(_^A&(y^_))+E[10]+4294925233&4294967295,b=A+(S<<17&4294967295|S>>>15),S=_+(y^b&(A^y))+E[11]+2304563134&4294967295,_=b+(S<<22&4294967295|S>>>10),S=y+(A^_&(b^A))+E[12]+1804603682&4294967295,y=_+(S<<7&4294967295|S>>>25),S=A+(b^y&(_^b))+E[13]+4254626195&4294967295,A=y+(S<<12&4294967295|S>>>20),S=b+(_^A&(y^_))+E[14]+2792965006&4294967295,b=A+(S<<17&4294967295|S>>>15),S=_+(y^b&(A^y))+E[15]+1236535329&4294967295,_=b+(S<<22&4294967295|S>>>10),S=y+(b^A&(_^b))+E[1]+4129170786&4294967295,y=_+(S<<5&4294967295|S>>>27),S=A+(_^b&(y^_))+E[6]+3225465664&4294967295,A=y+(S<<9&4294967295|S>>>23),S=b+(y^_&(A^y))+E[11]+643717713&4294967295,b=A+(S<<14&4294967295|S>>>18),S=_+(A^y&(b^A))+E[0]+3921069994&4294967295,_=b+(S<<20&4294967295|S>>>12),S=y+(b^A&(_^b))+E[5]+3593408605&4294967295,y=_+(S<<5&4294967295|S>>>27),S=A+(_^b&(y^_))+E[10]+38016083&4294967295,A=y+(S<<9&4294967295|S>>>23),S=b+(y^_&(A^y))+E[15]+3634488961&4294967295,b=A+(S<<14&4294967295|S>>>18),S=_+(A^y&(b^A))+E[4]+3889429448&4294967295,_=b+(S<<20&4294967295|S>>>12),S=y+(b^A&(_^b))+E[9]+568446438&4294967295,y=_+(S<<5&4294967295|S>>>27),S=A+(_^b&(y^_))+E[14]+3275163606&4294967295,A=y+(S<<9&4294967295|S>>>23),S=b+(y^_&(A^y))+E[3]+4107603335&4294967295,b=A+(S<<14&4294967295|S>>>18),S=_+(A^y&(b^A))+E[8]+1163531501&4294967295,_=b+(S<<20&4294967295|S>>>12),S=y+(b^A&(_^b))+E[13]+2850285829&4294967295,y=_+(S<<5&4294967295|S>>>27),S=A+(_^b&(y^_))+E[2]+4243563512&4294967295,A=y+(S<<9&4294967295|S>>>23),S=b+(y^_&(A^y))+E[7]+1735328473&4294967295,b=A+(S<<14&4294967295|S>>>18),S=_+(A^y&(b^A))+E[12]+2368359562&4294967295,_=b+(S<<20&4294967295|S>>>12),S=y+(_^b^A)+E[5]+4294588738&4294967295,y=_+(S<<4&4294967295|S>>>28),S=A+(y^_^b)+E[8]+2272392833&4294967295,A=y+(S<<11&4294967295|S>>>21),S=b+(A^y^_)+E[11]+1839030562&4294967295,b=A+(S<<16&4294967295|S>>>16),S=_+(b^A^y)+E[14]+4259657740&4294967295,_=b+(S<<23&4294967295|S>>>9),S=y+(_^b^A)+E[1]+2763975236&4294967295,y=_+(S<<4&4294967295|S>>>28),S=A+(y^_^b)+E[4]+1272893353&4294967295,A=y+(S<<11&4294967295|S>>>21),S=b+(A^y^_)+E[7]+4139469664&4294967295,b=A+(S<<16&4294967295|S>>>16),S=_+(b^A^y)+E[10]+3200236656&4294967295,_=b+(S<<23&4294967295|S>>>9),S=y+(_^b^A)+E[13]+681279174&4294967295,y=_+(S<<4&4294967295|S>>>28),S=A+(y^_^b)+E[0]+3936430074&4294967295,A=y+(S<<11&4294967295|S>>>21),S=b+(A^y^_)+E[3]+3572445317&4294967295,b=A+(S<<16&4294967295|S>>>16),S=_+(b^A^y)+E[6]+76029189&4294967295,_=b+(S<<23&4294967295|S>>>9),S=y+(_^b^A)+E[9]+3654602809&4294967295,y=_+(S<<4&4294967295|S>>>28),S=A+(y^_^b)+E[12]+3873151461&4294967295,A=y+(S<<11&4294967295|S>>>21),S=b+(A^y^_)+E[15]+530742520&4294967295,b=A+(S<<16&4294967295|S>>>16),S=_+(b^A^y)+E[2]+3299628645&4294967295,_=b+(S<<23&4294967295|S>>>9),S=y+(b^(_|~A))+E[0]+4096336452&4294967295,y=_+(S<<6&4294967295|S>>>26),S=A+(_^(y|~b))+E[7]+1126891415&4294967295,A=y+(S<<10&4294967295|S>>>22),S=b+(y^(A|~_))+E[14]+2878612391&4294967295,b=A+(S<<15&4294967295|S>>>17),S=_+(A^(b|~y))+E[5]+4237533241&4294967295,_=b+(S<<21&4294967295|S>>>11),S=y+(b^(_|~A))+E[12]+1700485571&4294967295,y=_+(S<<6&4294967295|S>>>26),S=A+(_^(y|~b))+E[3]+2399980690&4294967295,A=y+(S<<10&4294967295|S>>>22),S=b+(y^(A|~_))+E[10]+4293915773&4294967295,b=A+(S<<15&4294967295|S>>>17),S=_+(A^(b|~y))+E[1]+2240044497&4294967295,_=b+(S<<21&4294967295|S>>>11),S=y+(b^(_|~A))+E[8]+1873313359&4294967295,y=_+(S<<6&4294967295|S>>>26),S=A+(_^(y|~b))+E[15]+4264355552&4294967295,A=y+(S<<10&4294967295|S>>>22),S=b+(y^(A|~_))+E[6]+2734768916&4294967295,b=A+(S<<15&4294967295|S>>>17),S=_+(A^(b|~y))+E[13]+1309151649&4294967295,_=b+(S<<21&4294967295|S>>>11),S=y+(b^(_|~A))+E[4]+4149444226&4294967295,y=_+(S<<6&4294967295|S>>>26),S=A+(_^(y|~b))+E[11]+3174756917&4294967295,A=y+(S<<10&4294967295|S>>>22),S=b+(y^(A|~_))+E[2]+718787259&4294967295,b=A+(S<<15&4294967295|S>>>17),S=_+(A^(b|~y))+E[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(b+(S<<21&4294967295|S>>>11))&4294967295,x.g[2]=x.g[2]+b&4294967295,x.g[3]=x.g[3]+A&4294967295}r.prototype.v=function(x,y){y===void 0&&(y=x.length);const _=y-this.blockSize,E=this.C;let b=this.h,A=0;for(;A<y;){if(b==0)for(;A<=_;)s(this,x,A),A+=this.blockSize;if(typeof x=="string"){for(;A<y;)if(E[b++]=x.charCodeAt(A++),b==this.blockSize){s(this,E),b=0;break}}else for(;A<y;)if(E[b++]=x[A++],b==this.blockSize){s(this,E),b=0;break}}this.h=b,this.o+=y},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;y=this.o*8;for(var _=x.length-8;_<x.length;++_)x[_]=y&255,y/=256;for(this.v(x),x=Array(16),y=0,_=0;_<4;++_)for(let E=0;E<32;E+=8)x[y++]=this.g[_]>>>E&255;return x};function i(x,y){var _=u;return Object.prototype.hasOwnProperty.call(_,x)?_[x]:_[x]=y(x)}function o(x,y){this.h=y;const _=[];let E=!0;for(let b=x.length-1;b>=0;b--){const A=x[b]|0;E&&A==y||(_[b]=A,E=!1)}this.g=_}var u={};function c(x){return-128<=x&&x<128?i(x,function(y){return new o([y|0],y<0?-1:0)}):new o([x|0],x<0?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return p;if(x<0)return P(h(-x));const y=[];let _=1;for(let E=0;x>=_;E++)y[E]=x/_|0,_*=4294967296;return new o(y,0)}function m(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return P(m(x.substring(1),y));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=h(Math.pow(y,8));let E=p;for(let A=0;A<x.length;A+=8){var b=Math.min(8,x.length-A);const S=parseInt(x.substring(A,A+b),y);b<8?(b=h(Math.pow(y,b)),E=E.j(b).add(h(S))):(E=E.j(_),E=E.add(h(S)))}return E}var p=c(0),g=c(1),I=c(16777216);t=o.prototype,t.m=function(){if(j(this))return-P(this).m();let x=0,y=1;for(let _=0;_<this.g.length;_++){const E=this.i(_);x+=(E>=0?E:4294967296+E)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(C(this))return"0";if(j(this))return"-"+P(this).toString(x);const y=h(Math.pow(x,6));var _=this;let E="";for(;;){const b=V(_,y).g;_=T(_,b.j(y));let A=((_.g.length>0?_.g[0]:_.h)>>>0).toString(x);if(_=b,C(_))return A+E;for(;A.length<6;)A="0"+A;E=A+E}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function C(x){if(x.h!=0)return!1;for(let y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function j(x){return x.h==-1}t.l=function(x){return x=T(this,x),j(x)?-1:C(x)?0:1};function P(x){const y=x.g.length,_=[];for(let E=0;E<y;E++)_[E]=~x.g[E];return new o(_,~x.h).add(g)}t.abs=function(){return j(this)?P(this):this},t.add=function(x){const y=Math.max(this.g.length,x.g.length),_=[];let E=0;for(let b=0;b<=y;b++){let A=E+(this.i(b)&65535)+(x.i(b)&65535),S=(A>>>16)+(this.i(b)>>>16)+(x.i(b)>>>16);E=S>>>16,A&=65535,S&=65535,_[b]=S<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function T(x,y){return x.add(P(y))}t.j=function(x){if(C(this)||C(x))return p;if(j(this))return j(x)?P(this).j(P(x)):P(P(this).j(x));if(j(x))return P(this.j(P(x)));if(this.l(I)<0&&x.l(I)<0)return h(this.m()*x.m());const y=this.g.length+x.g.length,_=[];for(var E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(let b=0;b<x.g.length;b++){const A=this.i(E)>>>16,S=this.i(E)&65535,ve=x.i(b)>>>16,K=x.i(b)&65535;_[2*E+2*b]+=S*K,w(_,2*E+2*b),_[2*E+2*b+1]+=A*K,w(_,2*E+2*b+1),_[2*E+2*b+1]+=S*ve,w(_,2*E+2*b+1),_[2*E+2*b+2]+=A*ve,w(_,2*E+2*b+2)}for(x=0;x<y;x++)_[x]=_[2*x+1]<<16|_[2*x];for(x=y;x<2*y;x++)_[x]=0;return new o(_,0)};function w(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function N(x,y){this.g=x,this.h=y}function V(x,y){if(C(y))throw Error("division by zero");if(C(x))return new N(p,p);if(j(x))return y=V(P(x),y),new N(P(y.g),P(y.h));if(j(y))return y=V(x,P(y)),new N(P(y.g),y.h);if(x.g.length>30){if(j(x)||j(y))throw Error("slowDivide_ only works with positive integers.");for(var _=g,E=y;E.l(x)<=0;)_=M(_),E=M(E);var b=O(_,1),A=O(E,1);for(E=O(E,2),_=O(_,2);!C(E);){var S=A.add(E);S.l(x)<=0&&(b=b.add(_),A=S),E=O(E,1),_=O(_,1)}return y=T(x,b.j(y)),new N(b,y)}for(b=p;x.l(y)>=0;){for(_=Math.max(1,Math.floor(x.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),A=h(_),S=A.j(y);j(S)||S.l(x)>0;)_-=E,A=h(_),S=A.j(y);C(A)&&(A=g),b=b.add(A),x=T(x,S)}return new N(b,x)}t.B=function(x){return V(this,x).h},t.and=function(x){const y=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<y;E++)_[E]=this.i(E)&x.i(E);return new o(_,this.h&x.h)},t.or=function(x){const y=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<y;E++)_[E]=this.i(E)|x.i(E);return new o(_,this.h|x.h)},t.xor=function(x){const y=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<y;E++)_[E]=this.i(E)^x.i(E);return new o(_,this.h^x.h)};function M(x){const y=x.g.length+1,_=[];for(let E=0;E<y;E++)_[E]=x.i(E)<<1|x.i(E-1)>>>31;return new o(_,x.h)}function O(x,y){const _=y>>5;y%=32;const E=x.g.length-_,b=[];for(let A=0;A<E;A++)b[A]=y>0?x.i(A+_)>>>y|x.i(A+_+1)<<32-y:x.i(A+_);return new o(b,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Wy=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,cr=o}).apply(typeof vp<"u"?vp:typeof self<"u"?self:typeof window<"u"?window:{});var da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gy,ji,Qy,ka,sd,Ky,Yy,Xy;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof da=="object"&&da];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var R=a[v];if(!(R in f))break e;f=f[R]}a=a[a.length-1],v=f[a],d=d(v),d!=v&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(d){var f=[],v;for(v in d)Object.prototype.hasOwnProperty.call(d,v)&&f.push([v,d[v]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function u(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function c(a,d,f){return a.call.apply(a.bind,arguments)}function h(a,d,f){return h=c,h.apply(null,arguments)}function m(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function p(a,d){function f(){}f.prototype=d.prototype,a.Z=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(v,R,D){for(var W=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)W[ce-2]=arguments[ce];return d.prototype[R].apply(v,W)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function I(a){const d=a.length;if(d>0){const f=Array(d);for(let v=0;v<d;v++)f[v]=a[v];return f}return[]}function C(a,d){for(let v=1;v<arguments.length;v++){const R=arguments[v];var f=typeof R;if(f=f!="object"?f:R?Array.isArray(R)?"array":f:"null",f=="array"||f=="object"&&typeof R.length=="number"){f=a.length||0;const D=R.length||0;a.length=f+D;for(let W=0;W<D;W++)a[f+W]=R[W]}else a.push(R)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function P(a){o.setTimeout(()=>{throw a},0)}function T(){var a=x;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class w{constructor(){this.h=this.g=null}add(d,f){const v=N.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var N=new j(()=>new V,a=>a.reset());class V{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let M,O=!1,x=new w,y=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(_)}};function _(){for(var a;a=T();){try{a.h.call(a.g)}catch(f){P(f)}var d=N;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}O=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,d),o.removeEventListener("test",f,d)}catch{}return a}();function S(a){return/^[\s\xa0]*$/.test(a)}function ve(a,d){b.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(ve,b),ve.prototype.init=function(a,d){const f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var K="closure_listenable_"+(Math.random()*1e6|0),F=0;function ie(a,d,f,v,R){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=R,this.key=++F,this.da=this.fa=!1}function H(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function G(a,d,f){for(const v in a)d.call(f,a[v],v,a)}function J(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function oe(a){const d={};for(const f in a)d[f]=a[f];return d}const _e="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function et(a,d){let f,v;for(let R=1;R<arguments.length;R++){v=arguments[R];for(f in v)a[f]=v[f];for(let D=0;D<_e.length;D++)f=_e[D],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function He(a){this.src=a,this.g={},this.h=0}He.prototype.add=function(a,d,f,v,R){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const W=k(a,d,v,R);return W>-1?(d=a[W],f||(d.fa=!1)):(d=new ie(d,this.src,D,!!v,R),d.fa=f,a.push(d)),d};function be(a,d){const f=d.type;if(f in a.g){var v=a.g[f],R=Array.prototype.indexOf.call(v,d,void 0),D;(D=R>=0)&&Array.prototype.splice.call(v,R,1),D&&(H(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function k(a,d,f,v){for(let R=0;R<a.length;++R){const D=a[R];if(!D.da&&D.listener==d&&D.capture==!!f&&D.ha==v)return R}return-1}var $="closure_lm_"+(Math.random()*1e6|0),re={};function ue(a,d,f,v,R){if(Array.isArray(d)){for(let D=0;D<d.length;D++)ue(a,d[D],f,v,R);return null}return f=ft(f),a&&a[K]?a.J(d,f,u(v)?!!v.capture:!1,R):De(a,d,f,!1,v,R)}function De(a,d,f,v,R,D){if(!d)throw Error("Invalid event type");const W=u(R)?!!R.capture:!!R;let ce=Z(a);if(ce||(a[$]=ce=new He(a)),f=ce.add(d,f,v,W,D),f.proxy)return f;if(v=br(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)A||(R=W),R===void 0&&(R=!1),a.addEventListener(d.toString(),v,R);else if(a.attachEvent)a.attachEvent(U(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function br(){function a(f){return d.call(a.src,a.listener,f)}const d=de;return a}function Zs(a,d,f,v,R){if(Array.isArray(d))for(var D=0;D<d.length;D++)Zs(a,d[D],f,v,R);else v=u(v)?!!v.capture:!!v,f=ft(f),a&&a[K]?(a=a.i,D=String(d).toString(),D in a.g&&(d=a.g[D],f=k(d,f,v,R),f>-1&&(H(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete a.g[D],a.h--)))):a&&(a=Z(a))&&(d=a.g[d.toString()],a=-1,d&&(a=k(d,f,v,R)),(f=a>-1?d[a]:null)&&xn(f))}function xn(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[K])be(d.i,a);else{var f=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(f,v,a.capture):d.detachEvent?d.detachEvent(U(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=Z(d))?(be(f,a),f.h==0&&(f.src=null,d[$]=null)):H(a)}}}function U(a){return a in re?re[a]:re[a]="on"+a}function de(a,d){if(a.da)a=!0;else{d=new ve(d,this);const f=a.listener,v=a.ha||a.src;a.fa&&xn(a),a=f.call(v,d)}return a}function Z(a){return a=a[$],a instanceof He?a:null}var we="__closure_events_fn_"+(Math.random()*1e9>>>0);function ft(a){return typeof a=="function"?a:(a[we]||(a[we]=function(d){return a.handleEvent(d)}),a[we])}function Fe(){E.call(this),this.i=new He(this),this.M=this,this.G=null}p(Fe,E),Fe.prototype[K]=!0,Fe.prototype.removeEventListener=function(a,d,f,v){Zs(this,a,d,f,v)};function ot(a,d){var f,v=a.G;if(v)for(f=[];v;v=v.G)f.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new b(d,a);else if(d instanceof b)d.target=d.target||a;else{var R=d;d=new b(v,a),et(d,R)}R=!0;let D,W;if(f)for(W=f.length-1;W>=0;W--)D=d.g=f[W],R=Mn(D,v,!0,d)&&R;if(D=d.g=a,R=Mn(D,v,!0,d)&&R,R=Mn(D,v,!1,d)&&R,f)for(W=0;W<f.length;W++)D=d.g=f[W],R=Mn(D,v,!1,d)&&R}Fe.prototype.N=function(){if(Fe.Z.N.call(this),this.i){var a=this.i;for(const d in a.g){const f=a.g[d];for(let v=0;v<f.length;v++)H(f[v]);delete a.g[d],a.h--}}this.G=null},Fe.prototype.J=function(a,d,f,v){return this.i.add(String(a),d,!1,f,v)},Fe.prototype.K=function(a,d,f,v){return this.i.add(String(a),d,!0,f,v)};function Mn(a,d,f,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let R=!0;for(let D=0;D<d.length;++D){const W=d[D];if(W&&!W.da&&W.capture==f){const ce=W.listener,Ye=W.ha||W.src;W.fa&&be(a.i,W),R=ce.call(Ye,v)!==!1&&R}}return R&&!v.defaultPrevented}function Nr(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(a,d||0)}function rf(a){a.g=Nr(()=>{a.g=null,a.i&&(a.i=!1,rf(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class jx extends E{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:rf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ei(a){E.call(this),this.h=a,this.g={}}p(ei,E);var sf=[];function of(a){G(a.g,function(d,f){this.g.hasOwnProperty(f)&&xn(d)},a),a.g={}}ei.prototype.N=function(){ei.Z.N.call(this),of(this)},ei.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var iu=o.JSON.stringify,Px=o.JSON.parse,Dx=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function af(){}function lf(){}var ti={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ou(){b.call(this,"d")}p(ou,b);function au(){b.call(this,"c")}p(au,b);var Ir={},uf=null;function Oo(){return uf=uf||new Fe}Ir.Ia="serverreachability";function cf(a){b.call(this,Ir.Ia,a)}p(cf,b);function ni(a){const d=Oo();ot(d,new cf(d))}Ir.STAT_EVENT="statevent";function df(a,d){b.call(this,Ir.STAT_EVENT,a),this.stat=d}p(df,b);function wt(a){const d=Oo();ot(d,new df(d,a))}Ir.Ja="timingevent";function hf(a,d){b.call(this,Ir.Ja,a),this.size=d}p(hf,b);function ri(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},d)}function si(){this.g=!0}si.prototype.ua=function(){this.g=!1};function Vx(a,d,f,v,R,D){a.info(function(){if(a.g)if(D){var W="",ce=D.split("&");for(let Se=0;Se<ce.length;Se++){var Ye=ce[Se].split("=");if(Ye.length>1){const tt=Ye[0];Ye=Ye[1];const sn=tt.split("_");W=sn.length>=2&&sn[1]=="type"?W+(tt+"="+Ye+"&"):W+(tt+"=redacted&")}}}else W=null;else W=D;return"XMLHTTP REQ ("+v+") [attempt "+R+"]: "+d+`
`+f+`
`+W})}function Mx(a,d,f,v,R,D,W){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+R+"]: "+d+`
`+f+`
`+D+" "+W})}function es(a,d,f,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Lx(a,f)+(v?" "+v:"")})}function Ox(a,d){a.info(function(){return"TIMEOUT: "+d})}si.prototype.info=function(){};function Lx(a,d){if(!a.g)return d;if(!d)return null;try{const D=JSON.parse(d);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var f=D[a];if(!(f.length<2)){var v=f[1];if(Array.isArray(v)&&!(v.length<1)){var R=v[0];if(R!="noop"&&R!="stop"&&R!="close")for(let W=1;W<v.length;W++)v[W]=""}}}}return iu(D)}catch{return d}}var Lo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ff={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mf;function lu(){}p(lu,af),lu.prototype.g=function(){return new XMLHttpRequest},mf=new lu;function ii(a){return encodeURIComponent(String(a))}function Fx(a){var d=1;a=a.split(":");const f=[];for(;d>0&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function On(a,d,f,v){this.j=a,this.i=d,this.l=f,this.S=v||1,this.V=new ei(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pf}function pf(){this.i=null,this.g="",this.h=!1}var gf={},uu={};function cu(a,d,f){a.M=1,a.A=zo(rn(d)),a.u=f,a.R=!0,yf(a,null)}function yf(a,d){a.F=Date.now(),Fo(a),a.B=rn(a.A);var f=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),kf(f.i,"t",v),a.C=0,f=a.j.L,a.h=new pf,a.g=Qf(a.j,f?d:null,!a.u),a.P>0&&(a.O=new jx(h(a.Y,a,a.g),a.P)),d=a.V,f=a.g,v=a.ba;var R="readystatechange";Array.isArray(R)||(R&&(sf[0]=R.toString()),R=sf);for(let D=0;D<R.length;D++){const W=ue(f,R[D],v||d.handleEvent,!1,d.h||d);if(!W)break;d.g[W.key]=W}d=a.J?oe(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),ni(),Vx(a.i,a.v,a.B,a.l,a.S,a.u)}On.prototype.ba=function(a){a=a.target;const d=this.O;d&&zn(a)==3?d.j():this.Y(a)},On.prototype.Y=function(a){try{if(a==this.g)e:{const ce=zn(this.g),Ye=this.g.ya(),Se=this.g.ca();if(!(ce<3)&&(ce!=3||this.g&&(this.h.h||this.g.la()||Of(this.g)))){this.K||ce!=4||Ye==7||(Ye==8||Se<=0?ni(3):ni(2)),du(this);var d=this.g.ca();this.X=d;var f=zx(this);if(this.o=d==200,Mx(this.i,this.v,this.B,this.l,this.S,ce,d),this.o){if(this.U&&!this.L){t:{if(this.g){var v,R=this.g;if((v=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(v)){var D=v;break t}}D=null}if(a=D)es(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hu(this,a);else{this.o=!1,this.m=3,wt(12),Ar(this),oi(this);break e}}if(this.R){a=!0;let tt;for(;!this.K&&this.C<f.length;)if(tt=Ux(this,f),tt==uu){ce==4&&(this.m=4,wt(14),a=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==gf){this.m=4,wt(15),es(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else es(this.i,this.l,tt,null),hu(this,tt);if(vf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ce!=4||f.length!=0||this.h.h||(this.m=1,wt(16),a=!1),this.o=this.o&&a,!a)es(this.i,this.l,f,"[Invalid Chunked Response]"),Ar(this),oi(this);else if(f.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),_u(W),W.P=!0,wt(11))}}else es(this.i,this.l,f,null),hu(this,f);ce==4&&Ar(this),this.o&&!this.K&&(ce==4?qf(this.j,this):(this.o=!1,Fo(this)))}else t1(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),Ar(this),oi(this)}}}catch{}finally{}};function zx(a){if(!vf(a))return a.g.la();const d=Of(a.g);if(d==="")return"";let f="";const v=d.length,R=zn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Ar(a),oi(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<v;D++)a.h.h=!0,f+=a.h.i.decode(d[D],{stream:!(R&&D==v-1)});return d.length=0,a.h.g+=f,a.C=0,a.h.g}function vf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Ux(a,d){var f=a.C,v=d.indexOf(`
`,f);return v==-1?uu:(f=Number(d.substring(f,v)),isNaN(f)?gf:(v+=1,v+f>d.length?uu:(d=d.slice(v,v+f),a.C=v+f,d)))}On.prototype.cancel=function(){this.K=!0,Ar(this)};function Fo(a){a.T=Date.now()+a.H,xf(a,a.H)}function xf(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ri(h(a.aa,a),d)}function du(a){a.D&&(o.clearTimeout(a.D),a.D=null)}On.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Ox(this.i,this.B),this.M!=2&&(ni(),wt(17)),Ar(this),this.m=2,oi(this)):xf(this,this.T-a)};function oi(a){a.j.I==0||a.K||qf(a.j,a)}function Ar(a){du(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,of(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function hu(a,d){try{var f=a.j;if(f.I!=0&&(f.g==a||fu(f.h,a))){if(!a.L&&fu(f.h,a)&&f.I==3){try{var v=f.Ba.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var R=v;if(R[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Ho(f),Bo(f);else break e;xu(f),wt(18)}}else f.xa=R[1],0<f.xa-f.K&&R[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ri(h(f.Va,f),6e3));Ef(f.h)<=1&&f.ta&&(f.ta=void 0)}else kr(f,11)}else if((a.L||f.g==a)&&Ho(f),!S(d))for(R=f.Ba.g.parse(d),d=0;d<R.length;d++){let Se=R[d];const tt=Se[0];if(!(tt<=f.K))if(f.K=tt,Se=Se[1],f.I==2)if(Se[0]=="c"){f.M=Se[1],f.ba=Se[2];const sn=Se[3];sn!=null&&(f.ka=sn,f.j.info("VER="+f.ka));const Rr=Se[4];Rr!=null&&(f.za=Rr,f.j.info("SVER="+f.za));const Un=Se[5];Un!=null&&typeof Un=="number"&&Un>0&&(v=1.5*Un,f.O=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const $n=a.g;if($n){const Go=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Go){var D=v.h;D.g||Go.indexOf("spdy")==-1&&Go.indexOf("quic")==-1&&Go.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(mu(D,D.h),D.h=null))}if(v.G){const wu=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;wu&&(v.wa=wu,Ae(v.J,v.G,wu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),v=f;var W=a;if(v.na=Gf(v,v.L?v.ba:null,v.W),W.L){Tf(v.h,W);var ce=W,Ye=v.O;Ye&&(ce.H=Ye),ce.D&&(du(ce),Fo(ce)),v.g=W}else $f(v);f.i.length>0&&qo(f)}else Se[0]!="stop"&&Se[0]!="close"||kr(f,7);else f.I==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?kr(f,7):vu(f):Se[0]!="noop"&&f.l&&f.l.qa(Se),f.A=0)}}ni(4)}catch{}}var $x=class{constructor(a,d){this.g=a,this.map=d}};function _f(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ef(a){return a.h?1:a.g?a.g.size:0}function fu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function mu(a,d){a.g?a.g.add(d):a.h=d}function Tf(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}_f.prototype.cancel=function(){if(this.i=Sf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Sf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.G);return d}return I(a.i)}var bf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bx(a,d){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const v=a[f].indexOf("=");let R,D=null;v>=0?(R=a[f].substring(0,v),D=a[f].substring(v+1)):R=a[f],d(R,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Ln(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Ln?(this.l=a.l,ai(this,a.j),this.o=a.o,this.g=a.g,li(this,a.u),this.h=a.h,pu(this,Rf(a.i)),this.m=a.m):a&&(d=String(a).match(bf))?(this.l=!1,ai(this,d[1]||"",!0),this.o=ui(d[2]||""),this.g=ui(d[3]||"",!0),li(this,d[4]),this.h=ui(d[5]||"",!0),pu(this,d[6]||"",!0),this.m=ui(d[7]||"")):(this.l=!1,this.i=new di(null,this.l))}Ln.prototype.toString=function(){const a=[];var d=this.j;d&&a.push(ci(d,Nf,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ci(d,Nf,!0),"@"),a.push(ii(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ci(f,f.charAt(0)=="/"?Wx:Hx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ci(f,Qx)),a.join("")},Ln.prototype.resolve=function(a){const d=rn(this);let f=!!a.j;f?ai(d,a.j):f=!!a.o,f?d.o=a.o:f=!!a.g,f?d.g=a.g:f=a.u!=null;var v=a.h;if(f)li(d,a.u);else if(f=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var R=d.h.lastIndexOf("/");R!=-1&&(v=d.h.slice(0,R+1)+v)}if(R=v,R==".."||R==".")v="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){v=R.lastIndexOf("/",0)==0,R=R.split("/");const D=[];for(let W=0;W<R.length;){const ce=R[W++];ce=="."?v&&W==R.length&&D.push(""):ce==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),v&&W==R.length&&D.push("")):(D.push(ce),v=!0)}v=D.join("/")}else v=R}return f?d.h=v:f=a.i.toString()!=="",f?pu(d,Rf(a.i)):f=!!a.m,f&&(d.m=a.m),d};function rn(a){return new Ln(a)}function ai(a,d,f){a.j=f?ui(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function li(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function pu(a,d,f){d instanceof di?(a.i=d,Kx(a.i,a.l)):(f||(d=ci(d,Gx)),a.i=new di(d,a.l))}function Ae(a,d,f){a.i.set(d,f)}function zo(a){return Ae(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function ui(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ci(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,qx),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function qx(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Nf=/[#\/\?@]/g,Hx=/[#\?:]/g,Wx=/[#\?]/g,Gx=/[#\?@]/g,Qx=/#/g;function di(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Cr(a){a.g||(a.g=new Map,a.h=0,a.i&&Bx(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=di.prototype,t.add=function(a,d){Cr(this),this.i=null,a=ts(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function If(a,d){Cr(a),d=ts(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Af(a,d){return Cr(a),d=ts(a,d),a.g.has(d)}t.forEach=function(a,d){Cr(this),this.g.forEach(function(f,v){f.forEach(function(R){a.call(d,R,v,this)},this)},this)};function Cf(a,d){Cr(a);let f=[];if(typeof d=="string")Af(a,d)&&(f=f.concat(a.g.get(ts(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)f=f.concat(a[d]);return f}t.set=function(a,d){return Cr(this),this.i=null,a=ts(this,a),Af(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=Cf(this,a),a.length>0?String(a[0]):d):d};function kf(a,d,f){If(a,d),f.length>0&&(a.i=null,a.g.set(ts(a,d),I(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(let v=0;v<d.length;v++){var f=d[v];const R=ii(f);f=Cf(this,f);for(let D=0;D<f.length;D++){let W=R;f[D]!==""&&(W+="="+ii(f[D])),a.push(W)}}return this.i=a.join("&")};function Rf(a){const d=new di;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function ts(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Kx(a,d){d&&!a.j&&(Cr(a),a.i=null,a.g.forEach(function(f,v){const R=v.toLowerCase();v!=R&&(If(this,v),kf(this,R,f))},a)),a.j=d}function Yx(a,d){const f=new si;if(o.Image){const v=new Image;v.onload=m(Fn,f,"TestLoadImage: loaded",!0,d,v),v.onerror=m(Fn,f,"TestLoadImage: error",!1,d,v),v.onabort=m(Fn,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=m(Fn,f,"TestLoadImage: timeout",!1,d,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function Xx(a,d){const f=new si,v=new AbortController,R=setTimeout(()=>{v.abort(),Fn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(D=>{clearTimeout(R),D.ok?Fn(f,"TestPingServer: ok",!0,d):Fn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(R),Fn(f,"TestPingServer: error",!1,d)})}function Fn(a,d,f,v,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),v(f)}catch{}}function Jx(){this.g=new Dx}function gu(a){this.i=a.Sb||null,this.h=a.ab||!1}p(gu,af),gu.prototype.g=function(){return new Uo(this.i,this.h)};function Uo(a,d){Fe.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Uo,Fe),t=Uo.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,fi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function jf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?hi(this):fi(this),this.readyState==3&&jf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,hi(this))},t.Na=function(a){this.g&&(this.response=a,hi(this))},t.ga=function(){this.g&&hi(this)};function hi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,fi(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function fi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Uo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Pf(a){let d="";return G(a,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function yu(a,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Pf(f),typeof a=="string"?f!=null&&ii(f):Ae(a,d,f))}function ze(a){Fe.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ze,Fe);var Zx=/^https?$/i,e1=["POST","PUT"];t=ze.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mf.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(D){Df(this,D);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var R in v)f.set(R,v[R]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const D of v.keys())f.set(D,v.get(D));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),R=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(e1,d,void 0)>=0)||v||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,W]of f)this.g.setRequestHeader(D,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){Df(this,D)}};function Df(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,Vf(a),$o(a)}function Vf(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ot(this,"complete"),ot(this,"abort"),$o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$o(this,!0)),ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Mf(this):this.Xa())},t.Xa=function(){Mf(this)};function Mf(a){if(a.h&&typeof i<"u"){if(a.v&&zn(a)==4)setTimeout(a.Ca.bind(a),0);else if(ot(a,"readystatechange"),zn(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=D===0){let W=String(a.D).match(bf)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),v=!Zx.test(W?W.toLowerCase():"")}f=v}if(f)ot(a,"complete"),ot(a,"success");else{a.o=6;try{var R=zn(a)>2?a.g.statusText:""}catch{R=""}a.l=R+" ["+a.ca()+"]",Vf(a)}}finally{$o(a)}}}}function $o(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,d||ot(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function zn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return zn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Px(d)}};function Of(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function t1(a){const d={};a=(a.g&&zn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(S(a[v]))continue;var f=Fx(a[v]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=d[R]||[];d[R]=D,D.push(f)}J(d,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Lf(a){this.za=0,this.i=[],this.j=new si,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=mi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=mi("baseRetryDelayMs",5e3,a),this.Za=mi("retryDelaySeedMs",1e4,a),this.Ta=mi("forwardChannelMaxRetries",2,a),this.va=mi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new _f(a&&a.concurrentRequestLimit),this.Ba=new Jx,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Lf.prototype,t.ka=8,t.I=1,t.connect=function(a,d,f,v){wt(0),this.W=a,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.J=Gf(this,null,this.W),qo(this)};function vu(a){if(Ff(a),a.I==3){var d=a.V++,f=rn(a.J);if(Ae(f,"SID",a.M),Ae(f,"RID",d),Ae(f,"TYPE","terminate"),pi(a,f),d=new On(a,a.j,d),d.M=2,d.A=zo(rn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=d.A,f=!0),f||(d.g=Qf(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Fo(d)}Wf(a)}function Bo(a){a.g&&(_u(a),a.g.cancel(),a.g=null)}function Ff(a){Bo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Ho(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function qo(a){if(!wf(a.h)&&!a.m){a.m=!0;var d=a.Ea;M||y(),O||(M(),O=!0),x.add(d,a),a.D=0}}function n1(a,d){return Ef(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ri(h(a.Ea,a,d),Hf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const R=new On(this,this.j,a);let D=this.o;if(this.U&&(D?(D=oe(D),et(D,this.U)):D=this.U),this.u!==null||this.R||(R.J=D,D=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Uf(this,R,d),f=rn(this.J),Ae(f,"RID",a),Ae(f,"CVER",22),this.G&&Ae(f,"X-HTTP-Session-Id",this.G),pi(this,f),D&&(this.R?d="headers="+ii(Pf(D))+"&"+d:this.u&&yu(f,this.u,D)),mu(this.h,R),this.Ra&&Ae(f,"TYPE","init"),this.S?(Ae(f,"$req",d),Ae(f,"SID","null"),R.U=!0,cu(R,f,null)):cu(R,f,d),this.I=2}}else this.I==3&&(a?zf(this,a):this.i.length==0||wf(this.h)||zf(this))};function zf(a,d){var f;d?f=d.l:f=a.V++;const v=rn(a.J);Ae(v,"SID",a.M),Ae(v,"RID",f),Ae(v,"AID",a.K),pi(a,v),a.u&&a.o&&yu(v,a.u,a.o),f=new On(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),d&&(a.i=d.G.concat(a.i)),d=Uf(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),mu(a.h,f),cu(f,v,d)}function pi(a,d){a.H&&G(a.H,function(f,v){Ae(d,v,f)}),a.l&&G({},function(f,v){Ae(d,v,f)})}function Uf(a,d,f){f=Math.min(a.i.length,f);const v=a.l?h(a.l.Ka,a.l,a):null;e:{var R=a.i;let ce=-1;for(;;){const Ye=["count="+f];ce==-1?f>0?(ce=R[0].g,Ye.push("ofs="+ce)):ce=0:Ye.push("ofs="+ce);let Se=!0;for(let tt=0;tt<f;tt++){var D=R[tt].g;const sn=R[tt].map;if(D-=ce,D<0)ce=Math.max(0,R[tt].g-100),Se=!1;else try{D="req"+D+"_"||"";try{var W=sn instanceof Map?sn:Object.entries(sn);for(const[Rr,Un]of W){let $n=Un;u(Un)&&($n=iu(Un)),Ye.push(D+Rr+"="+encodeURIComponent($n))}}catch(Rr){throw Ye.push(D+"type="+encodeURIComponent("_badmap")),Rr}}catch{v&&v(sn)}}if(Se){W=Ye.join("&");break e}}W=void 0}return a=a.i.splice(0,f),d.G=a,W}function $f(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;M||y(),O||(M(),O=!0),x.add(d,a),a.A=0}}function xu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ri(h(a.Da,a),Hf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Bf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ri(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Bo(this),Bf(this))};function _u(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Bf(a){a.g=new On(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=rn(a.na);Ae(d,"RID","rpc"),Ae(d,"SID",a.M),Ae(d,"AID",a.K),Ae(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ae(d,"TO",a.ia),Ae(d,"TYPE","xmlhttp"),pi(a,d),a.u&&a.o&&yu(d,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=zo(rn(d)),f.u=null,f.R=!0,yf(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Bo(this),xu(this),wt(19))};function Ho(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function qf(a,d){var f=null;if(a.g==d){Ho(a),_u(a),a.g=null;var v=2}else if(fu(a.h,d))f=d.G,Tf(a.h,d),v=1;else return;if(a.I!=0){if(d.o)if(v==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var R=a.D;v=Oo(),ot(v,new hf(v,f)),qo(a)}else $f(a);else if(R=d.m,R==3||R==0&&d.X>0||!(v==1&&n1(a,d)||v==2&&xu(a)))switch(f&&f.length>0&&(d=a.h,d.i=d.i.concat(f)),R){case 1:kr(a,5);break;case 4:kr(a,10);break;case 3:kr(a,6);break;default:kr(a,2)}}}function Hf(a,d){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*d}function kr(a,d){if(a.j.info("Error code "+d),d==2){var f=h(a.bb,a),v=a.Ua;const R=!v;v=new Ln(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ai(v,"https"),zo(v),R?Yx(v.toString(),f):Xx(v.toString(),f)}else wt(2);a.I=0,a.l&&a.l.pa(d),Wf(a),Ff(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Wf(a){if(a.I=0,a.ja=[],a.l){const d=Sf(a.h);(d.length!=0||a.i.length!=0)&&(C(a.ja,d),C(a.ja,a.i),a.h.i.length=0,I(a.i),a.i.length=0),a.l.oa()}}function Gf(a,d,f){var v=f instanceof Ln?rn(f):new Ln(f);if(v.g!="")d&&(v.g=d+"."+v.g),li(v,v.u);else{var R=o.location;v=R.protocol,d=d?d+"."+R.hostname:R.hostname,R=+R.port;const D=new Ln(null);v&&ai(D,v),d&&(D.g=d),R&&li(D,R),f&&(D.h=f),v=D}return f=a.G,d=a.wa,f&&d&&Ae(v,f,d),Ae(v,"VER",a.ka),pi(a,v),v}function Qf(a,d,f){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new ze(new gu({ab:f})):new ze(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kf(){}t=Kf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Wo(){}Wo.prototype.g=function(a,d){return new Pt(a,d)};function Pt(a,d){Fe.call(this),this.g=new Lf(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!S(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!S(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ns(this)}p(Pt,Fe),Pt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){vu(this.g)},Pt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=iu(a),a=f);d.i.push(new $x(d.Ya++,a)),d.I==3&&qo(d)},Pt.prototype.N=function(){this.g.l=null,delete this.j,vu(this.g),delete this.g,Pt.Z.N.call(this)};function Yf(a){ou.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(Yf,ou);function Xf(){au.call(this),this.status=1}p(Xf,au);function ns(a){this.g=a}p(ns,Kf),ns.prototype.ra=function(){ot(this.g,"a")},ns.prototype.qa=function(a){ot(this.g,new Yf(a))},ns.prototype.pa=function(a){ot(this.g,new Xf)},ns.prototype.oa=function(){ot(this.g,"b")},Wo.prototype.createWebChannel=Wo.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,Xy=function(){return new Wo},Yy=function(){return Oo()},Ky=Ir,sd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,ka=Lo,ff.COMPLETE="complete",Qy=ff,lf.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",Fe.prototype.listen=Fe.prototype.J,ji=lf,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,Gy=ze}).apply(typeof da<"u"?da:typeof self<"u"?self:typeof window<"u"?window:{});const xp="@firebase/firestore",_p="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ws="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new zy("@firebase/firestore");function ss(){return Gr.logLevel}function Y(t,...e){if(Gr.logLevel<=ge.DEBUG){const n=e.map(wh);Gr.debug(`Firestore (${Ws}): ${t}`,...n)}}function Pn(t,...e){if(Gr.logLevel<=ge.ERROR){const n=e.map(wh);Gr.error(`Firestore (${Ws}): ${t}`,...n)}}function Ms(t,...e){if(Gr.logLevel<=ge.WARN){const n=e.map(wh);Gr.warn(`Firestore (${Ws}): ${t}`,...n)}}function wh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Jy(t,r,n)}function Jy(t,e,n){let r=`FIRESTORE (${Ws}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Pn(r),new Error(r)}function xe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Jy(e,s,r)}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class y2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class v2{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Nn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Nn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Nn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new Zy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new yt(e)}}class x2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new x2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ZE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xe(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=E2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function id(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Ju(s)===Ju(i)?fe(s,i):Ju(s)?1:-1}return fe(t.length,e.length)}const T2=55296,S2=57343;function Ju(t){const e=t.charCodeAt(0);return e>=T2&&e<=S2}function Os(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="__name__";class un{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return un.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof un?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=un.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return fe(e.length,n.length)}static compareSegments(e,n){const r=un.isNumericId(e),s=un.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?un.extractNumericId(e).compare(un.extractNumericId(n)):id(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cr.fromString(e.substring(4,e.length-2))}}class Ne extends un{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const b2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends un{construct(e,n,r){return new ut(e,n,r)}static isValidIdentifier(e){return b2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ep}static keyField(){return new ut([Ep])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new Q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(n)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Ne.fromString(e))}static fromName(e){return new te(Ne.fromString(e).popFirst(5))}static empty(){return new te(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t,e,n){if(!n)throw new Q(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function N2(t,e,n,r){if(e===!0&&r===!0)throw new Q(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Tp(t){if(!te.isDocumentKey(t))throw new Q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sp(t){if(te.isDocumentKey(t))throw new Q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ul(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se(12329,{type:typeof t})}function yn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ul(t);throw new Q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t,e){const n={typeString:t};return e&&(n.value=e),n}function ko(t,e){if(!tv(t))throw new Q(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=-62135596800,Np=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Np);return new ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<bp)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Np}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ko(e,ke._jsonSchema))return new ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:Ke("string",ke._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{static fromTimestamp(e){return new ae(e)}static min(){return new ae(new ke(0,0))}static max(){return new ae(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=-1;function I2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ae.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new mr(s,te.empty(),e)}function A2(t){return new mr(t.readTime,t.key,go)}class mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mr(ae.min(),te.empty(),go)}static max(){return new mr(ae.max(),te.empty(),go)}}function C2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==k2)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(m=>{o[h]=m,++u,u===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function j2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$l.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=-1;function Bl(t){return t==null}function dl(t){return t===0&&1/t==-1/0}function P2(t){return typeof t=="number"&&Number.isInteger(t)&&!dl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="";function D2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ip(e)),e=V2(t.get(n),e);return Ip(e)}function V2(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case nv:n+="";break;default:n+=i}}return n}function Ip(t){return t+nv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Tr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||lt.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lt.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ha(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ha(this.root,e,this.comparator,!1)}getReverseIterator(){return new ha(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ha(this.root,e,this.comparator,!0)}}class ha{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??lt.RED,this.left=s??lt.EMPTY,this.right=i??lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new lt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return lt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}}lt.EMPTY=null,lt.RED=!0,lt.BLACK=!1;lt.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cp(this.data.getIterator())}getIteratorFrom(e){return new Cp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class Cp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new Mt([])}unionWith(e){let n=new Ze(ut.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Os(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sv("Invalid base64 string: "+i):i}}(e);return new ht(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const M2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(t){if(xe(!!t,39018),typeof t=="string"){let e=0;const n=M2.exec(t);if(xe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gr(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="server_timestamp",ov="__type__",av="__previous_value__",lv="__local_write_time__";function Sh(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ov])==null?void 0:r.stringValue)===iv}function ql(t){const e=t.mapValue.fields[av];return Sh(e)?ql(e):e}function yo(t){const e=pr(t.mapValue.fields[lv].timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n,r,s,i,o,u,c,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=m}}const hl="(default)";class vo{constructor(e,n){this.projectId=e,this.database=n||hl}static empty(){return new vo("","")}get isDefaultDatabase(){return this.database===hl}isEqual(e){return e instanceof vo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="__type__",L2="__max__",fa={mapValue:{}},cv="__vector__",fl="value";function yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sh(t)?4:z2(t)?9007199254740991:F2(t)?10:11:se(28295,{value:t})}function vn(t,e){if(t===e)return!0;const n=yr(t);if(n!==yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yo(t).isEqual(yo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=pr(s.timestampValue),u=pr(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return gr(s.bytesValue).isEqual(gr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return $e(s.geoPointValue.latitude)===$e(i.geoPointValue.latitude)&&$e(s.geoPointValue.longitude)===$e(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return $e(s.integerValue)===$e(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=$e(s.doubleValue),u=$e(i.doubleValue);return o===u?dl(o)===dl(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Os(t.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Ap(o)!==Ap(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!vn(o[c],u[c])))return!1;return!0}(t,e);default:return se(52216,{left:t})}}function xo(t,e){return(t.values||[]).find(n=>vn(n,e))!==void 0}function Ls(t,e){if(t===e)return 0;const n=yr(t),r=yr(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=$e(i.integerValue||i.doubleValue),c=$e(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return kp(t.timestampValue,e.timestampValue);case 4:return kp(yo(t),yo(e));case 5:return id(t.stringValue,e.stringValue);case 6:return function(i,o){const u=gr(i),c=gr(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const m=fe(u[h],c[h]);if(m!==0)return m}return fe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=fe($e(i.latitude),$e(o.latitude));return u!==0?u:fe($e(i.longitude),$e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Rp(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,I,C,j;const u=i.fields||{},c=o.fields||{},h=(g=u[fl])==null?void 0:g.arrayValue,m=(I=c[fl])==null?void 0:I.arrayValue,p=fe(((C=h==null?void 0:h.values)==null?void 0:C.length)||0,((j=m==null?void 0:m.values)==null?void 0:j.length)||0);return p!==0?p:Rp(h,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===fa.mapValue&&o===fa.mapValue)return 0;if(i===fa.mapValue)return 1;if(o===fa.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),h=o.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let p=0;p<c.length&&p<m.length;++p){const g=id(c[p],m[p]);if(g!==0)return g;const I=Ls(u[c[p]],h[m[p]]);if(I!==0)return I}return fe(c.length,m.length)}(t.mapValue,e.mapValue);default:throw se(23264,{he:n})}}function kp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=pr(t),r=pr(e),s=fe(n.seconds,r.seconds);return s!==0?s:fe(n.nanos,r.nanos)}function Rp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ls(n[s],r[s]);if(i)return i}return fe(n.length,r.length)}function Fs(t){return od(t)}function od(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=pr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=od(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${od(n.fields[o])}`;return s+"}"}(t.mapValue):se(61005,{value:t})}function Ra(t){switch(yr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ql(t);return e?16+Ra(e):16;case 5:return 2*t.stringValue.length;case 6:return gr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ra(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Tr(r.fields,(i,o)=>{s+=i.length+Ra(o)}),s}(t.mapValue);default:throw se(13486,{value:t})}}function jp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ad(t){return!!t&&"integerValue"in t}function bh(t){return!!t&&"arrayValue"in t}function Pp(t){return!!t&&"nullValue"in t}function Dp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ja(t){return!!t&&"mapValue"in t}function F2(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[uv])==null?void 0:r.stringValue)===cv}function Wi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Tr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wi(t.arrayValue.values[n]);return e}return{...t}}function z2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===L2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ja(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wi(n)}setAll(e){let n=ut.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=Wi(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ja(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ja(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Tr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(Wi(this.value))}}function dv(t){const e=[];return Tr(t.fields,(n,r)=>{const s=new ut([n]);if(ja(r)){const i=dv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Mt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new xt(e,0,ae.min(),ae.min(),ae.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new xt(e,1,n,ae.min(),r,s,0)}static newNoDocument(e,n){return new xt(e,2,n,ae.min(),ae.min(),At.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,ae.min(),ae.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n){this.position=e,this.inclusive=n}}function Vp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Ls(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n="asc"){this.field=e,this.dir=n}}function U2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hv=class{};class Qe extends hv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new B2(e,n,r):n==="array-contains"?new W2(e,r):n==="in"?new G2(e,r):n==="not-in"?new Q2(e,r):n==="array-contains-any"?new K2(e,r):new Qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new q2(e,r):new H2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ls(n,this.value)):n!==null&&yr(this.value)===yr(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends hv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new nn(e,n)}matches(e){return fv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fv(t){return t.op==="and"}function mv(t){return $2(t)&&fv(t)}function $2(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function ld(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+Fs(t.value);if(mv(t))return t.filters.map(e=>ld(e)).join(",");{const e=t.filters.map(n=>ld(n)).join(",");return`${t.op}(${e})`}}function pv(t,e){return t instanceof Qe?function(r,s){return s instanceof Qe&&r.op===s.op&&r.field.isEqual(s.field)&&vn(r.value,s.value)}(t,e):t instanceof nn?function(r,s){return s instanceof nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&pv(o,s.filters[u]),!0):!1}(t,e):void se(19439)}function gv(t){return t instanceof Qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Fs(n.value)}`}(t):t instanceof nn?function(n){return n.op.toString()+" {"+n.getFilters().map(gv).join(" ,")+"}"}(t):"Filter"}class B2 extends Qe{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class q2 extends Qe{constructor(e,n){super(e,"in",n),this.keys=yv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class H2 extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=yv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class W2 extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bh(n)&&xo(n.arrayValue,this.value)}}class G2 extends Qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xo(this.value.arrayValue,n)}}class Q2 extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xo(this.value.arrayValue,n)}}class K2 extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.Te=null}}function Op(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Y2(t,e,n,r,s,i,o)}function Nh(t){const e=le(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ld(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Bl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fs(r)).join(",")),e.Te=n}return e.Te}function Ih(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!U2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mp(t.startAt,e.startAt)&&Mp(t.endAt,e.endAt)}function ud(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function X2(t,e,n,r,s,i,o,u){return new Ks(t,e,n,r,s,i,o,u)}function Ah(t){return new Ks(t)}function Lp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vv(t){return t.collectionGroup!==null}function Gi(t){const e=le(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Ze(ut.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new _o(i,r))}),n.has(ut.keyField().canonicalString())||e.Ie.push(new _o(ut.keyField(),r))}return e.Ie}function fn(t){const e=le(t);return e.Ee||(e.Ee=J2(e,Gi(t))),e.Ee}function J2(t,e){if(t.limitType==="F")return Op(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new _o(s.field,i)});const n=t.endAt?new ml(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ml(t.startAt.position,t.startAt.inclusive):null;return Op(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cd(t,e){const n=t.filters.concat([e]);return new Ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dd(t,e,n){return new Ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hl(t,e){return Ih(fn(t),fn(e))&&t.limitType===e.limitType}function xv(t){return`${Nh(fn(t))}|lt:${t.limitType}`}function is(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>gv(s)).join(", ")}]`),Bl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fs(s)).join(",")),`Target(${r})`}(fn(t))}; limitType=${t.limitType})`}function Wl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Gi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const h=Vp(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,Gi(r),s)||r.endAt&&!function(o,u,c){const h=Vp(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,Gi(r),s))}(t,e)}function Z2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _v(t){return(e,n)=>{let r=!1;for(const s of Gi(t)){const i=eT(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function eT(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),h=u.data.field(i);return c!==null&&h!==null?Ls(c,h):se(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Tr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return rv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new Le(te.comparator);function Dn(){return tT}const wv=new Le(te.comparator);function Pi(...t){let e=wv;for(const n of t)e=e.insert(n.key,n);return e}function Ev(t){let e=wv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Lr(){return Qi()}function Tv(){return Qi()}function Qi(){return new Xr(t=>t.toString(),(t,e)=>t.isEqual(e))}const nT=new Le(te.comparator),rT=new Ze(te.comparator);function me(...t){let e=rT;for(const n of t)e=e.add(n);return e}const sT=new Ze(fe);function iT(){return sT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dl(e)?"-0":e}}function Sv(t){return{integerValue:""+t}}function oT(t,e){return P2(e)?Sv(e):Ch(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(){this._=void 0}}function aT(t,e,n){return t instanceof pl?function(s,i){const o={fields:{[ov]:{stringValue:iv},[lv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Sh(i)&&(i=ql(i)),i&&(o.fields[av]=i),{mapValue:o}}(n,e):t instanceof wo?Nv(t,e):t instanceof Eo?Iv(t,e):function(s,i){const o=bv(s,i),u=Fp(o)+Fp(s.Ae);return ad(o)&&ad(s.Ae)?Sv(u):Ch(s.serializer,u)}(t,e)}function lT(t,e,n){return t instanceof wo?Nv(t,e):t instanceof Eo?Iv(t,e):n}function bv(t,e){return t instanceof gl?function(r){return ad(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class pl extends Gl{}class wo extends Gl{constructor(e){super(),this.elements=e}}function Nv(t,e){const n=Av(e);for(const r of t.elements)n.some(s=>vn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Eo extends Gl{constructor(e){super(),this.elements=e}}function Iv(t,e){let n=Av(e);for(const r of t.elements)n=n.filter(s=>!vn(s,r));return{arrayValue:{values:n}}}class gl extends Gl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Fp(t){return $e(t.integerValue||t.doubleValue)}function Av(t){return bh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function uT(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof wo&&s instanceof wo||r instanceof Eo&&s instanceof Eo?Os(r.elements,s.elements,vn):r instanceof gl&&s instanceof gl?vn(r.Ae,s.Ae):r instanceof pl&&s instanceof pl}(t.transform,e.transform)}class cT{constructor(e,n){this.version=e,this.transformResults=n}}class en{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ql{}function Cv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kh(t.key,en.none()):new Ro(t.key,t.data,en.none());{const n=t.data,r=At.empty();let s=new Ze(ut.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Sr(t.key,r,new Mt(s.toArray()),en.none())}}function dT(t,e,n){t instanceof Ro?function(s,i,o){const u=s.value.clone(),c=Up(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Sr?function(s,i,o){if(!Pa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=Up(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(kv(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ki(t,e,n,r){return t instanceof Ro?function(i,o,u,c){if(!Pa(i.precondition,o))return u;const h=i.value.clone(),m=$p(i.fieldTransforms,c,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Sr?function(i,o,u,c){if(!Pa(i.precondition,o))return u;const h=$p(i.fieldTransforms,c,o),m=o.data;return m.setAll(kv(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,u){return Pa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function hT(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=bv(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function zp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Os(r,s,(i,o)=>uT(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ro extends Ql{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Sr extends Ql{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Up(t,e,n){const r=new Map;xe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,lT(o,u,n[s]))}return r}function $p(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,aT(i,o,e))}return r}class kh extends Ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fT extends Ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&dT(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ki(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ki(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Tv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=Cv(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Os(this.mutations,e.mutations,(n,r)=>zp(n,r))&&Os(this.baseMutations,e.baseMutations,(n,r)=>zp(n,r))}}class Rh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return nT}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Rh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,pe;function yT(t){switch(t){case L.OK:return se(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return se(15467,{code:t})}}function Rv(t){if(t===void 0)return Pn("GRPC error has no .code"),L.UNKNOWN;switch(t){case We.OK:return L.OK;case We.CANCELLED:return L.CANCELLED;case We.UNKNOWN:return L.UNKNOWN;case We.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case We.INTERNAL:return L.INTERNAL;case We.UNAVAILABLE:return L.UNAVAILABLE;case We.UNAUTHENTICATED:return L.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case We.NOT_FOUND:return L.NOT_FOUND;case We.ALREADY_EXISTS:return L.ALREADY_EXISTS;case We.PERMISSION_DENIED:return L.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case We.ABORTED:return L.ABORTED;case We.OUT_OF_RANGE:return L.OUT_OF_RANGE;case We.UNIMPLEMENTED:return L.UNIMPLEMENTED;case We.DATA_LOSS:return L.DATA_LOSS;default:return se(39323,{code:t})}}(pe=We||(We={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=new cr([4294967295,4294967295],0);function Bp(t){const e=vT().encode(t),n=new Wy;return n.update(e),new Uint8Array(n.digest())}function qp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new cr([n,r],0),new cr([s,i],0)]}class jh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Di(`Invalid padding: ${n}`);if(r<0)throw new Di(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Di(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Di(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=cr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(cr.fromNumber(r)));return s.compare(xT)===1&&(s=new cr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Bp(e),[r,s]=qp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new jh(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.ge===0)return;const n=Bp(e),[r,s]=qp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Di extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,jo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Kl(ae.min(),s,new Le(fe),Dn(),me())}}class jo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new jo(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class jv{constructor(e,n){this.targetId=e,this.Ce=n}}class Pv{constructor(e,n,r=ht.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Hp{constructor(){this.ve=0,this.Fe=Wp(),this.Me=ht.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=me(),n=me(),r=me();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se(38017,{changeType:i})}}),new jo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Wp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class _T{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dn(),this.Je=ma(),this.He=ma(),this.Ye=new Le(fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ud(i))if(r===0){const o=new te(i.path);this.et(n,o,xt.newNoDocument(o,ae.min()))}else xe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const u=this.ut(e),c=u?this.ct(u,e,o):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=gr(r).toUint8Array()}catch(c){if(c instanceof sv)return Ms("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new jh(o,s,i)}catch(c){return Ms(c instanceof Di?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const u=this.ot(o);if(u){if(i.current&&ud(u.target)){const c=new te(u.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,xt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=me();this.He.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Kl(e,n,this.Ye,this.je,r);return this.je=Dn(),this.Je=ma(),this.He=ma(),this.Ye=new Le(fe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Hp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ze(fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ze(fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Hp),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ma(){return new Le(te.comparator)}function Wp(){return new Le(te.comparator)}const wT={asc:"ASCENDING",desc:"DESCENDING"},ET={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TT={and:"AND",or:"OR"};class ST{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hd(t,e){return t.useProto3Json||Bl(e)?e:{value:e}}function yl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Dv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bT(t,e){return yl(t,e.toTimestamp())}function mn(t){return xe(!!t,49232),ae.fromTimestamp(function(n){const r=pr(n);return new ke(r.seconds,r.nanos)}(t))}function Ph(t,e){return fd(t,e).canonicalString()}function fd(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Vv(t){const e=Ne.fromString(t);return xe(zv(e),10190,{key:e.toString()}),e}function md(t,e){return Ph(t.databaseId,e.path)}function Zu(t,e){const n=Vv(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(Ov(n))}function Mv(t,e){return Ph(t.databaseId,e)}function NT(t){const e=Vv(t);return e.length===4?Ne.emptyPath():Ov(e)}function pd(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ov(t){return xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Gp(t,e,n){return{name:md(t,e),fields:n.value.mapValue.fields}}function IT(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:se(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,m){return h.useProto3Json?(xe(m===void 0||typeof m=="string",58123),ht.fromBase64String(m||"")):(xe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),ht.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const m=h.code===void 0?L.UNKNOWN:Rv(h.code);return new Q(m,h.message||"")}(o);n=new Pv(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Zu(t,r.document.name),i=mn(r.document.updateTime),o=r.document.createTime?mn(r.document.createTime):ae.min(),u=new At({mapValue:{fields:r.document.fields}}),c=xt.newFoundDocument(s,i,o,u),h=r.targetIds||[],m=r.removedTargetIds||[];n=new Da(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Zu(t,r.document),i=r.readTime?mn(r.readTime):ae.min(),o=xt.newNoDocument(s,i),u=r.removedTargetIds||[];n=new Da([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Zu(t,r.document),i=r.removedTargetIds||[];n=new Da([],i,s,null)}else{if(!("filter"in e))return se(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new gT(s,i),u=r.targetId;n=new jv(u,o)}}return n}function AT(t,e){let n;if(e instanceof Ro)n={update:Gp(t,e.key,e.value)};else if(e instanceof kh)n={delete:md(t,e.key)};else if(e instanceof Sr)n={update:Gp(t,e.key,e.data),updateMask:OT(e.fieldMask)};else{if(!(e instanceof fT))return se(16599,{Vt:e.type});n={verify:md(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof pl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof wo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Eo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof gl)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw se(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:bT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se(27497)}(t,e.precondition)),n}function CT(t,e){return t&&t.length>0?(xe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?mn(s.updateTime):mn(i);return o.isEqual(ae.min())&&(o=mn(i)),new cT(o,s.transformResults||[])}(n,e))):[]}function kT(t,e){return{documents:[Mv(t,e.path)]}}function RT(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Mv(t,s);const i=function(h){if(h.length!==0)return Fv(nn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(m=>function(g){return{field:os(g.field),direction:DT(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=hd(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function jT(t){let e=NT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xe(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=Lv(p);return g instanceof nn&&mv(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(C){return new _o(as(C.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(p){let g;return g=typeof p=="object"?p.value:p,Bl(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,I=p.values||[];return new ml(I,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,I=p.values||[];return new ml(I,g)}(n.endAt)),X2(e,s,o,i,u,"F",c,h)}function PT(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Lv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=as(n.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=as(n.unaryFilter.field);return Qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=as(n.unaryFilter.field);return Qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=as(n.unaryFilter.field);return Qe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return se(61313);default:return se(60726)}}(t):t.fieldFilter!==void 0?function(n){return Qe.create(as(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return se(58110);default:return se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nn.create(n.compositeFilter.filters.map(r=>Lv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se(1026)}}(n.compositeFilter.op))}(t):se(30097,{filter:t})}function DT(t){return wT[t]}function VT(t){return ET[t]}function MT(t){return TT[t]}function os(t){return{fieldPath:t.canonicalString()}}function as(t){return ut.fromServerFormat(t.fieldPath)}function Fv(t){return t instanceof Qe?function(n){if(n.op==="=="){if(Dp(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NAN"}};if(Pp(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Dp(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NOT_NAN"}};if(Pp(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:os(n.field),op:VT(n.op),value:n.value}}}(t):t instanceof nn?function(n){const r=n.getFilters().map(s=>Fv(s));return r.length===1?r[0]:{compositeFilter:{op:MT(n.op),filters:r}}}(t):se(54877,{filter:t})}function OT(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,r,s,i=ae.min(),o=ae.min(),u=ht.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Zn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.yt=e}}function FT(t){const e=jT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(){this.Cn=new UT}addToCollectionParentIndex(e,n){return this.Cn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(mr.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class UT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uv=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(Uv,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new zs(0)}static cr(){return new zs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="LruGarbageCollector",$T=1048576;function Yp([t,e],[n,r]){const s=fe(t,n);return s===0?fe(e,r):s}class BT{constructor(e){this.Ir=e,this.buffer=new Ze(Yp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Yp(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qT{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(Kp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qs(n)?Y(Kp,"Ignoring IndexedDB error during garbage collection: ",n):await Gs(n)}await this.Vr(3e5)})}}class HT{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return z.resolve($l.ce);const r=new BT(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(Qp)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qp):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,u,c,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,u=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),ss()<=ge.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${i} targets in `+(c-u)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-m}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function WT(t,e){return new HT(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(){this.changes=new Xr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ki(r.mutation,s,Mt.empty(),ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=Lr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Pi();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Lr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Dn();const o=Qi(),u=function(){return Qi()}();return n.forEach((c,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof Sr)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),Ki(m.mutation,h,m.mutation.getFieldMask(),ke.now())):o.set(h.key,Mt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>u.set(h,new QT(m,o.get(h)??null))),u))}recalculateAndSaveOverlays(e,n){const r=Qi();let s=new Le((o,u)=>o-u),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let m=r.get(c)||Mt.empty();m=u.applyToLocalView(h,m),r.set(c,m);const p=(s.get(u.batchId)||me()).add(c);s=s.insert(u.batchId,p)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,m=c.value,p=Tv();m.forEach(g=>{if(!i.has(g)){const I=Cv(n.get(g),r.get(g));I!==null&&p.set(g,I),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(Lr());let u=go,c=i;return o.next(h=>z.forEach(h,(m,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),i.get(m)?z.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,me())).next(m=>({batchId:u,changes:Ev(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Pi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Pi();return this.indexManager.getCollectionParents(e,i).next(u=>z.forEach(u,c=>{const h=function(p,g){return new Ks(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,xt.newInvalidDocument(m)))});let u=Pi();return o.forEach((c,h)=>{const m=i.get(c);m!==void 0&&Ki(m.mutation,h,Mt.empty(),ke.now()),Wl(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mn(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:FT(s.bundledQuery),readTime:mn(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(){this.overlays=new Le(te.comparator),this.qr=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Lr();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=Lr(),i=n.length+1,o=new te(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Le((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=i.get(h.largestBatchId);m===null&&(m=Lr(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=Lr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>u.set(h,m)),!(u.size()>=s)););return z.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new pT(n,r));let i=this.qr.get(n);i===void 0&&(i=me(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this.Qr=new Ze(rt.$r),this.Ur=new Ze(rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new rt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new te(new Ne([])),r=new rt(n,e),s=new rt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new te(new Ne([])),r=new rt(n,e),s=new rt(n,e+1);let i=me();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return te.comparator(e.key,n.key)||fe(e.Yr,n.Yr)}static Kr(e,n){return fe(e.Yr,n.Yr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(rt.$r)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new mT(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.Zr=this.Zr.add(new rt(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?Th:this.tr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),s=new rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const u=this.Xr(o.Yr);i.push(u)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(fe);return n.forEach(s=>{const i=new rt(s,0),o=new rt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],u=>{r=r.add(u.Yr)})}),z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new rt(new te(i),0);let u=new Ze(fe);return this.Zr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.Yr)),!0)},o),z.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return z.forEach(n.mutations,s=>{const i=new rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new rt(n,0),s=this.Zr.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.ri=e,this.docs=function(){return new Le(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=Dn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():xt.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Dn();const o=n.path,u=new te(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||C2(A2(m),r)<=0||(s.has(m.key)||Wl(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se(9500)}ii(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tS(this)}getSize(e){return z.resolve(this.size)}}class tS extends GT{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.persistence=e,this.si=new Xr(n=>Nh(n),Ih),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Dh,this.targetCount=0,this.ai=zs.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new zs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Pr(n),z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n){this.ui={},this.overlays={},this.ci=new $l(0),this.li=!1,this.li=!0,this.hi=new JT,this.referenceDelegate=e(this),this.Pi=new nS(this),this.indexManager=new zT,this.remoteDocumentCache=function(s){return new eS(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new LT(n),this.Ii=new YT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new ZT(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const s=new rS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return z.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class rS extends R2{constructor(e){super(),this.currentSequenceNumber=e}}class Vh{constructor(e){this.persistence=e,this.Ri=new Dh,this.Vi=null}static mi(e){return new Vh(e)}get fi(){if(this.Vi)return this.Vi;throw se(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,r=>{const s=te.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return z.or([()=>z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class vl{constructor(e,n){this.persistence=e,this.pi=new Xr(r=>D2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=WT(this,n)}static mi(e,n){return new vl(e,n)}Ei(){}di(e){return z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return z.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?z.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(u=>{u||(r++,i.removeEntry(o,ae.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ra(e.data.value)),n}br(e,n,r){return z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Mh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Yw()?8:j2(Qw())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new sS;return this.Ss(e,n,o).next(u=>{if(i.result=u,this.Vs)return this.bs(e,n,o,u.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ss()<=ge.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),z.resolve()):(ss()<=ge.DEBUG&&Y("QueryEngine","Query:",is(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ss()<=ge.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fn(n))):z.resolve())}ys(e,n){if(Lp(n))return z.resolve(null);let r=fn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=dd(n,null,"F"),r=fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=me(...i);return this.ps.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.Ds(n,u);return this.Cs(n,h,o,c.readTime)?this.ys(e,dd(n,null,"F")):this.vs(e,h,n,c)}))})))}ws(e,n,r,s){return Lp(n)||s.isEqual(ae.min())?z.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?z.resolve(null):(ss()<=ge.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),is(n)),this.vs(e,o,n,I2(s,go)).next(u=>u))})}Ds(e,n){let r=new Ze(_v(e));return n.forEach((s,i)=>{Wl(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ss()<=ge.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",is(n)),this.ps.getDocumentsMatchingQuery(e,n,mr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="LocalStore",oS=3e8;class aS{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Le(fe),this.xs=new Xr(i=>Nh(i),Ih),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function lS(t,e,n,r){return new aS(t,e,n,r)}async function Bv(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=me();for(const h of s){o.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of i){u.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:u}))})})}function uS(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,c,h,m){const p=h.batch,g=p.keys();let I=z.resolve();return g.forEach(C=>{I=I.next(()=>m.getEntry(c,C)).next(j=>{const P=h.docVersions.get(C);xe(P!==null,48541),j.version.compareTo(P)<0&&(p.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),m.addEntry(j)))})}),I.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=me();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function qv(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function cS(t,e){const n=le(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;u.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let I=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(ht.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,r)),s=s.insert(p,I),function(j,P,T){return j.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=oS?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,I,m)&&u.push(n.Pi.updateTargetData(i,I))});let c=Dn(),h=me();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),u.push(dS(i,o,e.documentUpdates).next(m=>{c=m.ks,h=m.qs})),!r.isEqual(ae.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(m)}return z.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.Ms=s,i))}function dS(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Dn();return n.forEach((u,c)=>{const h=i.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):Y(Oh,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{ks:o,qs:s}})}function hS(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Th),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fS(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Zn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function gd(t,e,n){const r=le(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Qs(o))throw o;Y(Oh,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Xp(t,e,n){const r=le(t);let s=ae.min(),i=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,m){const p=le(c),g=p.xs.get(m);return g!==void 0?z.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,m)}(r,o,fn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ae.min(),n?i:me())).next(u=>(mS(r,Z2(e),u),{documents:u,Qs:i})))}function mS(t,e,n){let r=t.Os.get(e)||ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Jp{constructor(){this.activeTargetIds=iT()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pS{constructor(){this.Mo=new Jp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Jp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="ConnectivityMonitor";class eg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(Zp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(Zp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pa=null;function yd(){return pa===null?pa=function(){return 268435456+Math.round(2147483648*Math.random())}():pa++,"0x"+pa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec="RestConnection",yS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===hl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=yd(),u=this.zo(e,n.toUriEncodedString());Y(ec,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:h}=new URL(u),m=xh(h);return this.Jo(e,u,c,r,m).then(p=>(Y(ec,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ms(ec,`RPC '${e}' ${o} failed with error: `,p,"url: ",u,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ws}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=yS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class _S extends vS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=yd();return new Promise((u,c)=>{const h=new Gy;h.setWithCredentials(!0),h.listenOnce(Qy.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ka.NO_ERROR:const p=h.getResponseJson();Y(gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),u(p);break;case ka.TIMEOUT:Y(gt,`RPC '${e}' ${o} timed out`),c(new Q(L.DEADLINE_EXCEEDED,"Request time out"));break;case ka.HTTP_ERROR:const g=h.getStatus();if(Y(gt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const C=I==null?void 0:I.error;if(C&&C.status&&C.message){const j=function(T){const w=T.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(w)>=0?w:L.UNKNOWN}(C.status);c(new Q(j,C.message))}else c(new Q(L.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Q(L.UNAVAILABLE,"Connection failed."));break;default:se(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Y(gt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);Y(gt,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",m,r,15)})}T_(e,n,r){const s=yd(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xy(),u=Yy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");Y(gt,`Creating RPC '${e}' stream ${s}: ${m}`,c);const p=o.createWebChannel(m,c);this.I_(p);let g=!1,I=!1;const C=new xS({Yo:P=>{I?Y(gt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(Y(gt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),Y(gt,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},Zo:()=>p.close()}),j=(P,T,w)=>{P.listen(T,N=>{try{w(N)}catch(V){setTimeout(()=>{throw V},0)}})};return j(p,ji.EventType.OPEN,()=>{I||(Y(gt,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),j(p,ji.EventType.CLOSE,()=>{I||(I=!0,Y(gt,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(p))}),j(p,ji.EventType.ERROR,P=>{I||(I=!0,Ms(gt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),C.a_(new Q(L.UNAVAILABLE,"The operation could not be completed")))}),j(p,ji.EventType.MESSAGE,P=>{var T;if(!I){const w=P.data[0];xe(!!w,16349);const N=w,V=(N==null?void 0:N.error)||((T=N[0])==null?void 0:T.error);if(V){Y(gt,`RPC '${e}' stream ${s} received error:`,V);const M=V.status;let O=function(_){const E=We[_];if(E!==void 0)return Rv(E)}(M),x=V.message;O===void 0&&(O=L.INTERNAL,x="Unknown error status: "+M+" with message "+V.message),I=!0,C.a_(new Q(O,x)),p.close()}else Y(gt,`RPC '${e}' stream ${s} received:`,w),C.u_(w)}}),j(u,Ky.STAT_EVENT,P=>{P.stat===sd.PROXY?Y(gt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===sd.NOPROXY&&Y(gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function tc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t){return new ST(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="PersistentStream";class Wv{constructor(e,n,r,s,i,o,u,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Hv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Pn(n.toString()),Pn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Q(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(tg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Y(tg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wS extends Wv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=IT(this.serializer,e),r=function(i){if(!("targetChange"in i))return ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?mn(o.readTime):ae.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=pd(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=ud(c)?{documents:kT(i,c)}:{query:RT(i,c).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=Dv(i,o.resumeToken);const h=hd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(ae.min())>0){u.readTime=yl(i,o.snapshotVersion.toTimestamp());const h=hd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=PT(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=pd(this.serializer),n.removeTarget=e,this.q_(n)}}class ES extends Wv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=CT(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=pd(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>AT(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{}class SS extends TS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,fd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(L.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Ho(e,fd(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class bS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pn(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="RemoteStore";class NS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Jr(this)&&(Y(Qr,"Restarting streams for network reachability change."),await async function(c){const h=le(c);h.Ea.add(4),await Po(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Xl(h)}(this))})}),this.Ra=new bS(r,s)}}async function Xl(t){if(Jr(t))for(const e of t.da)await e(!0)}async function Po(t){for(const e of t.da)await e(!1)}function Gv(t,e){const n=le(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Uh(n)?zh(n):Ys(n).O_()&&Fh(n,e))}function Lh(t,e){const n=le(t),r=Ys(n);n.Ia.delete(e),r.O_()&&Qv(n,e),n.Ia.size===0&&(r.O_()?r.L_():Jr(n)&&n.Ra.set("Unknown"))}function Fh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ys(t).Y_(e)}function Qv(t,e){t.Va.Ue(e),Ys(t).Z_(e)}function zh(t){t.Va=new _T({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ys(t).start(),t.Ra.ua()}function Uh(t){return Jr(t)&&!Ys(t).x_()&&t.Ia.size>0}function Jr(t){return le(t).Ea.size===0}function Kv(t){t.Va=void 0}async function IS(t){t.Ra.set("Online")}async function AS(t){t.Ia.forEach((e,n)=>{Fh(t,e)})}async function CS(t,e){Kv(t),Uh(t)?(t.Ra.ha(e),zh(t)):t.Ra.set("Unknown")}async function kS(t,e,n){if(t.Ra.set("Online"),e instanceof Pv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.Va.removeTarget(u))}(t,e)}catch(r){Y(Qr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xl(t,r)}else if(e instanceof Da?t.Va.Ze(e):e instanceof jv?t.Va.st(e):t.Va.tt(e),!n.isEqual(ae.min()))try{const r=await qv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Va.Tt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.Ia.get(h);m&&i.Ia.set(h,m.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const m=i.Ia.get(c);if(!m)return;i.Ia.set(c,m.withResumeToken(ht.EMPTY_BYTE_STRING,m.snapshotVersion)),Qv(i,c);const p=new Zn(m.target,c,h,m.sequenceNumber);Fh(i,p)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Y(Qr,"Failed to raise snapshot:",r),await xl(t,r)}}async function xl(t,e,n){if(!Qs(e))throw e;t.Ea.add(1),await Po(t),t.Ra.set("Offline"),n||(n=()=>qv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(Qr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Xl(t)})}function Yv(t,e){return e().catch(n=>xl(t,n,e))}async function Jl(t){const e=le(t),n=vr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Th;for(;RS(e);)try{const s=await hS(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,jS(e,s)}catch(s){await xl(e,s)}Xv(e)&&Jv(e)}function RS(t){return Jr(t)&&t.Ta.length<10}function jS(t,e){t.Ta.push(e);const n=vr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Xv(t){return Jr(t)&&!vr(t).x_()&&t.Ta.length>0}function Jv(t){vr(t).start()}async function PS(t){vr(t).ra()}async function DS(t){const e=vr(t);for(const n of t.Ta)e.ea(n.mutations)}async function VS(t,e,n){const r=t.Ta.shift(),s=Rh.from(r,e,n);await Yv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Jl(t)}async function MS(t,e){e&&vr(t).X_&&await async function(r,s){if(function(o){return yT(o)&&o!==L.ABORTED}(s.code)){const i=r.Ta.shift();vr(r).B_(),await Yv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Jl(r)}}(t,e),Xv(t)&&Jv(t)}async function ng(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),Y(Qr,"RemoteStore received new credentials");const r=Jr(n);n.Ea.add(3),await Po(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Xl(n)}async function OS(t,e){const n=le(t);e?(n.Ea.delete(2),await Xl(n)):e||(n.Ea.add(2),await Po(n),n.Ra.set("Unknown"))}function Ys(t){return t.ma||(t.ma=function(n,r,s){const i=le(n);return i.sa(),new wS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:IS.bind(null,t),t_:AS.bind(null,t),r_:CS.bind(null,t),H_:kS.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Uh(t)?zh(t):t.Ra.set("Unknown")):(await t.ma.stop(),Kv(t))})),t.ma}function vr(t){return t.fa||(t.fa=function(n,r,s){const i=le(n);return i.sa(),new ES(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:PS.bind(null,t),r_:MS.bind(null,t),ta:DS.bind(null,t),na:VS.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Jl(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(Qr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new $h(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bh(t,e){if(Pn("AsyncQueue",`${e}: ${t}`),Qs(t))return new Q(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{static emptySet(e){return new Is(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Pi(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Is)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Is;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this.ga=new Le(te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):se(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Us{constructor(e,n,r,s,i,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Us(e,n,Is.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class FS{constructor(){this.queries=sg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=le(n),i=s.queries;s.queries=sg(),i.forEach((o,u)=>{for(const c of u.Sa)c.onError(r)})})(this,new Q(L.ABORTED,"Firestore shutting down"))}}function sg(){return new Xr(t=>xv(t),Hl)}async function Zv(t,e){const n=le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new LS,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Bh(o,`Initialization of query '${is(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&qh(n)}async function ex(t,e){const n=le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zS(t,e){const n=le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.Sa)u.Fa(s)&&(r=!0);o.wa=s}}r&&qh(n)}function US(t,e,n){const r=le(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function qh(t){t.Ca.forEach(e=>{e.next()})}var vd,ig;(ig=vd||(vd={})).Ma="default",ig.Cache="cache";class tx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Us(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Us.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.key=e}}class rx{constructor(e){this.key=e}}class $S{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=me(),this.mutatedKeys=me(),this.eu=_v(e),this.tu=new Is(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new rg,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),I=Wl(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),j=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let P=!1;g&&I?g.data.isEqual(I.data)?C!==j&&(r.track({type:3,doc:I}),P=!0):this.su(g,I)||(r.track({type:2,doc:I}),P=!0,(c&&this.eu(I,c)>0||h&&this.eu(I,h)<0)&&(u=!0)):!g&&I?(r.track({type:0,doc:I}),P=!0):g&&!I&&(r.track({type:1,doc:g}),P=!0,(c||h)&&(u=!0)),P&&(I?(o=o.add(I),i=j?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:u,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(I,C){const j=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se(20277,{Rt:P})}};return j(I)-j(C)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new Us(this.query,e.tu,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=me(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new rx(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new nx(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Us.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hh="SyncEngine";class BS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class qS{constructor(e){this.key=e,this.hu=!1}}class HS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xr(u=>xv(u),Hl),this.Iu=new Map,this.Eu=new Set,this.du=new Le(te.comparator),this.Au=new Map,this.Ru=new Dh,this.Vu={},this.mu=new Map,this.fu=zs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WS(t,e,n=!0){const r=ux(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await sx(r,e,n,!0),s}async function GS(t,e){const n=ux(t);await sx(n,e,!0,!1)}async function sx(t,e,n,r){const s=await fS(t.localStore,fn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await QS(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Gv(t.remoteStore,s),u}async function QS(t,e,n,r,s){t.pu=(p,g,I)=>async function(j,P,T,w){let N=P.view.ru(T);N.Cs&&(N=await Xp(j.localStore,P.query,!1).then(({documents:x})=>P.view.ru(x,N)));const V=w&&w.targetChanges.get(P.targetId),M=w&&w.targetMismatches.get(P.targetId)!=null,O=P.view.applyChanges(N,j.isPrimaryClient,V,M);return ag(j,P.targetId,O.au),O.snapshot}(t,p,g,I);const i=await Xp(t.localStore,e,!0),o=new $S(e,i.Qs),u=o.ru(i.documents),c=jo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(u,t.isPrimaryClient,c);ag(t,n,h.au);const m=new BS(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function KS(t,e,n){const r=le(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Hl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await gd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Lh(r.remoteStore,s.targetId),xd(r,s.targetId)}).catch(Gs)):(xd(r,s.targetId),await gd(r.localStore,s.targetId,!0))}async function YS(t,e){const n=le(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lh(n.remoteStore,r.targetId))}async function XS(t,e,n){const r=sb(t);try{const s=await function(o,u){const c=le(o),h=ke.now(),m=u.reduce((I,C)=>I.add(C.key),me());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let C=Dn(),j=me();return c.Ns.getEntries(I,m).next(P=>{C=P,C.forEach((T,w)=>{w.isValidDocument()||(j=j.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,C)).next(P=>{p=P;const T=[];for(const w of u){const N=hT(w,p.get(w.key).overlayedDocument);N!=null&&T.push(new Sr(w.key,N,dv(N.value.mapValue),en.exists(!0)))}return c.mutationQueue.addMutationBatch(I,h,T,u)}).next(P=>{g=P;const T=P.applyToLocalDocumentSet(p,j);return c.documentOverlayCache.saveOverlays(I,P.batchId,T)})}).then(()=>({batchId:g.batchId,changes:Ev(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Le(fe)),h=h.insert(u,c),o.Vu[o.currentUser.toKey()]=h}(r,s.batchId,n),await Do(r,s.changes),await Jl(r.remoteStore)}catch(s){const i=Bh(s,"Failed to persist write");n.reject(i)}}async function ix(t,e){const n=le(t);try{const r=await cS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?xe(o.hu,14607):s.removedDocuments.size>0&&(xe(o.hu,42227),o.hu=!1))}),await Do(n,r,e)}catch(r){await Gs(r)}}function og(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=le(o);c.onlineState=u;let h=!1;c.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(u)&&(h=!0)}),h&&qh(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function JS(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Le(te.comparator);o=o.insert(i,xt.newNoDocument(i,ae.min()));const u=me().add(i),c=new Kl(ae.min(),new Map,new Le(fe),o,u);await ix(r,c),r.du=r.du.remove(i),r.Au.delete(e),Wh(r)}else await gd(r.localStore,e,!1).then(()=>xd(r,e,n)).catch(Gs)}async function ZS(t,e){const n=le(t),r=e.batch.batchId;try{const s=await uS(n.localStore,e);ax(n,r,null),ox(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Do(n,s)}catch(s){await Gs(s)}}async function eb(t,e,n){const r=le(t);try{const s=await function(o,u){const c=le(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return c.mutationQueue.lookupMutationBatch(h,u).next(p=>(xe(p!==null,37113),m=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>c.localDocuments.getDocuments(h,m))})}(r.localStore,e);ax(r,e,n),ox(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Do(r,s)}catch(s){await Gs(s)}}function ox(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function ax(t,e,n){const r=le(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function xd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||lx(t,r)})}function lx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Lh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Wh(t))}function ag(t,e,n){for(const r of n)r instanceof nx?(t.Ru.addReference(r.key,e),tb(t,r)):r instanceof rx?(Y(Hh,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||lx(t,r.key)):se(19791,{wu:r})}function tb(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Y(Hh,"New document in limbo: "+n),t.Eu.add(r),Wh(t))}function Wh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(Ne.fromString(e)),r=t.fu.next();t.Au.set(r,new qS(n)),t.du=t.du.insert(n,r),Gv(t.remoteStore,new Zn(fn(Ah(n.path)),r,"TargetPurposeLimboResolution",$l.ce))}}async function Do(t,e,n){const r=le(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((u,c)=>{o.push(r.pu(c,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Mh.As(c.targetId,h);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,h){const m=le(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>z.forEach(h,g=>z.forEach(g.Es,I=>m.persistence.referenceDelegate.addReference(p,g.targetId,I)).next(()=>z.forEach(g.ds,I=>m.persistence.referenceDelegate.removeReference(p,g.targetId,I)))))}catch(p){if(!Qs(p))throw p;Y(Oh,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const I=m.Ms.get(g),C=I.snapshotVersion,j=I.withLastLimboFreeSnapshotVersion(C);m.Ms=m.Ms.insert(g,j)}}}(r.localStore,i))}async function nb(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){Y(Hh,"User change. New user:",e.toKey());const r=await Bv(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(u=>{u.forEach(c=>{c.reject(new Q(L.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Do(n,r.Ls)}}function rb(t,e){const n=le(t),r=n.Au.get(e);if(r&&r.hu)return me().add(r.key);{let s=me();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const u=n.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}function ux(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ix.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JS.bind(null,e),e.Pu.H_=zS.bind(null,e.eventManager),e.Pu.yu=US.bind(null,e.eventManager),e}function sb(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eb.bind(null,e),e}class _l{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return lS(this.persistence,new iS,e.initialUser,this.serializer)}Cu(e){return new $v(Vh.mi,this.serializer)}Du(e){return new pS}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_l.provider={build:()=>new _l};class ib extends _l{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){xe(this.persistence.referenceDelegate instanceof vl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new qT(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new $v(r=>vl.mi(r,n),this.serializer)}}class _d{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>og(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nb.bind(null,this.syncEngine),await OS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FS}()}createDatastore(e){const n=Yl(e.databaseInfo.databaseId),r=function(i){return new _S(i)}(e.databaseInfo);return function(i,o,u,c){return new SS(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new NS(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>og(this.syncEngine,n,0),function(){return eg.v()?new eg:new gS}())}createSyncEngine(e,n){return function(s,i,o,u,c,h,m){const p=new HS(s,i,o,u,c,h);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=le(s);Y(Qr,"RemoteStore shutting down."),i.Ea.add(5),await Po(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}_d.provider={build:()=>new _d};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="FirestoreClient";class ob{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=Eh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Y(xr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Y(xr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Bh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nc(t,e){t.asyncQueue.verifyOperationInProgress(),Y(xr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Bv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function lg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ab(t);Y(xr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ng(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>ng(e.remoteStore,s)),t._onlineComponents=e}async function ab(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(xr,"Using user provided OfflineComponentProvider");try{await nc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ms("Error using user provided cache. Falling back to memory cache: "+n),await nc(t,new _l)}}else Y(xr,"Using default OfflineComponentProvider"),await nc(t,new ib(void 0));return t._offlineComponents}async function dx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(xr,"Using user provided OnlineComponentProvider"),await lg(t,t._uninitializedComponentsProvider._online)):(Y(xr,"Using default OnlineComponentProvider"),await lg(t,new _d))),t._onlineComponents}function lb(t){return dx(t).then(e=>e.syncEngine)}async function hx(t){const e=await dx(t),n=e.eventManager;return n.onListen=WS.bind(null,e.syncEngine),n.onUnlisten=KS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=YS.bind(null,e.syncEngine),n}function ub(t,e,n={}){const r=new Nn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const m=new cx({next:g=>{m.Nu(),o.enqueueAndForget(()=>ex(i,p));const I=g.docs.has(u);!I&&g.fromCache?h.reject(new Q(L.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&g.fromCache&&c&&c.source==="server"?h.reject(new Q(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new tx(Ah(u.path),m,{includeMetadataChanges:!0,qa:!0});return Zv(i,p)}(await hx(t),t.asyncQueue,e,n,r)),r.promise}function cb(t,e,n={}){const r=new Nn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const m=new cx({next:g=>{m.Nu(),o.enqueueAndForget(()=>ex(i,p)),g.fromCache&&c.source==="server"?h.reject(new Q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new tx(u,m,{includeMetadataChanges:!0,qa:!0});return Zv(i,p)}(await hx(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="firestore.googleapis.com",cg=!0;class dg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mx,this.ssl=cg}else this.host=e.host,this.ssl=e.ssl??cg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Uv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$T)throw new Q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fx(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new g2;switch(r.type){case"firstParty":return new _2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ug.get(n);r&&(Y("ComponentProvider","Removing Datastore"),ug.delete(n),r.terminate())}(this),Promise.resolve()}}function db(t,e,n,r={}){var h;t=yn(t,Zl);const s=xh(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(Bw(`https://${u}`),Gw("Firestore",!0)),i.host!==mx&&i.host!==u&&Ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:u,ssl:s,emulatorOptions:r};if(!ll(c,o)&&(t._setSettings(c),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=yt.MOCK_USER;else{m=qw(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new yt(g)}t._authCredentials=new y2(new Zy(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qe(this.firestore,e,this._key)}toJSON(){return{type:qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ko(n,qe._jsonSchema))return new qe(e,r||null,new te(Ne.fromString(n.referencePath)))}}qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:Ke("string",qe._jsonSchemaVersion),referencePath:Ke("string")};class dr extends Zr{constructor(e,n,r){super(e,n,Ah(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new te(e))}withConverter(e){return new dr(this.firestore,e,this._path)}}function _n(t,e,...n){if(t=Rn(t),ev("collection","path",e),t instanceof Zl){const r=Ne.fromString(e,...n);return Sp(r),new dr(t,null,r)}{if(!(t instanceof qe||t instanceof dr))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Sp(r),new dr(t.firestore,null,r)}}function nt(t,e,...n){if(t=Rn(t),arguments.length===1&&(e=Eh.newId()),ev("doc","path",e),t instanceof Zl){const r=Ne.fromString(e,...n);return Tp(r),new qe(t,null,new te(r))}{if(!(t instanceof qe||t instanceof dr))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Tp(r),new qe(t.firestore,t instanceof dr?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="AsyncQueue";class fg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Hv(this,"async_queue_retry"),this._c=()=>{const r=tc();r&&Y(hg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=tc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=tc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Nn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qs(e))throw e;Y(hg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Pn("INTERNAL UNHANDLED ERROR: ",mg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=$h.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&se(47125,{Pc:mg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function mg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Xs extends Zl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new fg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fg(e),this._firestoreClient=void 0,await e}}}function hb(t,e){const n=typeof t=="object"?t:r2(),r=typeof t=="string"?t:hl,s=JE(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Uw("firestore");i&&db(s,...i)}return s}function Gh(t){if(t._terminated)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||fb(t),t._firestoreClient}function fb(t){var r,s,i;const e=t._freezeSettings(),n=function(u,c,h,m){return new O2(u,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,fx(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ob(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bt(ht.fromBase64String(e))}catch(n){throw new Q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bt(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ko(e,Bt._jsonSchema))return Bt.fromBase64String(e.bytes)}}Bt._jsonSchemaVersion="firestore/bytes/1.0",Bt._jsonSchema={type:Ke("string",Bt._jsonSchemaVersion),bytes:Ke("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pn._jsonSchemaVersion}}static fromJSON(e){if(ko(e,pn._jsonSchema))return new pn(e.latitude,e.longitude)}}pn._jsonSchemaVersion="firestore/geoPoint/1.0",pn._jsonSchema={type:Ke("string",pn._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ko(e,gn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gn(e.vectorValues);throw new Q(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gn._jsonSchemaVersion="firestore/vectorValue/1.0",gn._jsonSchema={type:Ke("string",gn._jsonSchemaVersion),vectorValues:Ke("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=/^__.*__$/;class pb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Sr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ro(e,this.data,n,this.fieldTransforms)}}class px{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Sr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se(40011,{Ac:t})}}class Kh{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(gx(this.Ac)&&mb.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yl(e)}Cc(e,n,r,s=!1){return new Kh({Ac:e,methodName:n,Dc:r,path:ut.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yh(t){const e=t._freezeSettings(),n=Yl(t._databaseId);return new gb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yb(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Xh("Data must be an object, but it was:",o,r);const u=yx(r,o);let c,h;if(i.merge)c=new Mt(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=wd(e,p,n);if(!o.contains(g))throw new Q(L.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);xx(m,g)||m.push(g)}c=new Mt(m),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new pb(new At(u),c,h)}class tu extends Qh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tu}}function vb(t,e,n,r){const s=t.Cc(1,e,n);Xh("Data must be an object, but it was:",s,r);const i=[],o=At.empty();Tr(r,(c,h)=>{const m=Jh(e,c,n);h=Rn(h);const p=s.yc(m);if(h instanceof tu)i.push(m);else{const g=Vo(h,p);g!=null&&(i.push(m),o.set(m,g))}});const u=new Mt(i);return new px(o,u,s.fieldTransforms)}function xb(t,e,n,r,s,i){const o=t.Cc(1,e,n),u=[wd(e,r,n)],c=[s];if(i.length%2!=0)throw new Q(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)u.push(wd(e,i[g])),c.push(i[g+1]);const h=[],m=At.empty();for(let g=u.length-1;g>=0;--g)if(!xx(h,u[g])){const I=u[g];let C=c[g];C=Rn(C);const j=o.yc(I);if(C instanceof tu)h.push(I);else{const P=Vo(C,j);P!=null&&(h.push(I),m.set(I,P))}}const p=new Mt(h);return new px(m,p,o.fieldTransforms)}function _b(t,e,n,r=!1){return Vo(n,t.Cc(r?4:3,e))}function Vo(t,e){if(vx(t=Rn(t)))return Xh("Unsupported field value:",e,t),yx(t,e);if(t instanceof Qh)return function(r,s){if(!gx(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=Vo(u,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ke.fromDate(r);return{timestampValue:yl(s.serializer,i)}}if(r instanceof ke){const i=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yl(s.serializer,i)}}if(r instanceof pn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bt)return{bytesValue:Dv(s.serializer,r._byteString)};if(r instanceof qe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ph(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gn)return function(o,u){return{mapValue:{fields:{[uv]:{stringValue:cv},[fl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return Ch(u.serializer,h)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Ul(r)}`)}(t,e)}function yx(t,e){const n={};return rv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tr(t,(r,s)=>{const i=Vo(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function vx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof pn||t instanceof Bt||t instanceof qe||t instanceof Qh||t instanceof gn)}function Xh(t,e,n){if(!vx(n)||!tv(n)){const r=Ul(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function wd(t,e,n){if((e=Rn(e))instanceof eu)return e._internalPath;if(typeof e=="string")return Jh(t,e);throw wl("Field path arguments must be of type string or ",t,!1,void 0,n)}const wb=new RegExp("[~\\*/\\[\\]]");function Jh(t,e,n){if(e.search(wb)>=0)throw wl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new eu(...e.split("."))._internalPath}catch{throw wl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Q(L.INVALID_ARGUMENT,u+t+c)}function xx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Eb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Eb extends _x{data(){return super.data()}}function nu(t,e){return typeof e=="string"?Jh(t,e):e instanceof eu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zh{}class wx extends Zh{}function qn(t,e,...n){let r=[];e instanceof Zh&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof ef).length,u=i.filter(c=>c instanceof ru).length;if(o>1||o>0&&u>0)throw new Q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ru extends wx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ru(e,n,r)}_apply(e){const n=this._parse(e);return Ex(e._query,n),new Zr(e.firestore,e.converter,cd(e._query,n))}_parse(e){const n=Yh(e.firestore);return function(i,o,u,c,h,m,p){let g;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){yg(p,m);const C=[];for(const j of p)C.push(gg(c,i,j));g={arrayValue:{values:C}}}else g=gg(c,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||yg(p,m),g=_b(u,o,p,m==="in"||m==="not-in");return Qe.create(h,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Si(t,e,n){const r=e,s=nu("where",t);return ru._create(s,r,n)}class ef extends Zh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ef(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)Ex(o,c),o=cd(o,c)}(e._query,n),new Zr(e.firestore,e.converter,cd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tf extends wx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new tf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _o(i,o)}(e._query,this._field,this._direction);return new Zr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ks(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function pg(t,e="asc"){const n=e,r=nu("orderBy",t);return tf._create(r,n)}function gg(t,e,n){if(typeof(n=Rn(n))=="string"){if(n==="")throw new Q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vv(e)&&n.indexOf("/")!==-1)throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!te.isDocumentKey(r))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jp(t,new te(r))}if(n instanceof qe)return jp(t,n._key);throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ul(n)}.`)}function yg(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ex(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Sb{convertValue(e,n="none"){switch(yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Tr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[fl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>$e(o.doubleValue));return new gn(n)}convertGeoPoint(e){return new pn($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ql(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yo(e));default:return null}}convertTimestamp(e){const n=pr(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);xe(zv(r),9688,{name:e});const s=new vo(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Pn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Vi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ur extends _x{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Va(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ur._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ur._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ur._jsonSchema={type:Ke("string",Ur._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class Va extends Ur{data(e={}){return super.data(e)}}class As{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Vi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Va(this._firestore,this._userDataWriter,r.key,r,new Vi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new Va(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Vi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new Va(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Vi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),m=o.indexOf(u.doc.key)),{type:Nb(u.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=As._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Eh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Nb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){t=yn(t,qe);const e=yn(t.firestore,Xs);return ub(Gh(e),t._key).then(n=>Ib(e,t,n))}As._jsonSchemaVersion="firestore/querySnapshot/1.0",As._jsonSchema={type:Ke("string",As._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class Tx extends Sb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function an(t){t=yn(t,Zr);const e=yn(t.firestore,Xs),n=Gh(e),r=new Tx(e);return Tb(t._query),cb(n,t._query).then(s=>new As(e,r,t,s))}function Hn(t,e,n){t=yn(t,qe);const r=yn(t.firestore,Xs),s=bb(t.converter,e,n);return nf(r,[yb(Yh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,en.none())])}function bi(t,e,n,...r){t=yn(t,qe);const s=yn(t.firestore,Xs),i=Yh(s);let o;return o=typeof(e=Rn(e))=="string"||e instanceof eu?xb(i,"updateDoc",t._key,e,n,r):vb(i,"updateDoc",t._key,e),nf(s,[o.toMutation(t._key,en.exists(!0))])}function ga(t){return nf(yn(t.firestore,Xs),[new kh(t._key,en.none())])}function nf(t,e){return function(r,s){const i=new Nn;return r.asyncQueue.enqueueAndForget(async()=>XS(await lb(r),s,i)),i.promise}(Gh(t),e)}function Ib(t,e,n){const r=n.docs.get(e._key),s=new Tx(t);return new Ur(t,s,e._key,r,new Vi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Ws=s})(n2),cl(new mo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new Xs(new v2(r.getProvider("auth-internal")),new w2(o,r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vo(h.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Ns(xp,_p,e),Ns(xp,_p,"esm2020")})();const Ed={apiKey:"AIzaSyAO32W5Qdmdbt9mtp_ScyQE2fO5bEYC3LU",authDomain:"yj-order.firebaseapp.com",projectId:"yj-order",storageBucket:"yj-order.firebasestorage.app",messagingSenderId:"399409684502",appId:"1:399409684502:web:33a5660e855671d3211537"},Ab=By(Ed),Ee=hb(Ab),Cb=!!Ed.apiKey&&!!Ed.projectId,je={ORDERS:"cofoodie_orders",MENU_CATEGORIES:"cofoodie_menus_v3",EMPLOYEES:"cofoodie_employees_v2",ANNOUNCEMENTS:"cofoodie_announcements",ADMIN_SETTINGS:"cofoodie_admin_settings",ADMIN_ACCOUNTS:"cofoodie_admin_accounts",SESSION:"cofoodie_session",SESSION_USER_ID:"cofoodie_session_user_id",FRONTEND_PASSWORD:"cofoodie_frontend_password"},kb=[],Rb=[],jb=[],Ni=[{id:"default_admin",name:"",username:"admin",password:"password",isSuperAdmin:!0}],ya="24664941";class Pb{get useCloud(){return Cb}async getOrders(){if(this.useCloud)try{const n=qn(_n(Ee,"orders"),pg("timestamp","desc"));return(await an(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){return console.error("Fetch Orders Error:",n),[]}const e=localStorage.getItem(je.ORDERS);return e?JSON.parse(e):[]}async saveOrder(e){if(this.useCloud){const{id:r,...s}=e;await Hn(nt(Ee,"orders",r),s);return}const n=await this.getOrders();n.push(e),localStorage.setItem(je.ORDERS,JSON.stringify(n))}async updateOrderStatus(e,n){if(this.useCloud){const i=nt(Ee,"orders",e);await bi(i,{status:n});return}const r=await this.getOrders(),s=r.findIndex(i=>i.id===e);s!==-1&&(r[s].status=n,localStorage.setItem(je.ORDERS,JSON.stringify(r)))}async toggleOrderPayment(e){if(this.useCloud){const s=nt(Ee,"orders",e),i=await vg(s);if(i.exists()){const o=i.data().isPaid;await bi(s,{isPaid:!o})}else console.error(`Order with ID ${e} not found for payment toggle.`);return}const n=await this.getOrders(),r=n.findIndex(s=>s.id===e);r!==-1&&(n[r].isPaid=!n[r].isPaid,localStorage.setItem(je.ORDERS,JSON.stringify(n)))}async deleteOrdersByContext(e,n){if(this.useCloud){try{const s=qn(_n(Ee,"orders"),Si("dateStr","==",e),Si("categoryLabel","==",n)),o=(await an(s)).docs.map(u=>ga(nt(Ee,"orders",u.id)));await Promise.all(o)}catch(s){console.error("Delete Orders Error:",s)}return}let r=await this.getOrders();r=r.filter(s=>!(s.dateStr===e&&s.categoryLabel===n)),localStorage.setItem(je.ORDERS,JSON.stringify(r))}async getMenuCategories(){if(this.useCloud){const n=qn(_n(Ee,"menus"));return(await an(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(je.MENU_CATEGORIES);return e?JSON.parse(e):kb}async saveMenuCategories(e){this.useCloud||localStorage.setItem(je.MENU_CATEGORIES,JSON.stringify(e))}async addMenuCategory(e,n){if(this.useCloud){const i="MENU_"+Date.now();await Hn(nt(Ee,"menus",i),{label:e,config:n});return}const r=await this.getMenuCategories(),s="MENU_"+Date.now();r.push({id:s,label:e,config:n}),await this.saveMenuCategories(r)}async updateMenuCategory(e,n,r){if(this.useCloud){await bi(nt(Ee,"menus",e),{label:n,config:r});return}const s=await this.getMenuCategories(),i=s.findIndex(o=>o.id===e);i!==-1&&(s[i].label=n,s[i].config=r,await this.saveMenuCategories(s))}async deleteMenuCategory(e){if(this.useCloud){await ga(nt(Ee,"menus",e));return}let n=await this.getMenuCategories();n=n.filter(r=>r.id!==e),await this.saveMenuCategories(n)}async getEmployees(){if(this.useCloud){const n=qn(_n(Ee,"employees"),pg("name"));return(await an(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(je.EMPLOYEES);return e?JSON.parse(e):Rb}async saveEmployees(e){this.useCloud||localStorage.setItem(je.EMPLOYEES,JSON.stringify(e))}async addEmployee(e){if(this.useCloud){const{id:r,...s}=e;await Hn(nt(Ee,"employees",r),s);return}const n=await this.getEmployees();n.push(e),await this.saveEmployees(n)}async updateEmployee(e){if(this.useCloud){await bi(nt(Ee,"employees",e.id),{name:e.name});return}const r=(await this.getEmployees()).map(s=>s.id===e.id?e:s);await this.saveEmployees(r)}async deleteEmployee(e){if(this.useCloud){await ga(nt(Ee,"employees",e));return}const r=(await this.getEmployees()).filter(s=>s.id!==e);await this.saveEmployees(r)}async getAnnouncements(){if(this.useCloud){const n=qn(_n(Ee,"announcements"));return(await an(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(je.ANNOUNCEMENTS);return e?JSON.parse(e):jb}async saveAnnouncements(e){if(this.useCloud){for(const n of e)await Hn(nt(Ee,"announcements",n.id),{content:n.content,isActive:n.isActive},{merge:!0});return}localStorage.setItem(je.ANNOUNCEMENTS,JSON.stringify(e))}async getAdminSettings(){if(this.useCloud)return{isGoogleBound:!0,googleAccountName:"Firebase Mode",googleAccountType:"WORKSPACE"};const e=localStorage.getItem(je.ADMIN_SETTINGS);return e?JSON.parse(e):{isGoogleBound:!1,googleAccountName:"",googleAccountType:"PERSONAL"}}async setGoogleBound(e,n="",r="PERSONAL"){const s={isGoogleBound:e,googleAccountName:n,googleAccountType:r};localStorage.setItem(je.ADMIN_SETTINGS,JSON.stringify(s))}async checkDatabaseConnection(){if(this.useCloud)try{return await an(_n(Ee,"admins")),!0}catch{return!1}return new Promise(e=>{setTimeout(()=>{e(!0)},1e3)})}async getAdminAccounts(){if(this.useCloud){const n=qn(_n(Ee,"admins")),s=(await an(n)).docs.map(i=>({id:i.id,...i.data()}));if(s.length===0){for(const i of Ni)await Hn(nt(Ee,"admins",i.id),{...i});return Ni}return s}const e=localStorage.getItem(je.ADMIN_ACCOUNTS);return e?JSON.parse(e):(localStorage.setItem(je.ADMIN_ACCOUNTS,JSON.stringify(Ni)),Ni)}async saveAdminAccounts(e){this.useCloud||localStorage.setItem(je.ADMIN_ACCOUNTS,JSON.stringify(e))}async verifyAdmin(e,n){if(this.useCloud){if(!Ee)return null;const i=_n(Ee,"admins");if((await an(i)).empty){console.log("No admins found in DB, seeding default admins...");for(const m of Ni)await Hn(nt(Ee,"admins",m.id),{...m})}const u=qn(i,Si("username","==",e),Si("password","==",n)),c=await an(u);if(c.empty)return null;const h=c.docs[0];return{id:h.id,...h.data()}}return(await this.getAdminAccounts()).find(i=>i.username===e&&i.password===n)||null}async getAdminById(e){return(await this.getAdminAccounts()).find(r=>r.id===e)}async addAdminAccount(e){if(this.useCloud){const r=qn(_n(Ee,"admins"),Si("username","==",e.username));if(!(await an(r)).empty)throw new Error("");const{id:i,...o}=e;await Hn(nt(Ee,"admins",i),o);return}const n=await this.getAdminAccounts();if(n.some(r=>r.username===e.username))throw new Error("");n.push(e),await this.saveAdminAccounts(n)}async updateAdminAccount(e){if(this.useCloud){const{id:s,...i}=e;await bi(nt(Ee,"admins",s),i);return}const n=await this.getAdminAccounts(),r=n.findIndex(s=>s.id===e.id);r!==-1&&(n[r]=e,await this.saveAdminAccounts(n))}async deleteAdminAccount(e){if(this.useCloud){await ga(nt(Ee,"admins",e));return}let n=await this.getAdminAccounts();n=n.filter(r=>r.id!==e),await this.saveAdminAccounts(n)}async getFrontendPassword(){if(this.useCloud){if(!Ee)return ya;try{const n=nt(Ee,"settings","global"),r=await vg(n);return r.exists()&&r.data().frontendPassword?r.data().frontendPassword:ya}catch(n){return console.error("Error fetching frontend password:",n),ya}}return localStorage.getItem(je.FRONTEND_PASSWORD)||ya}async setFrontendPassword(e){if(this.useCloud){await Hn(nt(Ee,"settings","global"),{frontendPassword:e},{merge:!0});return}localStorage.setItem(je.FRONTEND_PASSWORD,e)}setSession(e,n){localStorage.setItem(je.SESSION,e),n&&localStorage.setItem(je.SESSION_USER_ID,n)}getSession(){const e=localStorage.getItem(je.SESSION),n=localStorage.getItem(je.SESSION_USER_ID);return{role:e,userId:n}}clearSession(){localStorage.removeItem(je.SESSION),localStorage.removeItem(je.SESSION_USER_ID)}}const Db=new Pb,ee=Db;var Sx=(t=>(t.PENDING="PENDING",t.CONFIRMED="CONFIRMED",t.COMPLETED="COMPLETED",t.CANCELLED="CANCELLED",t))(Sx||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ne=(t,e)=>{const n=q.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...h},m)=>q.createElement("svg",{ref:m,...Vb,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Mb(t)}`,u].join(" "),...h},[...e.map(([p,g])=>q.createElement(p,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=ne("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=ne("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=ne("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=ne("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=ne("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=ne("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=ne("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=ne("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=ne("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=ne("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=ne("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=ne("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=ne("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=ne("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ne("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=ne("Link2Off",[["path",{d:"M9 17H7A5 5 0 0 1 7 7",key:"10o201"}],["path",{d:"M15 7h2a5 5 0 0 1 4 8",key:"1d3206"}],["line",{x1:"8",x2:"12",y1:"12",y2:"12",key:"rvw6j4"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=ne("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=ne("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=ne("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=ne("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=ne("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=ne("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=ne("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=ne("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=ne("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=ne("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=ne("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=ne("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=ne("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=ne("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=ne("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=ne("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=ne("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=ne("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=ne("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),mN=({onLogout:t,onGoToAdmin:e})=>{const[n,r]=q.useState([]),[s,i]=q.useState(""),[o,u]=q.useState("CARD"),[c,h]=q.useState(null),[m,p]=q.useState(null),[g,I]=q.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[C,j]=q.useState([]),[P,T]=q.useState(""),[w,N]=q.useState(""),[V,M]=q.useState(""),[O,x]=q.useState(""),[y,_]=q.useState("ALL"),[E,b]=q.useState([]),[A,S]=q.useState([]),[ve,K]=q.useState([]),[F,ie]=q.useState(new Date),H=U=>{const de=new Date(U),Z=de.getDay(),we=de.getDate()-Z+(Z===0?-6:1);return new Date(de.setDate(we))},G=new Date().toISOString().split("T")[0];q.useEffect(()=>{const U=setInterval(()=>ie(new Date),1e3);(async()=>{const[we,ft,Fe,ot]=await Promise.all([ee.getMenuCategories(),ee.getEmployees(),ee.getAnnouncements(),ee.getOrders()]);r(we);const Mn=Array.from(new Set(we.map(Nr=>Nr.label)));if(Mn.length>0&&!s){const Nr=Mn.includes("")?"":Mn[0];i(Nr)}b(ft),S(Fe.filter(Nr=>Nr.isActive)),K(ot)})();const Z=()=>{window.innerWidth>=1024&&I(!0)};return window.addEventListener("resize",Z),()=>{clearInterval(U),window.removeEventListener("resize",Z)}},[]),q.useEffect(()=>{if(!s)return;const U=n.filter(Z=>Z.label===s),de=U.find(Z=>Z.config.date===G);if(de)h(de);else if(U.length>0){const Z=[...U].sort((we,ft)=>ft.config.date.localeCompare(we.config.date));h(Z[0])}else h(null)},[s,n]);const J=Array.from(new Set(n.map(U=>U.label))),oe=n.filter(U=>U.label===s),_e=H(new Date),et=Array.from({length:5}).map((U,de)=>{const Z=new Date(_e);return Z.setDate(_e.getDate()+de),Z.toISOString().split("T")[0]}),He=["","","","",""],be=[{active:"bg-blue-50 text-blue-800 border-blue-600",hover:"hover:bg-blue-50 hover:text-blue-600",border:"border-blue-600",badge:"bg-blue-100 text-blue-700"},{active:"bg-emerald-50 text-emerald-800 border-emerald-600",hover:"hover:bg-emerald-50 hover:text-emerald-600",border:"border-emerald-600",badge:"bg-emerald-100 text-emerald-700"},{active:"bg-amber-50 text-amber-800 border-amber-600",hover:"hover:bg-amber-50 hover:text-amber-600",border:"border-amber-600",badge:"bg-amber-100 text-amber-700"},{active:"bg-rose-50 text-rose-800 border-rose-600",hover:"hover:bg-rose-50 hover:text-rose-600",border:"border-rose-600",badge:"bg-rose-100 text-rose-700"},{active:"bg-violet-50 text-violet-800 border-violet-600",hover:"hover:bg-violet-50 hover:text-violet-600",border:"border-violet-600",badge:"bg-violet-100 text-violet-700"}],k=U=>{if(!U)return"bg-slate-100 text-slate-500";const de=J.indexOf(U);if(de!==-1)return be[de%be.length].badge;const Z=U.split("").reduce((we,ft)=>we+ft.charCodeAt(0),0);return be[Z%be.length].badge},$=c?c.config.date<G:!1,re=()=>{if(!P){alert("");return}if(!w){alert("");return}if(!O){alert("");return}const U={id:Date.now().toString(),name:w,note:V,price:Number(O)};j([...C,U]),N(""),M(""),x("")},ue=async()=>{if(!P||C.length===0){alert("");return}const U=E.find(we=>we.id===P),de={id:Date.now().toString(),employeeName:U?U.name:"Unknown",items:C,totalAmount:C.reduce((we,ft)=>we+ft.price,0),timestamp:Date.now(),status:Sx.PENDING,dateStr:G,categoryLabel:s};await ee.saveOrder(de),alert(""),j([]),T("");const Z=await ee.getOrders();K(Z)},De=ve.filter(U=>U.dateStr===G).sort((U,de)=>de.timestamp-U.timestamp),br=Array.from(new Set(De.map(U=>U.categoryLabel||""))),Zs=De.filter(U=>y==="ALL"||(U.categoryLabel||"")===y),xn=s===""||s==="";return l.jsxs("div",{className:"min-h-screen bg-slate-50 pb-32",children:[l.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:[l.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 flex justify-between items-center text-sm",children:[l.jsxs("div",{className:"font-mono flex items-center gap-2",children:[l.jsx(rc,{size:14}),F.toLocaleDateString("zh-TW")," ",F.toLocaleTimeString("zh-TW",{hour12:!1})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:e,className:"flex items-center gap-1 text-slate-300 hover:text-white text-xs transition-colors",children:[l.jsx(qb,{size:14})," "]}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white text-xs",children:"Exit"})]})]}),l.jsx("div",{className:"bg-gradient-to-r from-amber-400 via-orange-500 to-amber-400 text-white font-bold overflow-hidden whitespace-nowrap py-2 shadow-inner",children:l.jsx("div",{className:"inline-block animate-marquee pl-full",children:A.map((U,de)=>l.jsxs("span",{className:"mx-8 drop-shadow-sm",children:[" ",U.content]},de))})}),l.jsx("div",{className:"text-center py-4 bg-white border-b border-slate-100",children:l.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:""})}),l.jsx("div",{className:"flex justify-center border-b border-slate-200 overflow-x-auto px-4 bg-white",children:J.length===0?l.jsxs("div",{className:"p-4 text-slate-400 text-sm flex items-center gap-2",children:[l.jsx($b,{size:16})," "]}):J.map((U,de)=>{const Z=be[de%be.length],we=s===U;return l.jsx("button",{onClick:()=>{i(U),u("CARD")},className:`px-6 md:px-8 py-3 text-lg font-bold rounded-t-lg transition-all whitespace-nowrap border-b-4 mx-1 ${we?Z.active:`border-transparent text-slate-500 bg-transparent ${Z.hover}`}`,children:U},U)})})]}),l.jsxs("main",{className:"container mx-auto p-4 md:p-6 space-y-8",children:[l.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg shadow-sm border border-slate-200 cursor-pointer lg:cursor-auto select-none",onClick:()=>window.innerWidth<1024&&I(!g),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(Td,{className:"text-primary"}),s," - ",xn?"":""]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"lg:hidden text-slate-400 flex items-center gap-1 text-xs",children:g?l.jsxs(l.Fragment,{children:[" ",l.jsx(zb,{size:20})]}):l.jsxs(l.Fragment,{children:[" ",l.jsx(Fb,{size:20})]})}),l.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1 shadow-inner",onClick:U=>U.stopPropagation(),children:[l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded flex items-center gap-2 transition-colors ${o==="CARD"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,title:"",children:l.jsx(Js,{size:18})}),l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded flex items-center gap-2 transition-colors ${o==="LIST"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,title:"",children:l.jsx(Qb,{size:18})})]})]})]}),g&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 duration-300",children:[xn&&o==="CARD"&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:et.map((U,de)=>{const Z=oe.find(Fe=>Fe.config.date===U),we=U===G,ft=(c==null?void 0:c.id)===(Z==null?void 0:Z.id);return l.jsxs("div",{onClick:()=>Z&&h(Z),className:`relative flex flex-col rounded-xl overflow-hidden transition-all cursor-pointer border-2 ${we?"border-amber-400 shadow-lg ring-2 ring-amber-100 scale-[1.02] z-10":"border-slate-200 hover:border-blue-300"} ${ft?"ring-2 ring-primary":""} bg-white`,children:[l.jsxs("div",{className:`p-2 text-center font-bold text-sm ${we?"bg-amber-400 text-white":"bg-slate-100 text-slate-600"}`,children:[He[de]," ",l.jsx("span",{className:"text-xs font-normal opacity-90 block",children:U.slice(5)})]}),l.jsx("div",{className:"flex-1 min-h-[140px] flex items-center justify-center bg-slate-50 relative group flex-col",children:Z?l.jsxs(l.Fragment,{children:[Z.config.imageUrl?l.jsx("img",{src:Z.config.imageUrl,alt:"Menu",className:"w-full h-full object-cover absolute inset-0"}):l.jsxs("div",{className:"text-xs text-slate-400 flex flex-col items-center z-10",children:[l.jsx(To,{size:24})," ",l.jsx("span",{children:""})]}),l.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-2 z-10",children:[l.jsx("div",{className:"text-white text-xs font-bold truncate",children:Z.config.shopName}),Z.config.cutoffTime&&l.jsxs("div",{className:"text-red-500 text-xs font-bold bg-white/90 px-1 rounded backdrop-blur-sm mt-1 inline-block",children:[": ",Z.config.cutoffTime]})]})]}):l.jsx("div",{className:"text-slate-300 text-xs",children:""})}),we&&l.jsx("div",{className:"absolute top-1 right-1 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-full shadow animate-pulse z-20",children:"Today"})]},U)})}),xn&&o==="LIST"&&l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsx("div",{className:"grid grid-cols-1 divide-y divide-slate-100",children:et.map((U,de)=>{const Z=oe.find(Fe=>Fe.config.date===U),we=U===G,ft=(c==null?void 0:c.id)===(Z==null?void 0:Z.id);return l.jsxs("div",{onClick:()=>Z&&h(Z),className:`p-4 flex flex-col sm:flex-row sm:items-center gap-4 transition-all cursor-pointer relative ${we?"bg-amber-50/60 hover:bg-amber-100/50":"hover:bg-slate-50"} ${ft?"bg-blue-50/40 ring-1 ring-inset ring-primary":""}`,children:[we&&l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 bg-amber-400"}),l.jsxs("div",{className:"sm:w-40 flex-shrink-0 flex items-center gap-2 pl-2",children:[l.jsx("div",{className:`font-bold text-lg ${we?"text-amber-700":"text-slate-600"}`,children:He[de]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs text-slate-400 font-mono",children:U}),we&&l.jsx("span",{className:"inline-block px-1.5 py-0.5 rounded-full bg-red-500 text-white text-[10px] font-bold w-fit mt-0.5",children:"Today"})]})]}),l.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[l.jsxs("div",{className:"w-20 h-14 bg-slate-100 rounded overflow-hidden flex-shrink-0 border border-slate-200 shadow-sm relative",children:[Z!=null&&Z.config.imageUrl?l.jsx("img",{src:Z.config.imageUrl,className:"w-full h-full object-cover",alt:"thumb"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(To,{size:16})}),!Z&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-50 text-[10px] text-slate-400",children:""})]}),l.jsx("div",{className:"flex-1 min-w-0",children:Z?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"font-bold text-slate-800 text-base truncate",children:Z.config.shopName}),Z.config.cutoffTime?l.jsxs("div",{className:"text-xs font-bold text-red-600 flex items-center gap-1 mt-1",children:[l.jsx(rc,{size:12})," : ",Z.config.cutoffTime]}):l.jsx("div",{className:"text-xs text-slate-400 mt-1",children:""})]}):l.jsx("span",{className:"text-slate-400 italic text-sm",children:"--  --"})})]}),l.jsx("div",{className:"text-right flex-shrink-0",children:Z?l.jsx("button",{className:`px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition-all border ${ft?"bg-primary text-white border-primary shadow-md":"bg-white border-slate-300 text-slate-600 hover:border-primary hover:text-primary"}`,children:ft?"":""}):l.jsx("button",{disabled:!0,className:"px-4 py-2 rounded-lg text-sm text-slate-300 border border-slate-100 bg-slate-50 cursor-not-allowed",children:""})})]},U)})})}),!xn&&o==="CARD"&&l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[oe.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-8",children:""}),oe.map(U=>{const de=(c==null?void 0:c.id)===U.id;return l.jsxs("div",{onClick:()=>h(U),className:`bg-white rounded-xl shadow-sm border transition-all cursor-pointer overflow-hidden group hover:shadow-md ${de?"border-primary ring-2 ring-primary/20":"border-slate-200 hover:border-blue-300"}`,children:[l.jsxs("div",{className:"aspect-video bg-slate-100 relative",children:[U.config.imageUrl?l.jsx("img",{src:U.config.imageUrl,alt:"item",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(Td,{size:32})}),l.jsx("div",{className:"absolute top-2 right-2 bg-white/90 backdrop-blur px-2 py-1 rounded text-xs font-bold shadow text-slate-700",children:U.config.date})]}),l.jsxs("div",{className:"p-3",children:[l.jsx("h3",{className:"font-bold text-slate-800 truncate",children:U.config.shopName}),U.config.cutoffTime&&l.jsxs("div",{className:"text-sm font-bold text-red-600 mt-1",children:[": ",U.config.date," ",U.config.cutoffTime]}),l.jsx("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:""})]})]},U.id)})]}),!xn&&o==="LIST"&&l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 text-slate-600 font-semibold w-32",children:""}),l.jsx("th",{className:"p-4 text-slate-600 font-semibold",children:" / "}),l.jsx("th",{className:"p-4 text-slate-600 font-semibold text-right",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[oe.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-8 text-center text-slate-400",children:""})}),oe.sort((U,de)=>de.config.date.localeCompare(U.config.date)).map(U=>l.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${(c==null?void 0:c.id)===U.id?"bg-blue-50/50":""}`,children:[l.jsx("td",{className:"p-4 text-slate-600 font-mono text-sm",children:U.config.date}),l.jsxs("td",{className:"p-4",children:[l.jsx("div",{className:"font-bold text-slate-800",children:U.config.shopName}),U.config.cutoffTime&&l.jsxs("div",{className:"text-red-600 text-sm font-bold mt-1",children:[": ",U.config.date," ",U.config.cutoffTime]})]}),l.jsx("td",{className:"p-4 text-right",children:l.jsx("button",{onClick:()=>h(U),className:"px-4 py-2 bg-white border border-slate-300 rounded text-sm font-medium hover:bg-primary hover:text-white hover:border-primary transition-colors shadow-sm",children:""})})]},U.id))]})]})})]}),c&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 pt-4",children:[l.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(oN,{className:"text-amber-400 fill-amber-400"})," ",c.config.shopName]}),c.config.cutoffTime&&l.jsxs("div",{className:"text-red-600 font-bold mt-1 flex items-center gap-1 animate-pulse",children:[l.jsx(rc,{size:16})," : ",c.config.date," ",c.config.cutoffTime]})]}),l.jsx("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded",children:c.config.date})]}),l.jsx("div",{className:"w-full bg-white rounded-xl shadow border border-slate-200 overflow-hidden cursor-zoom-in group relative",onClick:()=>c.config.imageUrl&&p(c.config.imageUrl),children:c.config.imageUrl?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:c.config.imageUrl,alt:"Menu Detail",className:"w-full h-auto max-h-[500px] object-contain"}),l.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all flex items-center justify-center",children:l.jsxs("div",{className:"opacity-0 group-hover:opacity-100 bg-white px-4 py-2 rounded-full shadow-lg font-bold flex items-center gap-2 transform translate-y-2 group-hover:translate-y-0 transition-all",children:[l.jsx(kx,{size:18})," "]})})]}):l.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:""})})]}),l.jsxs("div",{className:"lg:col-span-7 bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden flex flex-col relative",children:[$&&l.jsx("div",{className:"absolute inset-0 bg-slate-100/60 z-20 flex items-center justify-center backdrop-blur-[2px]",children:l.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl text-center border-2 border-red-100 max-w-sm",children:[l.jsx("div",{className:"bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:l.jsx(Sl,{size:32})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:""}),l.jsx("p",{className:"text-slate-500",children:""})]})}),l.jsx("div",{className:`${$?"bg-slate-400":"bg-slate-800"} text-white p-4 transition-colors`,children:l.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(iN,{size:20})," "]})}),l.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"1. "}),l.jsxs("select",{disabled:$,value:P,onChange:U=>T(U.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none disabled:bg-slate-100 disabled:text-slate-400",children:[l.jsx("option",{value:"",children:"--  --"}),E.map(U=>l.jsx("option",{value:U.id,children:U.name},U.id))]})]}),l.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-100 space-y-3",children:[l.jsx("div",{className:"text-sm font-bold text-slate-700 border-b pb-2 mb-2",children:"2. "}),l.jsx("input",{disabled:$,placeholder:" (: )",value:w,onChange:U=>N(U.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsx("input",{disabled:$,type:"number",placeholder:"",value:O,onChange:U=>x(U.target.value===""?"":Number(U.target.value)),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsx("input",{disabled:$,placeholder:" (: )",value:V,onChange:U=>M(U.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsxs("button",{disabled:$,onClick:re,className:"w-full py-2 bg-secondary text-white rounded hover:bg-slate-700 text-sm font-bold flex items-center justify-center gap-2 disabled:bg-slate-400 disabled:cursor-not-allowed",children:[l.jsx(eN,{size:16})," "]})]})]}),l.jsxs("div",{className:"flex flex-col bg-amber-50 rounded-lg border border-amber-100 p-4",children:[l.jsx("h3",{className:"text-sm font-bold text-amber-800 mb-3",children:""}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-[200px] space-y-2 mb-3 pr-1 custom-scrollbar",children:C.length===0?l.jsx("p",{className:"text-xs text-amber-600/60 text-center py-4",children:""}):C.map((U,de)=>l.jsxs("div",{className:"bg-white p-2 rounded shadow-sm flex justify-between items-start text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800",children:U.name}),U.note&&l.jsx("div",{className:"text-xs text-slate-500",children:U.note})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"font-medium",children:["$",U.price]}),l.jsx("button",{disabled:$,onClick:()=>j(C.filter((Z,we)=>we!==de)),className:"text-red-400 hover:text-red-600 disabled:text-slate-300",children:l.jsx(So,{size:14})})]})]},de))}),l.jsxs("div",{className:"pt-3 border-t border-amber-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),l.jsxs("span",{className:"text-xl font-bold text-primary",children:["$",C.reduce((U,de)=>U+de.price,0)]})]}),l.jsx("button",{onClick:ue,disabled:C.length===0||$,className:`w-full py-3 rounded font-bold transition-all ${C.length>0&&!$?"bg-primary text-white hover:bg-blue-700 shadow":"bg-slate-300 text-slate-500 cursor-not-allowed"}`,children:""}),l.jsx("p",{className:"text-xs text-red-500 font-bold mt-2 text-center",children:""})]})]})]})]})]}),l.jsxs("section",{className:"bg-white rounded-xl shadow border border-slate-200 overflow-hidden",children:[l.jsx("div",{className:"bg-slate-100 p-4 border-b border-slate-200",children:l.jsxs("h2",{className:"font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(Gb,{size:20,className:"text-primary"})," "]})}),l.jsxs("div",{className:"p-3 border-b border-slate-100 flex gap-2 overflow-x-auto",children:[l.jsx("button",{onClick:()=>_("ALL"),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${y==="ALL"?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),br.map(U=>{const de=y===U;return l.jsx("button",{onClick:()=>_(U),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors border ${de?"bg-slate-800 text-white":"bg-white border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:U},U)})]}),l.jsx("div",{className:"p-0 divide-y divide-slate-100",children:Zs.length===0?l.jsx("div",{className:"p-8 text-center text-slate-400",children:""}):Zs.map(U=>{const de=k(U.categoryLabel);return l.jsxs("div",{className:"p-4 flex items-center gap-4 hover:bg-slate-50",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 flex-shrink-0",children:l.jsx(Cx,{size:16})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-slate-800",children:U.employeeName}),U.categoryLabel&&l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${de}`,children:U.categoryLabel})]}),l.jsx("span",{className:"text-xs text-slate-400 flex-shrink-0",children:new Date(U.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})})]}),l.jsx("div",{className:"text-sm text-slate-600 truncate",children:U.items.map(Z=>`${Z.name}${Z.note?`(${Z.note})`:""}`).join(", ")})]})]},U.id)})})]})]}),m&&l.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4 cursor-zoom-out backdrop-blur-sm",onClick:()=>p(null),children:[l.jsx("img",{src:m,alt:"Zoom",className:"max-w-full max-h-[90vh] rounded shadow-2xl animate-in fade-in zoom-in duration-200"}),l.jsx("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white",children:l.jsx(So,{size:32})})]}),l.jsx("style",{children:"@keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } } .animate-marquee { animation: marquee 20s linear infinite; } .pl-full { padding-left: 100%; } .custom-scrollbar::-webkit-scrollbar { width: 4px; } .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }"})]})},pN=[{id:"MENU_001",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&auto=format&fit=crop&q=60",shopName:"",date:new Date().toISOString().split("T")[0],cutoffTime:"10:30",options:[{id:"opt_1",label:"",price:100},{id:"opt_2",label:"",price:110},{id:"opt_3",label:"",price:120},{id:"opt_4",label:"",price:130},{id:"opt_5",label:"",price:90}]}},{id:"MENU_002",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?w=800&auto=format&fit=crop&q=60",shopName:"50 ()",date:new Date().toISOString().split("T")[0],cutoffTime:"14:00",options:[{id:"drink_1",label:" (L)",price:35},{id:"drink_2",label:" (L)",price:55},{id:"drink_3",label:" (M)",price:60},{id:"drink_4",label:" (L)",price:35},{id:"drink_5",label:" (L)",price:50},{id:"drink_6",label:" (L)",price:65}]}},{id:"MENU_003",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1511920170033-f8396924c348?w=800&auto=format&fit=crop&q=60",shopName:"",date:new Date().toISOString().split("T")[0],cutoffTime:"15:00",options:[{id:"tea_1",label:" ()",price:110},{id:"tea_2",label:" ()",price:135},{id:"tea_3",label:" ()",price:155},{id:"tea_4",label:" ()",price:145},{id:"tea_5",label:" ()",price:125}]}}],gN=[{id:"EMP_001",name:""},{id:"EMP_002",name:""},{id:"EMP_003",name:""},{id:"EMP_004",name:""},{id:"EMP_005",name:""}],yN=[{id:"ANN_001",content:" ",isActive:!0},{id:"ANN_002",content:"  10:30 ",isActive:!0},{id:"ANN_003",content:" ",isActive:!0}],vN=async()=>{console.log("Starting full database seed...");let t=0;try{if((await ee.getMenuCategories()).length===0){console.log("Seeding menus...");for(const s of pN)await ee.addMenuCategory(s.label,s.config);t++}else console.log("Menus already exist.");if((await ee.getEmployees()).length===0){console.log("Seeding employees...");for(const s of gN)await ee.addEmployee(s);t++}else console.log("Employees already exist.");(await ee.getAnnouncements()).length===0?(console.log("Seeding announcements..."),await ee.saveAnnouncements(yN),t++):console.log("Announcements already exist."),t>0?(console.log("Database seed completed!"),alert(`
`),window.location.reload()):alert(`
`)}catch(e){console.error("Seeding failed:",e),alert(" Console")}},ic=[{label:"",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200",tab:"data-[state=active]:bg-blue-600"},{label:"",bg:"bg-emerald-100",text:"text-emerald-700",border:"border-emerald-200",tab:"data-[state=active]:bg-emerald-600"},{label:"",bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-200",tab:"data-[state=active]:bg-amber-600"},{label:"",bg:"bg-rose-100",text:"text-rose-700",border:"border-rose-200",tab:"data-[state=active]:bg-rose-600"},{label:"",bg:"bg-violet-100",text:"text-violet-700",border:"border-violet-200",tab:"data-[state=active]:bg-violet-600"}],Yn=t=>{if(!t)return{bg:"bg-slate-100",text:"text-slate-500",border:"border-slate-200",tab:""};const e=ic.find(r=>r.label===t);if(e)return e;const n=t.split("").reduce((r,s)=>r+s.charCodeAt(0),0)%ic.length;return ic[n]},xN=()=>l.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),l.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),l.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),l.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),_N=({onLogout:t,onGoToFrontend:e,currentUser:n})=>{const[r,s]=q.useState("ORDERS"),[i,o]=q.useState({}),[u,c]=q.useState(!1);q.useEffect(()=>{ee.getAdminSettings().then(o)},[]);const h=async(g,I)=>{await ee.setGoogleBound(!0,g,I);const C=await ee.getAdminSettings();o(C)},m=()=>{switch(r){case"ORDERS":return l.jsx(Tg,{});case"MENU":return l.jsx(wN,{});case"EMPLOYEES":return l.jsx(EN,{});case"ANNOUNCEMENTS":return l.jsx(TN,{});case"SYSTEM":return l.jsx(SN,{settings:i,onBind:h,currentUser:n});default:return l.jsx(Tg,{})}},p=()=>{switch(r){case"ORDERS":return"";case"MENU":return"";case"EMPLOYEES":return"";case"ANNOUNCEMENTS":return"";case"SYSTEM":return"";default:return""}};return l.jsxs("div",{className:"flex h-screen bg-slate-100 relative overflow-hidden",children:[u&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>c(!1)}),l.jsxs("aside",{className:`fixed md:relative z-50 w-64 h-full bg-slate-900 text-white flex flex-col shadow-lg transition-transform duration-300 ease-in-out ${u?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:[l.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-xl font-bold tracking-wide",children:["",l.jsx("br",{}),""]}),l.jsx("p",{className:"text-xs text-slate-400 mt-2",children:""})]}),l.jsx("button",{onClick:()=>c(!1),className:"md:hidden text-slate-400 hover:text-white",children:l.jsx(So,{size:24})})]}),l.jsxs("div",{className:"px-6 py-4 flex items-center gap-3 bg-slate-800/50 border-b border-slate-800",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-slate-300 font-bold",children:n.name.charAt(0)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-bold text-white truncate",children:n.name}),l.jsxs("div",{className:"text-xs text-emerald-400 flex items-center gap-1",children:[l.jsx(Ax,{size:10})," ",n.isSuperAdmin?"":""]})]})]}),l.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[l.jsx(Ii,{icon:l.jsx(sN,{size:20}),label:"",active:r==="ORDERS",onClick:()=>{s("ORDERS"),c(!1)}}),l.jsx(Ii,{icon:l.jsx(dN,{size:20}),label:"",active:r==="MENU",onClick:()=>{s("MENU"),c(!1)}}),l.jsx(Ii,{icon:l.jsx(cN,{size:20}),label:"",active:r==="EMPLOYEES",onClick:()=>{s("EMPLOYEES"),c(!1)}}),l.jsx(Ii,{icon:l.jsx(Yb,{size:20}),label:"",active:r==="ANNOUNCEMENTS",onClick:()=>{s("ANNOUNCEMENTS"),c(!1)}}),l.jsx(Ii,{icon:l.jsx(nN,{size:20}),label:"",active:r==="SYSTEM",onClick:()=>{s("SYSTEM"),c(!1)}})]}),l.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-2",children:[l.jsxs("button",{onClick:e,className:"flex items-center gap-3 w-full px-4 py-2 text-slate-300 hover:text-white hover:bg-slate-800 rounded transition-colors",children:[l.jsx(Td,{size:20}),l.jsx("span",{children:""})]}),l.jsxs("button",{onClick:t,className:"flex items-center gap-3 w-full px-4 py-2 text-red-400 hover:bg-slate-800 rounded transition-colors",children:[l.jsx(Kb,{size:20}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:[l.jsxs("header",{className:"md:hidden bg-slate-900 text-white p-4 flex items-center justify-between shadow-md shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>c(!0),className:"text-white hover:text-slate-300",children:l.jsx(Xb,{size:24})}),l.jsx("h2",{className:"font-bold text-lg",children:p()})]}),l.jsx("div",{className:"text-xs text-slate-400",children:n.username})]}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 w-full bg-slate-100",children:m()})]})]})},Ii=({icon:t,label:e,active:n,onClick:r})=>l.jsxs("button",{onClick:r,className:`flex items-center gap-3 w-full px-4 py-3 rounded transition-colors ${n?"bg-primary text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[t,l.jsx("span",{className:"font-medium",children:e})]}),Tg=()=>{const[t,e]=q.useState([]),[n,r]=q.useState([]),[s,i]=q.useState("TODAY"),[o,u]=q.useState("CARD"),[c,h]=q.useState(""),[m,p]=q.useState("WEEK"),[g,I]=q.useState(new Date),[C,j]=q.useState({start:"",end:""}),[P,T]=q.useState(null),w=q.useRef(null),N=q.useRef(null),[V,M]=q.useState([]),[O,x]=q.useState(null);q.useEffect(()=>{(async()=>{const[$,re]=await Promise.all([ee.getOrders(),ee.getMenuCategories()]);e($),r(re);const ue=Array.from(new Set(re.map(De=>De.label)));M(ue)})()},[]);const y=new Date().toISOString().split("T")[0],_=k=>{const $=new Date(k),re=$.getDay(),ue=$.getDate()-re+(re===0?-6:1);return new Date($.setDate(ue))},E=k=>{const $=_(k);return Array.from({length:5}).map((re,ue)=>{const De=new Date($);return De.setDate($.getDate()+ue),De.toISOString().split("T")[0]})},b=k=>{const $=k.getFullYear(),re=k.getMonth(),ue=new Date($,re,1),De=[];for(;ue.getMonth()===re;)De.push(new Date(ue).toISOString().split("T")[0]),ue.setDate(ue.getDate()+1);return De},A=k=>{const $=new Date(g);m==="WEEK"?$.setDate($.getDate()+k*7):m==="MONTH"&&$.setMonth($.getMonth()+k),I($)},S=k=>c===""?!0:k.categoryLabel===c,ve=t.filter(k=>k.dateStr===y).filter(S).sort((k,$)=>$.timestamp-k.timestamp),K=t.filter(k=>k.dateStr===y),F=K.reduce((k,$)=>{const re=$.categoryLabel||"";return k[re]||(k[re]={amount:0,count:0}),k[re].amount+=$.totalAmount,k[re].count+=1,k},{}),ie=K.reduce((k,$)=>k+$.totalAmount,0),H=K.length,J=(()=>{let k=[];return m==="WEEK"?k=t.filter($=>$.dateStr<y):m==="MONTH"?k=t.filter($=>$.dateStr.startsWith(g.toISOString().slice(0,7))):k=C.start&&C.end?t.filter($=>$.dateStr>=C.start&&$.dateStr<=C.end):[],k.filter(S)})(),oe=P?t.filter(k=>k.dateStr===P).filter(S):[],_e=oe.reduce((k,$)=>k+$.totalAmount,0),et=k=>{var $,re,ue;try{($=k.current)==null||$.showPicker()}catch{(re=k.current)==null||re.focus(),(ue=k.current)==null||ue.click()}},He=(k,$)=>{if(!$)return;const re=n.find(ue=>ue.config.date===k&&ue.label===$);return re==null?void 0:re.config.imageUrl},be=async k=>{await ee.toggleOrderPayment(k),e(await ee.getOrders())};return l.jsxs("div",{className:"space-y-6 relative",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>i("TODAY"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${s==="TODAY"?"bg-primary text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:""}),l.jsx("button",{onClick:()=>i("HISTORY"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${s==="HISTORY"?"bg-primary text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:""})]})]}),s==="TODAY"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-2",children:[l.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-white shadow-md flex flex-col justify-between relative overflow-hidden",children:[l.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10",children:l.jsx(Ub,{size:48})}),l.jsx("div",{className:"text-sm text-slate-400 font-bold mb-1",children:""}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-2xl font-bold tracking-tight",children:["$",ie.toLocaleString()]}),l.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[H," "]})]})]}),V.map(k=>{const $=Yn(k),re=F[k]||{amount:0,count:0};return l.jsxs("div",{className:`rounded-xl p-4 shadow-sm border flex flex-col justify-between ${$.bg} ${$.border}`,children:[l.jsxs("div",{className:"text-xs font-bold opacity-70 mb-1 flex items-center gap-1",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${$.tab.replace("data-[state=active]:","")}`}),k]}),l.jsxs("div",{children:[l.jsxs("div",{className:`text-xl font-bold ${$.text}`,children:["$",re.amount.toLocaleString()]}),l.jsxs("div",{className:"text-xs opacity-60 font-bold",children:[re.count," "]})]})]},k)})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-500 mr-2 flex items-center gap-1",children:[l.jsx(wg,{size:14})," :"]}),l.jsx("button",{onClick:()=>h(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${c===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),V.map(k=>{const $=c===k;return l.jsx("button",{onClick:()=>h(k),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border ${$?"bg-slate-800 text-white":"bg-white border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:k},k)})]}),l.jsx("div",{className:"flex justify-end md:justify-start",children:l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded ${o==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(Js,{size:18})}),l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded ${o==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(Mo,{size:18})})]})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[l.jsx("div",{className:`${o==="LIST"?"md:hidden":""}`,children:l.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[ve.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-8",children:""}),ve.map(k=>{const $=Yn(k.categoryLabel),re=He(k.dateStr,k.categoryLabel);return l.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-bold text-lg",children:k.employeeName.charAt(0)}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-slate-700 leading-none text-base",children:k.employeeName}),k.categoryLabel&&l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${$.bg} ${$.text} border ${$.border} w-fit mt-0.5`,children:k.categoryLabel})]})]}),l.jsx("span",{className:"text-xs text-slate-400 font-mono",children:new Date(k.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})})]}),l.jsxs("div",{className:"flex gap-3 mb-3",children:[re&&l.jsxs("div",{className:"w-16 h-16 rounded-md bg-slate-100 overflow-hidden border border-slate-200 flex-shrink-0 cursor-zoom-in relative group",onClick:()=>x(re),children:[l.jsx("img",{src:re,alt:"Menu",className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all flex items-center justify-center",children:l.jsx(kx,{size:14,className:"text-white opacity-0 group-hover:opacity-100"})})]}),l.jsx("div",{className:"flex-1 space-y-1",children:k.items.map((ue,De)=>l.jsxs("div",{className:"text-sm text-slate-600 flex justify-between items-start",children:[l.jsxs("span",{children:[ue.name," ",ue.note&&l.jsxs("span",{className:"text-xs text-slate-400",children:["(",ue.note,")"]})]}),l.jsxs("span",{className:"font-mono font-medium",children:["$",ue.price]})]},De))})]}),l.jsxs("div",{className:"pt-3 border-t border-slate-100 flex justify-between items-center",children:[l.jsx("div",{className:"flex flex-col",children:l.jsxs("span",{className:"font-bold text-primary text-xl",children:["$",k.totalAmount]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>be(k.id),className:`px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-1 transition-all ${k.isPaid?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[k.isPaid?l.jsx(El,{size:14}):l.jsx(_g,{size:14}),k.isPaid?"":""]}),l.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 text-xs rounded-full font-bold",children:k.status})]})]})]},k.id)})]})}),l.jsx("div",{className:`hidden ${o==="LIST"?"md:block":""}`,children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-semibold text-slate-600 w-24",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-right",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-center",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-center",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[ve.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400",children:""})}),ve.map(k=>{const $=Yn(k.categoryLabel),re=He(k.dateStr,k.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 text-slate-500 text-sm font-mono",children:new Date(k.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}),l.jsx("td",{className:"p-4",children:re?l.jsx("div",{className:"w-10 h-10 rounded bg-slate-100 border border-slate-200 overflow-hidden cursor-zoom-in",onClick:()=>x(re),children:l.jsx("img",{src:re,alt:"Menu",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-10 h-10 rounded bg-slate-50 border border-slate-100 flex items-center justify-center text-slate-300",children:l.jsx(To,{size:16})})}),l.jsx("td",{className:"p-4 font-bold text-slate-700",children:k.employeeName}),l.jsx("td",{className:"p-4",children:k.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${$.bg} ${$.text} border ${$.border}`,children:k.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsx("td",{className:"p-4 text-sm text-slate-600",children:k.items.map(ue=>`${ue.name}${ue.note?`(${ue.note})`:""}`).join(", ")}),l.jsxs("td",{className:"p-4 font-bold text-primary text-right",children:["$",k.totalAmount]}),l.jsx("td",{className:"p-4 text-center",children:l.jsxs("button",{onClick:()=>be(k.id),className:`mx-auto px-3 py-1 rounded-full text-xs font-bold flex items-center justify-center gap-1 transition-all ${k.isPaid?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[k.isPaid?l.jsx(El,{size:12}):l.jsx(_g,{size:12}),k.isPaid?"":""]})}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-yellow-100 text-yellow-800",children:k.status})})]},k.id)})]})]})})]})]}),s==="HISTORY"&&l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-500 mr-2 flex items-center gap-1",children:[l.jsx(wg,{size:14})," :"]}),l.jsx("button",{onClick:()=>h(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${c===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),V.map(k=>{const $=c===k;return l.jsx("button",{onClick:()=>h(k),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border ${$?"bg-slate-800 text-white":"bg-white border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:k},k)})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[l.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1 self-start",children:[l.jsx("button",{onClick:()=>p("WEEK"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="WEEK"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""}),l.jsx("button",{onClick:()=>p("MONTH"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="MONTH"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""}),l.jsx("button",{onClick:()=>p("CUSTOM"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="CUSTOM"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""})]}),m!=="CUSTOM"?l.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>A(-1),className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(bx,{size:18})}),l.jsx("span",{className:"font-mono font-bold text-slate-700",children:m==="WEEK"?`${_(g).toLocaleDateString()} - ${(()=>{const k=_(g);return k.setDate(k.getDate()+4),k.toLocaleDateString()})()}`:g.toLocaleDateString("zh-TW",{year:"numeric",month:"long"})}),l.jsx("button",{onClick:()=>A(1),className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Nx,{size:18})})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"relative group",onClick:()=>et(w),children:[l.jsx(Ma,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-primary transition-colors cursor-pointer",size:16}),l.jsx("input",{ref:w,type:"date",value:C.start,onClick:()=>et(w),onChange:k=>j($=>({...$,start:k.target.value})),className:"pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary outline-none shadow-sm cursor-pointer hover:border-primary transition-colors w-40"})]}),l.jsx("span",{className:"text-slate-400 font-bold",children:"-"}),l.jsxs("div",{className:"relative group",onClick:()=>et(N),children:[l.jsx(Ma,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-primary transition-colors cursor-pointer",size:16}),l.jsx("input",{ref:N,type:"date",value:C.end,onClick:()=>et(N),onChange:k=>j($=>({...$,end:k.target.value})),className:"pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary outline-none shadow-sm cursor-pointer hover:border-primary transition-colors w-40"})]})]})]}),m==="WEEK"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:E(g).map((k,$)=>{const re=t.filter(De=>De.dateStr===k).filter(S),ue=re.reduce((De,br)=>De+br.totalAmount,0);return l.jsxs("div",{className:`border rounded-lg p-3 ${k===y?"border-amber-400 bg-amber-50":"border-slate-200 bg-slate-50"}`,children:[l.jsxs("div",{className:"font-bold text-slate-700 mb-2 border-b border-slate-200 pb-1 flex justify-between",children:[l.jsx("span",{children:["","","","",""][$]}),l.jsx("span",{className:"text-xs font-normal text-slate-500",children:k.slice(5)})]}),re.length===0?l.jsx("div",{className:"text-xs text-slate-400 text-center py-4",children:""}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-xs text-slate-500",children:[": ",re.length]}),l.jsxs("div",{className:"text-sm font-bold text-primary",children:[": $",ue]}),l.jsx("button",{onClick:()=>T(k),className:"w-full text-xs bg-white border border-slate-300 py-1 rounded hover:bg-slate-100 font-bold text-slate-600",children:""})]})]},k)})}),m==="MONTH"&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:b(g).map(k=>{const $=t.filter(De=>De.dateStr===k).filter(S),re=$.reduce((De,br)=>De+br.totalAmount,0),ue=$.length>0;return l.jsxs("div",{onClick:()=>ue&&T(k),className:`border rounded p-2 min-h-[80px] flex flex-col justify-between cursor-pointer transition-colors ${ue?"bg-white border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-100 text-slate-300"}`,children:[l.jsx("div",{className:"text-xs font-mono text-right",children:k.slice(8)}),ue&&l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-bold text-slate-700",children:[$.length," "]}),l.jsxs("div",{className:"text-xs text-primary",children:["$",re]})]})]},k)})}),m==="CUSTOM"&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600 text-center",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:J.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-400",children:""})}):J.map(k=>{const $=Yn(k.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-3 text-sm text-slate-500 font-mono",children:k.dateStr}),l.jsx("td",{className:"p-3 text-sm font-bold text-slate-700",children:k.employeeName}),l.jsx("td",{className:"p-3",children:k.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${$.bg} ${$.text} border ${$.border}`,children:k.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsxs("td",{className:"p-3 text-sm text-slate-600",children:[k.items[0].name,"..."]}),l.jsxs("td",{className:"p-3 text-sm font-bold text-primary",children:["$",k.totalAmount]}),l.jsx("td",{className:"p-3 text-center",children:l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${k.isPaid?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:k.isPaid?"":""})})]},k.id)})})]})})]}),P&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[80vh] flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"bg-slate-900 text-white p-4 flex justify-between items-center",children:[l.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(Ma,{size:18})," ",P,"  ",c!==""&&l.jsxs("span",{className:"text-xs bg-slate-700 px-2 py-0.5 rounded ml-2",children:[": ",c]})]}),l.jsx("button",{onClick:()=>T(null),className:"text-slate-400 hover:text-white",children:l.jsx(So,{size:24})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-0",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-right",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-center",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:oe.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-400",children:""})}):oe.map(k=>{const $=Yn(k.categoryLabel),re=He(k.dateStr,k.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 text-xs font-mono text-slate-500",children:new Date(k.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}),l.jsx("td",{className:"p-4",children:re?l.jsx("div",{className:"w-8 h-8 rounded bg-slate-100 border border-slate-200 overflow-hidden cursor-zoom-in",onClick:()=>x(re),children:l.jsx("img",{src:re,alt:"Menu",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-8 h-8 rounded bg-slate-50 border border-slate-100 flex items-center justify-center text-slate-300",children:l.jsx(To,{size:14})})}),l.jsx("td",{className:"p-4 font-bold text-slate-800",children:k.employeeName}),l.jsx("td",{className:"p-4",children:k.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${$.bg} ${$.text} border ${$.border}`,children:k.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsx("td",{className:"p-4 text-sm text-slate-600",children:k.items.map(ue=>l.jsxs("div",{className:"flex gap-1",children:[l.jsx("span",{children:ue.name}),ue.note&&l.jsxs("span",{className:"text-xs text-slate-400",children:["(",ue.note,")"]})]},ue.name))}),l.jsxs("td",{className:"p-4 font-bold text-primary text-right",children:["$",k.totalAmount]}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("button",{onClick:()=>be(k.id),className:`mx-auto px-2 py-0.5 rounded-full text-[10px] font-bold transition-all border ${k.isPaid?"bg-emerald-100 text-emerald-700 border-emerald-200 hover:bg-emerald-200":"bg-slate-100 text-slate-500 border-slate-200 hover:bg-slate-200"}`,children:k.isPaid?"":""})})]},k.id)})})]})}),l.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-between items-center",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("span",{className:"text-sm text-slate-500",children:[" ",oe.length," "]}),l.jsxs("span",{className:"text-sm text-emerald-600 font-bold",children:[": $",oe.filter(k=>k.isPaid).reduce((k,$)=>k+$.totalAmount,0)]}),l.jsxs("span",{className:"text-sm text-slate-400",children:[": $",oe.filter(k=>!k.isPaid).reduce((k,$)=>k+$.totalAmount,0)]})]}),l.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[": ",l.jsxs("span",{className:"text-primary",children:["$",_e]})]})]})]})}),O&&l.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4 cursor-zoom-out backdrop-blur-sm",onClick:()=>x(null),children:[l.jsx("img",{src:O,alt:"Zoom",className:"max-w-full max-h-[90vh] rounded shadow-2xl animate-in fade-in zoom-in duration-200"}),l.jsx("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white",children:l.jsx(So,{size:32})})]})]})},wN=()=>{const[t,e]=q.useState([]),[n,r]=q.useState("ACTIVE"),[s,i]=q.useState(""),[o,u]=q.useState("CARD"),[c,h]=q.useState(!1),[m,p]=q.useState(null),[g,I]=q.useState(new Date),[C,j]=q.useState(""),[P,T]=q.useState({categoryLabel:"",shopName:"",date:new Date().toISOString().split("T")[0],cutoffTime:"",imageFile:null,imageUrl:""}),w=new Date().toISOString().split("T")[0];q.useEffect(()=>{ee.getMenuCategories().then(e)},[]);const N=async()=>{try{if(!P.shopName){alert("");return}let F=P.imageUrl;if(P.imageFile)try{F=await M(P.imageFile)}catch{alert("");return}if(F&&F.length>5e4){alert(" ( 50,000 )");return}const ie={imageUrl:F,shopName:P.shopName,date:P.date,cutoffTime:P.cutoffTime};await V(ie)}catch(F){console.error(F),alert(`
: `+F.message)}},V=async F=>{m?await ee.updateMenuCategory(m,P.categoryLabel,F):await ee.addMenuCategory(P.categoryLabel,F),e(await ee.getMenuCategories()),h(!1),y()},M=F=>new Promise((ie,H)=>{const G=new FileReader;G.readAsDataURL(F),G.onload=J=>{var _e;const oe=new Image;oe.src=(_e=J.target)==null?void 0:_e.result,oe.onload=()=>{let be=oe.width,k=oe.height;be>k?be>400&&(k*=400/be,be=400):k>400&&(be*=400/k,k=400);const $=document.createElement("canvas");$.width=be,$.height=k;const re=$.getContext("2d");if(!re){H(new Error("Canvas context not supported"));return}re.drawImage(oe,0,0,be,k);const ue=$.toDataURL("image/jpeg",.5);ie(ue)},oe.onerror=et=>H(et)},G.onerror=J=>H(J)}),O=async F=>{const ie=t.find(J=>J.id===F);if(!ie)return;const G=(await ee.getOrders()).filter(J=>J.dateStr===ie.config.date&&J.categoryLabel===ie.label);if(G.length>0){const J=` ${ie.config.date}${ie.label} ${G.length} 



`;confirm(J)&&(await ee.deleteOrdersByContext(ie.config.date,ie.label),await ee.deleteMenuCategory(F),e(await ee.getMenuCategories()),alert(""))}else confirm("")&&(await ee.deleteMenuCategory(F),e(await ee.getMenuCategories()))},x=F=>{h(!0),p(F.id),T({categoryLabel:F.label,shopName:F.config.shopName,date:F.config.date,cutoffTime:F.config.cutoffTime||"",imageUrl:F.config.imageUrl,imageFile:null})},y=()=>{p(null),T({categoryLabel:"",shopName:"",date:w,cutoffTime:"",imageFile:null,imageUrl:""})},_=F=>{const ie=new Date(F),H=ie.getDay(),G=ie.getDate()-H+(H===0?-6:1);return new Date(ie.setDate(G))},E=F=>{const ie=_(F);return Array.from({length:5}).map((H,G)=>{const J=new Date(ie);return J.setDate(ie.getDate()+G),J.toISOString().split("T")[0]})},b=Array.from(new Set(t.map(F=>F.label))),A=t.filter(F=>F.config.date>=w).filter(F=>s===""?!0:F.label===s),S=t.filter(F=>F.config.date<w),ve=E(g),K=S.filter(F=>ve.includes(F.config.date));return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""})}),l.jsxs("div",{className:"flex border-b border-slate-200",children:[l.jsx("button",{onClick:()=>r("ACTIVE"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${n==="ACTIVE"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700"}`,children:" ()"}),l.jsx("button",{onClick:()=>r("HISTORY"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${n==="HISTORY"?"border-slate-500 text-slate-700":"border-transparent text-slate-500 hover:text-slate-700"}`,children:" ()"})]}),c?l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-2xl mx-auto",children:[l.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[l.jsx(Eg,{className:"text-primary"})," ",m?"":""]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"1.  (Tab)"}),l.jsxs("select",{value:P.categoryLabel,onChange:F=>T({...P,categoryLabel:F.target.value}),className:"w-full p-2.5 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",children:[b.length===0&&l.jsx("option",{value:"",children:" ()"}),b.map(F=>l.jsx("option",{value:F,children:F},F)),!b.includes("")&&l.jsx("option",{value:"",children:""}),!b.includes("")&&l.jsx("option",{value:"",children:""}),!b.includes("")&&l.jsx("option",{value:"",children:""})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"2. "}),l.jsx("input",{value:P.shopName,onChange:F=>T({...P,shopName:F.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",placeholder:": "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"3. "}),l.jsx("input",{type:"date",value:P.date,onChange:F=>T({...P,date:F.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"4.  ()"}),l.jsxs("select",{value:P.cutoffTime,onChange:F=>T({...P,cutoffTime:F.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"",children:""}),Array.from({length:11}).map((F,ie)=>{const G=`${(ie+8).toString().padStart(2,"0")}:00`;return l.jsx("option",{value:G,children:G},G)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"5. "}),l.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:bg-slate-50 transition-colors relative",children:[l.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/gif, image/bmp",onChange:F=>{var H;const ie=(H=F.target.files)==null?void 0:H[0];if(ie){if(ie.size>2*1024*1024){alert(" 2MB");return}T({...P,imageFile:ie})}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),P.imageFile?l.jsxs("div",{className:"text-primary font-bold flex flex-col items-center",children:[l.jsx(El,{size:32,className:"mb-2"})," : ",P.imageFile.name]}):P.imageUrl?l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("img",{src:P.imageUrl,alt:"Current",className:"h-32 object-contain mb-2 rounded shadow-sm"}),l.jsx("span",{className:"text-xs text-slate-500",children:""})]}):l.jsxs("div",{className:"text-slate-400 flex flex-col items-center",children:[l.jsx(lN,{size:32,className:"mb-2"}),"   ",l.jsx("span",{className:"text-xs mt-1",children:"JPG, PNG, GIF, BMP (Max 2MB)"})]})]})]}),l.jsxs("div",{className:"flex gap-4 pt-4",children:[l.jsx("button",{onClick:N,className:"flex-1 bg-primary text-white py-2 rounded-lg font-bold hover:bg-blue-700 transition-colors shadow-sm",children:m?"":""}),l.jsx("button",{onClick:()=>{h(!1),y()},className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded-lg font-bold hover:bg-slate-50 transition-colors",children:""})]})]})]}):l.jsxs(l.Fragment,{children:[n==="ACTIVE"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>i(""),className:`px-4 py-1.5 rounded-full text-sm font-bold transition-all ${s===""?"bg-slate-800 text-white":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:""}),b.map(F=>{const ie=s===F;return l.jsx("button",{onClick:()=>i(F),className:`px-4 py-1.5 rounded-full text-sm font-bold transition-all border ${ie?"bg-slate-800 text-white":"bg-white border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:F},F)})]}),l.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[l.jsxs("button",{onClick:()=>{y(),h(!0)},className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors shadow-sm font-bold",children:[l.jsx(su,{size:18})," "]}),l.jsxs("div",{className:"hidden md:flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded ${o==="LIST"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(Mo,{size:18})}),l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded ${o==="CARD"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(Js,{size:18})})]})]})]}),l.jsx("div",{className:`${o==="LIST"?"md:hidden":""}`,children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[A.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-12",children:""}),A.map(F=>{const ie=Yn(F.label);return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden group hover:shadow-md transition-all",children:[l.jsxs("div",{className:`px-4 py-2 border-b flex justify-between items-center ${ie.bg} ${ie.border}`,children:[l.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full bg-white/80 ${ie.text}`,children:F.label}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>x(F),className:"p-1.5 bg-white rounded-full text-slate-500 hover:text-primary shadow-sm",children:l.jsx(Eg,{size:14})}),l.jsx("button",{onClick:()=>O(F.id),className:"p-1.5 bg-white rounded-full text-slate-500 hover:text-red-500 shadow-sm",children:l.jsx(aN,{size:14})})]})]}),l.jsxs("div",{className:"aspect-video bg-slate-100 relative",children:[F.config.imageUrl?l.jsx("img",{src:F.config.imageUrl,alt:"Menu",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(To,{size:32})}),l.jsxs("div",{className:"absolute bottom-0 inset-x-0 bg-gradient-to-t from-black/70 to-transparent p-3 text-white",children:[l.jsx("h4",{className:"font-bold truncate",children:F.config.shopName}),l.jsxs("div",{className:"text-xs opacity-90",children:[F.config.date," ",F.config.cutoffTime&&` ${F.config.cutoffTime} `]})]})]})]},F.id)})]})}),l.jsx("div",{className:`hidden ${o==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:" / "}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 w-32",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-right",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[A.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-400",children:""})}),A.map(F=>{const ie=Yn(F.label);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4",children:l.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${ie.bg} ${ie.text}`,children:F.label})}),l.jsxs("td",{className:"p-4",children:[l.jsx("div",{className:"font-bold text-slate-800",children:F.config.shopName}),l.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(Ma,{size:14})," ",F.config.date,F.config.cutoffTime&&l.jsxs("span",{className:"text-red-500 font-bold ml-2",children:["(",F.config.cutoffTime," )"]})]})]}),l.jsx("td",{className:"p-4",children:l.jsx("div",{className:"w-16 h-10 bg-slate-100 rounded overflow-hidden border border-slate-200",children:F.config.imageUrl?l.jsx("img",{src:F.config.imageUrl,className:"w-full h-full object-cover"}):null})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>x(F),className:"px-3 py-1.5 border border-slate-300 rounded text-sm hover:bg-primary hover:text-white hover:border-primary transition-colors",children:""}),l.jsx("button",{onClick:()=>O(F.id),className:"px-3 py-1.5 border border-slate-300 rounded text-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-colors",children:""})]})]},F.id)})]})]})})})]}),n==="HISTORY"&&l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 border-b border-slate-100 pb-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-500 flex items-center mr-2",children:":"}),l.jsx("button",{onClick:()=>j(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${C===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),b.map(F=>{const ie=C===F;return l.jsx("button",{onClick:()=>j(F),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border ${ie?"bg-slate-800 text-white":"bg-white border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:F},F)})]}),l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(Bb,{size:18})," "]}),l.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>{const F=new Date(g);F.setDate(F.getDate()-7),I(F)},className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(bx,{size:18})}),l.jsxs("span",{className:"font-mono text-sm font-bold text-slate-700",children:[_(g).toLocaleDateString()," - ",(()=>{const F=_(g);return F.setDate(F.getDate()+4),F.toLocaleDateString()})()]}),l.jsx("button",{onClick:()=>{const F=new Date(g);F.setDate(F.getDate()+7),I(F)},className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Nx,{size:18})})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:E(g).map((F,ie)=>{const H=K.filter(G=>G.config.date===F&&(C===""||G.label===C));return l.jsxs("div",{className:"border border-slate-200 rounded-lg bg-slate-50 min-h-[150px] flex flex-col",children:[l.jsxs("div",{className:"p-2 border-b border-slate-200 bg-white rounded-t-lg text-center",children:[l.jsx("div",{className:"text-sm font-bold text-slate-700",children:["","","","",""][ie]}),l.jsx("div",{className:"text-xs text-slate-400",children:F})]}),l.jsx("div",{className:"p-2 space-y-2 flex-1",children:H.length===0?l.jsx("div",{className:"text-center text-xs text-slate-300 py-4",children:""}):H.map(G=>{const J=Yn(G.label);return l.jsxs("div",{className:"bg-white border border-slate-200 rounded p-2 shadow-sm text-xs cursor-pointer hover:border-primary group",onClick:()=>x(G),children:[l.jsx("div",{className:`inline-block px-1.5 py-0.5 rounded-full text-[10px] font-bold mb-1 ${J.bg} ${J.text}`,children:G.label}),l.jsx("div",{className:"font-bold text-slate-700 truncate",children:G.config.shopName}),l.jsx("div",{className:"hidden group-hover:block text-[10px] text-primary mt-1 text-center font-bold",children:"/"})]},G.id)})})]},F)})})]})]})]})},EN=()=>{const[t,e]=q.useState([]),[n,r]=q.useState({}),[s,i]=q.useState("CARD"),[o,u]=q.useState(!1),[c,h]=q.useState(null),[m,p]=q.useState(""),[g,I]=q.useState(null),[C,j]=q.useState(!1);q.useEffect(()=>{P()},[]);const P=async()=>{const _=await ee.getEmployees();e(_);const E=await ee.getOrders(),b=new Date().toISOString().slice(0,7),A={};_.forEach(S=>{const ve=E.filter(K=>K.employeeName===S.name&&K.dateStr.startsWith(b)).length;A[S.id]=ve}),r(A),j(!1)},T=async()=>{if(!m.trim()){alert("");return}c?await ee.updateEmployee({id:c,name:m}):await ee.addEmployee({id:Date.now().toString(),name:m}),P(),u(!1),p(""),h(null)},w=async _=>{confirm("")&&(await ee.deleteEmployee(_),P())},N=_=>{u(!0),h(_.id),p(_.name)},V=()=>{const _=[...t].sort((E,b)=>E.name.localeCompare(b.name,"zh-TW"));e(_),j(!0)},M=(_,E)=>{I(E),_.dataTransfer.effectAllowed="move"},O=(_,E)=>{if(_.preventDefault(),g===null||g===E)return;const b=[...t],A=b[g];b.splice(g,1),b.splice(E,0,A),e(b),I(E),j(!0)},x=()=>{I(null)},y=async()=>{await ee.saveEmployees(t),j(!1),alert("")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>i("CARD"),className:`p-2 rounded ${s==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(Js,{size:18})}),l.jsx("button",{onClick:()=>i("LIST"),className:`p-2 rounded ${s==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(Mo,{size:18})})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-wrap gap-4 items-center justify-between",children:[C&&l.jsxs("button",{onClick:y,className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg font-bold shadow animate-pulse",children:[l.jsx(Ix,{size:18})," "]}),l.jsxs("div",{className:"flex gap-2 ml-auto",children:[l.jsxs("button",{onClick:V,className:"flex items-center gap-2 bg-white border border-slate-300 px-4 py-2 rounded-lg hover:bg-slate-50 text-slate-700 font-medium",children:[l.jsx(Ob,{size:16})," "]}),l.jsxs("button",{onClick:()=>{u(!0),h(null),p("")},className:"flex items-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 font-bold shadow-sm",children:[l.jsx(su,{size:18})," "]})]})]}),o&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-md mx-auto",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:c?"":""}),l.jsx("input",{value:m,onChange:_=>p(_.target.value),className:"w-full p-2 border border-slate-300 rounded mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:T,className:"flex-1 bg-primary text-white py-2 rounded font-bold",children:""}),l.jsx("button",{onClick:()=>u(!1),className:"flex-1 border border-slate-300 py-2 rounded font-bold",children:""})]})]}),l.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[l.jsx(fN,{size:12})," "]}),l.jsx("div",{className:`${s==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((_,E)=>l.jsxs("div",{draggable:!o,onDragStart:b=>M(b,E),onDragOver:b=>O(b,E),onDragEnd:x,className:`relative p-4 rounded-xl border cursor-move transition-all flex flex-col items-center text-center ${E%2===0?"bg-white border-slate-200":"bg-blue-50 border-blue-200"} hover:shadow-md hover:scale-[1.02]`,children:[l.jsx("div",{className:"absolute top-2 right-2 text-slate-300",children:l.jsx(Tl,{size:16})}),l.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-bold text-lg mb-2",children:_.name.charAt(0)}),l.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:_.name}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[l.jsx(xg,{size:12})," : ",l.jsx("span",{className:"font-bold text-primary",children:n[_.id]||0})]}),l.jsxs("div",{className:"flex gap-2 mt-4 w-full",children:[l.jsx("button",{onClick:()=>N(_),className:"flex-1 py-1 text-xs border border-slate-300 rounded hover:bg-white text-slate-600",children:""}),l.jsx("button",{onClick:()=>w(_.id),className:"flex-1 py-1 text-xs border border-red-200 text-red-500 rounded hover:bg-red-50",children:""})]})]},_.id))})}),l.jsx("div",{className:`hidden ${s==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-16",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 text-right",children:""})]})}),l.jsx("tbody",{children:t.map((_,E)=>l.jsxs("tr",{draggable:!o,onDragStart:b=>M(b,E),onDragOver:b=>O(b,E),onDragEnd:x,className:`cursor-move transition-colors ${E%2===0?"bg-white":"bg-slate-50"} hover:bg-blue-50/50`,children:[l.jsx("td",{className:"p-4 text-slate-300",children:l.jsx(Tl,{size:20})}),l.jsx("td",{className:"p-4 font-bold text-slate-700 text-lg",children:_.name}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xg,{size:16,className:"text-slate-400"}),l.jsx("span",{className:"font-bold text-primary",children:n[_.id]||0})]})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>N(_),className:"text-sm font-bold text-blue-600 hover:underline",children:""}),l.jsx("button",{onClick:()=>w(_.id),className:"text-sm font-bold text-red-500 hover:underline",children:""})]})]},_.id))})]})})})]})},TN=()=>{const[t,e]=q.useState([]),[n,r]=q.useState(!1),[s,i]=q.useState(null),[o,u]=q.useState(""),[c,h]=q.useState("CARD"),[m,p]=q.useState(null),[g,I]=q.useState(!1);q.useEffect(()=>{ee.getAnnouncements().then(e)},[]);const C=async()=>{if(!o.trim()){alert("");return}const M=[...t];if(s){const O=M.findIndex(x=>x.id===s);O!==-1&&(M[O].content=o)}else M.push({id:Date.now().toString(),content:o,isActive:!0});await ee.saveAnnouncements(M),e(M),r(!1),u(""),i(null)},j=async M=>{if(confirm("")){const O=t.filter(x=>x.id!==M);await ee.saveAnnouncements(O),e(O)}},P=async M=>{const O=t.map(x=>x.id===M?{...x,isActive:!x.isActive}:x);await ee.saveAnnouncements(O),e(O)},T=M=>{r(!0),i(M.id),u(M.content)},w=(M,O)=>{p(O),M.dataTransfer.effectAllowed="move"},N=(M,O)=>{if(M.preventDefault(),m===null||m===O)return;const x=[...t],y=x[m];x.splice(m,1),x.splice(O,0,y),e(x),p(O),I(!0)},V=async()=>{await ee.saveAnnouncements(t),I(!1),alert("")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>h("CARD"),className:`p-2 rounded ${c==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(Js,{size:18})}),l.jsx("button",{onClick:()=>h("LIST"),className:`p-2 rounded ${c==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(Mo,{size:18})})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex justify-between items-center",children:[g?l.jsxs("button",{onClick:V,className:"bg-primary text-white px-4 py-2 rounded-lg font-bold shadow animate-pulse flex items-center gap-2",children:[l.jsx(Ix,{size:18})," "]}):l.jsx("div",{}),l.jsxs("button",{onClick:()=>{r(!0),i(null),u("")},className:"bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold hover:bg-emerald-600 flex items-center gap-2",children:[l.jsx(su,{size:18})," "]})]}),n&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200",children:[l.jsx("textarea",{value:o,onChange:M=>u(M.target.value),className:"w-full p-4 border border-slate-300 rounded-lg mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:"...",rows:3}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:C,className:"bg-primary text-white px-6 py-2 rounded font-bold",children:""}),l.jsx("button",{onClick:()=>r(!1),className:"border border-slate-300 px-6 py-2 rounded font-bold",children:""})]})]}),l.jsx("div",{className:`${c==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((M,O)=>l.jsxs("div",{draggable:!0,onDragStart:x=>w(x,O),onDragOver:x=>N(x,O),className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 cursor-move hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("div",{className:"p-1 text-slate-300",children:l.jsx(Tl,{size:16})}),l.jsxs("button",{onClick:()=>P(M.id),className:`px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 ${M.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:[M.isActive?l.jsx(Zb,{size:12}):l.jsx(Jb,{size:12}),M.isActive?"":""]})]}),l.jsx("p",{className:"text-slate-700 font-medium mb-4 min-h-[3rem]",children:M.content}),l.jsxs("div",{className:"flex border-t border-slate-100 pt-3 gap-2",children:[l.jsx("button",{onClick:()=>T(M),className:"flex-1 py-1 text-sm bg-slate-50 text-slate-600 rounded hover:bg-slate-100",children:""}),l.jsx("button",{onClick:()=>j(M.id),className:"flex-1 py-1 text-sm bg-red-50 text-red-500 rounded hover:bg-red-100",children:""})]})]},M.id))})}),l.jsx("div",{className:`hidden ${c==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-12"}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 w-32 text-center",children:""}),l.jsx("th",{className:"p-4 w-32 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:t.map((M,O)=>l.jsxs("tr",{draggable:!0,onDragStart:x=>w(x,O),onDragOver:x=>N(x,O),className:"hover:bg-slate-50 cursor-move",children:[l.jsx("td",{className:"p-4 text-slate-300",children:l.jsx(Tl,{size:20})}),l.jsx("td",{className:"p-4 text-slate-700 font-medium",children:M.content}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("button",{onClick:()=>P(M.id),className:`px-3 py-1 rounded-full text-xs font-bold transition-all ${M.isActive?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:M.isActive?"":""})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>T(M),className:"text-blue-600 font-bold text-sm hover:underline",children:""}),l.jsx("button",{onClick:()=>j(M.id),className:"text-red-500 font-bold text-sm hover:underline",children:""})]})]},M.id))})]})})})]})},SN=({settings:t,onBind:e,currentUser:n})=>{const[r,s]=q.useState("ACCOUNTS"),[i,o]=q.useState([]),[u,c]=q.useState("CARD"),[h,m]=q.useState(!1),[p,g]=q.useState(null),[I,C]=q.useState("IDLE"),[j,P]=q.useState(null),[T,w]=q.useState({name:"",username:"",password:""}),[N,V]=q.useState(""),[M,O]=q.useState("");q.useEffect(()=>{ee.getAdminAccounts().then(o)},[]);const x=async()=>{if(!T.name||!T.username||!T.password){alert("");return}try{if(p){const K=i.find(F=>F.id===p);K&&await ee.updateAdminAccount({...K,name:T.name,username:T.username,password:T.password})}else await ee.addAdminAccount({id:Date.now().toString(),name:T.name,username:T.username,password:T.password,isSuperAdmin:!1});o(await ee.getAdminAccounts()),m(!1),E()}catch(K){alert(K.message||"Error")}},y=async K=>{confirm("")&&(await ee.deleteAdminAccount(K),o(await ee.getAdminAccounts()))},_=K=>{m(!0),g(K.id),w({name:K.name,username:K.username,password:K.password})},E=()=>{g(null),w({name:"",username:"",password:""})},b=async()=>{if(!N||!M){alert("");return}if(N!==M){alert("");return}confirm("")&&(await ee.setFrontendPassword(N),alert(""),V(""),O(""))},A=async()=>{if(!t.isGoogleBound){C("ERROR");return}C("CHECKING");const K=await ee.checkDatabaseConnection();C(K?"SUCCESS":"ERROR"),P(new Date)},S=K=>!!(n.isSuperAdmin||K.id===n.id),ve=K=>K.isSuperAdmin?!1:!!n.isSuperAdmin;return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""})}),l.jsxs("div",{className:"flex border-b border-slate-200",children:[l.jsx("button",{onClick:()=>s("ACCOUNTS"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${r==="ACCOUNTS"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>s("INFO"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${r==="INFO"?"border-slate-500 text-slate-700":"border-transparent text-slate-500 hover:text-slate-700"}`,children:""})]}),r==="ACCOUNTS"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex justify-between items-center",children:[l.jsxs("div",{className:"text-sm text-slate-500",children:["",l.jsxs("span",{className:"font-bold text-slate-800",children:[n.name," (",n.isSuperAdmin?"":"",")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>{E(),m(!0)},className:"bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold hover:bg-emerald-600 flex items-center gap-2",children:[l.jsx(su,{size:18})," "]}),l.jsxs("div",{className:"hidden md:flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>c("CARD"),className:`p-2 rounded ${u==="CARD"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(Js,{size:18})}),l.jsx("button",{onClick:()=>c("LIST"),className:`p-2 rounded ${u==="LIST"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(Mo,{size:18})})]})]})]}),h&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-lg mx-auto",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[l.jsx(uN,{className:"text-primary"})," ",p?"":""]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{value:T.name,onChange:K=>w({...T,name:K.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{value:T.username,onChange:K=>w({...T,username:K.target.value}),disabled:!!p&&T.username==="sysop",className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none disabled:bg-slate-100"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{value:T.password,onChange:K=>w({...T,password:K.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none",type:"text",placeholder:""})]}),l.jsxs("div",{className:"flex gap-4 mt-4",children:[l.jsx("button",{onClick:x,className:"flex-1 bg-primary text-white py-2 rounded-lg font-bold hover:bg-blue-700",children:""}),l.jsx("button",{onClick:()=>{m(!1),E()},className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded-lg font-bold hover:bg-slate-50",children:""})]})]})]}),l.jsx("div",{className:`${u==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(K=>l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${K.isSuperAdmin?"bg-indigo-600":"bg-slate-500"}`,children:K.name.charAt(0)}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800",children:K.name}),l.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[l.jsx(Cx,{size:12})," ",K.username]})]})]}),K.isSuperAdmin&&l.jsx(Ax,{className:"text-amber-500",size:20})]}),l.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-100",children:[S(K)?l.jsx("button",{onClick:()=>_(K),className:"flex-1 py-1.5 text-sm bg-blue-50 text-blue-600 rounded hover:bg-blue-100 font-bold",children:"/"}):l.jsx("button",{disabled:!0,className:"flex-1 py-1.5 text-sm bg-slate-50 text-slate-300 rounded cursor-not-allowed",children:""}),ve(K)&&l.jsx("button",{onClick:()=>y(K.id),className:"px-3 py-1.5 text-sm bg-red-50 text-red-500 rounded hover:bg-red-100 font-bold",children:""})]})]},K.id))})}),l.jsx("div",{className:`hidden ${u==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:i.map(K=>l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-700",children:K.name}),l.jsx("td",{className:"p-4 font-mono text-slate-600",children:K.username}),l.jsx("td",{className:"p-4",children:K.isSuperAdmin?l.jsx("span",{className:"text-xs font-bold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:""}):l.jsx("span",{className:"text-xs font-bold bg-slate-100 text-slate-600 px-2 py-1 rounded-full",children:""})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[S(K)&&l.jsx("button",{onClick:()=>_(K),className:"text-blue-600 font-bold text-sm hover:underline",children:""}),ve(K)&&l.jsx("button",{onClick:()=>y(K.id),className:"text-red-500 font-bold text-sm hover:underline",children:""})]})]},K.id))})]})})}),l.jsxs("div",{className:"bg-red-50/50 p-6 rounded-xl shadow-sm border border-red-100 mt-8",children:[l.jsxs("h3",{className:"text-lg font-bold text-red-600 flex items-center gap-2 mb-4",children:[l.jsx(Sl,{size:18})," "]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{type:"password",value:N,onChange:K=>V(K.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-red-500 outline-none",placeholder:""})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{type:"password",value:M,onChange:K=>O(K.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-red-500 outline-none",placeholder:""})]}),l.jsx("div",{children:l.jsx("button",{onClick:b,className:"w-full bg-red-600 text-white py-2 rounded font-bold hover:bg-red-700 transition-colors shadow-sm",children:""})})]}),l.jsx("p",{className:"text-xs text-red-400 mt-2 font-bold",children:""})]})]}),r==="INFO"&&l.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[l.jsx(sc,{className:"text-indigo-600"})," "]}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[l.jsxs("div",{className:"flex-1 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-700",children:"Google "}),t.isGoogleBound?l.jsxs("div",{className:"flex items-center gap-2",children:[t.googleAccountType==="WORKSPACE"?l.jsx("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-[10px] font-bold",children:"Google Workspace"}):l.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-[10px] font-bold",children:"Personal"}),l.jsxs("span",{className:"flex items-center gap-1 text-emerald-600 font-bold bg-emerald-50 px-3 py-1 rounded-full",children:[l.jsx(Wb,{size:14})," "]})]}):l.jsxs("span",{className:"flex items-center gap-1 text-red-500 font-bold bg-red-50 px-3 py-1 rounded-full",children:[l.jsx(Hb,{size:14})," "]})]}),t.isGoogleBound&&l.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-indigo-100 shadow-sm",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[t.googleAccountType==="WORKSPACE"?l.jsx("div",{className:"bg-indigo-600 p-1 rounded-full text-white",children:l.jsx(Lb,{size:14})}):l.jsx("div",{className:"bg-white p-1 rounded-full shadow-sm",children:l.jsx(xN,{})}),l.jsx("span",{className:"font-mono font-bold text-slate-800",children:t.googleAccountName})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),I==="IDLE"&&l.jsx("span",{className:"text-slate-400 font-bold text-sm",children:""}),I==="CHECKING"&&l.jsx("span",{className:"text-blue-500 font-bold text-sm animate-pulse",children:"..."}),I==="SUCCESS"&&l.jsxs("span",{className:"text-emerald-600 font-bold text-sm flex items-center gap-1",children:[l.jsx(El,{size:14})," "]}),I==="ERROR"&&l.jsxs("span",{className:"text-red-500 font-bold text-sm flex items-center gap-1",children:[l.jsx(hN,{size:14})," "]})]}),j&&l.jsxs("div",{className:"text-xs text-slate-400 text-right",children:[": ",j.toLocaleTimeString()]})]}),l.jsxs("div",{className:"flex flex-col gap-2 justify-center border-l pl-6 border-slate-100",children:[l.jsxs("button",{onClick:A,disabled:I==="CHECKING",className:"bg-indigo-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-indigo-700 transition-colors shadow-sm flex items-center justify-center gap-2 disabled:bg-indigo-300",children:[l.jsx(tN,{size:18,className:I==="CHECKING"?"animate-spin":""})," "]}),!t.isGoogleBound&&l.jsx("button",{onClick:()=>{setTimeout(()=>{e("admin@yj-tech.com","WORKSPACE")},1e3)},className:"text-sm text-slate-500 underline hover:text-primary",children:" Google "})]})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[l.jsx(sc,{className:"text-indigo-600"})," "]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-slate-600 mb-1 font-bold",children:""}),l.jsx("p",{className:"text-xs text-slate-400",children:"353"})]}),l.jsxs("button",{onClick:vN,className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-2 rounded-lg font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md flex items-center gap-2",children:[l.jsx(sc,{size:16})," "]})]})]})]})]})},bN=()=>{const[t,e]=q.useState(!1),[n,r]=q.useState(!1),[s,i]=q.useState(void 0),[o,u]=q.useState(!0),[c,h]=q.useState(""),[m,p]=q.useState(""),[g,I]=q.useState(""),[C,j]=q.useState("USER"),[P,T]=q.useState(""),[w,N]=q.useState(!1);q.useEffect(()=>{(async()=>{const{role:y,userId:_}=ee.getSession();if(y==="USER")e(!0);else if(y==="ADMIN"&&_){const E=await ee.getAdminById(_);E?(r(!0),i(E)):ee.clearSession()}u(!1)})()},[]);const V=async x=>{x.preventDefault(),u(!0);const y=await ee.getFrontendPassword();u(!1),c===y?(e(!0),T(""),w&&ee.setSession("USER")):T("")},M=async x=>{x.preventDefault(),u(!0);const y=await ee.verifyAdmin(m,g);u(!1),y?(r(!0),i(y),T(""),w&&ee.setSession("ADMIN",y.id)):T("")},O=()=>{e(!1),r(!1),i(void 0),ee.clearSession(),h(""),I(""),p("")};return o?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:"Loading..."}):n&&s?l.jsx(_N,{currentUser:s,onLogout:O,onGoToFrontend:()=>{r(!1),e(!0)}}):t?l.jsx(mN,{onLogout:O,onGoToAdmin:()=>{O(),j("ADMIN")}}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-800 to-slate-900 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden w-full max-w-md",children:[l.jsxs("div",{className:"flex text-sm font-bold text-center border-b bg-gray-50",children:[l.jsx("button",{onClick:()=>{j("USER"),T("")},className:`flex-1 py-4 uppercase tracking-wider transition-all border-t-4 ${C==="USER"?"bg-white text-primary border-primary":"bg-gray-100 text-gray-400 border-transparent hover:bg-gray-50"}`,children:""}),l.jsx("button",{onClick:()=>{j("ADMIN"),T("")},className:`flex-1 py-4 uppercase tracking-wider transition-all border-t-4 ${C==="ADMIN"?"bg-white text-slate-800 border-slate-800":"bg-gray-100 text-gray-400 border-transparent hover:bg-gray-50"}`,children:""})]}),l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),l.jsx("p",{className:"text-slate-500 text-sm",children:""})]}),P&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded border border-red-200 text-center",children:P}),C==="USER"?l.jsxs("form",{onSubmit:V,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(Sl,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"password",value:c,onChange:x=>h(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none",placeholder:"",autoComplete:"current-password"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember-user",type:"checkbox",checked:w,onChange:x=>N(x.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary bg-white"}),l.jsx("label",{htmlFor:"remember-user",className:"ml-2 block text-sm text-slate-600 cursor-pointer",children:" (Remember me)"})]}),l.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors",children:""})]}):l.jsxs("form",{onSubmit:M,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(rN,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"text",value:m,onChange:x=>p(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none",placeholder:"",autoComplete:"username"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(Sl,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"password",value:g,onChange:x=>I(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none",placeholder:"",autoComplete:"current-password"})]})]}),l.jsxs("div",{className:"flex items-center pt-2",children:[l.jsx("input",{id:"remember-admin",type:"checkbox",checked:w,onChange:x=>N(x.target.checked),className:"w-4 h-4 text-slate-800 border-gray-300 rounded focus:ring-slate-800 bg-white"}),l.jsx("label",{htmlFor:"remember-admin",className:"ml-2 block text-sm text-slate-600 cursor-pointer",children:" (Remember me)"})]}),l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white py-3 rounded-lg font-bold hover:bg-slate-900 transition-colors mt-2",children:""})]})]})]})})},Rx=document.getElementById("root");if(!Rx)throw new Error("Could not find root element to mount to");const NN=oc.createRoot(Rx);NN.render(l.jsx(x1.StrictMode,{children:l.jsx(bN,{})}));
