(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function c1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rg={exports:{}},Rl={},Pg={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Do=Symbol.for("react.element"),d1=Symbol.for("react.portal"),h1=Symbol.for("react.fragment"),f1=Symbol.for("react.strict_mode"),m1=Symbol.for("react.profiler"),p1=Symbol.for("react.provider"),g1=Symbol.for("react.context"),y1=Symbol.for("react.forward_ref"),v1=Symbol.for("react.suspense"),x1=Symbol.for("react.memo"),_1=Symbol.for("react.lazy"),om=Symbol.iterator;function w1(t){return t===null||typeof t!="object"?null:(t=om&&t[om]||t["@@iterator"],typeof t=="function"?t:null)}var Dg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vg=Object.assign,Mg={};function Js(t,e,n){this.props=t,this.context=e,this.refs=Mg,this.updater=n||Dg}Js.prototype.isReactComponent={};Js.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Js.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Og(){}Og.prototype=Js.prototype;function Rd(t,e,n){this.props=t,this.context=e,this.refs=Mg,this.updater=n||Dg}var Pd=Rd.prototype=new Og;Pd.constructor=Rd;Vg(Pd,Js.prototype);Pd.isPureReactComponent=!0;var am=Array.isArray,Lg=Object.prototype.hasOwnProperty,Dd={current:null},Fg={key:!0,ref:!0,__self:!0,__source:!0};function Ug(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Lg.call(e,r)&&!Fg.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Do,type:t,key:i,ref:o,props:s,_owner:Dd.current}}function E1(t,e){return{$$typeof:Do,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Do}function b1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lm=/\/+/g;function Au(t,e){return typeof t=="object"&&t!==null&&t.key!=null?b1(""+t.key):e.toString(36)}function Ta(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Do:case d1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Au(o,0):r,am(s)?(n="",t!=null&&(n=t.replace(lm,"$&/")+"/"),Ta(s,e,n,"",function(h){return h})):s!=null&&(Vd(s)&&(s=E1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",am(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Au(i,u);o+=Ta(i,e,n,c,s)}else if(c=w1(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Au(i,u++),o+=Ta(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function na(t,e,n){if(t==null)return t;var r=[],s=0;return Ta(t,r,"","",function(i){return e.call(n,i,s++)}),r}function S1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},Na={transition:null},T1={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:Na,ReactCurrentOwner:Dd};function zg(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:na,forEach:function(t,e,n){na(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return na(t,function(){e++}),e},toArray:function(t){return na(t,function(e){return e})||[]},only:function(t){if(!Vd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Js;fe.Fragment=h1;fe.Profiler=m1;fe.PureComponent=Rd;fe.StrictMode=f1;fe.Suspense=v1;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T1;fe.act=zg;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Vg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Dd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Lg.call(e,c)&&!Fg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Do,type:t.type,key:s,ref:i,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:g1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:p1,_context:t},t.Consumer=t};fe.createElement=Ug;fe.createFactory=function(t){var e=Ug.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:y1,render:t}};fe.isValidElement=Vd;fe.lazy=function(t){return{$$typeof:_1,_payload:{_status:-1,_result:t},_init:S1}};fe.memo=function(t,e){return{$$typeof:x1,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Na.transition;Na.transition={};try{t()}finally{Na.transition=e}};fe.unstable_act=zg;fe.useCallback=function(t,e){return bt.current.useCallback(t,e)};fe.useContext=function(t){return bt.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};fe.useEffect=function(t,e){return bt.current.useEffect(t,e)};fe.useId=function(){return bt.current.useId()};fe.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return bt.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};fe.useRef=function(t){return bt.current.useRef(t)};fe.useState=function(t){return bt.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return bt.current.useTransition()};fe.version="18.3.1";Pg.exports=fe;var H=Pg.exports;const N1=c1(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I1=H,A1=Symbol.for("react.element"),C1=Symbol.for("react.fragment"),k1=Object.prototype.hasOwnProperty,j1=I1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R1={key:!0,ref:!0,__self:!0,__source:!0};function $g(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)k1.call(e,r)&&!R1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:A1,type:t,key:i,ref:o,props:s,_owner:j1.current}}Rl.Fragment=C1;Rl.jsx=$g;Rl.jsxs=$g;Rg.exports=Rl;var l=Rg.exports,fc={},Bg={exports:{}},Bt={},qg={exports:{}},Hg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,D){var Q=$.length;$.push(D);e:for(;0<Q;){var ne=Q-1>>>1,he=$[ne];if(0<s(he,D))$[ne]=D,$[Q]=he,Q=ne;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var D=$[0],Q=$.pop();if(Q!==D){$[0]=Q;e:for(var ne=0,he=$.length,et=he>>>1;ne<et;){var Ue=2*(ne+1)-1,Pt=$[Ue],ge=Ue+1,ce=$[ge];if(0>s(Pt,Q))ge<he&&0>s(ce,Pt)?($[ne]=ce,$[ge]=Q,ne=ge):($[ne]=Pt,$[Ue]=Q,ne=Ue);else if(ge<he&&0>s(ce,Q))$[ne]=ce,$[ge]=Q,ne=ge;else break e}}return D}function s($,D){var Q=$.sortIndex-D.sortIndex;return Q!==0?Q:$.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],m=1,p=null,g=3,I=!1,k=!1,R=!1,P=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N($){for(var D=n(h);D!==null;){if(D.callback===null)r(h);else if(D.startTime<=$)r(h),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(h)}}function O($){if(R=!1,N($),!k)if(n(c)!==null)k=!0,ht(M);else{var D=n(h);D!==null&&L(O,D.startTime-$)}}function M($,D){k=!1,R&&(R=!1,S(y),y=-1),I=!0;var Q=g;try{for(N(D),p=n(c);p!==null&&(!(p.expirationTime>D)||$&&!T());){var ne=p.callback;if(typeof ne=="function"){p.callback=null,g=p.priorityLevel;var he=ne(p.expirationTime<=D);D=t.unstable_now(),typeof he=="function"?p.callback=he:p===n(c)&&r(c),N(D)}else r(c);p=n(c)}if(p!==null)var et=!0;else{var Ue=n(h);Ue!==null&&L(O,Ue.startTime-D),et=!1}return et}finally{p=null,g=Q,I=!1}}var F=!1,x=null,y=-1,_=5,E=-1;function T(){return!(t.unstable_now()-E<_)}function C(){if(x!==null){var $=t.unstable_now();E=$;var D=!0;try{D=x(!0,$)}finally{D?b():(F=!1,x=null)}}else F=!1}var b;if(typeof w=="function")b=function(){w(C)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Pe=we.port2;we.port1.onmessage=C,b=function(){Pe.postMessage(null)}}else b=function(){P(C,0)};function ht($){x=$,F||(F=!0,b())}function L($,D){y=P(function(){$(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){k||I||(k=!0,ht(M))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var D=3;break;default:D=g}var Q=g;g=D;try{return $()}finally{g=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,D){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=g;g=$;try{return D()}finally{g=Q}},t.unstable_scheduleCallback=function($,D,Q){var ne=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ne+Q:ne):Q=ne,$){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Q+he,$={id:m++,callback:D,priorityLevel:$,startTime:Q,expirationTime:he,sortIndex:-1},Q>ne?($.sortIndex=Q,e(h,$),n(c)===null&&$===n(h)&&(R?(S(y),y=-1):R=!0,L(O,Q-ne))):($.sortIndex=he,e(c,$),k||I||(k=!0,ht(M))),$},t.unstable_shouldYield=T,t.unstable_wrapCallback=function($){var D=g;return function(){var Q=g;g=D;try{return $.apply(this,arguments)}finally{g=Q}}}})(Hg);qg.exports=Hg;var P1=qg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D1=H,$t=P1;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wg=new Set,oo={};function ns(t,e){Ls(t,e),Ls(t+"Capture",e)}function Ls(t,e){for(oo[t]=e,t=0;t<e.length;t++)Wg.add(e[t])}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mc=Object.prototype.hasOwnProperty,V1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,um={},cm={};function M1(t){return mc.call(cm,t)?!0:mc.call(um,t)?!1:V1.test(t)?cm[t]=!0:(um[t]=!0,!1)}function O1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function L1(t,e,n,r){if(e===null||typeof e>"u"||O1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var Md=/[\-:]([a-z])/g;function Od(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Md,Od);ct[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Md,Od);ct[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Md,Od);ct[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ld(t,e,n,r){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(L1(e,n,s,r)&&(n=null),r||s===null?M1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zn=D1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ra=Symbol.for("react.element"),gs=Symbol.for("react.portal"),ys=Symbol.for("react.fragment"),Fd=Symbol.for("react.strict_mode"),pc=Symbol.for("react.profiler"),Gg=Symbol.for("react.provider"),Qg=Symbol.for("react.context"),Ud=Symbol.for("react.forward_ref"),gc=Symbol.for("react.suspense"),yc=Symbol.for("react.suspense_list"),zd=Symbol.for("react.memo"),Jn=Symbol.for("react.lazy"),Kg=Symbol.for("react.offscreen"),dm=Symbol.iterator;function Ti(t){return t===null||typeof t!="object"?null:(t=dm&&t[dm]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Cu;function Li(t){if(Cu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cu=e&&e[1]||""}return`
`+Cu+t}var ku=!1;function ju(t,e){if(!t||ku)return"";ku=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{ku=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Li(t):""}function F1(t){switch(t.tag){case 5:return Li(t.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 2:case 15:return t=ju(t.type,!1),t;case 11:return t=ju(t.type.render,!1),t;case 1:return t=ju(t.type,!0),t;default:return""}}function vc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ys:return"Fragment";case gs:return"Portal";case pc:return"Profiler";case Fd:return"StrictMode";case gc:return"Suspense";case yc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qg:return(t.displayName||"Context")+".Consumer";case Gg:return(t._context.displayName||"Context")+".Provider";case Ud:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zd:return e=t.displayName||null,e!==null?e:vc(t.type)||"Memo";case Jn:e=t._payload,t=t._init;try{return vc(t(e))}catch{}}return null}function U1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vc(e);case 8:return e===Fd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z1(t){var e=Yg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sa(t){t._valueTracker||(t._valueTracker=z1(t))}function Xg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Yg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ha(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xc(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jg(t,e){e=e.checked,e!=null&&Ld(t,"checked",e,!1)}function _c(t,e){Jg(t,e);var n=yr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wc(t,e.type,n):e.hasOwnProperty("defaultValue")&&wc(t,e.type,yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wc(t,e,n){(e!=="number"||Ha(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fi=Array.isArray;function As(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ec(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Fi(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yr(n)}}function Zg(t,e){var n=yr(e.value),r=yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function e0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?e0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ia,t0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ia=ia||document.createElement("div"),ia.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ia.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ao(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$1=["Webkit","ms","Moz","O"];Object.keys(Wi).forEach(function(t){$1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wi[e]=Wi[t]})});function n0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wi.hasOwnProperty(t)&&Wi[t]?(""+e).trim():e+"px"}function r0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=n0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var B1=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sc(t,e){if(e){if(B1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Tc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nc=null;function $d(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ic=null,Cs=null,ks=null;function gm(t){if(t=Oo(t)){if(typeof Ic!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Ol(e),Ic(t.stateNode,t.type,e))}}function s0(t){Cs?ks?ks.push(t):ks=[t]:Cs=t}function i0(){if(Cs){var t=Cs,e=ks;if(ks=Cs=null,gm(t),e)for(t=0;t<e.length;t++)gm(e[t])}}function o0(t,e){return t(e)}function a0(){}var Ru=!1;function l0(t,e,n){if(Ru)return t(e,n);Ru=!0;try{return o0(t,e,n)}finally{Ru=!1,(Cs!==null||ks!==null)&&(a0(),i0())}}function lo(t,e){var n=t.stateNode;if(n===null)return null;var r=Ol(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Ac=!1;if(Pn)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){Ac=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{Ac=!1}function q1(t,e,n,r,s,i,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var Gi=!1,Wa=null,Ga=!1,Cc=null,H1={onError:function(t){Gi=!0,Wa=t}};function W1(t,e,n,r,s,i,o,u,c){Gi=!1,Wa=null,q1.apply(H1,arguments)}function G1(t,e,n,r,s,i,o,u,c){if(W1.apply(this,arguments),Gi){if(Gi){var h=Wa;Gi=!1,Wa=null}else throw Error(W(198));Ga||(Ga=!0,Cc=h)}}function rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function u0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ym(t){if(rs(t)!==t)throw Error(W(188))}function Q1(t){var e=t.alternate;if(!e){if(e=rs(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ym(s),t;if(i===r)return ym(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function c0(t){return t=Q1(t),t!==null?d0(t):null}function d0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=d0(t);if(e!==null)return e;t=t.sibling}return null}var h0=$t.unstable_scheduleCallback,vm=$t.unstable_cancelCallback,K1=$t.unstable_shouldYield,Y1=$t.unstable_requestPaint,qe=$t.unstable_now,X1=$t.unstable_getCurrentPriorityLevel,Bd=$t.unstable_ImmediatePriority,f0=$t.unstable_UserBlockingPriority,Qa=$t.unstable_NormalPriority,J1=$t.unstable_LowPriority,m0=$t.unstable_IdlePriority,Pl=null,yn=null;function Z1(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Pl,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:n_,e_=Math.log,t_=Math.LN2;function n_(t){return t>>>=0,t===0?32:31-(e_(t)/t_|0)|0}var oa=64,aa=4194304;function Ui(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ka(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Ui(u):(i&=o,i!==0&&(r=Ui(i)))}else o=n&~s,o!==0?r=Ui(o):i!==0&&(r=Ui(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sn(e),s=1<<n,r|=t[n],e&=~s;return r}function r_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-sn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=r_(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function kc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p0(){var t=oa;return oa<<=1,!(oa&4194240)&&(oa=64),t}function Pu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=n}function i_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function qd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var be=0;function g0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var y0,Hd,v0,x0,_0,jc=!1,la=[],ir=null,or=null,ar=null,uo=new Map,co=new Map,er=[],o_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xm(t,e){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":uo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":co.delete(e.pointerId)}}function Ii(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Oo(e),e!==null&&Hd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function a_(t,e,n,r,s){switch(e){case"focusin":return ir=Ii(ir,t,e,n,r,s),!0;case"dragenter":return or=Ii(or,t,e,n,r,s),!0;case"mouseover":return ar=Ii(ar,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return uo.set(i,Ii(uo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,co.set(i,Ii(co.get(i)||null,t,e,n,r,s)),!0}return!1}function w0(t){var e=Ur(t.target);if(e!==null){var n=rs(e);if(n!==null){if(e=n.tag,e===13){if(e=u0(n),e!==null){t.blockedOn=e,_0(t.priority,function(){v0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ia(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nc=r,n.target.dispatchEvent(r),Nc=null}else return e=Oo(n),e!==null&&Hd(e),t.blockedOn=n,!1;e.shift()}return!0}function _m(t,e,n){Ia(t)&&n.delete(e)}function l_(){jc=!1,ir!==null&&Ia(ir)&&(ir=null),or!==null&&Ia(or)&&(or=null),ar!==null&&Ia(ar)&&(ar=null),uo.forEach(_m),co.forEach(_m)}function Ai(t,e){t.blockedOn===e&&(t.blockedOn=null,jc||(jc=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,l_)))}function ho(t){function e(s){return Ai(s,t)}if(0<la.length){Ai(la[0],t);for(var n=1;n<la.length;n++){var r=la[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ir!==null&&Ai(ir,t),or!==null&&Ai(or,t),ar!==null&&Ai(ar,t),uo.forEach(e),co.forEach(e),n=0;n<er.length;n++)r=er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<er.length&&(n=er[0],n.blockedOn===null);)w0(n),n.blockedOn===null&&er.shift()}var js=zn.ReactCurrentBatchConfig,Ya=!0;function u_(t,e,n,r){var s=be,i=js.transition;js.transition=null;try{be=1,Wd(t,e,n,r)}finally{be=s,js.transition=i}}function c_(t,e,n,r){var s=be,i=js.transition;js.transition=null;try{be=4,Wd(t,e,n,r)}finally{be=s,js.transition=i}}function Wd(t,e,n,r){if(Ya){var s=Rc(t,e,n,r);if(s===null)Bu(t,e,r,Xa,n),xm(t,r);else if(a_(s,t,e,n,r))r.stopPropagation();else if(xm(t,r),e&4&&-1<o_.indexOf(t)){for(;s!==null;){var i=Oo(s);if(i!==null&&y0(i),i=Rc(t,e,n,r),i===null&&Bu(t,e,r,Xa,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Bu(t,e,r,null,n)}}var Xa=null;function Rc(t,e,n,r){if(Xa=null,t=$d(r),t=Ur(t),t!==null)if(e=rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=u0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xa=t,null}function E0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X1()){case Bd:return 1;case f0:return 4;case Qa:case J1:return 16;case m0:return 536870912;default:return 16}default:return 16}}var nr=null,Gd=null,Aa=null;function b0(){if(Aa)return Aa;var t,e=Gd,n=e.length,r,s="value"in nr?nr.value:nr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Aa=s.slice(t,1<r?1-r:void 0)}function Ca(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ua(){return!0}function wm(){return!1}function qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ua:wm,this.isPropagationStopped=wm,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ua)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ua)},persist:function(){},isPersistent:ua}),e}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qd=qt(Zs),Mo=Le({},Zs,{view:0,detail:0}),d_=qt(Mo),Du,Vu,Ci,Dl=Le({},Mo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ci&&(Ci&&t.type==="mousemove"?(Du=t.screenX-Ci.screenX,Vu=t.screenY-Ci.screenY):Vu=Du=0,Ci=t),Du)},movementY:function(t){return"movementY"in t?t.movementY:Vu}}),Em=qt(Dl),h_=Le({},Dl,{dataTransfer:0}),f_=qt(h_),m_=Le({},Mo,{relatedTarget:0}),Mu=qt(m_),p_=Le({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),g_=qt(p_),y_=Le({},Zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),v_=qt(y_),x_=Le({},Zs,{data:0}),bm=qt(x_),__={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=E_[t])?!!e[t]:!1}function Kd(){return b_}var S_=Le({},Mo,{key:function(t){if(t.key){var e=__[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ca(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?w_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kd,charCode:function(t){return t.type==="keypress"?Ca(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ca(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T_=qt(S_),N_=Le({},Dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sm=qt(N_),I_=Le({},Mo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kd}),A_=qt(I_),C_=Le({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),k_=qt(C_),j_=Le({},Dl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),R_=qt(j_),P_=[9,13,27,32],Yd=Pn&&"CompositionEvent"in window,Qi=null;Pn&&"documentMode"in document&&(Qi=document.documentMode);var D_=Pn&&"TextEvent"in window&&!Qi,S0=Pn&&(!Yd||Qi&&8<Qi&&11>=Qi),Tm=" ",Nm=!1;function T0(t,e){switch(t){case"keyup":return P_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vs=!1;function V_(t,e){switch(t){case"compositionend":return N0(e);case"keypress":return e.which!==32?null:(Nm=!0,Tm);case"textInput":return t=e.data,t===Tm&&Nm?null:t;default:return null}}function M_(t,e){if(vs)return t==="compositionend"||!Yd&&T0(t,e)?(t=b0(),Aa=Gd=nr=null,vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return S0&&e.locale!=="ko"?null:e.data;default:return null}}var O_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Im(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!O_[t.type]:e==="textarea"}function I0(t,e,n,r){s0(r),e=Ja(e,"onChange"),0<e.length&&(n=new Qd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ki=null,fo=null;function L_(t){L0(t,0)}function Vl(t){var e=ws(t);if(Xg(e))return t}function F_(t,e){if(t==="change")return e}var A0=!1;if(Pn){var Ou;if(Pn){var Lu="oninput"in document;if(!Lu){var Am=document.createElement("div");Am.setAttribute("oninput","return;"),Lu=typeof Am.oninput=="function"}Ou=Lu}else Ou=!1;A0=Ou&&(!document.documentMode||9<document.documentMode)}function Cm(){Ki&&(Ki.detachEvent("onpropertychange",C0),fo=Ki=null)}function C0(t){if(t.propertyName==="value"&&Vl(fo)){var e=[];I0(e,fo,t,$d(t)),l0(L_,e)}}function U_(t,e,n){t==="focusin"?(Cm(),Ki=e,fo=n,Ki.attachEvent("onpropertychange",C0)):t==="focusout"&&Cm()}function z_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vl(fo)}function $_(t,e){if(t==="click")return Vl(e)}function B_(t,e){if(t==="input"||t==="change")return Vl(e)}function q_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:q_;function mo(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!mc.call(e,s)||!ln(t[s],e[s]))return!1}return!0}function km(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jm(t,e){var n=km(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=km(n)}}function k0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?k0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function j0(){for(var t=window,e=Ha();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ha(t.document)}return e}function Xd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function H_(t){var e=j0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&k0(n.ownerDocument.documentElement,n)){if(r!==null&&Xd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=jm(n,i);var o=jm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var W_=Pn&&"documentMode"in document&&11>=document.documentMode,xs=null,Pc=null,Yi=null,Dc=!1;function Rm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dc||xs==null||xs!==Ha(r)||(r=xs,"selectionStart"in r&&Xd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yi&&mo(Yi,r)||(Yi=r,r=Ja(Pc,"onSelect"),0<r.length&&(e=new Qd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xs)))}function ca(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _s={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionend:ca("Transition","TransitionEnd")},Fu={},R0={};Pn&&(R0=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function Ml(t){if(Fu[t])return Fu[t];if(!_s[t])return t;var e=_s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R0)return Fu[t]=e[n];return t}var P0=Ml("animationend"),D0=Ml("animationiteration"),V0=Ml("animationstart"),M0=Ml("transitionend"),O0=new Map,Pm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(t,e){O0.set(t,e),ns(e,[t])}for(var Uu=0;Uu<Pm.length;Uu++){var zu=Pm[Uu],G_=zu.toLowerCase(),Q_=zu[0].toUpperCase()+zu.slice(1);Tr(G_,"on"+Q_)}Tr(P0,"onAnimationEnd");Tr(D0,"onAnimationIteration");Tr(V0,"onAnimationStart");Tr("dblclick","onDoubleClick");Tr("focusin","onFocus");Tr("focusout","onBlur");Tr(M0,"onTransitionEnd");Ls("onMouseEnter",["mouseout","mouseover"]);Ls("onMouseLeave",["mouseout","mouseover"]);Ls("onPointerEnter",["pointerout","pointerover"]);Ls("onPointerLeave",["pointerout","pointerover"]);ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K_=new Set("cancel close invalid load scroll toggle".split(" ").concat(zi));function Dm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,G1(r,e,void 0,t),t.currentTarget=null}function L0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Dm(s,u,h),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Dm(s,u,h),i=c}}}if(Ga)throw t=Cc,Ga=!1,Cc=null,t}function ke(t,e){var n=e[Fc];n===void 0&&(n=e[Fc]=new Set);var r=t+"__bubble";n.has(r)||(F0(e,t,2,!1),n.add(r))}function $u(t,e,n){var r=0;e&&(r|=4),F0(n,t,r,e)}var da="_reactListening"+Math.random().toString(36).slice(2);function po(t){if(!t[da]){t[da]=!0,Wg.forEach(function(n){n!=="selectionchange"&&(K_.has(n)||$u(n,!1,t),$u(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[da]||(e[da]=!0,$u("selectionchange",!1,e))}}function F0(t,e,n,r){switch(E0(e)){case 1:var s=u_;break;case 4:s=c_;break;default:s=Wd}n=s.bind(null,e,n,t),s=void 0,!Ac||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Bu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Ur(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}l0(function(){var h=i,m=$d(n),p=[];e:{var g=O0.get(t);if(g!==void 0){var I=Qd,k=t;switch(t){case"keypress":if(Ca(n)===0)break e;case"keydown":case"keyup":I=T_;break;case"focusin":k="focus",I=Mu;break;case"focusout":k="blur",I=Mu;break;case"beforeblur":case"afterblur":I=Mu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Em;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=f_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=A_;break;case P0:case D0:case V0:I=g_;break;case M0:I=k_;break;case"scroll":I=d_;break;case"wheel":I=R_;break;case"copy":case"cut":case"paste":I=v_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Sm}var R=(e&4)!==0,P=!R&&t==="scroll",S=R?g!==null?g+"Capture":null:g;R=[];for(var w=h,N;w!==null;){N=w;var O=N.stateNode;if(N.tag===5&&O!==null&&(N=O,S!==null&&(O=lo(w,S),O!=null&&R.push(go(w,O,N)))),P)break;w=w.return}0<R.length&&(g=new I(g,k,null,n,m),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",g&&n!==Nc&&(k=n.relatedTarget||n.fromElement)&&(Ur(k)||k[Dn]))break e;if((I||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,I?(k=n.relatedTarget||n.toElement,I=h,k=k?Ur(k):null,k!==null&&(P=rs(k),k!==P||k.tag!==5&&k.tag!==6)&&(k=null)):(I=null,k=h),I!==k)){if(R=Em,O="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(R=Sm,O="onPointerLeave",S="onPointerEnter",w="pointer"),P=I==null?g:ws(I),N=k==null?g:ws(k),g=new R(O,w+"leave",I,n,m),g.target=P,g.relatedTarget=N,O=null,Ur(m)===h&&(R=new R(S,w+"enter",k,n,m),R.target=N,R.relatedTarget=P,O=R),P=O,I&&k)t:{for(R=I,S=k,w=0,N=R;N;N=ds(N))w++;for(N=0,O=S;O;O=ds(O))N++;for(;0<w-N;)R=ds(R),w--;for(;0<N-w;)S=ds(S),N--;for(;w--;){if(R===S||S!==null&&R===S.alternate)break t;R=ds(R),S=ds(S)}R=null}else R=null;I!==null&&Vm(p,g,I,R,!1),k!==null&&P!==null&&Vm(p,P,k,R,!0)}}e:{if(g=h?ws(h):window,I=g.nodeName&&g.nodeName.toLowerCase(),I==="select"||I==="input"&&g.type==="file")var M=F_;else if(Im(g))if(A0)M=B_;else{M=z_;var F=U_}else(I=g.nodeName)&&I.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=$_);if(M&&(M=M(t,h))){I0(p,M,n,m);break e}F&&F(t,g,h),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&wc(g,"number",g.value)}switch(F=h?ws(h):window,t){case"focusin":(Im(F)||F.contentEditable==="true")&&(xs=F,Pc=h,Yi=null);break;case"focusout":Yi=Pc=xs=null;break;case"mousedown":Dc=!0;break;case"contextmenu":case"mouseup":case"dragend":Dc=!1,Rm(p,n,m);break;case"selectionchange":if(W_)break;case"keydown":case"keyup":Rm(p,n,m)}var x;if(Yd)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else vs?T0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(S0&&n.locale!=="ko"&&(vs||y!=="onCompositionStart"?y==="onCompositionEnd"&&vs&&(x=b0()):(nr=m,Gd="value"in nr?nr.value:nr.textContent,vs=!0)),F=Ja(h,y),0<F.length&&(y=new bm(y,t,null,n,m),p.push({event:y,listeners:F}),x?y.data=x:(x=N0(n),x!==null&&(y.data=x)))),(x=D_?V_(t,n):M_(t,n))&&(h=Ja(h,"onBeforeInput"),0<h.length&&(m=new bm("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:h}),m.data=x))}L0(p,e)})}function go(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ja(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=lo(t,n),i!=null&&r.unshift(go(t,i,s)),i=lo(t,e),i!=null&&r.push(go(t,i,s))),t=t.return}return r}function ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,s?(c=lo(n,i),c!=null&&o.unshift(go(n,c,u))):s||(c=lo(n,i),c!=null&&o.push(go(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Y_=/\r\n?/g,X_=/\u0000|\uFFFD/g;function Mm(t){return(typeof t=="string"?t:""+t).replace(Y_,`
`).replace(X_,"")}function ha(t,e,n){if(e=Mm(e),Mm(t)!==e&&n)throw Error(W(425))}function Za(){}var Vc=null,Mc=null;function Oc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lc=typeof setTimeout=="function"?setTimeout:void 0,J_=typeof clearTimeout=="function"?clearTimeout:void 0,Om=typeof Promise=="function"?Promise:void 0,Z_=typeof queueMicrotask=="function"?queueMicrotask:typeof Om<"u"?function(t){return Om.resolve(null).then(t).catch(ew)}:Lc;function ew(t){setTimeout(function(){throw t})}function qu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ho(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ho(e)}function lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ei=Math.random().toString(36).slice(2),gn="__reactFiber$"+ei,yo="__reactProps$"+ei,Dn="__reactContainer$"+ei,Fc="__reactEvents$"+ei,tw="__reactListeners$"+ei,nw="__reactHandles$"+ei;function Ur(t){var e=t[gn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dn]||n[gn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lm(t);t!==null;){if(n=t[gn])return n;t=Lm(t)}return e}t=n,n=t.parentNode}return null}function Oo(t){return t=t[gn]||t[Dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Ol(t){return t[yo]||null}var Uc=[],Es=-1;function Nr(t){return{current:t}}function Re(t){0>Es||(t.current=Uc[Es],Uc[Es]=null,Es--)}function Ae(t,e){Es++,Uc[Es]=t.current,t.current=e}var vr={},xt=Nr(vr),kt=Nr(!1),Qr=vr;function Fs(t,e){var n=t.type.contextTypes;if(!n)return vr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function el(){Re(kt),Re(xt)}function Fm(t,e,n){if(xt.current!==vr)throw Error(W(168));Ae(xt,e),Ae(kt,n)}function U0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,U1(t)||"Unknown",s));return Le({},n,r)}function tl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vr,Qr=xt.current,Ae(xt,t),Ae(kt,kt.current),!0}function Um(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=U0(t,e,Qr),r.__reactInternalMemoizedMergedChildContext=t,Re(kt),Re(xt),Ae(xt,t)):Re(kt),Ae(kt,n)}var In=null,Ll=!1,Hu=!1;function z0(t){In===null?In=[t]:In.push(t)}function rw(t){Ll=!0,z0(t)}function Ir(){if(!Hu&&In!==null){Hu=!0;var t=0,e=be;try{var n=In;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}In=null,Ll=!1}catch(s){throw In!==null&&(In=In.slice(t+1)),h0(Bd,Ir),s}finally{be=e,Hu=!1}}return null}var bs=[],Ss=0,nl=null,rl=0,Gt=[],Qt=0,Kr=null,Cn=1,kn="";function Mr(t,e){bs[Ss++]=rl,bs[Ss++]=nl,nl=t,rl=e}function $0(t,e,n){Gt[Qt++]=Cn,Gt[Qt++]=kn,Gt[Qt++]=Kr,Kr=t;var r=Cn;t=kn;var s=32-sn(r)-1;r&=~(1<<s),n+=1;var i=32-sn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Cn=1<<32-sn(e)+s|n<<s|r,kn=i+t}else Cn=1<<i|n<<s|r,kn=t}function Jd(t){t.return!==null&&(Mr(t,1),$0(t,1,0))}function Zd(t){for(;t===nl;)nl=bs[--Ss],bs[Ss]=null,rl=bs[--Ss],bs[Ss]=null;for(;t===Kr;)Kr=Gt[--Qt],Gt[Qt]=null,kn=Gt[--Qt],Gt[Qt]=null,Cn=Gt[--Qt],Gt[Qt]=null}var zt=null,Ft=null,De=!1,rn=null;function B0(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ft=lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Kr!==null?{id:Cn,overflow:kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ft=null,!0):!1;default:return!1}}function zc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $c(t){if(De){var e=Ft;if(e){var n=e;if(!zm(t,e)){if(zc(t))throw Error(W(418));e=lr(n.nextSibling);var r=zt;e&&zm(t,e)?B0(r,n):(t.flags=t.flags&-4097|2,De=!1,zt=t)}}else{if(zc(t))throw Error(W(418));t.flags=t.flags&-4097|2,De=!1,zt=t}}}function $m(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function fa(t){if(t!==zt)return!1;if(!De)return $m(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Oc(t.type,t.memoizedProps)),e&&(e=Ft)){if(zc(t))throw q0(),Error(W(418));for(;e;)B0(t,e),e=lr(e.nextSibling)}if($m(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=zt?lr(t.stateNode.nextSibling):null;return!0}function q0(){for(var t=Ft;t;)t=lr(t.nextSibling)}function Us(){Ft=zt=null,De=!1}function eh(t){rn===null?rn=[t]:rn.push(t)}var sw=zn.ReactCurrentBatchConfig;function ki(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function ma(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bm(t){var e=t._init;return e(t._payload)}function H0(t){function e(S,w){if(t){var N=S.deletions;N===null?(S.deletions=[w],S.flags|=16):N.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function s(S,w){return S=hr(S,w),S.index=0,S.sibling=null,S}function i(S,w,N){return S.index=N,t?(N=S.alternate,N!==null?(N=N.index,N<w?(S.flags|=2,w):N):(S.flags|=2,w)):(S.flags|=1048576,w)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,w,N,O){return w===null||w.tag!==6?(w=Ju(N,S.mode,O),w.return=S,w):(w=s(w,N),w.return=S,w)}function c(S,w,N,O){var M=N.type;return M===ys?m(S,w,N.props.children,O,N.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Jn&&Bm(M)===w.type)?(O=s(w,N.props),O.ref=ki(S,w,N),O.return=S,O):(O=Ma(N.type,N.key,N.props,null,S.mode,O),O.ref=ki(S,w,N),O.return=S,O)}function h(S,w,N,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=Zu(N,S.mode,O),w.return=S,w):(w=s(w,N.children||[]),w.return=S,w)}function m(S,w,N,O,M){return w===null||w.tag!==7?(w=Hr(N,S.mode,O,M),w.return=S,w):(w=s(w,N),w.return=S,w)}function p(S,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ju(""+w,S.mode,N),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ra:return N=Ma(w.type,w.key,w.props,null,S.mode,N),N.ref=ki(S,null,w),N.return=S,N;case gs:return w=Zu(w,S.mode,N),w.return=S,w;case Jn:var O=w._init;return p(S,O(w._payload),N)}if(Fi(w)||Ti(w))return w=Hr(w,S.mode,N,null),w.return=S,w;ma(S,w)}return null}function g(S,w,N,O){var M=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return M!==null?null:u(S,w,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ra:return N.key===M?c(S,w,N,O):null;case gs:return N.key===M?h(S,w,N,O):null;case Jn:return M=N._init,g(S,w,M(N._payload),O)}if(Fi(N)||Ti(N))return M!==null?null:m(S,w,N,O,null);ma(S,N)}return null}function I(S,w,N,O,M){if(typeof O=="string"&&O!==""||typeof O=="number")return S=S.get(N)||null,u(w,S,""+O,M);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ra:return S=S.get(O.key===null?N:O.key)||null,c(w,S,O,M);case gs:return S=S.get(O.key===null?N:O.key)||null,h(w,S,O,M);case Jn:var F=O._init;return I(S,w,N,F(O._payload),M)}if(Fi(O)||Ti(O))return S=S.get(N)||null,m(w,S,O,M,null);ma(w,O)}return null}function k(S,w,N,O){for(var M=null,F=null,x=w,y=w=0,_=null;x!==null&&y<N.length;y++){x.index>y?(_=x,x=null):_=x.sibling;var E=g(S,x,N[y],O);if(E===null){x===null&&(x=_);break}t&&x&&E.alternate===null&&e(S,x),w=i(E,w,y),F===null?M=E:F.sibling=E,F=E,x=_}if(y===N.length)return n(S,x),De&&Mr(S,y),M;if(x===null){for(;y<N.length;y++)x=p(S,N[y],O),x!==null&&(w=i(x,w,y),F===null?M=x:F.sibling=x,F=x);return De&&Mr(S,y),M}for(x=r(S,x);y<N.length;y++)_=I(x,S,y,N[y],O),_!==null&&(t&&_.alternate!==null&&x.delete(_.key===null?y:_.key),w=i(_,w,y),F===null?M=_:F.sibling=_,F=_);return t&&x.forEach(function(T){return e(S,T)}),De&&Mr(S,y),M}function R(S,w,N,O){var M=Ti(N);if(typeof M!="function")throw Error(W(150));if(N=M.call(N),N==null)throw Error(W(151));for(var F=M=null,x=w,y=w=0,_=null,E=N.next();x!==null&&!E.done;y++,E=N.next()){x.index>y?(_=x,x=null):_=x.sibling;var T=g(S,x,E.value,O);if(T===null){x===null&&(x=_);break}t&&x&&T.alternate===null&&e(S,x),w=i(T,w,y),F===null?M=T:F.sibling=T,F=T,x=_}if(E.done)return n(S,x),De&&Mr(S,y),M;if(x===null){for(;!E.done;y++,E=N.next())E=p(S,E.value,O),E!==null&&(w=i(E,w,y),F===null?M=E:F.sibling=E,F=E);return De&&Mr(S,y),M}for(x=r(S,x);!E.done;y++,E=N.next())E=I(x,S,y,E.value,O),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?y:E.key),w=i(E,w,y),F===null?M=E:F.sibling=E,F=E);return t&&x.forEach(function(C){return e(S,C)}),De&&Mr(S,y),M}function P(S,w,N,O){if(typeof N=="object"&&N!==null&&N.type===ys&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case ra:e:{for(var M=N.key,F=w;F!==null;){if(F.key===M){if(M=N.type,M===ys){if(F.tag===7){n(S,F.sibling),w=s(F,N.props.children),w.return=S,S=w;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Jn&&Bm(M)===F.type){n(S,F.sibling),w=s(F,N.props),w.ref=ki(S,F,N),w.return=S,S=w;break e}n(S,F);break}else e(S,F);F=F.sibling}N.type===ys?(w=Hr(N.props.children,S.mode,O,N.key),w.return=S,S=w):(O=Ma(N.type,N.key,N.props,null,S.mode,O),O.ref=ki(S,w,N),O.return=S,S=O)}return o(S);case gs:e:{for(F=N.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){n(S,w.sibling),w=s(w,N.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=Zu(N,S.mode,O),w.return=S,S=w}return o(S);case Jn:return F=N._init,P(S,w,F(N._payload),O)}if(Fi(N))return k(S,w,N,O);if(Ti(N))return R(S,w,N,O);ma(S,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(n(S,w.sibling),w=s(w,N),w.return=S,S=w):(n(S,w),w=Ju(N,S.mode,O),w.return=S,S=w),o(S)):n(S,w)}return P}var zs=H0(!0),W0=H0(!1),sl=Nr(null),il=null,Ts=null,th=null;function nh(){th=Ts=il=null}function rh(t){var e=sl.current;Re(sl),t._currentValue=e}function Bc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rs(t,e){il=t,th=Ts=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Jt(t){var e=t._currentValue;if(th!==t)if(t={context:t,memoizedValue:e,next:null},Ts===null){if(il===null)throw Error(W(308));Ts=t,il.dependencies={lanes:0,firstContext:t}}else Ts=Ts.next=t;return e}var zr=null;function sh(t){zr===null?zr=[t]:zr.push(t)}function G0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,sh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vn(t,r)}function Vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zn=!1;function ih(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vn(t,n)}return s=r.interleaved,s===null?(e.next=e,sh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vn(t,n)}function ka(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qd(t,n)}}function qm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ol(t,e,n,r){var s=t.updateQueue;Zn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==o&&(u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,m=h=c=null,u=i;do{var g=u.lane,I=u.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:I,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,R=u;switch(g=e,I=n,R.tag){case 1:if(k=R.payload,typeof k=="function"){p=k.call(I,p,g);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=R.payload,g=typeof k=="function"?k.call(I,p,g):k,g==null)break e;p=Le({},p,g);break e;case 2:Zn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[u]:g.push(u))}else I={eventTime:I,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(h=m=I,c=p):m=m.next=I,o|=g;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;g=u,u=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(c=p),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Xr|=o,t.lanes=o,t.memoizedState=p}}function Hm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var Lo={},vn=Nr(Lo),vo=Nr(Lo),xo=Nr(Lo);function $r(t){if(t===Lo)throw Error(W(174));return t}function oh(t,e){switch(Ae(xo,e),Ae(vo,t),Ae(vn,Lo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bc(e,t)}Re(vn),Ae(vn,e)}function $s(){Re(vn),Re(vo),Re(xo)}function K0(t){$r(xo.current);var e=$r(vn.current),n=bc(e,t.type);e!==n&&(Ae(vo,t),Ae(vn,n))}function ah(t){vo.current===t&&(Re(vn),Re(vo))}var Me=Nr(0);function al(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wu=[];function lh(){for(var t=0;t<Wu.length;t++)Wu[t]._workInProgressVersionPrimary=null;Wu.length=0}var ja=zn.ReactCurrentDispatcher,Gu=zn.ReactCurrentBatchConfig,Yr=0,Oe=null,Xe=null,st=null,ll=!1,Xi=!1,_o=0,iw=0;function ft(){throw Error(W(321))}function uh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ln(t[n],e[n]))return!1;return!0}function ch(t,e,n,r,s,i){if(Yr=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ja.current=t===null||t.memoizedState===null?uw:cw,t=n(r,s),Xi){i=0;do{if(Xi=!1,_o=0,25<=i)throw Error(W(301));i+=1,st=Xe=null,e.updateQueue=null,ja.current=dw,t=n(r,s)}while(Xi)}if(ja.current=ul,e=Xe!==null&&Xe.next!==null,Yr=0,st=Xe=Oe=null,ll=!1,e)throw Error(W(300));return t}function dh(){var t=_o!==0;return _o=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Oe.memoizedState=st=t:st=st.next=t,st}function Zt(){if(Xe===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=st===null?Oe.memoizedState:st.next;if(e!==null)st=e,Xe=t;else{if(t===null)throw Error(W(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},st===null?Oe.memoizedState=st=t:st=st.next=t}return st}function wo(t,e){return typeof e=="function"?e(t):e}function Qu(t){var e=Zt(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Xe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,h=i;do{var m=h.lane;if((Yr&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=p,o=r):c=c.next=p,Oe.lanes|=m,Xr|=m}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=u,ln(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,Xr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ku(t){var e=Zt(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ln(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Y0(){}function X0(t,e){var n=Oe,r=Zt(),s=e(),i=!ln(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,hh(ey.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,Eo(9,Z0.bind(null,n,r,s,e),void 0,null),it===null)throw Error(W(349));Yr&30||J0(n,e,s)}return s}function J0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Z0(t,e,n,r){e.value=n,e.getSnapshot=r,ty(e)&&ny(t)}function ey(t,e,n){return n(function(){ty(e)&&ny(t)})}function ty(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ln(t,n)}catch{return!0}}function ny(t){var e=Vn(t,1);e!==null&&on(e,t,1,-1)}function Wm(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:t},e.queue=t,t=t.dispatch=lw.bind(null,Oe,t),[e.memoizedState,t]}function Eo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ry(){return Zt().memoizedState}function Ra(t,e,n,r){var s=mn();Oe.flags|=t,s.memoizedState=Eo(1|e,n,void 0,r===void 0?null:r)}function Fl(t,e,n,r){var s=Zt();r=r===void 0?null:r;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,r!==null&&uh(r,o.deps)){s.memoizedState=Eo(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=Eo(1|e,n,i,r)}function Gm(t,e){return Ra(8390656,8,t,e)}function hh(t,e){return Fl(2048,8,t,e)}function sy(t,e){return Fl(4,2,t,e)}function iy(t,e){return Fl(4,4,t,e)}function oy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ay(t,e,n){return n=n!=null?n.concat([t]):null,Fl(4,4,oy.bind(null,e,t),n)}function fh(){}function ly(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function uy(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cy(t,e,n){return Yr&21?(ln(n,e)||(n=p0(),Oe.lanes|=n,Xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function ow(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=Gu.transition;Gu.transition={};try{t(!1),e()}finally{be=n,Gu.transition=r}}function dy(){return Zt().memoizedState}function aw(t,e,n){var r=dr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hy(t))fy(e,n);else if(n=G0(t,e,n,r),n!==null){var s=Et();on(n,t,r,s),my(n,e,r)}}function lw(t,e,n){var r=dr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hy(t))fy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,ln(u,o)){var c=e.interleaved;c===null?(s.next=s,sh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=G0(t,e,s,r),n!==null&&(s=Et(),on(n,t,r,s),my(n,e,r))}}function hy(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function fy(t,e){Xi=ll=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function my(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qd(t,n)}}var ul={readContext:Jt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},uw={readContext:Jt,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:Jt,useEffect:Gm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ra(4194308,4,oy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ra(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ra(4,2,t,e)},useMemo:function(t,e){var n=mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aw.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:Wm,useDebugValue:fh,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=Wm(!1),e=t[0];return t=ow.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=mn();if(De){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),it===null)throw Error(W(349));Yr&30||J0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Gm(ey.bind(null,r,i,t),[t]),r.flags|=2048,Eo(9,Z0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mn(),e=it.identifierPrefix;if(De){var n=kn,r=Cn;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_o++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cw={readContext:Jt,useCallback:ly,useContext:Jt,useEffect:hh,useImperativeHandle:ay,useInsertionEffect:sy,useLayoutEffect:iy,useMemo:uy,useReducer:Qu,useRef:ry,useState:function(){return Qu(wo)},useDebugValue:fh,useDeferredValue:function(t){var e=Zt();return cy(e,Xe.memoizedState,t)},useTransition:function(){var t=Qu(wo)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Y0,useSyncExternalStore:X0,useId:dy,unstable_isNewReconciler:!1},dw={readContext:Jt,useCallback:ly,useContext:Jt,useEffect:hh,useImperativeHandle:ay,useInsertionEffect:sy,useLayoutEffect:iy,useMemo:uy,useReducer:Ku,useRef:ry,useState:function(){return Ku(wo)},useDebugValue:fh,useDeferredValue:function(t){var e=Zt();return Xe===null?e.memoizedState=t:cy(e,Xe.memoizedState,t)},useTransition:function(){var t=Ku(wo)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Y0,useSyncExternalStore:X0,useId:dy,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ul={isMounted:function(t){return(t=t._reactInternals)?rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),s=dr(t),i=jn(r,s);i.payload=e,n!=null&&(i.callback=n),e=ur(t,i,s),e!==null&&(on(e,t,s,r),ka(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),s=dr(t),i=jn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ur(t,i,s),e!==null&&(on(e,t,s,r),ka(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=dr(t),s=jn(n,r);s.tag=2,e!=null&&(s.callback=e),e=ur(t,s,r),e!==null&&(on(e,t,r,n),ka(e,t,r))}};function Qm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!mo(n,r)||!mo(s,i):!0}function py(t,e,n){var r=!1,s=vr,i=e.contextType;return typeof i=="object"&&i!==null?i=Jt(i):(s=jt(e)?Qr:xt.current,r=e.contextTypes,i=(r=r!=null)?Fs(t,s):vr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ul,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Km(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ul.enqueueReplaceState(e,e.state,null)}function Hc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ih(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Jt(i):(i=jt(e)?Qr:xt.current,s.context=Fs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ul.enqueueReplaceState(s,s.state,null),ol(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Bs(t,e){try{var n="",r=e;do n+=F1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Yu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hw=typeof WeakMap=="function"?WeakMap:Map;function gy(t,e,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dl||(dl=!0,nd=r),Wc(t,e)},n}function yy(t,e,n){n=jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Wc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Wc(t,e),typeof r!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ym(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Nw.bind(null,t,e,n),e.then(t,t))}function Xm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jn(-1,1),e.tag=2,ur(n,e,1))),n.lanes|=1),t)}var fw=zn.ReactCurrentOwner,Ct=!1;function wt(t,e,n,r){e.child=t===null?W0(e,null,n,r):zs(e,t.child,n,r)}function Zm(t,e,n,r,s){n=n.render;var i=e.ref;return Rs(e,s),r=ch(t,e,n,r,i,s),n=dh(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mn(t,e,s)):(De&&n&&Jd(e),e.flags|=1,wt(t,e,r,s),e.child)}function ep(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!wh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,vy(t,e,i,r,s)):(t=Ma(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:mo,n(o,r)&&t.ref===e.ref)return Mn(t,e,s)}return e.flags|=1,t=hr(i,r),t.ref=e.ref,t.return=e,e.child=t}function vy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(mo(i,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,Mn(t,e,s)}return Gc(t,e,n,r,s)}function xy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Is,Ot),Ot|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Is,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ae(Is,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ae(Is,Ot),Ot|=r;return wt(t,e,s,n),e.child}function _y(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gc(t,e,n,r,s){var i=jt(n)?Qr:xt.current;return i=Fs(e,i),Rs(e,s),n=ch(t,e,n,r,i,s),r=dh(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mn(t,e,s)):(De&&r&&Jd(e),e.flags|=1,wt(t,e,n,s),e.child)}function tp(t,e,n,r,s){if(jt(n)){var i=!0;tl(e)}else i=!1;if(Rs(e,s),e.stateNode===null)Pa(t,e),py(e,n,r),Hc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Jt(h):(h=jt(n)?Qr:xt.current,h=Fs(e,h));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&Km(e,o,r,h),Zn=!1;var g=e.memoizedState;o.state=g,ol(e,r,o,s),c=e.memoizedState,u!==r||g!==c||kt.current||Zn?(typeof m=="function"&&(qc(e,n,m,r),c=e.memoizedState),(u=Zn||Qm(e,n,u,r,g,c,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Q0(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:tn(e.type,u),o.props=h,p=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Jt(c):(c=jt(n)?Qr:xt.current,c=Fs(e,c));var I=n.getDerivedStateFromProps;(m=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==p||g!==c)&&Km(e,o,r,c),Zn=!1,g=e.memoizedState,o.state=g,ol(e,r,o,s);var k=e.memoizedState;u!==p||g!==k||kt.current||Zn?(typeof I=="function"&&(qc(e,n,I,r),k=e.memoizedState),(h=Zn||Qm(e,n,h,r,g,k,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Qc(t,e,n,r,i,s)}function Qc(t,e,n,r,s,i){_y(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Um(e,n,!1),Mn(t,e,i);r=e.stateNode,fw.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=zs(e,t.child,null,i),e.child=zs(e,null,u,i)):wt(t,e,u,i),e.memoizedState=r.state,s&&Um(e,n,!0),e.child}function wy(t){var e=t.stateNode;e.pendingContext?Fm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fm(t,e.context,!1),oh(t,e.containerInfo)}function np(t,e,n,r,s){return Us(),eh(s),e.flags|=256,wt(t,e,n,r),e.child}var Kc={dehydrated:null,treeContext:null,retryLane:0};function Yc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ey(t,e,n){var r=e.pendingProps,s=Me.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ae(Me,s&1),t===null)return $c(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Bl(o,r,0,null),t=Hr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Yc(n),e.memoizedState=Kc,t):mh(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return mw(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=hr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=hr(u,i):(i=Hr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Yc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Kc,r}return i=t.child,t=i.sibling,r=hr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mh(t,e){return e=Bl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pa(t,e,n,r){return r!==null&&eh(r),zs(e,t.child,null,n),t=mh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mw(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Yu(Error(W(422))),pa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Bl({mode:"visible",children:r.children},s,0,null),i=Hr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&zs(e,t.child,null,o),e.child.memoizedState=Yc(o),e.memoizedState=Kc,i);if(!(e.mode&1))return pa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(W(419)),r=Yu(i,r,void 0),pa(t,e,o,r)}if(u=(o&t.childLanes)!==0,Ct||u){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vn(t,s),on(r,t,s,-1))}return _h(),r=Yu(Error(W(421))),pa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Iw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ft=lr(s.nextSibling),zt=e,De=!0,rn=null,t!==null&&(Gt[Qt++]=Cn,Gt[Qt++]=kn,Gt[Qt++]=Kr,Cn=t.id,kn=t.overflow,Kr=e),e=mh(e,r.children),e.flags|=4096,e)}function rp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bc(t.return,e,n)}function Xu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function by(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rp(t,n,e);else if(t.tag===19)rp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Me,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&al(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Xu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&al(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Xu(e,!0,n,null,i);break;case"together":Xu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pw(t,e,n){switch(e.tag){case 3:wy(e),Us();break;case 5:K0(e);break;case 1:jt(e.type)&&tl(e);break;case 4:oh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ae(sl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?Ey(t,e,n):(Ae(Me,Me.current&1),t=Mn(t,e,n),t!==null?t.sibling:null);Ae(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return by(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,xy(t,e,n)}return Mn(t,e,n)}var Sy,Xc,Ty,Ny;Sy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xc=function(){};Ty=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,$r(vn.current);var i=null;switch(n){case"input":s=xc(t,s),r=xc(t,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=Ec(t,s),r=Ec(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Za)}Sc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(oo.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(oo.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ke("scroll",t),i||u===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Ny=function(t,e,n,r){n!==r&&(e.flags|=4)};function ji(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gw(t,e,n){var r=e.pendingProps;switch(Zd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return jt(e.type)&&el(),mt(e),null;case 3:return r=e.stateNode,$s(),Re(kt),Re(xt),lh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rn!==null&&(id(rn),rn=null))),Xc(t,e),mt(e),null;case 5:ah(e);var s=$r(xo.current);if(n=e.type,t!==null&&e.stateNode!=null)Ty(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return mt(e),null}if(t=$r(vn.current),fa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[gn]=e,r[yo]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<zi.length;s++)ke(zi[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":hm(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":mm(r,i),ke("invalid",r)}Sc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&ha(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&ha(r.textContent,u,t),s=["children",""+u]):oo.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":sa(r),fm(r,i,!0);break;case"textarea":sa(r),pm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Za)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=e0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gn]=e,t[yo]=r,Sy(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tc(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<zi.length;s++)ke(zi[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":hm(t,r),s=xc(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),ke("invalid",t);break;case"textarea":mm(t,r),s=Ec(t,r),ke("invalid",t);break;default:s=r}Sc(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?r0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&t0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ao(t,c):typeof c=="number"&&ao(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ke("scroll",t):c!=null&&Ld(t,i,c,o))}switch(n){case"input":sa(t),fm(t,r,!1);break;case"textarea":sa(t),pm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?As(t,!!r.multiple,i,!1):r.defaultValue!=null&&As(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Za)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)Ny(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=$r(xo.current),$r(vn.current),fa(e)){if(r=e.stateNode,n=e.memoizedProps,r[gn]=e,(i=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:ha(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ha(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gn]=e,e.stateNode=r}return mt(e),null;case 13:if(Re(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&Ft!==null&&e.mode&1&&!(e.flags&128))q0(),Us(),e.flags|=98560,i=!1;else if(i=fa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[gn]=e}else Us(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),i=!1}else rn!==null&&(id(rn),rn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?Je===0&&(Je=3):_h())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return $s(),Xc(t,e),t===null&&po(e.stateNode.containerInfo),mt(e),null;case 10:return rh(e.type._context),mt(e),null;case 17:return jt(e.type)&&el(),mt(e),null;case 19:if(Re(Me),i=e.memoizedState,i===null)return mt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ji(i,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=al(t),o!==null){for(e.flags|=128,ji(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Me,Me.current&1|2),e.child}t=t.sibling}i.tail!==null&&qe()>qs&&(e.flags|=128,r=!0,ji(i,!1),e.lanes=4194304)}else{if(!r)if(t=al(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ji(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!De)return mt(e),null}else 2*qe()-i.renderingStartTime>qs&&n!==1073741824&&(e.flags|=128,r=!0,ji(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qe(),e.sibling=null,n=Me.current,Ae(Me,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return xh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function yw(t,e){switch(Zd(e),e.tag){case 1:return jt(e.type)&&el(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $s(),Re(kt),Re(xt),lh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ah(e),null;case 13:if(Re(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Us()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Me),null;case 4:return $s(),null;case 10:return rh(e.type._context),null;case 22:case 23:return xh(),null;case 24:return null;default:return null}}var ga=!1,yt=!1,vw=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Ns(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function Jc(t,e,n){try{n()}catch(r){$e(t,e,r)}}var sp=!1;function xw(t,e){if(Vc=Ya,t=j0(),Xd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,m=0,p=t,g=null;t:for(;;){for(var I;p!==n||s!==0&&p.nodeType!==3||(u=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(I=p.firstChild)!==null;)g=p,p=I;for(;;){if(p===t)break t;if(g===n&&++h===s&&(u=o),g===i&&++m===r&&(c=o),(I=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=I}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mc={focusedElem:t,selectionRange:n},Ya=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var R=k.memoizedProps,P=k.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?R:tn(e.type,R),P);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(O){$e(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return k=sp,sp=!1,k}function Ji(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Jc(e,n,i)}s=s.next}while(s!==r)}}function zl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Iy(t){var e=t.alternate;e!==null&&(t.alternate=null,Iy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gn],delete e[yo],delete e[Fc],delete e[tw],delete e[nw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ay(t){return t.tag===5||t.tag===3||t.tag===4}function ip(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ay(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ed(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Za));else if(r!==4&&(t=t.child,t!==null))for(ed(t,e,n),t=t.sibling;t!==null;)ed(t,e,n),t=t.sibling}function td(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(td(t,e,n),t=t.sibling;t!==null;)td(t,e,n),t=t.sibling}var ot=null,nn=!1;function Kn(t,e,n){for(n=n.child;n!==null;)Cy(t,e,n),n=n.sibling}function Cy(t,e,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Pl,n)}catch{}switch(n.tag){case 5:yt||Ns(n,e);case 6:var r=ot,s=nn;ot=null,Kn(t,e,n),ot=r,nn=s,ot!==null&&(nn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(nn?(t=ot,n=n.stateNode,t.nodeType===8?qu(t.parentNode,n):t.nodeType===1&&qu(t,n),ho(t)):qu(ot,n.stateNode));break;case 4:r=ot,s=nn,ot=n.stateNode.containerInfo,nn=!0,Kn(t,e,n),ot=r,nn=s;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Jc(n,e,o),s=s.next}while(s!==r)}Kn(t,e,n);break;case 1:if(!yt&&(Ns(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){$e(n,e,u)}Kn(t,e,n);break;case 21:Kn(t,e,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,Kn(t,e,n),yt=r):Kn(t,e,n);break;default:Kn(t,e,n)}}function op(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vw),e.forEach(function(r){var s=Aw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function en(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:ot=u.stateNode,nn=!1;break e;case 3:ot=u.stateNode.containerInfo,nn=!0;break e;case 4:ot=u.stateNode.containerInfo,nn=!0;break e}u=u.return}if(ot===null)throw Error(W(160));Cy(i,o,s),ot=null,nn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){$e(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ky(e,t),e=e.sibling}function ky(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(e,t),fn(t),r&4){try{Ji(3,t,t.return),zl(3,t)}catch(R){$e(t,t.return,R)}try{Ji(5,t,t.return)}catch(R){$e(t,t.return,R)}}break;case 1:en(e,t),fn(t),r&512&&n!==null&&Ns(n,n.return);break;case 5:if(en(e,t),fn(t),r&512&&n!==null&&Ns(n,n.return),t.flags&32){var s=t.stateNode;try{ao(s,"")}catch(R){$e(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Jg(s,i),Tc(u,o);var h=Tc(u,i);for(o=0;o<c.length;o+=2){var m=c[o],p=c[o+1];m==="style"?r0(s,p):m==="dangerouslySetInnerHTML"?t0(s,p):m==="children"?ao(s,p):Ld(s,m,p,h)}switch(u){case"input":_c(s,i);break;case"textarea":Zg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?As(s,!!i.multiple,I,!1):g!==!!i.multiple&&(i.defaultValue!=null?As(s,!!i.multiple,i.defaultValue,!0):As(s,!!i.multiple,i.multiple?[]:"",!1))}s[yo]=i}catch(R){$e(t,t.return,R)}}break;case 6:if(en(e,t),fn(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){$e(t,t.return,R)}}break;case 3:if(en(e,t),fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ho(e.containerInfo)}catch(R){$e(t,t.return,R)}break;case 4:en(e,t),fn(t);break;case 13:en(e,t),fn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(yh=qe())),r&4&&op(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(yt=(h=yt)||m,en(e,t),yt=h):en(e,t),fn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(Z=t,m=t.child;m!==null;){for(p=Z=m;Z!==null;){switch(g=Z,I=g.child,g.tag){case 0:case 11:case 14:case 15:Ji(4,g,g.return);break;case 1:Ns(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(R){$e(r,n,R)}}break;case 5:Ns(g,g.return);break;case 22:if(g.memoizedState!==null){lp(p);continue}}I!==null?(I.return=g,Z=I):lp(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=n0("display",o))}catch(R){$e(t,t.return,R)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(R){$e(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:en(e,t),fn(t),r&4&&op(t);break;case 21:break;default:en(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ay(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ao(s,""),r.flags&=-33);var i=ip(t);td(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=ip(t);ed(t,u,o);break;default:throw Error(W(161))}}catch(c){$e(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _w(t,e,n){Z=t,jy(t)}function jy(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ga;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||yt;u=ga;var h=yt;if(ga=o,(yt=c)&&!h)for(Z=s;Z!==null;)o=Z,c=o.child,o.tag===22&&o.memoizedState!==null?up(s):c!==null?(c.return=o,Z=c):up(s);for(;i!==null;)Z=i,jy(i),i=i.sibling;Z=s,ga=u,yt=h}ap(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):ap(t)}}function ap(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yt||zl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!yt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Hm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hm(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&ho(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}yt||e.flags&512&&Zc(e)}catch(g){$e(e,e.return,g)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function lp(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function up(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zl(4,e)}catch(c){$e(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){$e(e,s,c)}}var i=e.return;try{Zc(e)}catch(c){$e(e,i,c)}break;case 5:var o=e.return;try{Zc(e)}catch(c){$e(e,o,c)}}}catch(c){$e(e,e.return,c)}if(e===t){Z=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Z=u;break}Z=e.return}}var ww=Math.ceil,cl=zn.ReactCurrentDispatcher,ph=zn.ReactCurrentOwner,Xt=zn.ReactCurrentBatchConfig,_e=0,it=null,Ge=null,ut=0,Ot=0,Is=Nr(0),Je=0,bo=null,Xr=0,$l=0,gh=0,Zi=null,It=null,yh=0,qs=1/0,Nn=null,dl=!1,nd=null,cr=null,ya=!1,rr=null,hl=0,eo=0,rd=null,Da=-1,Va=0;function Et(){return _e&6?qe():Da!==-1?Da:Da=qe()}function dr(t){return t.mode&1?_e&2&&ut!==0?ut&-ut:sw.transition!==null?(Va===0&&(Va=p0()),Va):(t=be,t!==0||(t=window.event,t=t===void 0?16:E0(t.type)),t):1}function on(t,e,n,r){if(50<eo)throw eo=0,rd=null,Error(W(185));Vo(t,n,r),(!(_e&2)||t!==it)&&(t===it&&(!(_e&2)&&($l|=n),Je===4&&tr(t,ut)),Rt(t,r),n===1&&_e===0&&!(e.mode&1)&&(qs=qe()+500,Ll&&Ir()))}function Rt(t,e){var n=t.callbackNode;s_(t,e);var r=Ka(t,t===it?ut:0);if(r===0)n!==null&&vm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vm(n),e===1)t.tag===0?rw(cp.bind(null,t)):z0(cp.bind(null,t)),Z_(function(){!(_e&6)&&Ir()}),n=null;else{switch(g0(r)){case 1:n=Bd;break;case 4:n=f0;break;case 16:n=Qa;break;case 536870912:n=m0;break;default:n=Qa}n=Fy(n,Ry.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ry(t,e){if(Da=-1,Va=0,_e&6)throw Error(W(327));var n=t.callbackNode;if(Ps()&&t.callbackNode!==n)return null;var r=Ka(t,t===it?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fl(t,r);else{e=r;var s=_e;_e|=2;var i=Dy();(it!==t||ut!==e)&&(Nn=null,qs=qe()+500,qr(t,e));do try{Sw();break}catch(u){Py(t,u)}while(!0);nh(),cl.current=i,_e=s,Ge!==null?e=0:(it=null,ut=0,e=Je)}if(e!==0){if(e===2&&(s=kc(t),s!==0&&(r=s,e=sd(t,s))),e===1)throw n=bo,qr(t,0),tr(t,r),Rt(t,qe()),n;if(e===6)tr(t,r);else{if(s=t.current.alternate,!(r&30)&&!Ew(s)&&(e=fl(t,r),e===2&&(i=kc(t),i!==0&&(r=i,e=sd(t,i))),e===1))throw n=bo,qr(t,0),tr(t,r),Rt(t,qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Or(t,It,Nn);break;case 3:if(tr(t,r),(r&130023424)===r&&(e=yh+500-qe(),10<e)){if(Ka(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Lc(Or.bind(null,t,It,Nn),e);break}Or(t,It,Nn);break;case 4:if(tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-sn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ww(r/1960))-r,10<r){t.timeoutHandle=Lc(Or.bind(null,t,It,Nn),r);break}Or(t,It,Nn);break;case 5:Or(t,It,Nn);break;default:throw Error(W(329))}}}return Rt(t,qe()),t.callbackNode===n?Ry.bind(null,t):null}function sd(t,e){var n=Zi;return t.current.memoizedState.isDehydrated&&(qr(t,e).flags|=256),t=fl(t,e),t!==2&&(e=It,It=n,e!==null&&id(e)),t}function id(t){It===null?It=t:It.push.apply(It,t)}function Ew(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ln(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function tr(t,e){for(e&=~gh,e&=~$l,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),r=1<<n;t[n]=-1,e&=~r}}function cp(t){if(_e&6)throw Error(W(327));Ps();var e=Ka(t,0);if(!(e&1))return Rt(t,qe()),null;var n=fl(t,e);if(t.tag!==0&&n===2){var r=kc(t);r!==0&&(e=r,n=sd(t,r))}if(n===1)throw n=bo,qr(t,0),tr(t,e),Rt(t,qe()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Or(t,It,Nn),Rt(t,qe()),null}function vh(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(qs=qe()+500,Ll&&Ir())}}function Jr(t){rr!==null&&rr.tag===0&&!(_e&6)&&Ps();var e=_e;_e|=1;var n=Xt.transition,r=be;try{if(Xt.transition=null,be=1,t)return t()}finally{be=r,Xt.transition=n,_e=e,!(_e&6)&&Ir()}}function xh(){Ot=Is.current,Re(Is)}function qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,J_(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(Zd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&el();break;case 3:$s(),Re(kt),Re(xt),lh();break;case 5:ah(r);break;case 4:$s();break;case 13:Re(Me);break;case 19:Re(Me);break;case 10:rh(r.type._context);break;case 22:case 23:xh()}n=n.return}if(it=t,Ge=t=hr(t.current,null),ut=Ot=e,Je=0,bo=null,gh=$l=Xr=0,It=Zi=null,zr!==null){for(e=0;e<zr.length;e++)if(n=zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zr=null}return t}function Py(t,e){do{var n=Ge;try{if(nh(),ja.current=ul,ll){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ll=!1}if(Yr=0,st=Xe=Oe=null,Xi=!1,_o=0,ph.current=null,n===null||n.return===null){Je=1,bo=e,Ge=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=ut,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=u,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var I=Xm(o);if(I!==null){I.flags&=-257,Jm(I,o,u,i,e),I.mode&1&&Ym(i,h,e),e=I,c=h;var k=e.updateQueue;if(k===null){var R=new Set;R.add(c),e.updateQueue=R}else k.add(c);break e}else{if(!(e&1)){Ym(i,h,e),_h();break e}c=Error(W(426))}}else if(De&&u.mode&1){var P=Xm(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Jm(P,o,u,i,e),eh(Bs(c,u));break e}}i=c=Bs(c,u),Je!==4&&(Je=2),Zi===null?Zi=[i]:Zi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=gy(i,c,e);qm(i,S);break e;case 1:u=c;var w=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(cr===null||!cr.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=yy(i,u,e);qm(i,O);break e}}i=i.return}while(i!==null)}My(n)}catch(M){e=M,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function Dy(){var t=cl.current;return cl.current=ul,t===null?ul:t}function _h(){(Je===0||Je===3||Je===2)&&(Je=4),it===null||!(Xr&268435455)&&!($l&268435455)||tr(it,ut)}function fl(t,e){var n=_e;_e|=2;var r=Dy();(it!==t||ut!==e)&&(Nn=null,qr(t,e));do try{bw();break}catch(s){Py(t,s)}while(!0);if(nh(),_e=n,cl.current=r,Ge!==null)throw Error(W(261));return it=null,ut=0,Je}function bw(){for(;Ge!==null;)Vy(Ge)}function Sw(){for(;Ge!==null&&!K1();)Vy(Ge)}function Vy(t){var e=Ly(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?My(t):Ge=e,ph.current=null}function My(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yw(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,Ge=null;return}}else if(n=gw(n,e,Ot),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Je===0&&(Je=5)}function Or(t,e,n){var r=be,s=Xt.transition;try{Xt.transition=null,be=1,Tw(t,e,n,r)}finally{Xt.transition=s,be=r}return null}function Tw(t,e,n,r){do Ps();while(rr!==null);if(_e&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(i_(t,i),t===it&&(Ge=it=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ya||(ya=!0,Fy(Qa,function(){return Ps(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xt.transition,Xt.transition=null;var o=be;be=1;var u=_e;_e|=4,ph.current=null,xw(t,n),ky(n,t),H_(Mc),Ya=!!Vc,Mc=Vc=null,t.current=n,_w(n),Y1(),_e=u,be=o,Xt.transition=i}else t.current=n;if(ya&&(ya=!1,rr=t,hl=s),i=t.pendingLanes,i===0&&(cr=null),Z1(n.stateNode),Rt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(dl)throw dl=!1,t=nd,nd=null,t;return hl&1&&t.tag!==0&&Ps(),i=t.pendingLanes,i&1?t===rd?eo++:(eo=0,rd=t):eo=0,Ir(),null}function Ps(){if(rr!==null){var t=g0(hl),e=Xt.transition,n=be;try{if(Xt.transition=null,be=16>t?16:t,rr===null)var r=!1;else{if(t=rr,rr=null,hl=0,_e&6)throw Error(W(331));var s=_e;for(_e|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(Z=h;Z!==null;){var m=Z;switch(m.tag){case 0:case 11:case 15:Ji(8,m,i)}var p=m.child;if(p!==null)p.return=m,Z=p;else for(;Z!==null;){m=Z;var g=m.sibling,I=m.return;if(Iy(m),m===h){Z=null;break}if(g!==null){g.return=I,Z=g;break}Z=I}}}var k=i.alternate;if(k!==null){var R=k.child;if(R!==null){k.child=null;do{var P=R.sibling;R.sibling=null,R=P}while(R!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ji(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,Z=S;break e}Z=i.return}}var w=t.current;for(Z=w;Z!==null;){o=Z;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,Z=N;else e:for(o=w;Z!==null;){if(u=Z,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:zl(9,u)}}catch(M){$e(u,u.return,M)}if(u===o){Z=null;break e}var O=u.sibling;if(O!==null){O.return=u.return,Z=O;break e}Z=u.return}}if(_e=s,Ir(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Pl,t)}catch{}r=!0}return r}finally{be=n,Xt.transition=e}}return!1}function dp(t,e,n){e=Bs(n,e),e=gy(t,e,1),t=ur(t,e,1),e=Et(),t!==null&&(Vo(t,1,e),Rt(t,e))}function $e(t,e,n){if(t.tag===3)dp(t,t,n);else for(;e!==null;){if(e.tag===3){dp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cr===null||!cr.has(r))){t=Bs(n,t),t=yy(e,t,1),e=ur(e,t,1),t=Et(),e!==null&&(Vo(e,1,t),Rt(e,t));break}}e=e.return}}function Nw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ut&n)===n&&(Je===4||Je===3&&(ut&130023424)===ut&&500>qe()-yh?qr(t,0):gh|=n),Rt(t,e)}function Oy(t,e){e===0&&(t.mode&1?(e=aa,aa<<=1,!(aa&130023424)&&(aa=4194304)):e=1);var n=Et();t=Vn(t,e),t!==null&&(Vo(t,e,n),Rt(t,n))}function Iw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Oy(t,n)}function Aw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),Oy(t,n)}var Ly;Ly=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,pw(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,De&&e.flags&1048576&&$0(e,rl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pa(t,e),t=e.pendingProps;var s=Fs(e,xt.current);Rs(e,n),s=ch(null,e,r,t,s,n);var i=dh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(i=!0,tl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ih(e),s.updater=Ul,e.stateNode=s,s._reactInternals=e,Hc(e,r,t,n),e=Qc(null,e,r,!0,i,n)):(e.tag=0,De&&i&&Jd(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=kw(r),t=tn(r,t),s){case 0:e=Gc(null,e,r,t,n);break e;case 1:e=tp(null,e,r,t,n);break e;case 11:e=Zm(null,e,r,t,n);break e;case 14:e=ep(null,e,r,tn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Gc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),tp(t,e,r,s,n);case 3:e:{if(wy(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Q0(t,e),ol(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Bs(Error(W(423)),e),e=np(t,e,r,n,s);break e}else if(r!==s){s=Bs(Error(W(424)),e),e=np(t,e,r,n,s);break e}else for(Ft=lr(e.stateNode.containerInfo.firstChild),zt=e,De=!0,rn=null,n=W0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Us(),r===s){e=Mn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return K0(e),t===null&&$c(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Oc(r,s)?o=null:i!==null&&Oc(r,i)&&(e.flags|=32),_y(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&$c(e),null;case 13:return Ey(t,e,n);case 4:return oh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zs(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Zm(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ae(sl,r._currentValue),r._currentValue=o,i!==null)if(ln(i.value,o)){if(i.children===s.children&&!kt.current){e=Mn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=jn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Bc(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Bc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Rs(e,n),s=Jt(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=tn(r,e.pendingProps),s=tn(r.type,s),ep(t,e,r,s,n);case 15:return vy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Pa(t,e),e.tag=1,jt(r)?(t=!0,tl(e)):t=!1,Rs(e,n),py(e,r,s),Hc(e,r,s,n),Qc(null,e,r,!0,t,n);case 19:return by(t,e,n);case 22:return xy(t,e,n)}throw Error(W(156,e.tag))};function Fy(t,e){return h0(t,e)}function Cw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new Cw(t,e,n,r)}function wh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kw(t){if(typeof t=="function")return wh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ud)return 11;if(t===zd)return 14}return 2}function hr(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ma(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")wh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ys:return Hr(n.children,s,i,e);case Fd:o=8,s|=8;break;case pc:return t=Yt(12,n,e,s|2),t.elementType=pc,t.lanes=i,t;case gc:return t=Yt(13,n,e,s),t.elementType=gc,t.lanes=i,t;case yc:return t=Yt(19,n,e,s),t.elementType=yc,t.lanes=i,t;case Kg:return Bl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gg:o=10;break e;case Qg:o=9;break e;case Ud:o=11;break e;case zd:o=14;break e;case Jn:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Hr(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function Bl(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=Kg,t.lanes=n,t.stateNode={isHidden:!1},t}function Ju(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function Zu(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pu(0),this.expirationTimes=Pu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Eh(t,e,n,r,s,i,o,u,c){return t=new jw(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ih(i),t}function Rw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Uy(t){if(!t)return vr;t=t._reactInternals;e:{if(rs(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(jt(n))return U0(t,n,e)}return e}function zy(t,e,n,r,s,i,o,u,c){return t=Eh(n,r,!0,t,s,i,o,u,c),t.context=Uy(null),n=t.current,r=Et(),s=dr(n),i=jn(r,s),i.callback=e??null,ur(n,i,s),t.current.lanes=s,Vo(t,s,r),Rt(t,r),t}function ql(t,e,n,r){var s=e.current,i=Et(),o=dr(s);return n=Uy(n),e.context===null?e.context=n:e.pendingContext=n,e=jn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ur(s,e,o),t!==null&&(on(t,s,o,i),ka(t,s,o)),o}function ml(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bh(t,e){hp(t,e),(t=t.alternate)&&hp(t,e)}function Pw(){return null}var $y=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sh(t){this._internalRoot=t}Hl.prototype.render=Sh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));ql(t,e,null,null)};Hl.prototype.unmount=Sh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jr(function(){ql(null,t,null,null)}),e[Dn]=null}};function Hl(t){this._internalRoot=t}Hl.prototype.unstable_scheduleHydration=function(t){if(t){var e=x0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<er.length&&e!==0&&e<er[n].priority;n++);er.splice(n,0,t),n===0&&w0(t)}};function Th(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fp(){}function Dw(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=ml(o);i.call(h)}}var o=zy(e,r,t,0,null,!1,!1,"",fp);return t._reactRootContainer=o,t[Dn]=o.current,po(t.nodeType===8?t.parentNode:t),Jr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=ml(c);u.call(h)}}var c=Eh(t,0,!1,null,null,!1,!1,"",fp);return t._reactRootContainer=c,t[Dn]=c.current,po(t.nodeType===8?t.parentNode:t),Jr(function(){ql(e,c,n,r)}),c}function Gl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=ml(o);u.call(c)}}ql(e,o,t,s)}else o=Dw(n,e,t,s,r);return ml(o)}y0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ui(e.pendingLanes);n!==0&&(qd(e,n|1),Rt(e,qe()),!(_e&6)&&(qs=qe()+500,Ir()))}break;case 13:Jr(function(){var r=Vn(t,1);if(r!==null){var s=Et();on(r,t,1,s)}}),bh(t,1)}};Hd=function(t){if(t.tag===13){var e=Vn(t,134217728);if(e!==null){var n=Et();on(e,t,134217728,n)}bh(t,134217728)}};v0=function(t){if(t.tag===13){var e=dr(t),n=Vn(t,e);if(n!==null){var r=Et();on(n,t,e,r)}bh(t,e)}};x0=function(){return be};_0=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};Ic=function(t,e,n){switch(e){case"input":if(_c(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ol(r);if(!s)throw Error(W(90));Xg(r),_c(r,s)}}}break;case"textarea":Zg(t,n);break;case"select":e=n.value,e!=null&&As(t,!!n.multiple,e,!1)}};o0=vh;a0=Jr;var Vw={usingClientEntryPoint:!1,Events:[Oo,ws,Ol,s0,i0,vh]},Ri={findFiberByHostInstance:Ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mw={bundleType:Ri.bundleType,version:Ri.version,rendererPackageName:Ri.rendererPackageName,rendererConfig:Ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ri.findFiberByHostInstance||Pw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var va=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!va.isDisabled&&va.supportsFiber)try{Pl=va.inject(Mw),yn=va}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vw;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Th(e))throw Error(W(200));return Rw(t,e,null,n)};Bt.createRoot=function(t,e){if(!Th(t))throw Error(W(299));var n=!1,r="",s=$y;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Eh(t,1,!1,null,null,n,!1,r,s),t[Dn]=e.current,po(t.nodeType===8?t.parentNode:t),new Sh(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=c0(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return Jr(t)};Bt.hydrate=function(t,e,n){if(!Wl(e))throw Error(W(200));return Gl(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Th(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=$y;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zy(e,null,t,1,n??null,s,!1,i,o),t[Dn]=e.current,po(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Hl(e)};Bt.render=function(t,e,n){if(!Wl(e))throw Error(W(200));return Gl(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Wl(t))throw Error(W(40));return t._reactRootContainer?(Jr(function(){Gl(null,null,t,!1,function(){t._reactRootContainer=null,t[Dn]=null})}),!0):!1};Bt.unstable_batchedUpdates=vh;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wl(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Gl(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function By(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(By)}catch(t){console.error(t)}}By(),Bg.exports=Bt;var Ow=Bg.exports,mp=Ow;fc.createRoot=mp.createRoot,fc.hydrateRoot=mp.hydrateRoot;const Lw=()=>{};var pp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Fw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Hy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,m=i>>2,p=(i&3)<<4|u>>4;let g=(u&15)<<2|h>>6,I=h&63;c||(I=64,o||(g=64)),r.push(n[m],n[p],n[g],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Fw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||h==null||p==null)throw new Uw;const g=i<<2|u>>4;if(r.push(g),h!==64){const I=u<<4&240|h>>2;if(r.push(I),p!==64){const k=h<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Uw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zw=function(t){const e=qy(t);return Hy.encodeByteArray(e,!0)},pl=function(t){return zw(t).replace(/\./g,"")},$w=function(t){try{return Hy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=()=>Bw().__FIREBASE_DEFAULTS__,Hw=()=>{if(typeof process>"u"||typeof pp>"u")return;const t=pp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ww=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$w(t[1]);return e&&JSON.parse(e)},Nh=()=>{try{return Lw()||qw()||Hw()||Ww()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Gw=t=>{var e,n;return(n=(e=Nh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Qw=t=>{const e=Gw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Wy=()=>{var t;return(t=Nh())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Yw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[pl(JSON.stringify(n)),pl(JSON.stringify(o)),""].join(".")}const to={};function Jw(){const t={prod:[],emulator:[]};for(const e of Object.keys(to))to[e]?t.emulator.push(e):t.prod.push(e);return t}function Zw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let gp=!1;function eE(t,e){if(typeof window>"u"||typeof document>"u"||!Ih(window.location.host)||to[t]===e||to[t]||gp)return;to[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=Jw().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function u(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,I){g.setAttribute("width","24"),g.setAttribute("id",I),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{gp=!0,o()},g}function m(g,I){g.setAttribute("id",I),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=Zw(r),I=n("text"),k=document.getElementById(I)||document.createElement("span"),R=n("learnmore"),P=document.getElementById(R)||document.createElement("a"),S=n("preprendIcon"),w=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const N=g.element;u(N),m(P,R);const O=h();c(w,S),N.append(w,k,P,O),document.body.appendChild(N)}i?(k.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nE(){var e;const t=(e=Nh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rE(){return!nE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sE(){try{return typeof indexedDB=="object"}catch{return!1}}function iE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="FirebaseError";class ti extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=oE,Object.setPrototypeOf(this,ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gy.prototype.create)}}class Gy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?aE(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new ti(s,u,r)}}function aE(t,e){return t.replace(lE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const lE=/\{\$([^}]+)}/g;function gl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(yp(i)&&yp(o)){if(!gl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function yp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t){return t&&t._delegate?t._delegate:t}class So{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Kw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dE(e))try{this.getOrInitializeService({instanceIdentifier:Lr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Lr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lr){return this.instances.has(e)}getOptions(e=Lr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Lr){return this.component?this.component.multipleInstances?e:Lr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cE(t){return t===Lr?void 0:t}function dE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const fE={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},mE=xe.INFO,pE={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},gE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=pE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qy{constructor(e){this.name=e,this._logLevel=mE,this._logHandler=gE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const yE=(t,e)=>e.some(n=>t instanceof n);let vp,xp;function vE(){return vp||(vp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xE(){return xp||(xp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ky=new WeakMap,od=new WeakMap,Yy=new WeakMap,ec=new WeakMap,Ah=new WeakMap;function _E(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(fr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ky.set(n,t)}).catch(()=>{}),Ah.set(e,t),e}function wE(t){if(od.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});od.set(t,e)}let ad={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return od.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Yy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EE(t){ad=t(ad)}function bE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(tc(this),e,...n);return Yy.set(r,e.sort?e.sort():[e]),fr(r)}:xE().includes(t)?function(...e){return t.apply(tc(this),e),fr(Ky.get(this))}:function(...e){return fr(t.apply(tc(this),e))}}function SE(t){return typeof t=="function"?bE(t):(t instanceof IDBTransaction&&wE(t),yE(t,vE())?new Proxy(t,ad):t)}function fr(t){if(t instanceof IDBRequest)return _E(t);if(ec.has(t))return ec.get(t);const e=SE(t);return e!==t&&(ec.set(t,e),Ah.set(e,t)),e}const tc=t=>Ah.get(t);function TE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=fr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(fr(o.result),c.oldVersion,c.newVersion,fr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const NE=["get","getKey","getAll","getAllKeys","count"],IE=["put","add","delete","clear"],nc=new Map;function _p(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nc.get(e))return nc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=IE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||NE.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return nc.set(e,i),i}EE(t=>({...t,get:(e,n,r)=>_p(e,n)||t.get(e,n,r),has:(e,n)=>!!_p(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function CE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ld="@firebase/app",wp="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new Qy("@firebase/app"),kE="@firebase/app-compat",jE="@firebase/analytics-compat",RE="@firebase/analytics",PE="@firebase/app-check-compat",DE="@firebase/app-check",VE="@firebase/auth",ME="@firebase/auth-compat",OE="@firebase/database",LE="@firebase/data-connect",FE="@firebase/database-compat",UE="@firebase/functions",zE="@firebase/functions-compat",$E="@firebase/installations",BE="@firebase/installations-compat",qE="@firebase/messaging",HE="@firebase/messaging-compat",WE="@firebase/performance",GE="@firebase/performance-compat",QE="@firebase/remote-config",KE="@firebase/remote-config-compat",YE="@firebase/storage",XE="@firebase/storage-compat",JE="@firebase/firestore",ZE="@firebase/ai",e2="@firebase/firestore-compat",t2="firebase",n2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="[DEFAULT]",r2={[ld]:"fire-core",[kE]:"fire-core-compat",[RE]:"fire-analytics",[jE]:"fire-analytics-compat",[DE]:"fire-app-check",[PE]:"fire-app-check-compat",[VE]:"fire-auth",[ME]:"fire-auth-compat",[OE]:"fire-rtdb",[LE]:"fire-data-connect",[FE]:"fire-rtdb-compat",[UE]:"fire-fn",[zE]:"fire-fn-compat",[$E]:"fire-iid",[BE]:"fire-iid-compat",[qE]:"fire-fcm",[HE]:"fire-fcm-compat",[WE]:"fire-perf",[GE]:"fire-perf-compat",[QE]:"fire-rc",[KE]:"fire-rc-compat",[YE]:"fire-gcs",[XE]:"fire-gcs-compat",[JE]:"fire-fst",[e2]:"fire-fst-compat",[ZE]:"fire-vertex","fire-js":"fire-js",[t2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl=new Map,s2=new Map,cd=new Map;function Ep(t,e){try{t.container.addComponent(e)}catch(n){Ln.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vl(t){const e=t.name;if(cd.has(e))return Ln.debug(`There were multiple attempts to register component ${e}.`),!1;cd.set(e,t);for(const n of yl.values())Ep(n,t);for(const n of s2.values())Ep(n,t);return!0}function i2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function o2(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new Gy("app","Firebase",a2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new So("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=n2;function Xy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ud,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw mr.create("bad-app-name",{appName:String(s)});if(n||(n=Wy()),!n)throw mr.create("no-options");const i=yl.get(s);if(i){if(gl(n,i.options)&&gl(r,i.config))return i;throw mr.create("duplicate-app",{appName:s})}const o=new hE(s);for(const c of cd.values())o.addComponent(c);const u=new l2(n,r,o);return yl.set(s,u),u}function c2(t=ud){const e=yl.get(t);if(!e&&t===ud&&Wy())return Xy();if(!e)throw mr.create("no-app",{appName:t});return e}function Ds(t,e,n){let r=r2[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ln.warn(o.join(" "));return}vl(new So(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="firebase-heartbeat-database",h2=1,To="firebase-heartbeat-store";let rc=null;function Jy(){return rc||(rc=TE(d2,h2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(To)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),rc}async function f2(t){try{const n=(await Jy()).transaction(To),r=await n.objectStore(To).get(Zy(t));return await n.done,r}catch(e){if(e instanceof ti)Ln.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ln.warn(n.message)}}}async function bp(t,e){try{const r=(await Jy()).transaction(To,"readwrite");await r.objectStore(To).put(e,Zy(t)),await r.done}catch(n){if(n instanceof ti)Ln.warn(n.message);else{const r=mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ln.warn(r.message)}}}function Zy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=1024,p2=30;class g2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new v2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Sp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>p2){const o=x2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ln.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Sp(),{heartbeatsToSend:r,unsentEntries:s}=y2(this._heartbeatsCache.heartbeats),i=pl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ln.warn(n),""}}}function Sp(){return new Date().toISOString().substring(0,10)}function y2(t,e=m2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Tp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Tp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class v2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sE()?iE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await f2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Tp(t){return pl(JSON.stringify({version:2,heartbeats:t})).length}function x2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t){vl(new So("platform-logger",e=>new AE(e),"PRIVATE")),vl(new So("heartbeat",e=>new g2(e),"PRIVATE")),Ds(ld,wp,t),Ds(ld,wp,"esm2020"),Ds("fire-js","")}_2("");var w2="firebase",E2="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ds(w2,E2,"app");var Np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pr,ev;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function _(){}_.prototype=y.prototype,x.F=y.prototype,x.prototype=new _,x.prototype.constructor=x,x.D=function(E,T,C){for(var b=Array(arguments.length-2),we=2;we<arguments.length;we++)b[we-2]=arguments[we];return y.prototype[T].apply(E,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,y,_){_||(_=0);const E=Array(16);if(typeof y=="string")for(var T=0;T<16;++T)E[T]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(T=0;T<16;++T)E[T]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=x.g[0],_=x.g[1],T=x.g[2];let C=x.g[3],b;b=y+(C^_&(T^C))+E[0]+3614090360&4294967295,y=_+(b<<7&4294967295|b>>>25),b=C+(T^y&(_^T))+E[1]+3905402710&4294967295,C=y+(b<<12&4294967295|b>>>20),b=T+(_^C&(y^_))+E[2]+606105819&4294967295,T=C+(b<<17&4294967295|b>>>15),b=_+(y^T&(C^y))+E[3]+3250441966&4294967295,_=T+(b<<22&4294967295|b>>>10),b=y+(C^_&(T^C))+E[4]+4118548399&4294967295,y=_+(b<<7&4294967295|b>>>25),b=C+(T^y&(_^T))+E[5]+1200080426&4294967295,C=y+(b<<12&4294967295|b>>>20),b=T+(_^C&(y^_))+E[6]+2821735955&4294967295,T=C+(b<<17&4294967295|b>>>15),b=_+(y^T&(C^y))+E[7]+4249261313&4294967295,_=T+(b<<22&4294967295|b>>>10),b=y+(C^_&(T^C))+E[8]+1770035416&4294967295,y=_+(b<<7&4294967295|b>>>25),b=C+(T^y&(_^T))+E[9]+2336552879&4294967295,C=y+(b<<12&4294967295|b>>>20),b=T+(_^C&(y^_))+E[10]+4294925233&4294967295,T=C+(b<<17&4294967295|b>>>15),b=_+(y^T&(C^y))+E[11]+2304563134&4294967295,_=T+(b<<22&4294967295|b>>>10),b=y+(C^_&(T^C))+E[12]+1804603682&4294967295,y=_+(b<<7&4294967295|b>>>25),b=C+(T^y&(_^T))+E[13]+4254626195&4294967295,C=y+(b<<12&4294967295|b>>>20),b=T+(_^C&(y^_))+E[14]+2792965006&4294967295,T=C+(b<<17&4294967295|b>>>15),b=_+(y^T&(C^y))+E[15]+1236535329&4294967295,_=T+(b<<22&4294967295|b>>>10),b=y+(T^C&(_^T))+E[1]+4129170786&4294967295,y=_+(b<<5&4294967295|b>>>27),b=C+(_^T&(y^_))+E[6]+3225465664&4294967295,C=y+(b<<9&4294967295|b>>>23),b=T+(y^_&(C^y))+E[11]+643717713&4294967295,T=C+(b<<14&4294967295|b>>>18),b=_+(C^y&(T^C))+E[0]+3921069994&4294967295,_=T+(b<<20&4294967295|b>>>12),b=y+(T^C&(_^T))+E[5]+3593408605&4294967295,y=_+(b<<5&4294967295|b>>>27),b=C+(_^T&(y^_))+E[10]+38016083&4294967295,C=y+(b<<9&4294967295|b>>>23),b=T+(y^_&(C^y))+E[15]+3634488961&4294967295,T=C+(b<<14&4294967295|b>>>18),b=_+(C^y&(T^C))+E[4]+3889429448&4294967295,_=T+(b<<20&4294967295|b>>>12),b=y+(T^C&(_^T))+E[9]+568446438&4294967295,y=_+(b<<5&4294967295|b>>>27),b=C+(_^T&(y^_))+E[14]+3275163606&4294967295,C=y+(b<<9&4294967295|b>>>23),b=T+(y^_&(C^y))+E[3]+4107603335&4294967295,T=C+(b<<14&4294967295|b>>>18),b=_+(C^y&(T^C))+E[8]+1163531501&4294967295,_=T+(b<<20&4294967295|b>>>12),b=y+(T^C&(_^T))+E[13]+2850285829&4294967295,y=_+(b<<5&4294967295|b>>>27),b=C+(_^T&(y^_))+E[2]+4243563512&4294967295,C=y+(b<<9&4294967295|b>>>23),b=T+(y^_&(C^y))+E[7]+1735328473&4294967295,T=C+(b<<14&4294967295|b>>>18),b=_+(C^y&(T^C))+E[12]+2368359562&4294967295,_=T+(b<<20&4294967295|b>>>12),b=y+(_^T^C)+E[5]+4294588738&4294967295,y=_+(b<<4&4294967295|b>>>28),b=C+(y^_^T)+E[8]+2272392833&4294967295,C=y+(b<<11&4294967295|b>>>21),b=T+(C^y^_)+E[11]+1839030562&4294967295,T=C+(b<<16&4294967295|b>>>16),b=_+(T^C^y)+E[14]+4259657740&4294967295,_=T+(b<<23&4294967295|b>>>9),b=y+(_^T^C)+E[1]+2763975236&4294967295,y=_+(b<<4&4294967295|b>>>28),b=C+(y^_^T)+E[4]+1272893353&4294967295,C=y+(b<<11&4294967295|b>>>21),b=T+(C^y^_)+E[7]+4139469664&4294967295,T=C+(b<<16&4294967295|b>>>16),b=_+(T^C^y)+E[10]+3200236656&4294967295,_=T+(b<<23&4294967295|b>>>9),b=y+(_^T^C)+E[13]+681279174&4294967295,y=_+(b<<4&4294967295|b>>>28),b=C+(y^_^T)+E[0]+3936430074&4294967295,C=y+(b<<11&4294967295|b>>>21),b=T+(C^y^_)+E[3]+3572445317&4294967295,T=C+(b<<16&4294967295|b>>>16),b=_+(T^C^y)+E[6]+76029189&4294967295,_=T+(b<<23&4294967295|b>>>9),b=y+(_^T^C)+E[9]+3654602809&4294967295,y=_+(b<<4&4294967295|b>>>28),b=C+(y^_^T)+E[12]+3873151461&4294967295,C=y+(b<<11&4294967295|b>>>21),b=T+(C^y^_)+E[15]+530742520&4294967295,T=C+(b<<16&4294967295|b>>>16),b=_+(T^C^y)+E[2]+3299628645&4294967295,_=T+(b<<23&4294967295|b>>>9),b=y+(T^(_|~C))+E[0]+4096336452&4294967295,y=_+(b<<6&4294967295|b>>>26),b=C+(_^(y|~T))+E[7]+1126891415&4294967295,C=y+(b<<10&4294967295|b>>>22),b=T+(y^(C|~_))+E[14]+2878612391&4294967295,T=C+(b<<15&4294967295|b>>>17),b=_+(C^(T|~y))+E[5]+4237533241&4294967295,_=T+(b<<21&4294967295|b>>>11),b=y+(T^(_|~C))+E[12]+1700485571&4294967295,y=_+(b<<6&4294967295|b>>>26),b=C+(_^(y|~T))+E[3]+2399980690&4294967295,C=y+(b<<10&4294967295|b>>>22),b=T+(y^(C|~_))+E[10]+4293915773&4294967295,T=C+(b<<15&4294967295|b>>>17),b=_+(C^(T|~y))+E[1]+2240044497&4294967295,_=T+(b<<21&4294967295|b>>>11),b=y+(T^(_|~C))+E[8]+1873313359&4294967295,y=_+(b<<6&4294967295|b>>>26),b=C+(_^(y|~T))+E[15]+4264355552&4294967295,C=y+(b<<10&4294967295|b>>>22),b=T+(y^(C|~_))+E[6]+2734768916&4294967295,T=C+(b<<15&4294967295|b>>>17),b=_+(C^(T|~y))+E[13]+1309151649&4294967295,_=T+(b<<21&4294967295|b>>>11),b=y+(T^(_|~C))+E[4]+4149444226&4294967295,y=_+(b<<6&4294967295|b>>>26),b=C+(_^(y|~T))+E[11]+3174756917&4294967295,C=y+(b<<10&4294967295|b>>>22),b=T+(y^(C|~_))+E[2]+718787259&4294967295,T=C+(b<<15&4294967295|b>>>17),b=_+(C^(T|~y))+E[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(T+(b<<21&4294967295|b>>>11))&4294967295,x.g[2]=x.g[2]+T&4294967295,x.g[3]=x.g[3]+C&4294967295}r.prototype.v=function(x,y){y===void 0&&(y=x.length);const _=y-this.blockSize,E=this.C;let T=this.h,C=0;for(;C<y;){if(T==0)for(;C<=_;)s(this,x,C),C+=this.blockSize;if(typeof x=="string"){for(;C<y;)if(E[T++]=x.charCodeAt(C++),T==this.blockSize){s(this,E),T=0;break}}else for(;C<y;)if(E[T++]=x[C++],T==this.blockSize){s(this,E),T=0;break}}this.h=T,this.o+=y},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;y=this.o*8;for(var _=x.length-8;_<x.length;++_)x[_]=y&255,y/=256;for(this.v(x),x=Array(16),y=0,_=0;_<4;++_)for(let E=0;E<32;E+=8)x[y++]=this.g[_]>>>E&255;return x};function i(x,y){var _=u;return Object.prototype.hasOwnProperty.call(_,x)?_[x]:_[x]=y(x)}function o(x,y){this.h=y;const _=[];let E=!0;for(let T=x.length-1;T>=0;T--){const C=x[T]|0;E&&C==y||(_[T]=C,E=!1)}this.g=_}var u={};function c(x){return-128<=x&&x<128?i(x,function(y){return new o([y|0],y<0?-1:0)}):new o([x|0],x<0?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return p;if(x<0)return P(h(-x));const y=[];let _=1;for(let E=0;x>=_;E++)y[E]=x/_|0,_*=4294967296;return new o(y,0)}function m(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return P(m(x.substring(1),y));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=h(Math.pow(y,8));let E=p;for(let C=0;C<x.length;C+=8){var T=Math.min(8,x.length-C);const b=parseInt(x.substring(C,C+T),y);T<8?(T=h(Math.pow(y,T)),E=E.j(T).add(h(b))):(E=E.j(_),E=E.add(h(b)))}return E}var p=c(0),g=c(1),I=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();let x=0,y=1;for(let _=0;_<this.g.length;_++){const E=this.i(_);x+=(E>=0?E:4294967296+E)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(k(this))return"0";if(R(this))return"-"+P(this).toString(x);const y=h(Math.pow(x,6));var _=this;let E="";for(;;){const T=O(_,y).g;_=S(_,T.j(y));let C=((_.g.length>0?_.g[0]:_.h)>>>0).toString(x);if(_=T,k(_))return C+E;for(;C.length<6;)C="0"+C;E=C+E}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function k(x){if(x.h!=0)return!1;for(let y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function R(x){return x.h==-1}t.l=function(x){return x=S(this,x),R(x)?-1:k(x)?0:1};function P(x){const y=x.g.length,_=[];for(let E=0;E<y;E++)_[E]=~x.g[E];return new o(_,~x.h).add(g)}t.abs=function(){return R(this)?P(this):this},t.add=function(x){const y=Math.max(this.g.length,x.g.length),_=[];let E=0;for(let T=0;T<=y;T++){let C=E+(this.i(T)&65535)+(x.i(T)&65535),b=(C>>>16)+(this.i(T)>>>16)+(x.i(T)>>>16);E=b>>>16,C&=65535,b&=65535,_[T]=b<<16|C}return new o(_,_[_.length-1]&-2147483648?-1:0)};function S(x,y){return x.add(P(y))}t.j=function(x){if(k(this)||k(x))return p;if(R(this))return R(x)?P(this).j(P(x)):P(P(this).j(x));if(R(x))return P(this.j(P(x)));if(this.l(I)<0&&x.l(I)<0)return h(this.m()*x.m());const y=this.g.length+x.g.length,_=[];for(var E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(let T=0;T<x.g.length;T++){const C=this.i(E)>>>16,b=this.i(E)&65535,we=x.i(T)>>>16,Pe=x.i(T)&65535;_[2*E+2*T]+=b*Pe,w(_,2*E+2*T),_[2*E+2*T+1]+=C*Pe,w(_,2*E+2*T+1),_[2*E+2*T+1]+=b*we,w(_,2*E+2*T+1),_[2*E+2*T+2]+=C*we,w(_,2*E+2*T+2)}for(x=0;x<y;x++)_[x]=_[2*x+1]<<16|_[2*x];for(x=y;x<2*y;x++)_[x]=0;return new o(_,0)};function w(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function N(x,y){this.g=x,this.h=y}function O(x,y){if(k(y))throw Error("division by zero");if(k(x))return new N(p,p);if(R(x))return y=O(P(x),y),new N(P(y.g),P(y.h));if(R(y))return y=O(x,P(y)),new N(P(y.g),y.h);if(x.g.length>30){if(R(x)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var _=g,E=y;E.l(x)<=0;)_=M(_),E=M(E);var T=F(_,1),C=F(E,1);for(E=F(E,2),_=F(_,2);!k(E);){var b=C.add(E);b.l(x)<=0&&(T=T.add(_),C=b),E=F(E,1),_=F(_,1)}return y=S(x,T.j(y)),new N(T,y)}for(T=p;x.l(y)>=0;){for(_=Math.max(1,Math.floor(x.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),C=h(_),b=C.j(y);R(b)||b.l(x)>0;)_-=E,C=h(_),b=C.j(y);k(C)&&(C=g),T=T.add(C),x=S(x,b)}return new N(T,x)}t.B=function(x){return O(this,x).h},t.and=function(x){const y=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<y;E++)_[E]=this.i(E)&x.i(E);return new o(_,this.h&x.h)},t.or=function(x){const y=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<y;E++)_[E]=this.i(E)|x.i(E);return new o(_,this.h|x.h)},t.xor=function(x){const y=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<y;E++)_[E]=this.i(E)^x.i(E);return new o(_,this.h^x.h)};function M(x){const y=x.g.length+1,_=[];for(let E=0;E<y;E++)_[E]=x.i(E)<<1|x.i(E-1)>>>31;return new o(_,x.h)}function F(x,y){const _=y>>5;y%=32;const E=x.g.length-_,T=[];for(let C=0;C<E;C++)T[C]=y>0?x.i(C+_)>>>y|x.i(C+_+1)<<32-y:x.i(C+_);return new o(T,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ev=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,pr=o}).apply(typeof Np<"u"?Np:typeof self<"u"?self:typeof window<"u"?window:{});var xa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tv,$i,nv,Oa,dd,rv,sv,iv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof xa=="object"&&xa];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var j=a[v];if(!(j in f))break e;f=f[j]}a=a[a.length-1],v=f[a],d=d(v),d!=v&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(d){var f=[],v;for(v in d)Object.prototype.hasOwnProperty.call(d,v)&&f.push([v,d[v]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function u(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function c(a,d,f){return a.call.apply(a.bind,arguments)}function h(a,d,f){return h=c,h.apply(null,arguments)}function m(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function p(a,d){function f(){}f.prototype=d.prototype,a.Z=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(v,j,V){for(var K=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)K[ue-2]=arguments[ue];return d.prototype[j].apply(v,K)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function I(a){const d=a.length;if(d>0){const f=Array(d);for(let v=0;v<d;v++)f[v]=a[v];return f}return[]}function k(a,d){for(let v=1;v<arguments.length;v++){const j=arguments[v];var f=typeof j;if(f=f!="object"?f:j?Array.isArray(j)?"array":f:"null",f=="array"||f=="object"&&typeof j.length=="number"){f=a.length||0;const V=j.length||0;a.length=f+V;for(let K=0;K<V;K++)a[f+K]=j[K]}else a.push(j)}}class R{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function P(a){o.setTimeout(()=>{throw a},0)}function S(){var a=x;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class w{constructor(){this.h=this.g=null}add(d,f){const v=N.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var N=new R(()=>new O,a=>a.reset());class O{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,x=new w,y=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(_)}};function _(){for(var a;a=S();){try{a.h.call(a.g)}catch(f){P(f)}var d=N;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}F=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,d),o.removeEventListener("test",f,d)}catch{}return a}();function b(a){return/^[\s\xa0]*$/.test(a)}function we(a,d){T.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(we,T),we.prototype.init=function(a,d){const f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Pe="closure_listenable_"+(Math.random()*1e6|0),ht=0;function L(a,d,f,v,j){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=j,this.key=++ht,this.da=this.fa=!1}function $(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function D(a,d,f){for(const v in a)d.call(f,a[v],v,a)}function Q(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function ne(a){const d={};for(const f in a)d[f]=a[f];return d}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function et(a,d){let f,v;for(let j=1;j<arguments.length;j++){v=arguments[j];for(f in v)a[f]=v[f];for(let V=0;V<he.length;V++)f=he[V],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function Ue(a){this.src=a,this.g={},this.h=0}Ue.prototype.add=function(a,d,f,v,j){const V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);const K=ge(a,d,v,j);return K>-1?(d=a[K],f||(d.fa=!1)):(d=new L(d,this.src,V,!!v,j),d.fa=f,a.push(d)),d};function Pt(a,d){const f=d.type;if(f in a.g){var v=a.g[f],j=Array.prototype.indexOf.call(v,d,void 0),V;(V=j>=0)&&Array.prototype.splice.call(v,j,1),V&&($(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ge(a,d,f,v){for(let j=0;j<a.length;++j){const V=a[j];if(!V.da&&V.listener==d&&V.capture==!!f&&V.ha==v)return j}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),tt={};function Ht(a,d,f,v,j){if(Array.isArray(d)){for(let V=0;V<d.length;V++)Ht(a,d[V],f,v,j);return null}return f=Se(f),a&&a[Pe]?a.J(d,f,u(v)?!!v.capture:!1,j):kr(a,d,f,!1,v,j)}function kr(a,d,f,v,j,V){if(!d)throw Error("Invalid event type");const K=u(j)?!!j.capture:!!j;let ue=le(a);if(ue||(a[ce]=ue=new Ue(a)),f=ue.add(d,f,v,K,V),f.proxy)return f;if(v=$n(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)C||(j=K),j===void 0&&(j=!1),a.addEventListener(d.toString(),v,j);else if(a.attachEvent)a.attachEvent(as(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function $n(){function a(f){return d.call(a.src,a.listener,f)}const d=B;return a}function Dt(a,d,f,v,j){if(Array.isArray(d))for(var V=0;V<d.length;V++)Dt(a,d[V],f,v,j);else v=u(v)?!!v.capture:!!v,f=Se(f),a&&a[Pe]?(a=a.i,V=String(d).toString(),V in a.g&&(d=a.g[V],f=ge(d,f,v,j),f>-1&&($(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete a.g[V],a.h--)))):a&&(a=le(a))&&(d=a.g[d.toString()],a=-1,d&&(a=ge(d,f,v,j)),(f=a>-1?d[a]:null)&&cn(f))}function cn(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Pe])Pt(d.i,a);else{var f=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(f,v,a.capture):d.detachEvent?d.detachEvent(as(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=le(d))?(Pt(f,a),f.h==0&&(f.src=null,d[ce]=null)):$(a)}}}function as(a){return a in tt?tt[a]:tt[a]="on"+a}function B(a,d){if(a.da)a=!0;else{d=new we(d,this);const f=a.listener,v=a.ha||a.src;a.fa&&cn(a),a=f.call(v,d)}return a}function le(a){return a=a[ce],a instanceof Ue?a:null}var J="__closure_events_fn_"+(Math.random()*1e9>>>0);function Se(a){return typeof a=="function"?a:(a[J]||(a[J]=function(d){return a.handleEvent(d)}),a[J])}function A(){E.call(this),this.i=new Ue(this),this.M=this,this.G=null}p(A,E),A.prototype[Pe]=!0,A.prototype.removeEventListener=function(a,d,f,v){Dt(this,a,d,f,v)};function U(a,d){var f,v=a.G;if(v)for(f=[];v;v=v.G)f.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new T(d,a);else if(d instanceof T)d.target=d.target||a;else{var j=d;d=new T(v,a),et(d,j)}j=!0;let V,K;if(f)for(K=f.length-1;K>=0;K--)V=d.g=f[K],j=G(V,v,!0,d)&&j;if(V=d.g=a,j=G(V,v,!0,d)&&j,j=G(V,v,!1,d)&&j,f)for(K=0;K<f.length;K++)V=d.g=f[K],j=G(V,v,!1,d)&&j}A.prototype.N=function(){if(A.Z.N.call(this),this.i){var a=this.i;for(const d in a.g){const f=a.g[d];for(let v=0;v<f.length;v++)$(f[v]);delete a.g[d],a.h--}}this.G=null},A.prototype.J=function(a,d,f,v){return this.i.add(String(a),d,!1,f,v)},A.prototype.K=function(a,d,f,v){return this.i.add(String(a),d,!0,f,v)};function G(a,d,f,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let j=!0;for(let V=0;V<d.length;++V){const K=d[V];if(K&&!K.da&&K.capture==f){const ue=K.listener,Ye=K.ha||K.src;K.fa&&Pt(a.i,K),j=ue.call(Ye,v)!==!1&&j}}return j&&!v.defaultPrevented}function te(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(a,d||0)}function Te(a){a.g=te(()=>{a.g=null,a.i&&(a.i=!1,Te(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class li extends E{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Te(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ui(a){E.call(this),this.h=a,this.g={}}p(ui,E);var ff=[];function mf(a){D(a.g,function(d,f){this.g.hasOwnProperty(f)&&cn(d)},a),a.g={}}ui.prototype.N=function(){ui.Z.N.call(this),mf(this)},ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var du=o.JSON.stringify,Ux=o.JSON.parse,zx=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function pf(){}function gf(){}var ci={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function hu(){T.call(this,"d")}p(hu,T);function fu(){T.call(this,"c")}p(fu,T);var jr={},yf=null;function Ho(){return yf=yf||new A}jr.Ia="serverreachability";function vf(a){T.call(this,jr.Ia,a)}p(vf,T);function di(a){const d=Ho();U(d,new vf(d))}jr.STAT_EVENT="statevent";function xf(a,d){T.call(this,jr.STAT_EVENT,a),this.stat=d}p(xf,T);function _t(a){const d=Ho();U(d,new xf(d,a))}jr.Ja="timingevent";function _f(a,d){T.call(this,jr.Ja,a),this.size=d}p(_f,T);function hi(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},d)}function fi(){this.g=!0}fi.prototype.ua=function(){this.g=!1};function $x(a,d,f,v,j,V){a.info(function(){if(a.g)if(V){var K="",ue=V.split("&");for(let Ne=0;Ne<ue.length;Ne++){var Ye=ue[Ne].split("=");if(Ye.length>1){const nt=Ye[0];Ye=Ye[1];const hn=nt.split("_");K=hn.length>=2&&hn[1]=="type"?K+(nt+"="+Ye+"&"):K+(nt+"=redacted&")}}}else K=null;else K=V;return"XMLHTTP REQ ("+v+") [attempt "+j+"]: "+d+`
`+f+`
`+K})}function Bx(a,d,f,v,j,V,K){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+j+"]: "+d+`
`+f+`
`+V+" "+K})}function ls(a,d,f,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Hx(a,f)+(v?" "+v:"")})}function qx(a,d){a.info(function(){return"TIMEOUT: "+d})}fi.prototype.info=function(){};function Hx(a,d){if(!a.g)return d;if(!d)return null;try{const V=JSON.parse(d);if(V){for(a=0;a<V.length;a++)if(Array.isArray(V[a])){var f=V[a];if(!(f.length<2)){var v=f[1];if(Array.isArray(v)&&!(v.length<1)){var j=v[0];if(j!="noop"&&j!="stop"&&j!="close")for(let K=1;K<v.length;K++)v[K]=""}}}}return du(V)}catch{return d}}var Wo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ef;function mu(){}p(mu,pf),mu.prototype.g=function(){return new XMLHttpRequest},Ef=new mu;function mi(a){return encodeURIComponent(String(a))}function Wx(a){var d=1;a=a.split(":");const f=[];for(;d>0&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function Bn(a,d,f,v){this.j=a,this.i=d,this.l=f,this.S=v||1,this.V=new ui(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bf}function bf(){this.i=null,this.g="",this.h=!1}var Sf={},pu={};function gu(a,d,f){a.M=1,a.A=Qo(dn(d)),a.u=f,a.R=!0,Tf(a,null)}function Tf(a,d){a.F=Date.now(),Go(a),a.B=dn(a.A);var f=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),Lf(f.i,"t",v),a.C=0,f=a.j.L,a.h=new bf,a.g=nm(a.j,f?d:null,!a.u),a.P>0&&(a.O=new li(h(a.Y,a,a.g),a.P)),d=a.V,f=a.g,v=a.ba;var j="readystatechange";Array.isArray(j)||(j&&(ff[0]=j.toString()),j=ff);for(let V=0;V<j.length;V++){const K=Ht(f,j[V],v||d.handleEvent,!1,d.h||d);if(!K)break;d.g[K.key]=K}d=a.J?ne(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),di(),$x(a.i,a.v,a.B,a.l,a.S,a.u)}Bn.prototype.ba=function(a){a=a.target;const d=this.O;d&&Wn(a)==3?d.j():this.Y(a)},Bn.prototype.Y=function(a){try{if(a==this.g)e:{const ue=Wn(this.g),Ye=this.g.ya(),Ne=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||Hf(this.g)))){this.K||ue!=4||Ye==7||(Ye==8||Ne<=0?di(3):di(2)),yu(this);var d=this.g.ca();this.X=d;var f=Gx(this);if(this.o=d==200,Bx(this.i,this.v,this.B,this.l,this.S,ue,d),this.o){if(this.U&&!this.L){t:{if(this.g){var v,j=this.g;if((v=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(v)){var V=v;break t}}V=null}if(a=V)ls(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vu(this,a);else{this.o=!1,this.m=3,_t(12),Rr(this),pi(this);break e}}if(this.R){a=!0;let nt;for(;!this.K&&this.C<f.length;)if(nt=Qx(this,f),nt==pu){ue==4&&(this.m=4,_t(14),a=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(nt==Sf){this.m=4,_t(15),ls(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else ls(this.i,this.l,nt,null),vu(this,nt);if(Nf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||f.length!=0||this.h.h||(this.m=1,_t(16),a=!1),this.o=this.o&&a,!a)ls(this.i,this.l,f,"[Invalid Chunked Response]"),Rr(this),pi(this);else if(f.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Nu(K),K.P=!0,_t(11))}}else ls(this.i,this.l,f,null),vu(this,f);ue==4&&Rr(this),this.o&&!this.K&&(ue==4?Jf(this.j,this):(this.o=!1,Go(this)))}else l1(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),Rr(this),pi(this)}}}catch{}finally{}};function Gx(a){if(!Nf(a))return a.g.la();const d=Hf(a.g);if(d==="")return"";let f="";const v=d.length,j=Wn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Rr(a),pi(a),"";a.h.i=new o.TextDecoder}for(let V=0;V<v;V++)a.h.h=!0,f+=a.h.i.decode(d[V],{stream:!(j&&V==v-1)});return d.length=0,a.h.g+=f,a.C=0,a.h.g}function Nf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Qx(a,d){var f=a.C,v=d.indexOf(`
`,f);return v==-1?pu:(f=Number(d.substring(f,v)),isNaN(f)?Sf:(v+=1,v+f>d.length?pu:(d=d.slice(v,v+f),a.C=v+f,d)))}Bn.prototype.cancel=function(){this.K=!0,Rr(this)};function Go(a){a.T=Date.now()+a.H,If(a,a.H)}function If(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=hi(h(a.aa,a),d)}function yu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Bn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(qx(this.i,this.B),this.M!=2&&(di(),_t(17)),Rr(this),this.m=2,pi(this)):If(this,this.T-a)};function pi(a){a.j.I==0||a.K||Jf(a.j,a)}function Rr(a){yu(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,mf(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function vu(a,d){try{var f=a.j;if(f.I!=0&&(f.g==a||xu(f.h,a))){if(!a.L&&xu(f.h,a)&&f.I==3){try{var v=f.Ba.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var j=v;if(j[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Zo(f),Xo(f);else break e;Tu(f),_t(18)}}else f.xa=j[1],0<f.xa-f.K&&j[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=hi(h(f.Va,f),6e3));kf(f.h)<=1&&f.ta&&(f.ta=void 0)}else Dr(f,11)}else if((a.L||f.g==a)&&Zo(f),!b(d))for(j=f.Ba.g.parse(d),d=0;d<j.length;d++){let Ne=j[d];const nt=Ne[0];if(!(nt<=f.K))if(f.K=nt,Ne=Ne[1],f.I==2)if(Ne[0]=="c"){f.M=Ne[1],f.ba=Ne[2];const hn=Ne[3];hn!=null&&(f.ka=hn,f.j.info("VER="+f.ka));const Vr=Ne[4];Vr!=null&&(f.za=Vr,f.j.info("SVER="+f.za));const Gn=Ne[5];Gn!=null&&typeof Gn=="number"&&Gn>0&&(v=1.5*Gn,f.O=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Qn=a.g;if(Qn){const ta=Qn.g?Qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ta){var V=v.h;V.g||ta.indexOf("spdy")==-1&&ta.indexOf("quic")==-1&&ta.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(_u(V,V.h),V.h=null))}if(v.G){const Iu=Qn.g?Qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Iu&&(v.wa=Iu,Ce(v.J,v.G,Iu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),v=f;var K=a;if(v.na=tm(v,v.L?v.ba:null,v.W),K.L){jf(v.h,K);var ue=K,Ye=v.O;Ye&&(ue.H=Ye),ue.D&&(yu(ue),Go(ue)),v.g=K}else Yf(v);f.i.length>0&&Jo(f)}else Ne[0]!="stop"&&Ne[0]!="close"||Dr(f,7);else f.I==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Dr(f,7):Su(f):Ne[0]!="noop"&&f.l&&f.l.qa(Ne),f.A=0)}}di(4)}catch{}}var Kx=class{constructor(a,d){this.g=a,this.map=d}};function Af(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function kf(a){return a.h?1:a.g?a.g.size:0}function xu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function _u(a,d){a.g?a.g.add(d):a.h=d}function jf(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Af.prototype.cancel=function(){if(this.i=Rf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Rf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.G);return d}return I(a.i)}var Pf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yx(a,d){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const v=a[f].indexOf("=");let j,V=null;v>=0?(j=a[f].substring(0,v),V=a[f].substring(v+1)):j=a[f],d(j,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function qn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof qn?(this.l=a.l,gi(this,a.j),this.o=a.o,this.g=a.g,yi(this,a.u),this.h=a.h,wu(this,Ff(a.i)),this.m=a.m):a&&(d=String(a).match(Pf))?(this.l=!1,gi(this,d[1]||"",!0),this.o=vi(d[2]||""),this.g=vi(d[3]||"",!0),yi(this,d[4]),this.h=vi(d[5]||"",!0),wu(this,d[6]||"",!0),this.m=vi(d[7]||"")):(this.l=!1,this.i=new _i(null,this.l))}qn.prototype.toString=function(){const a=[];var d=this.j;d&&a.push(xi(d,Df,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(xi(d,Df,!0),"@"),a.push(mi(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(xi(f,f.charAt(0)=="/"?Zx:Jx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",xi(f,t1)),a.join("")},qn.prototype.resolve=function(a){const d=dn(this);let f=!!a.j;f?gi(d,a.j):f=!!a.o,f?d.o=a.o:f=!!a.g,f?d.g=a.g:f=a.u!=null;var v=a.h;if(f)yi(d,a.u);else if(f=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var j=d.h.lastIndexOf("/");j!=-1&&(v=d.h.slice(0,j+1)+v)}if(j=v,j==".."||j==".")v="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){v=j.lastIndexOf("/",0)==0,j=j.split("/");const V=[];for(let K=0;K<j.length;){const ue=j[K++];ue=="."?v&&K==j.length&&V.push(""):ue==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),v&&K==j.length&&V.push("")):(V.push(ue),v=!0)}v=V.join("/")}else v=j}return f?d.h=v:f=a.i.toString()!=="",f?wu(d,Ff(a.i)):f=!!a.m,f&&(d.m=a.m),d};function dn(a){return new qn(a)}function gi(a,d,f){a.j=f?vi(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function yi(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function wu(a,d,f){d instanceof _i?(a.i=d,n1(a.i,a.l)):(f||(d=xi(d,e1)),a.i=new _i(d,a.l))}function Ce(a,d,f){a.i.set(d,f)}function Qo(a){return Ce(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function vi(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function xi(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Xx),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Xx(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Df=/[#\/\?@]/g,Jx=/[#\?:]/g,Zx=/[#\?]/g,e1=/[#\?@]/g,t1=/#/g;function _i(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Pr(a){a.g||(a.g=new Map,a.h=0,a.i&&Yx(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=_i.prototype,t.add=function(a,d){Pr(this),this.i=null,a=us(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Vf(a,d){Pr(a),d=us(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Mf(a,d){return Pr(a),d=us(a,d),a.g.has(d)}t.forEach=function(a,d){Pr(this),this.g.forEach(function(f,v){f.forEach(function(j){a.call(d,j,v,this)},this)},this)};function Of(a,d){Pr(a);let f=[];if(typeof d=="string")Mf(a,d)&&(f=f.concat(a.g.get(us(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)f=f.concat(a[d]);return f}t.set=function(a,d){return Pr(this),this.i=null,a=us(this,a),Mf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=Of(this,a),a.length>0?String(a[0]):d):d};function Lf(a,d,f){Vf(a,d),f.length>0&&(a.i=null,a.g.set(us(a,d),I(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(let v=0;v<d.length;v++){var f=d[v];const j=mi(f);f=Of(this,f);for(let V=0;V<f.length;V++){let K=j;f[V]!==""&&(K+="="+mi(f[V])),a.push(K)}}return this.i=a.join("&")};function Ff(a){const d=new _i;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function us(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function n1(a,d){d&&!a.j&&(Pr(a),a.i=null,a.g.forEach(function(f,v){const j=v.toLowerCase();v!=j&&(Vf(this,v),Lf(this,j,f))},a)),a.j=d}function r1(a,d){const f=new fi;if(o.Image){const v=new Image;v.onload=m(Hn,f,"TestLoadImage: loaded",!0,d,v),v.onerror=m(Hn,f,"TestLoadImage: error",!1,d,v),v.onabort=m(Hn,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=m(Hn,f,"TestLoadImage: timeout",!1,d,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function s1(a,d){const f=new fi,v=new AbortController,j=setTimeout(()=>{v.abort(),Hn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(V=>{clearTimeout(j),V.ok?Hn(f,"TestPingServer: ok",!0,d):Hn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),Hn(f,"TestPingServer: error",!1,d)})}function Hn(a,d,f,v,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),v(f)}catch{}}function i1(){this.g=new zx}function Eu(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Eu,pf),Eu.prototype.g=function(){return new Ko(this.i,this.h)};function Ko(a,d){A.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Ko,A),t=Ko.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,Ei(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ei(this)),this.g&&(this.readyState=3,Ei(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Uf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Uf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?wi(this):Ei(this),this.readyState==3&&Uf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,wi(this))},t.Na=function(a){this.g&&(this.response=a,wi(this))},t.ga=function(){this.g&&wi(this)};function wi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Ei(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Ei(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ko.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function zf(a){let d="";return D(a,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function bu(a,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=zf(f),typeof a=="string"?f!=null&&mi(f):Ce(a,d,f))}function ze(a){A.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ze,A);var o1=/^https?$/i,a1=["POST","PUT"];t=ze.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ef.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(V){$f(this,V);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var j in v)f.set(j,v[j]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())f.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),j=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(a1,d,void 0)>=0)||v||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,K]of f)this.g.setRequestHeader(V,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(V){$f(this,V)}};function $f(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,Bf(a),Yo(a)}function Bf(a){a.A||(a.A=!0,U(a,"complete"),U(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,U(this,"complete"),U(this,"abort"),Yo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yo(this,!0)),ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?qf(this):this.Xa())},t.Xa=function(){qf(this)};function qf(a){if(a.h&&typeof i<"u"){if(a.v&&Wn(a)==4)setTimeout(a.Ca.bind(a),0);else if(U(a,"readystatechange"),Wn(a)==4){a.h=!1;try{const V=a.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=V===0){let K=String(a.D).match(Pf)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),v=!o1.test(K?K.toLowerCase():"")}f=v}if(f)U(a,"complete"),U(a,"success");else{a.o=6;try{var j=Wn(a)>2?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.ca()+"]",Bf(a)}}finally{Yo(a)}}}}function Yo(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,d||U(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Wn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Ux(d)}};function Hf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function l1(a){const d={};a=(a.g&&Wn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(b(a[v]))continue;var f=Wx(a[v]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=d[j]||[];d[j]=V,V.push(f)}Q(d,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Wf(a){this.za=0,this.i=[],this.j=new fi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bi("baseRetryDelayMs",5e3,a),this.Za=bi("retryDelaySeedMs",1e4,a),this.Ta=bi("forwardChannelMaxRetries",2,a),this.va=bi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Af(a&&a.concurrentRequestLimit),this.Ba=new i1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Wf.prototype,t.ka=8,t.I=1,t.connect=function(a,d,f,v){_t(0),this.W=a,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.J=tm(this,null,this.W),Jo(this)};function Su(a){if(Gf(a),a.I==3){var d=a.V++,f=dn(a.J);if(Ce(f,"SID",a.M),Ce(f,"RID",d),Ce(f,"TYPE","terminate"),Si(a,f),d=new Bn(a,a.j,d),d.M=2,d.A=Qo(dn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=d.A,f=!0),f||(d.g=nm(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Go(d)}em(a)}function Xo(a){a.g&&(Nu(a),a.g.cancel(),a.g=null)}function Gf(a){Xo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Zo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Jo(a){if(!Cf(a.h)&&!a.m){a.m=!0;var d=a.Ea;M||y(),F||(M(),F=!0),x.add(d,a),a.D=0}}function u1(a,d){return kf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=hi(h(a.Ea,a,d),Zf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const j=new Bn(this,this.j,a);let V=this.o;if(this.U&&(V?(V=ne(V),et(V,this.U)):V=this.U),this.u!==null||this.R||(j.J=V,V=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Kf(this,j,d),f=dn(this.J),Ce(f,"RID",a),Ce(f,"CVER",22),this.G&&Ce(f,"X-HTTP-Session-Id",this.G),Si(this,f),V&&(this.R?d="headers="+mi(zf(V))+"&"+d:this.u&&bu(f,this.u,V)),_u(this.h,j),this.Ra&&Ce(f,"TYPE","init"),this.S?(Ce(f,"$req",d),Ce(f,"SID","null"),j.U=!0,gu(j,f,null)):gu(j,f,d),this.I=2}}else this.I==3&&(a?Qf(this,a):this.i.length==0||Cf(this.h)||Qf(this))};function Qf(a,d){var f;d?f=d.l:f=a.V++;const v=dn(a.J);Ce(v,"SID",a.M),Ce(v,"RID",f),Ce(v,"AID",a.K),Si(a,v),a.u&&a.o&&bu(v,a.u,a.o),f=new Bn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),d&&(a.i=d.G.concat(a.i)),d=Kf(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),_u(a.h,f),gu(f,v,d)}function Si(a,d){a.H&&D(a.H,function(f,v){Ce(d,v,f)}),a.l&&D({},function(f,v){Ce(d,v,f)})}function Kf(a,d,f){f=Math.min(a.i.length,f);const v=a.l?h(a.l.Ka,a.l,a):null;e:{var j=a.i;let ue=-1;for(;;){const Ye=["count="+f];ue==-1?f>0?(ue=j[0].g,Ye.push("ofs="+ue)):ue=0:Ye.push("ofs="+ue);let Ne=!0;for(let nt=0;nt<f;nt++){var V=j[nt].g;const hn=j[nt].map;if(V-=ue,V<0)ue=Math.max(0,j[nt].g-100),Ne=!1;else try{V="req"+V+"_"||"";try{var K=hn instanceof Map?hn:Object.entries(hn);for(const[Vr,Gn]of K){let Qn=Gn;u(Gn)&&(Qn=du(Gn)),Ye.push(V+Vr+"="+encodeURIComponent(Qn))}}catch(Vr){throw Ye.push(V+"type="+encodeURIComponent("_badmap")),Vr}}catch{v&&v(hn)}}if(Ne){K=Ye.join("&");break e}}K=void 0}return a=a.i.splice(0,f),d.G=a,K}function Yf(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;M||y(),F||(M(),F=!0),x.add(d,a),a.A=0}}function Tu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=hi(h(a.Da,a),Zf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Xf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=hi(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),Xo(this),Xf(this))};function Nu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Xf(a){a.g=new Bn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=dn(a.na);Ce(d,"RID","rpc"),Ce(d,"SID",a.M),Ce(d,"AID",a.K),Ce(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ce(d,"TO",a.ia),Ce(d,"TYPE","xmlhttp"),Si(a,d),a.u&&a.o&&bu(d,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Qo(dn(d)),f.u=null,f.R=!0,Tf(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Xo(this),Tu(this),_t(19))};function Zo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Jf(a,d){var f=null;if(a.g==d){Zo(a),Nu(a),a.g=null;var v=2}else if(xu(a.h,d))f=d.G,jf(a.h,d),v=1;else return;if(a.I!=0){if(d.o)if(v==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var j=a.D;v=Ho(),U(v,new _f(v,f)),Jo(a)}else Yf(a);else if(j=d.m,j==3||j==0&&d.X>0||!(v==1&&u1(a,d)||v==2&&Tu(a)))switch(f&&f.length>0&&(d=a.h,d.i=d.i.concat(f)),j){case 1:Dr(a,5);break;case 4:Dr(a,10);break;case 3:Dr(a,6);break;default:Dr(a,2)}}}function Zf(a,d){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*d}function Dr(a,d){if(a.j.info("Error code "+d),d==2){var f=h(a.bb,a),v=a.Ua;const j=!v;v=new qn(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||gi(v,"https"),Qo(v),j?r1(v.toString(),f):s1(v.toString(),f)}else _t(2);a.I=0,a.l&&a.l.pa(d),em(a),Gf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function em(a){if(a.I=0,a.ja=[],a.l){const d=Rf(a.h);(d.length!=0||a.i.length!=0)&&(k(a.ja,d),k(a.ja,a.i),a.h.i.length=0,I(a.i),a.i.length=0),a.l.oa()}}function tm(a,d,f){var v=f instanceof qn?dn(f):new qn(f);if(v.g!="")d&&(v.g=d+"."+v.g),yi(v,v.u);else{var j=o.location;v=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;const V=new qn(null);v&&gi(V,v),d&&(V.g=d),j&&yi(V,j),f&&(V.h=f),v=V}return f=a.G,d=a.wa,f&&d&&Ce(v,f,d),Ce(v,"VER",a.ka),Si(a,v),v}function nm(a,d,f){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new ze(new Eu({ab:f})):new ze(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rm(){}t=rm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ea(){}ea.prototype.g=function(a,d){return new Vt(a,d)};function Vt(a,d){A.call(this),this.g=new Wf(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!b(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!b(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new cs(this)}p(Vt,A),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){Su(this.g)},Vt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=du(a),a=f);d.i.push(new Kx(d.Ya++,a)),d.I==3&&Jo(d)},Vt.prototype.N=function(){this.g.l=null,delete this.j,Su(this.g),delete this.g,Vt.Z.N.call(this)};function sm(a){hu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(sm,hu);function im(){fu.call(this),this.status=1}p(im,fu);function cs(a){this.g=a}p(cs,rm),cs.prototype.ra=function(){U(this.g,"a")},cs.prototype.qa=function(a){U(this.g,new sm(a))},cs.prototype.pa=function(a){U(this.g,new im)},cs.prototype.oa=function(){U(this.g,"b")},ea.prototype.createWebChannel=ea.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,iv=function(){return new ea},sv=function(){return Ho()},rv=jr,dd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Wo.NO_ERROR=0,Wo.TIMEOUT=8,Wo.HTTP_ERROR=6,Oa=Wo,wf.COMPLETE="complete",nv=wf,gf.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",A.prototype.listen=A.prototype.J,$i=gf,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,tv=ze}).apply(typeof xa<"u"?xa:typeof self<"u"?self:typeof window<"u"?window:{});const Ip="@firebase/firestore",Ap="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ni="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr=new Qy("@firebase/firestore");function hs(){return Zr.logLevel}function X(t,...e){if(Zr.logLevel<=xe.DEBUG){const n=e.map(Ch);Zr.debug(`Firestore (${ni}): ${t}`,...n)}}function Fn(t,...e){if(Zr.logLevel<=xe.ERROR){const n=e.map(Ch);Zr.error(`Firestore (${ni}): ${t}`,...n)}}function Hs(t,...e){if(Zr.logLevel<=xe.WARN){const n=e.map(Ch);Zr.warn(`Firestore (${ni}): ${t}`,...n)}}function Ch(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ov(t,r,n)}function ov(t,e,n){let r=`FIRESTORE (${ni}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Fn(r),new Error(r)}function Ee(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ov(e,s,r)}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends ti{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gt.UNAUTHENTICATED))}shutdown(){}}class S2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class T2{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new av(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class N2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class I2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new N2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,o2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ee(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Cp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=C2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function hd(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return sc(s)===sc(i)?me(s,i):sc(s)?1:-1}return me(t.length,e.length)}const k2=55296,j2=57343;function sc(t){const e=t.charCodeAt(0);return e>=k2&&e<=j2}function Ws(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="__name__";class pn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=pn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return me(e.length,n.length)}static compareSegments(e,n){const r=pn.isNumericId(e),s=pn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?pn.extractNumericId(e).compare(pn.extractNumericId(n)):hd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return pr.fromString(e.substring(4,e.length-2))}}class Ie extends pn{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const R2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends pn{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return R2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kp}static keyField(){return new lt([kp])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Y(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new Y(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Ie.fromString(e))}static fromName(e){return new re(Ie.fromString(e).popFirst(5))}static empty(){return new re(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Ie(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t,e,n){if(!n)throw new Y(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function P2(t,e,n,r){if(e===!0&&r===!0)throw new Y(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jp(t){if(!re.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rp(t){if(re.isDocumentKey(t))throw new Y(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ql(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie(12329,{type:typeof t})}function bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ql(t);throw new Y(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t,e){const n={typeString:t};return e&&(n.value=e),n}function Fo(t,e){if(!uv(t))throw new Y(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Y(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=-62135596800,Dp=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Dp);return new je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Pp)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dp}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fo(e,je._jsonSchema))return new je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Pp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:Ke("string",je._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new je(0,0))}static max(){return new oe(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=-1;function D2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new xr(s,re.empty(),e)}function V2(t){return new xr(t.readTime,t.key,No)}class xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xr(oe.min(),re.empty(),No)}static max(){return new xr(oe.max(),re.empty(),No)}}function M2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ri(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==O2)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(m=>{o[h]=m,++u,u===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function F2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function si(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=-1;function Yl(t){return t==null}function xl(t){return t===0&&1/t==-1/0}function U2(t){return typeof t=="number"&&Number.isInteger(t)&&!xl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="";function z2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Vp(e)),e=$2(t.get(n),e);return Vp(e)}function $2(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case cv:n+="";break;default:n+=i}}return n}function Vp(t){return t+cv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ar(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _a(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _a(this.root,e,this.comparator,!1)}getReverseIterator(){return new _a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _a(this.root,e,this.comparator,!0)}}class _a{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??at.RED,this.left=s??at.EMPTY,this.right=i??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new at(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Op(this.data.getIterator())}getIteratorFrom(e){return new Op(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class Op{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new Ze(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ws(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hv("Invalid base64 string: "+i):i}}(e);return new dt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const B2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _r(t){if(Ee(!!t,39018),typeof t=="string"){let e=0;const n=B2.exec(t);if(Ee(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wr(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="server_timestamp",mv="__type__",pv="__previous_value__",gv="__local_write_time__";function Rh(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[mv])==null?void 0:r.stringValue)===fv}function Xl(t){const e=t.mapValue.fields[pv];return Rh(e)?Xl(e):e}function Io(t){const e=_r(t.mapValue.fields[gv].timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n,r,s,i,o,u,c,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=m}}const _l="(default)";class Ao{constructor(e,n){this.projectId=e,this.database=n||_l}static empty(){return new Ao("","")}get isDefaultDatabase(){return this.database===_l}isEqual(e){return e instanceof Ao&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="__type__",H2="__max__",wa={mapValue:{}},vv="__vector__",wl="value";function Er(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rh(t)?4:G2(t)?9007199254740991:W2(t)?10:11:ie(28295,{value:t})}function Sn(t,e){if(t===e)return!0;const n=Er(t);if(n!==Er(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Io(t).isEqual(Io(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=_r(s.timestampValue),u=_r(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return wr(s.bytesValue).isEqual(wr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Be(s.geoPointValue.latitude)===Be(i.geoPointValue.latitude)&&Be(s.geoPointValue.longitude)===Be(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Be(s.integerValue)===Be(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Be(s.doubleValue),u=Be(i.doubleValue);return o===u?xl(o)===xl(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Ws(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Mp(o)!==Mp(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!Sn(o[c],u[c])))return!1;return!0}(t,e);default:return ie(52216,{left:t})}}function Co(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function Gs(t,e){if(t===e)return 0;const n=Er(t),r=Er(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Be(i.integerValue||i.doubleValue),c=Be(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return Lp(t.timestampValue,e.timestampValue);case 4:return Lp(Io(t),Io(e));case 5:return hd(t.stringValue,e.stringValue);case 6:return function(i,o){const u=wr(i),c=wr(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const m=me(u[h],c[h]);if(m!==0)return m}return me(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=me(Be(i.latitude),Be(o.latitude));return u!==0?u:me(Be(i.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Fp(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,I,k,R;const u=i.fields||{},c=o.fields||{},h=(g=u[wl])==null?void 0:g.arrayValue,m=(I=c[wl])==null?void 0:I.arrayValue,p=me(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((R=m==null?void 0:m.values)==null?void 0:R.length)||0);return p!==0?p:Fp(h,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===wa.mapValue&&o===wa.mapValue)return 0;if(i===wa.mapValue)return 1;if(o===wa.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),h=o.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let p=0;p<c.length&&p<m.length;++p){const g=hd(c[p],m[p]);if(g!==0)return g;const I=Gs(u[c[p]],h[m[p]]);if(I!==0)return I}return me(c.length,m.length)}(t.mapValue,e.mapValue);default:throw ie(23264,{he:n})}}function Lp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=_r(t),r=_r(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function Fp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Gs(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function Qs(t){return fd(t)}function fd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_r(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=fd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${fd(n.fields[o])}`;return s+"}"}(t.mapValue):ie(61005,{value:t})}function La(t){switch(Er(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xl(t);return e?16+La(e):16;case 5:return 2*t.stringValue.length;case 6:return wr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+La(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ar(r.fields,(i,o)=>{s+=i.length+La(o)}),s}(t.mapValue);default:throw ie(13486,{value:t})}}function Up(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function md(t){return!!t&&"integerValue"in t}function Ph(t){return!!t&&"arrayValue"in t}function zp(t){return!!t&&"nullValue"in t}function $p(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fa(t){return!!t&&"mapValue"in t}function W2(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[yv])==null?void 0:r.stringValue)===vv}function no(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ar(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=no(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=no(t.arrayValue.values[n]);return e}return{...t}}function G2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===H2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=no(n)}setAll(e){let n=lt.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=no(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Fa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Fa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ar(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(no(this.value))}}function xv(t){const e=[];return Ar(t.fields,(n,r)=>{const s=new lt([n]);if(Fa(r)){const i=xv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new vt(e,0,oe.min(),oe.min(),oe.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new vt(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new vt(e,2,n,oe.min(),oe.min(),At.empty(),0)}static newUnknownDocument(e,n){return new vt(e,3,n,oe.min(),oe.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.position=e,this.inclusive=n}}function Bp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=Gs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function qp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n="asc"){this.field=e,this.dir=n}}function Q2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _v=class{};class Qe extends _v{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Y2(e,n,r):n==="array-contains"?new Z2(e,r):n==="in"?new eb(e,r):n==="not-in"?new tb(e,r):n==="array-contains-any"?new nb(e,r):new Qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new X2(e,r):new J2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Gs(n,this.value)):n!==null&&Er(this.value)===Er(n)&&this.matchesComparison(Gs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends _v{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new un(e,n)}matches(e){return wv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wv(t){return t.op==="and"}function Ev(t){return K2(t)&&wv(t)}function K2(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function pd(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+Qs(t.value);if(Ev(t))return t.filters.map(e=>pd(e)).join(",");{const e=t.filters.map(n=>pd(n)).join(",");return`${t.op}(${e})`}}function bv(t,e){return t instanceof Qe?function(r,s){return s instanceof Qe&&r.op===s.op&&r.field.isEqual(s.field)&&Sn(r.value,s.value)}(t,e):t instanceof un?function(r,s){return s instanceof un&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&bv(o,s.filters[u]),!0):!1}(t,e):void ie(19439)}function Sv(t){return t instanceof Qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Qs(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(Sv).join(" ,")+"}"}(t):"Filter"}class Y2 extends Qe{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class X2 extends Qe{constructor(e,n){super(e,"in",n),this.keys=Tv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class J2 extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=Tv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Tv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class Z2 extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ph(n)&&Co(n.arrayValue,this.value)}}class eb extends Qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Co(this.value.arrayValue,n)}}class tb extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Co(this.value.arrayValue,n)}}class nb extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ph(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Co(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.Te=null}}function Hp(t,e=null,n=[],r=[],s=null,i=null,o=null){return new rb(t,e,n,r,s,i,o)}function Dh(t){const e=ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Yl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qs(r)).join(",")),e.Te=n}return e.Te}function Vh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Q2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qp(t.startAt,e.startAt)&&qp(t.endAt,e.endAt)}function gd(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sb(t,e,n,r,s,i,o,u){return new ii(t,e,n,r,s,i,o,u)}function Mh(t){return new ii(t)}function Wp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nv(t){return t.collectionGroup!==null}function ro(t){const e=ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Ze(lt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ko(i,r))}),n.has(lt.keyField().canonicalString())||e.Ie.push(new ko(lt.keyField(),r))}return e.Ie}function xn(t){const e=ae(t);return e.Ee||(e.Ee=ib(e,ro(t))),e.Ee}function ib(t,e){if(t.limitType==="F")return Hp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ko(s.field,i)});const n=t.endAt?new El(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new El(t.startAt.position,t.startAt.inclusive):null;return Hp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yd(t,e){const n=t.filters.concat([e]);return new ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vd(t,e,n){return new ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jl(t,e){return Vh(xn(t),xn(e))&&t.limitType===e.limitType}function Iv(t){return`${Dh(xn(t))}|lt:${t.limitType}`}function fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Sv(s)).join(", ")}]`),Yl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Qs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Qs(s)).join(",")),`Target(${r})`}(xn(t))}; limitType=${t.limitType})`}function Zl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):re.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ro(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const h=Bp(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,ro(r),s)||r.endAt&&!function(o,u,c){const h=Bp(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,ro(r),s))}(t,e)}function ob(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Av(t){return(e,n)=>{let r=!1;for(const s of ro(t)){const i=ab(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ab(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),h=u.data.field(i);return c!==null&&h!==null?Gs(c,h):ie(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ar(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return dv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=new Fe(re.comparator);function Un(){return lb}const Cv=new Fe(re.comparator);function Bi(...t){let e=Cv;for(const n of t)e=e.insert(n.key,n);return e}function kv(t){let e=Cv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Br(){return so()}function jv(){return so()}function so(){return new ss(t=>t.toString(),(t,e)=>t.isEqual(e))}const ub=new Fe(re.comparator),cb=new Ze(re.comparator);function pe(...t){let e=cb;for(const n of t)e=e.add(n);return e}const db=new Ze(me);function hb(){return db}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xl(e)?"-0":e}}function Rv(t){return{integerValue:""+t}}function fb(t,e){return U2(e)?Rv(e):Oh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this._=void 0}}function mb(t,e,n){return t instanceof bl?function(s,i){const o={fields:{[mv]:{stringValue:fv},[gv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rh(i)&&(i=Xl(i)),i&&(o.fields[pv]=i),{mapValue:o}}(n,e):t instanceof jo?Dv(t,e):t instanceof Ro?Vv(t,e):function(s,i){const o=Pv(s,i),u=Gp(o)+Gp(s.Ae);return md(o)&&md(s.Ae)?Rv(u):Oh(s.serializer,u)}(t,e)}function pb(t,e,n){return t instanceof jo?Dv(t,e):t instanceof Ro?Vv(t,e):n}function Pv(t,e){return t instanceof Sl?function(r){return md(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class bl extends eu{}class jo extends eu{constructor(e){super(),this.elements=e}}function Dv(t,e){const n=Mv(e);for(const r of t.elements)n.some(s=>Sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ro extends eu{constructor(e){super(),this.elements=e}}function Vv(t,e){let n=Mv(e);for(const r of t.elements)n=n.filter(s=>!Sn(s,r));return{arrayValue:{values:n}}}class Sl extends eu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Gp(t){return Be(t.integerValue||t.doubleValue)}function Mv(t){return Ph(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function gb(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof jo&&s instanceof jo||r instanceof Ro&&s instanceof Ro?Ws(r.elements,s.elements,Sn):r instanceof Sl&&s instanceof Sl?Sn(r.Ae,s.Ae):r instanceof bl&&s instanceof bl}(t.transform,e.transform)}class yb{constructor(e,n){this.version=e,this.transformResults=n}}class an{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ua(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tu{}function Ov(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lh(t.key,an.none()):new Uo(t.key,t.data,an.none());{const n=t.data,r=At.empty();let s=new Ze(lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Cr(t.key,r,new Ut(s.toArray()),an.none())}}function vb(t,e,n){t instanceof Uo?function(s,i,o){const u=s.value.clone(),c=Kp(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Cr?function(s,i,o){if(!Ua(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=Kp(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Lv(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function io(t,e,n,r){return t instanceof Uo?function(i,o,u,c){if(!Ua(i.precondition,o))return u;const h=i.value.clone(),m=Yp(i.fieldTransforms,c,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Cr?function(i,o,u,c){if(!Ua(i.precondition,o))return u;const h=Yp(i.fieldTransforms,c,o),m=o.data;return m.setAll(Lv(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,u){return Ua(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function xb(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Pv(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function Qp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ws(r,s,(i,o)=>gb(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Uo extends tu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Cr extends tu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Kp(t,e,n){const r=new Map;Ee(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,pb(o,u,n[s]))}return r}function Yp(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,mb(i,o,e))}return r}class Lh extends tu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _b extends tu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&vb(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=io(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=io(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=Ov(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&Ws(this.mutations,e.mutations,(n,r)=>Qp(n,r))&&Ws(this.baseMutations,e.baseMutations,(n,r)=>Qp(n,r))}}class Fh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ee(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return ub}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Fh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,ve;function Sb(t){switch(t){case z.OK:return ie(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ie(15467,{code:t})}}function Fv(t){if(t===void 0)return Fn("GRPC error has no .code"),z.UNKNOWN;switch(t){case We.OK:return z.OK;case We.CANCELLED:return z.CANCELLED;case We.UNKNOWN:return z.UNKNOWN;case We.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case We.INTERNAL:return z.INTERNAL;case We.UNAVAILABLE:return z.UNAVAILABLE;case We.UNAUTHENTICATED:return z.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case We.NOT_FOUND:return z.NOT_FOUND;case We.ALREADY_EXISTS:return z.ALREADY_EXISTS;case We.PERMISSION_DENIED:return z.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case We.ABORTED:return z.ABORTED;case We.OUT_OF_RANGE:return z.OUT_OF_RANGE;case We.UNIMPLEMENTED:return z.UNIMPLEMENTED;case We.DATA_LOSS:return z.DATA_LOSS;default:return ie(39323,{code:t})}}(ve=We||(We={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=new pr([4294967295,4294967295],0);function Xp(t){const e=Tb().encode(t),n=new ev;return n.update(e),new Uint8Array(n.digest())}function Jp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new pr([n,r],0),new pr([s,i],0)]}class Uh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qi(`Invalid padding: ${n}`);if(r<0)throw new qi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=pr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(pr.fromNumber(r)));return s.compare(Nb)===1&&(s=new pr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Xp(e),[r,s]=Jp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Uh(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.ge===0)return;const n=Xp(e),[r,s]=Jp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,zo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new nu(oe.min(),s,new Fe(me),Un(),pe())}}class zo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zo(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Uv{constructor(e,n){this.targetId=e,this.Ce=n}}class zv{constructor(e,n,r=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Zp{constructor(){this.ve=0,this.Fe=eg(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pe(),n=pe(),r=pe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie(38017,{changeType:i})}}),new zo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=eg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ib{constructor(e){this.Ge=e,this.ze=new Map,this.je=Un(),this.Je=Ea(),this.He=Ea(),this.Ye=new Fe(me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ie(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(gd(i))if(r===0){const o=new re(i.path);this.et(n,o,vt.newNoDocument(o,oe.min()))}else Ee(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const u=this.ut(e),c=u?this.ct(u,e,o):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=wr(r).toUint8Array()}catch(c){if(c instanceof hv)return Hs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Uh(o,s,i)}catch(c){return Hs(c instanceof qi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const u=this.ot(o);if(u){if(i.current&&gd(u.target)){const c=new re(u.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,vt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=pe();this.He.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new nu(e,n,this.Ye,this.je,r);return this.je=Un(),this.Je=Ea(),this.He=Ea(),this.Ye=new Fe(me),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Zp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ze(me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ze(me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Zp),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ea(){return new Fe(re.comparator)}function eg(){return new Fe(re.comparator)}const Ab={asc:"ASCENDING",desc:"DESCENDING"},Cb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kb={and:"AND",or:"OR"};class jb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xd(t,e){return t.useProto3Json||Yl(e)?e:{value:e}}function Tl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $v(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Rb(t,e){return Tl(t,e.toTimestamp())}function _n(t){return Ee(!!t,49232),oe.fromTimestamp(function(n){const r=_r(n);return new je(r.seconds,r.nanos)}(t))}function zh(t,e){return _d(t,e).canonicalString()}function _d(t,e){const n=function(s){return new Ie(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Bv(t){const e=Ie.fromString(t);return Ee(Qv(e),10190,{key:e.toString()}),e}function wd(t,e){return zh(t.databaseId,e.path)}function ic(t,e){const n=Bv(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(Hv(n))}function qv(t,e){return zh(t.databaseId,e)}function Pb(t){const e=Bv(t);return e.length===4?Ie.emptyPath():Hv(e)}function Ed(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Hv(t){return Ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function tg(t,e,n){return{name:wd(t,e),fields:n.value.mapValue.fields}}function Db(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ie(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,m){return h.useProto3Json?(Ee(m===void 0||typeof m=="string",58123),dt.fromBase64String(m||"")):(Ee(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),dt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const m=h.code===void 0?z.UNKNOWN:Fv(h.code);return new Y(m,h.message||"")}(o);n=new zv(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ic(t,r.document.name),i=_n(r.document.updateTime),o=r.document.createTime?_n(r.document.createTime):oe.min(),u=new At({mapValue:{fields:r.document.fields}}),c=vt.newFoundDocument(s,i,o,u),h=r.targetIds||[],m=r.removedTargetIds||[];n=new za(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ic(t,r.document),i=r.readTime?_n(r.readTime):oe.min(),o=vt.newNoDocument(s,i),u=r.removedTargetIds||[];n=new za([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ic(t,r.document),i=r.removedTargetIds||[];n=new za([],i,s,null)}else{if(!("filter"in e))return ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new bb(s,i),u=r.targetId;n=new Uv(u,o)}}return n}function Vb(t,e){let n;if(e instanceof Uo)n={update:tg(t,e.key,e.value)};else if(e instanceof Lh)n={delete:wd(t,e.key)};else if(e instanceof Cr)n={update:tg(t,e.key,e.data),updateMask:qb(e.fieldMask)};else{if(!(e instanceof _b))return ie(16599,{Vt:e.type});n={verify:wd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof bl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof jo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ro)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Sl)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw ie(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Rb(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie(27497)}(t,e.precondition)),n}function Mb(t,e){return t&&t.length>0?(Ee(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?_n(s.updateTime):_n(i);return o.isEqual(oe.min())&&(o=_n(i)),new yb(o,s.transformResults||[])}(n,e))):[]}function Ob(t,e){return{documents:[qv(t,e.path)]}}function Lb(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qv(t,s);const i=function(h){if(h.length!==0)return Gv(un.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(m=>function(g){return{field:ms(g.field),direction:zb(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=xd(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function Fb(t){let e=Pb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ee(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=Wv(p);return g instanceof un&&Ev(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(k){return new ko(ps(k.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(p){let g;return g=typeof p=="object"?p.value:p,Yl(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,I=p.values||[];return new El(I,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,I=p.values||[];return new El(I,g)}(n.endAt)),sb(e,s,o,i,u,"F",c,h)}function Ub(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ps(n.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ps(n.unaryFilter.field);return Qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ps(n.unaryFilter.field);return Qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ps(n.unaryFilter.field);return Qe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}}(t):t.fieldFilter!==void 0?function(n){return Qe.create(ps(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(r=>Wv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie(1026)}}(n.compositeFilter.op))}(t):ie(30097,{filter:t})}function zb(t){return Ab[t]}function $b(t){return Cb[t]}function Bb(t){return kb[t]}function ms(t){return{fieldPath:t.canonicalString()}}function ps(t){return lt.fromServerFormat(t.fieldPath)}function Gv(t){return t instanceof Qe?function(n){if(n.op==="=="){if($p(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NAN"}};if(zp(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($p(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NAN"}};if(zp(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(n.field),op:$b(n.op),value:n.value}}}(t):t instanceof un?function(n){const r=n.getFilters().map(s=>Gv(s));return r.length===1?r[0]:{compositeFilter:{op:Bb(n.op),filters:r}}}(t):ie(54877,{filter:t})}function qb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,r,s,i=oe.min(),o=oe.min(),u=dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.yt=e}}function Wb(t){const e=Fb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.Cn=new Qb}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(xr.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class Qb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kv=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(Kv,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ks(0)}static cr(){return new Ks(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="LruGarbageCollector",Kb=1048576;function sg([t,e],[n,r]){const s=me(t,n);return s===0?me(e,r):s}class Yb{constructor(e){this.Ir=e,this.buffer=new Ze(sg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();sg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Xb{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(rg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){si(n)?X(rg,"Ignoring IndexedDB error during garbage collection: ",n):await ri(n)}await this.Vr(3e5)})}}class Jb{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Kl.ce);const r=new Yb(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(ng)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ng):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,u,c,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,u=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),hs()<=xe.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${i} targets in `+(c-u)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-m}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Zb(t,e){return new Jb(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.changes=new ss(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&io(r.mutation,s,Ut.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=Br();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Bi();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Br();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Un();const o=so(),u=function(){return so()}();return n.forEach((c,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof Cr)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),io(m.mutation,h,m.mutation.getFieldMask(),je.now())):o.set(h.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>u.set(h,new tS(m,o.get(h)??null))),u))}recalculateAndSaveOverlays(e,n){const r=so();let s=new Fe((o,u)=>o-u),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let m=r.get(c)||Ut.empty();m=u.applyToLocalView(h,m),r.set(c,m);const p=(s.get(u.batchId)||pe()).add(c);s=s.insert(u.batchId,p)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,m=c.value,p=jv();m.forEach(g=>{if(!i.has(g)){const I=Ov(n.get(g),r.get(g));I!==null&&p.set(g,I),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(Br());let u=No,c=i;return o.next(h=>q.forEach(h,(m,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),i.get(m)?q.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,pe())).next(m=>({batchId:u,changes:kv(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let s=Bi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Bi();return this.indexManager.getCollectionParents(e,i).next(u=>q.forEach(u,c=>{const h=function(p,g){return new ii(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,vt.newInvalidDocument(m)))});let u=Bi();return o.forEach((c,h)=>{const m=i.get(c);m!==void 0&&io(m.mutation,h,Ut.empty(),je.now()),Zl(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_n(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Wb(s.bundledQuery),readTime:_n(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.overlays=new Fe(re.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Br();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=Br(),i=n.length+1,o=new re(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Fe((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=i.get(h.largestBatchId);m===null&&(m=Br(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=Br(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>u.set(h,m)),!(u.size()>=s)););return q.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Eb(n,r));let i=this.qr.get(n);i===void 0&&(i=pe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this.Qr=new Ze(rt.$r),this.Ur=new Ze(rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new rt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new re(new Ie([])),r=new rt(n,e),s=new rt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new re(new Ie([])),r=new rt(n,e),s=new rt(n,e+1);let i=pe();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return re.comparator(e.key,n.key)||me(e.Yr,n.Yr)}static Kr(e,n){return me(e.Yr,n.Yr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(rt.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wb(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.Zr=this.Zr.add(new rt(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?jh:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),s=new rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const u=this.Xr(o.Yr);i.push(u)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(me);return n.forEach(s=>{const i=new rt(s,0),o=new rt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],u=>{r=r.add(u.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;re.isDocumentKey(i)||(i=i.child(""));const o=new rt(new re(i),0);let u=new Ze(me);return this.Zr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.Yr)),!0)},o),q.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ee(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,s=>{const i=new rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new rt(n,0),s=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e){this.ri=e,this.docs=function(){return new Fe(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():vt.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Un();const o=n.path,u=new re(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||M2(V2(m),r)<=0||(s.has(m.key)||Zl(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie(9500)}ii(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lS(this)}getSize(e){return q.resolve(this.size)}}class lS extends eS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.persistence=e,this.si=new ss(n=>Dh(n),Vh),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.oi=0,this._i=new $h,this.targetCount=0,this.ai=Ks.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ks(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n){this.ui={},this.overlays={},this.ci=new Kl(0),this.li=!1,this.li=!0,this.hi=new iS,this.referenceDelegate=e(this),this.Pi=new uS(this),this.indexManager=new Gb,this.remoteDocumentCache=function(s){return new aS(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Hb(n),this.Ii=new rS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new oS(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new cS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class cS extends L2{constructor(e){super(),this.currentSequenceNumber=e}}class Bh{constructor(e){this.persistence=e,this.Ri=new $h,this.Vi=null}static mi(e){return new Bh(e)}get fi(){if(this.Vi)return this.Vi;throw ie(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{const s=re.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Nl{constructor(e,n){this.persistence=e,this.pi=new ss(r=>z2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Zb(this,n)}static mi(e,n){return new Nl(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(u=>{u||(r++,i.removeEntry(o,oe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=La(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new qh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return rE()?8:F2(tE())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new dS;return this.Ss(e,n,o).next(u=>{if(i.result=u,this.Vs)return this.bs(e,n,o,u.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(hs()<=xe.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(hs()<=xe.DEBUG&&X("QueryEngine","Query:",fs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(hs()<=xe.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(n))):q.resolve())}ys(e,n){if(Wp(n))return q.resolve(null);let r=xn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=vd(n,null,"F"),r=xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.ps.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.Ds(n,u);return this.Cs(n,h,o,c.readTime)?this.ys(e,vd(n,null,"F")):this.vs(e,h,n,c)}))})))}ws(e,n,r,s){return Wp(n)||s.isEqual(oe.min())?q.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?q.resolve(null):(hs()<=xe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fs(n)),this.vs(e,o,n,D2(s,No)).next(u=>u))})}Ds(e,n){let r=new Ze(Av(e));return n.forEach((s,i)=>{Zl(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return hs()<=xe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",fs(n)),this.ps.getDocumentsMatchingQuery(e,n,xr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="LocalStore",fS=3e8;class mS{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Fe(me),this.xs=new ss(i=>Dh(i),Vh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function pS(t,e,n,r){return new mS(t,e,n,r)}async function Xv(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=pe();for(const h of s){o.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of i){u.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:u}))})})}function gS(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,c,h,m){const p=h.batch,g=p.keys();let I=q.resolve();return g.forEach(k=>{I=I.next(()=>m.getEntry(c,k)).next(R=>{const P=h.docVersions.get(k);Ee(P!==null,48541),R.version.compareTo(P)<0&&(p.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),m.addEntry(R)))})}),I.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=pe();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Jv(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function yS(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;u.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let I=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(dt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,r)),s=s.insert(p,I),function(R,P,S){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=fS?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,I,m)&&u.push(n.Pi.updateTargetData(i,I))});let c=Un(),h=pe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),u.push(vS(i,o,e.documentUpdates).next(m=>{c=m.ks,h=m.qs})),!r.isEqual(oe.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(m)}return q.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.Ms=s,i))}function vS(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Un();return n.forEach((u,c)=>{const h=i.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):X(Hh,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{ks:o,qs:s}})}function xS(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _S(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function bd(t,e,n){const r=ae(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!si(o))throw o;X(Hh,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function ig(t,e,n){const r=ae(t);let s=oe.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,m){const p=ae(c),g=p.xs.get(m);return g!==void 0?q.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,m)}(r,o,xn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:pe())).next(u=>(wS(r,ob(e),u),{documents:u,Qs:i})))}function wS(t,e,n){let r=t.Os.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class og{constructor(){this.activeTargetIds=hb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ES{constructor(){this.Mo=new og,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new og,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="ConnectivityMonitor";class lg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(ag,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(ag,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ba=null;function Sd(){return ba===null?ba=function(){return 268435456+Math.round(2147483648*Math.random())}():ba++,"0x"+ba.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc="RestConnection",SS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===_l?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Sd(),u=this.zo(e,n.toUriEncodedString());X(oc,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:h}=new URL(u),m=Ih(h);return this.Jo(e,u,c,r,m).then(p=>(X(oc,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Hs(oc,`RPC '${e}' ${o} failed with error: `,p,"url: ",u,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ni}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=SS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pt="WebChannelConnection";class IS extends TS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Sd();return new Promise((u,c)=>{const h=new tv;h.setWithCredentials(!0),h.listenOnce(nv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Oa.NO_ERROR:const p=h.getResponseJson();X(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),u(p);break;case Oa.TIMEOUT:X(pt,`RPC '${e}' ${o} timed out`),c(new Y(z.DEADLINE_EXCEEDED,"Request time out"));break;case Oa.HTTP_ERROR:const g=h.getStatus();if(X(pt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I==null?void 0:I.error;if(k&&k.status&&k.message){const R=function(S){const w=S.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(w)>=0?w:z.UNKNOWN}(k.status);c(new Y(R,k.message))}else c(new Y(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Y(z.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{X(pt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);X(pt,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",m,r,15)})}T_(e,n,r){const s=Sd(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iv(),u=sv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");X(pt,`Creating RPC '${e}' stream ${s}: ${m}`,c);const p=o.createWebChannel(m,c);this.I_(p);let g=!1,I=!1;const k=new NS({Yo:P=>{I?X(pt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(X(pt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),X(pt,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},Zo:()=>p.close()}),R=(P,S,w)=>{P.listen(S,N=>{try{w(N)}catch(O){setTimeout(()=>{throw O},0)}})};return R(p,$i.EventType.OPEN,()=>{I||(X(pt,`RPC '${e}' stream ${s} transport opened.`),k.o_())}),R(p,$i.EventType.CLOSE,()=>{I||(I=!0,X(pt,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(p))}),R(p,$i.EventType.ERROR,P=>{I||(I=!0,Hs(pt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),k.a_(new Y(z.UNAVAILABLE,"The operation could not be completed")))}),R(p,$i.EventType.MESSAGE,P=>{var S;if(!I){const w=P.data[0];Ee(!!w,16349);const N=w,O=(N==null?void 0:N.error)||((S=N[0])==null?void 0:S.error);if(O){X(pt,`RPC '${e}' stream ${s} received error:`,O);const M=O.status;let F=function(_){const E=We[_];if(E!==void 0)return Fv(E)}(M),x=O.message;F===void 0&&(F=z.INTERNAL,x="Unknown error status: "+M+" with message "+O.message),I=!0,k.a_(new Y(F,x)),p.close()}else X(pt,`RPC '${e}' stream ${s} received:`,w),k.u_(w)}}),R(u,rv.STAT_EVENT,P=>{P.stat===dd.PROXY?X(pt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===dd.NOPROXY&&X(pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function ac(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t){return new jb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="PersistentStream";class ex{constructor(e,n,r,s,i,o,u,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Fn(n.toString()),Fn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Y(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return X(ug,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(X(ug,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AS extends ex{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Db(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?_n(o.readTime):oe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ed(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=gd(c)?{documents:Ob(i,c)}:{query:Lb(i,c).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=$v(i,o.resumeToken);const h=xd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(oe.min())>0){u.readTime=Tl(i,o.snapshotVersion.toTimestamp());const h=xd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=Ub(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ed(this.serializer),n.removeTarget=e,this.q_(n)}}class CS extends ex{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Mb(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ed(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Vb(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{}class jS extends kS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,_d(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(z.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Ho(e,_d(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class RS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fn(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="RemoteStore";class PS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{is(this)&&(X(es,"Restarting streams for network reachability change."),await async function(c){const h=ae(c);h.Ea.add(4),await $o(h),h.Ra.set("Unknown"),h.Ea.delete(4),await su(h)}(this))})}),this.Ra=new RS(r,s)}}async function su(t){if(is(t))for(const e of t.da)await e(!0)}async function $o(t){for(const e of t.da)await e(!1)}function tx(t,e){const n=ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Kh(n)?Qh(n):oi(n).O_()&&Gh(n,e))}function Wh(t,e){const n=ae(t),r=oi(n);n.Ia.delete(e),r.O_()&&nx(n,e),n.Ia.size===0&&(r.O_()?r.L_():is(n)&&n.Ra.set("Unknown"))}function Gh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oi(t).Y_(e)}function nx(t,e){t.Va.Ue(e),oi(t).Z_(e)}function Qh(t){t.Va=new Ib({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),oi(t).start(),t.Ra.ua()}function Kh(t){return is(t)&&!oi(t).x_()&&t.Ia.size>0}function is(t){return ae(t).Ea.size===0}function rx(t){t.Va=void 0}async function DS(t){t.Ra.set("Online")}async function VS(t){t.Ia.forEach((e,n)=>{Gh(t,e)})}async function MS(t,e){rx(t),Kh(t)?(t.Ra.ha(e),Qh(t)):t.Ra.set("Unknown")}async function OS(t,e,n){if(t.Ra.set("Online"),e instanceof zv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.Va.removeTarget(u))}(t,e)}catch(r){X(es,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Il(t,r)}else if(e instanceof za?t.Va.Ze(e):e instanceof Uv?t.Va.st(e):t.Va.tt(e),!n.isEqual(oe.min()))try{const r=await Jv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Va.Tt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.Ia.get(h);m&&i.Ia.set(h,m.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const m=i.Ia.get(c);if(!m)return;i.Ia.set(c,m.withResumeToken(dt.EMPTY_BYTE_STRING,m.snapshotVersion)),nx(i,c);const p=new sr(m.target,c,h,m.sequenceNumber);Gh(i,p)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){X(es,"Failed to raise snapshot:",r),await Il(t,r)}}async function Il(t,e,n){if(!si(e))throw e;t.Ea.add(1),await $o(t),t.Ra.set("Offline"),n||(n=()=>Jv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(es,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await su(t)})}function sx(t,e){return e().catch(n=>Il(t,n,e))}async function iu(t){const e=ae(t),n=br(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jh;for(;LS(e);)try{const s=await xS(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,FS(e,s)}catch(s){await Il(e,s)}ix(e)&&ox(e)}function LS(t){return is(t)&&t.Ta.length<10}function FS(t,e){t.Ta.push(e);const n=br(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ix(t){return is(t)&&!br(t).x_()&&t.Ta.length>0}function ox(t){br(t).start()}async function US(t){br(t).ra()}async function zS(t){const e=br(t);for(const n of t.Ta)e.ea(n.mutations)}async function $S(t,e,n){const r=t.Ta.shift(),s=Fh.from(r,e,n);await sx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await iu(t)}async function BS(t,e){e&&br(t).X_&&await async function(r,s){if(function(o){return Sb(o)&&o!==z.ABORTED}(s.code)){const i=r.Ta.shift();br(r).B_(),await sx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await iu(r)}}(t,e),ix(t)&&ox(t)}async function cg(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),X(es,"RemoteStore received new credentials");const r=is(n);n.Ea.add(3),await $o(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await su(n)}async function qS(t,e){const n=ae(t);e?(n.Ea.delete(2),await su(n)):e||(n.Ea.add(2),await $o(n),n.Ra.set("Unknown"))}function oi(t){return t.ma||(t.ma=function(n,r,s){const i=ae(n);return i.sa(),new AS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:DS.bind(null,t),t_:VS.bind(null,t),r_:MS.bind(null,t),H_:OS.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Kh(t)?Qh(t):t.Ra.set("Unknown")):(await t.ma.stop(),rx(t))})),t.ma}function br(t){return t.fa||(t.fa=function(n,r,s){const i=ae(n);return i.sa(),new CS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:US.bind(null,t),r_:BS.bind(null,t),ta:zS.bind(null,t),na:$S.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await iu(t)):(await t.fa.stop(),t.Ta.length>0&&(X(es,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new Yh(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xh(t,e){if(Fn("AsyncQueue",`${e}: ${t}`),si(t))return new Y(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{static emptySet(e){return new Vs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=Bi(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this.ga=new Fe(re.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ys{constructor(e,n,r,s,i,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Ys(e,n,Vs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class WS{constructor(){this.queries=hg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=hg(),i.forEach((o,u)=>{for(const c of u.Sa)c.onError(r)})})(this,new Y(z.ABORTED,"Firestore shutting down"))}}function hg(){return new ss(t=>Iv(t),Jl)}async function ax(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new HS,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Xh(o,`Initialization of query '${fs(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Jh(n)}async function lx(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GS(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.Sa)u.Fa(s)&&(r=!0);o.wa=s}}r&&Jh(n)}function QS(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Jh(t){t.Ca.forEach(e=>{e.next()})}var Td,fg;(fg=Td||(Td={})).Ma="default",fg.Cache="cache";class ux{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ys(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ys.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Td.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.key=e}}class dx{constructor(e){this.key=e}}class KS{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pe(),this.mutatedKeys=pe(),this.eu=Av(e),this.tu=new Vs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new dg,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),I=Zl(this.query,p)?p:null,k=!!g&&this.mutatedKeys.has(g.key),R=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let P=!1;g&&I?g.data.isEqual(I.data)?k!==R&&(r.track({type:3,doc:I}),P=!0):this.su(g,I)||(r.track({type:2,doc:I}),P=!0,(c&&this.eu(I,c)>0||h&&this.eu(I,h)<0)&&(u=!0)):!g&&I?(r.track({type:0,doc:I}),P=!0):g&&!I&&(r.track({type:1,doc:g}),P=!0,(c||h)&&(u=!0)),P&&(I?(o=o.add(I),i=R?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:u,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(I,k){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Rt:P})}};return R(I)-R(k)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new Ys(this.query,e.tu,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=pe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new dx(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new cx(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ys.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zh="SyncEngine";class YS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XS{constructor(e){this.key=e,this.hu=!1}}class JS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ss(u=>Iv(u),Jl),this.Iu=new Map,this.Eu=new Set,this.du=new Fe(re.comparator),this.Au=new Map,this.Ru=new $h,this.Vu={},this.mu=new Map,this.fu=Ks.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ZS(t,e,n=!0){const r=yx(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await hx(r,e,n,!0),s}async function eT(t,e){const n=yx(t);await hx(n,e,!0,!1)}async function hx(t,e,n,r){const s=await _S(t.localStore,xn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await tT(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&tx(t.remoteStore,s),u}async function tT(t,e,n,r,s){t.pu=(p,g,I)=>async function(R,P,S,w){let N=P.view.ru(S);N.Cs&&(N=await ig(R.localStore,P.query,!1).then(({documents:x})=>P.view.ru(x,N)));const O=w&&w.targetChanges.get(P.targetId),M=w&&w.targetMismatches.get(P.targetId)!=null,F=P.view.applyChanges(N,R.isPrimaryClient,O,M);return pg(R,P.targetId,F.au),F.snapshot}(t,p,g,I);const i=await ig(t.localStore,e,!0),o=new KS(e,i.Qs),u=o.ru(i.documents),c=zo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(u,t.isPrimaryClient,c);pg(t,n,h.au);const m=new YS(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function nT(t,e,n){const r=ae(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Jl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await bd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Wh(r.remoteStore,s.targetId),Nd(r,s.targetId)}).catch(ri)):(Nd(r,s.targetId),await bd(r.localStore,s.targetId,!0))}async function rT(t,e){const n=ae(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wh(n.remoteStore,r.targetId))}async function sT(t,e,n){const r=dT(t);try{const s=await function(o,u){const c=ae(o),h=je.now(),m=u.reduce((I,k)=>I.add(k.key),pe());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let k=Un(),R=pe();return c.Ns.getEntries(I,m).next(P=>{k=P,k.forEach((S,w)=>{w.isValidDocument()||(R=R.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,k)).next(P=>{p=P;const S=[];for(const w of u){const N=xb(w,p.get(w.key).overlayedDocument);N!=null&&S.push(new Cr(w.key,N,xv(N.value.mapValue),an.exists(!0)))}return c.mutationQueue.addMutationBatch(I,h,S,u)}).next(P=>{g=P;const S=P.applyToLocalDocumentSet(p,R);return c.documentOverlayCache.saveOverlays(I,P.batchId,S)})}).then(()=>({batchId:g.batchId,changes:kv(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Fe(me)),h=h.insert(u,c),o.Vu[o.currentUser.toKey()]=h}(r,s.batchId,n),await Bo(r,s.changes),await iu(r.remoteStore)}catch(s){const i=Xh(s,"Failed to persist write");n.reject(i)}}async function fx(t,e){const n=ae(t);try{const r=await yS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ee(o.hu,14607):s.removedDocuments.size>0&&(Ee(o.hu,42227),o.hu=!1))}),await Bo(n,r,e)}catch(r){await ri(r)}}function mg(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=ae(o);c.onlineState=u;let h=!1;c.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(u)&&(h=!0)}),h&&Jh(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iT(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Fe(re.comparator);o=o.insert(i,vt.newNoDocument(i,oe.min()));const u=pe().add(i),c=new nu(oe.min(),new Map,new Fe(me),o,u);await fx(r,c),r.du=r.du.remove(i),r.Au.delete(e),ef(r)}else await bd(r.localStore,e,!1).then(()=>Nd(r,e,n)).catch(ri)}async function oT(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await gS(n.localStore,e);px(n,r,null),mx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bo(n,s)}catch(s){await ri(s)}}async function aT(t,e,n){const r=ae(t);try{const s=await function(o,u){const c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return c.mutationQueue.lookupMutationBatch(h,u).next(p=>(Ee(p!==null,37113),m=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>c.localDocuments.getDocuments(h,m))})}(r.localStore,e);px(r,e,n),mx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Bo(r,s)}catch(s){await ri(s)}}function mx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function px(t,e,n){const r=ae(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Nd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||gx(t,r)})}function gx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Wh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ef(t))}function pg(t,e,n){for(const r of n)r instanceof cx?(t.Ru.addReference(r.key,e),lT(t,r)):r instanceof dx?(X(Zh,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||gx(t,r.key)):ie(19791,{wu:r})}function lT(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(X(Zh,"New document in limbo: "+n),t.Eu.add(r),ef(t))}function ef(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new re(Ie.fromString(e)),r=t.fu.next();t.Au.set(r,new XS(n)),t.du=t.du.insert(n,r),tx(t.remoteStore,new sr(xn(Mh(n.path)),r,"TargetPurposeLimboResolution",Kl.ce))}}async function Bo(t,e,n){const r=ae(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((u,c)=>{o.push(r.pu(c,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){s.push(h);const p=qh.As(c.targetId,h);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,h){const m=ae(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>q.forEach(h,g=>q.forEach(g.Es,I=>m.persistence.referenceDelegate.addReference(p,g.targetId,I)).next(()=>q.forEach(g.ds,I=>m.persistence.referenceDelegate.removeReference(p,g.targetId,I)))))}catch(p){if(!si(p))throw p;X(Hh,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const I=m.Ms.get(g),k=I.snapshotVersion,R=I.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(g,R)}}}(r.localStore,i))}async function uT(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){X(Zh,"User change. New user:",e.toKey());const r=await Xv(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(u=>{u.forEach(c=>{c.reject(new Y(z.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bo(n,r.Ls)}}function cT(t,e){const n=ae(t),r=n.Au.get(e);if(r&&r.hu)return pe().add(r.key);{let s=pe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const u=n.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}function yx(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iT.bind(null,e),e.Pu.H_=GS.bind(null,e.eventManager),e.Pu.yu=QS.bind(null,e.eventManager),e}function dT(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aT.bind(null,e),e}class Al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ru(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return pS(this.persistence,new hS,e.initialUser,this.serializer)}Cu(e){return new Yv(Bh.mi,this.serializer)}Du(e){return new ES}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Al.provider={build:()=>new Al};class hT extends Al{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ee(this.persistence.referenceDelegate instanceof Nl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Xb(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new Yv(r=>Nl.mi(r,n),this.serializer)}}class Id{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uT.bind(null,this.syncEngine),await qS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WS}()}createDatastore(e){const n=ru(e.databaseInfo.databaseId),r=function(i){return new IS(i)}(e.databaseInfo);return function(i,o,u,c){return new jS(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new PS(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>mg(this.syncEngine,n,0),function(){return lg.v()?new lg:new bS}())}createSyncEngine(e,n){return function(s,i,o,u,c,h,m){const p=new JS(s,i,o,u,c,h);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);X(es,"RemoteStore shutting down."),i.Ea.add(5),await $o(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Id.provider={build:()=>new Id};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="FirestoreClient";class fT{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=gt.UNAUTHENTICATED,this.clientId=kh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X(Sr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(Sr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function lc(t,e){t.asyncQueue.verifyOperationInProgress(),X(Sr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Xv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function gg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mT(t);X(Sr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>cg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>cg(e.remoteStore,s)),t._onlineComponents=e}async function mT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(Sr,"Using user provided OfflineComponentProvider");try{await lc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Hs("Error using user provided cache. Falling back to memory cache: "+n),await lc(t,new Al)}}else X(Sr,"Using default OfflineComponentProvider"),await lc(t,new hT(void 0));return t._offlineComponents}async function xx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(Sr,"Using user provided OnlineComponentProvider"),await gg(t,t._uninitializedComponentsProvider._online)):(X(Sr,"Using default OnlineComponentProvider"),await gg(t,new Id))),t._onlineComponents}function pT(t){return xx(t).then(e=>e.syncEngine)}async function _x(t){const e=await xx(t),n=e.eventManager;return n.onListen=ZS.bind(null,e.syncEngine),n.onUnlisten=nT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rT.bind(null,e.syncEngine),n}function gT(t,e,n={}){const r=new Rn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const m=new vx({next:g=>{m.Nu(),o.enqueueAndForget(()=>lx(i,p));const I=g.docs.has(u);!I&&g.fromCache?h.reject(new Y(z.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&g.fromCache&&c&&c.source==="server"?h.reject(new Y(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new ux(Mh(u.path),m,{includeMetadataChanges:!0,qa:!0});return ax(i,p)}(await _x(t),t.asyncQueue,e,n,r)),r.promise}function yT(t,e,n={}){const r=new Rn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const m=new vx({next:g=>{m.Nu(),o.enqueueAndForget(()=>lx(i,p)),g.fromCache&&c.source==="server"?h.reject(new Y(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new ux(u,m,{includeMetadataChanges:!0,qa:!0});return ax(i,p)}(await _x(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="firestore.googleapis.com",vg=!0;class xg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Y(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ex,this.ssl=vg}else this.host=e.host,this.ssl=e.ssl??vg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Kv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Kb)throw new Y(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wx(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Y(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ou{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new b2;switch(r.type){case"firstParty":return new I2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=yg.get(n);r&&(X("ComponentProvider","Removing Datastore"),yg.delete(n),r.terminate())}(this),Promise.resolve()}}function vT(t,e,n,r={}){var h;t=bn(t,ou);const s=Ih(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(Yw(`https://${u}`),eE("Firestore",!0)),i.host!==Ex&&i.host!==u&&Hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:u,ssl:s,emulatorOptions:r};if(!gl(c,o)&&(t._setSettings(c),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=gt.MOCK_USER;else{m=Xw(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Y(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new gt(g)}t._authCredentials=new S2(new av(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class He{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new He(this.firestore,e,this._key)}toJSON(){return{type:He._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Fo(n,He._jsonSchema))return new He(e,r||null,new re(Ie.fromString(n.referencePath)))}}He._jsonSchemaVersion="firestore/documentReference/1.0",He._jsonSchema={type:Ke("string",He._jsonSchemaVersion),referencePath:Ke("string")};class gr extends os{constructor(e,n,r){super(e,n,Mh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new He(this.firestore,null,new re(e))}withConverter(e){return new gr(this.firestore,e,this._path)}}function Mt(t,e,...n){if(t=On(t),lv("collection","path",e),t instanceof ou){const r=Ie.fromString(e,...n);return Rp(r),new gr(t,null,r)}{if(!(t instanceof He||t instanceof gr))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return Rp(r),new gr(t.firestore,null,r)}}function Ve(t,e,...n){if(t=On(t),arguments.length===1&&(e=kh.newId()),lv("doc","path",e),t instanceof ou){const r=Ie.fromString(e,...n);return jp(r),new He(t,null,new re(r))}{if(!(t instanceof He||t instanceof gr))throw new Y(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return jp(r),new He(t.firestore,t instanceof gr?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="AsyncQueue";class wg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zv(this,"async_queue_retry"),this._c=()=>{const r=ac();r&&X(_g,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ac();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ac();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Rn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!si(e))throw e;X(_g,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Fn("INTERNAL UNHANDLED ERROR: ",Eg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Yh.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ie(47125,{Pc:Eg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Eg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ai extends ou{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new wg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wg(e),this._firestoreClient=void 0,await e}}}function xT(t,e){const n=typeof t=="object"?t:c2(),r=typeof t=="string"?t:_l,s=i2(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Qw("firestore");i&&vT(s,...i)}return s}function tf(t){if(t._terminated)throw new Y(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_T(t),t._firestoreClient}function _T(t){var r,s,i;const e=t._freezeSettings(),n=function(u,c,h,m){return new q2(u,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,wx(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new fT(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kt(dt.fromBase64String(e))}catch(n){throw new Y(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kt(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fo(e,Kt._jsonSchema))return Kt.fromBase64String(e.bytes)}}Kt._jsonSchemaVersion="firestore/bytes/1.0",Kt._jsonSchema={type:Ke("string",Kt._jsonSchemaVersion),bytes:Ke("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wn._jsonSchemaVersion}}static fromJSON(e){if(Fo(e,wn._jsonSchema))return new wn(e.latitude,e.longitude)}}wn._jsonSchemaVersion="firestore/geoPoint/1.0",wn._jsonSchema={type:Ke("string",wn._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:En._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fo(e,En._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new En(e.vectorValues);throw new Y(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}En._jsonSchemaVersion="firestore/vectorValue/1.0",En._jsonSchema={type:Ke("string",En._jsonSchemaVersion),vectorValues:Ke("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=/^__.*__$/;class ET{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Cr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uo(e,this.data,n,this.fieldTransforms)}}class bx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Cr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Sx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ac:t})}}class rf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Cl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Sx(this.Ac)&&wT.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class bT{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ru(e)}Cc(e,n,r,s=!1){return new rf({Ac:e,methodName:n,Dc:r,path:lt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sf(t){const e=t._freezeSettings(),n=ru(t._databaseId);return new bT(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ST(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);of("Data must be an object, but it was:",o,r);const u=Tx(r,o);let c,h;if(i.merge)c=new Ut(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=Ad(e,p,n);if(!o.contains(g))throw new Y(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Ix(m,g)||m.push(g)}c=new Ut(m),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new ET(new At(u),c,h)}class lu extends nf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lu}}function TT(t,e,n,r){const s=t.Cc(1,e,n);of("Data must be an object, but it was:",s,r);const i=[],o=At.empty();Ar(r,(c,h)=>{const m=af(e,c,n);h=On(h);const p=s.yc(m);if(h instanceof lu)i.push(m);else{const g=qo(h,p);g!=null&&(i.push(m),o.set(m,g))}});const u=new Ut(i);return new bx(o,u,s.fieldTransforms)}function NT(t,e,n,r,s,i){const o=t.Cc(1,e,n),u=[Ad(e,r,n)],c=[s];if(i.length%2!=0)throw new Y(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)u.push(Ad(e,i[g])),c.push(i[g+1]);const h=[],m=At.empty();for(let g=u.length-1;g>=0;--g)if(!Ix(h,u[g])){const I=u[g];let k=c[g];k=On(k);const R=o.yc(I);if(k instanceof lu)h.push(I);else{const P=qo(k,R);P!=null&&(h.push(I),m.set(I,P))}}const p=new Ut(h);return new bx(m,p,o.fieldTransforms)}function IT(t,e,n,r=!1){return qo(n,t.Cc(r?4:3,e))}function qo(t,e){if(Nx(t=On(t)))return of("Unsupported field value:",e,t),Tx(t,e);if(t instanceof nf)return function(r,s){if(!Sx(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=qo(u,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=On(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:Tl(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Tl(s.serializer,i)}}if(r instanceof wn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kt)return{bytesValue:$v(s.serializer,r._byteString)};if(r instanceof He){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof En)return function(o,u){return{mapValue:{fields:{[yv]:{stringValue:vv},[wl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return Oh(u.serializer,h)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Ql(r)}`)}(t,e)}function Tx(t,e){const n={};return dv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ar(t,(r,s)=>{const i=qo(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Nx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof wn||t instanceof Kt||t instanceof He||t instanceof nf||t instanceof En)}function of(t,e,n){if(!Nx(n)||!uv(n)){const r=Ql(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ad(t,e,n){if((e=On(e))instanceof au)return e._internalPath;if(typeof e=="string")return af(t,e);throw Cl("Field path arguments must be of type string or ",t,!1,void 0,n)}const AT=new RegExp("[~\\*/\\[\\]]");function af(t,e,n){if(e.search(AT)>=0)throw Cl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new au(...e.split("."))._internalPath}catch{throw Cl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Y(z.INVALID_ARGUMENT,u+t+c)}function Ix(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CT extends Ax{data(){return super.data()}}function uu(t,e){return typeof e=="string"?af(t,e):e instanceof au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lf{}class Cx extends lf{}function Yn(t,e,...n){let r=[];e instanceof lf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof uf).length,u=i.filter(c=>c instanceof cu).length;if(o>1||o>0&&u>0)throw new Y(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class cu extends Cx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new cu(e,n,r)}_apply(e){const n=this._parse(e);return kx(e._query,n),new os(e.firestore,e.converter,yd(e._query,n))}_parse(e){const n=sf(e.firestore);return function(i,o,u,c,h,m,p){let g;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Y(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Tg(p,m);const k=[];for(const R of p)k.push(Sg(c,i,R));g={arrayValue:{values:k}}}else g=Sg(c,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Tg(p,m),g=IT(u,o,p,m==="in"||m==="not-in");return Qe.create(h,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pi(t,e,n){const r=e,s=uu("where",t);return cu._create(s,r,n)}class uf extends lf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new uf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)kx(o,c),o=yd(o,c)}(e._query,n),new os(e.firestore,e.converter,yd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cf extends Cx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new cf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ko(i,o)}(e._query,this._field,this._direction);return new os(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ii(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function bg(t,e="asc"){const n=e,r=uu("orderBy",t);return cf._create(r,n)}function Sg(t,e,n){if(typeof(n=On(n))=="string"){if(n==="")throw new Y(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nv(e)&&n.indexOf("/")!==-1)throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ie.fromString(n));if(!re.isDocumentKey(r))throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Up(t,new re(r))}if(n instanceof He)return Up(t,n._key);throw new Y(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ql(n)}.`)}function Tg(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kx(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class jT{convertValue(e,n="none"){switch(Er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ar(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[wl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Be(o.doubleValue));return new En(n)}convertGeoPoint(e){return new wn(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Xl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Io(e));default:return null}}convertTimestamp(e){const n=_r(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);Ee(Qv(r),9688,{name:e});const s=new Ao(r.get(1),r.get(3)),i=new re(r.popFirst(5));return s.isEqual(n)||Fn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Hi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wr extends Ax{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $a(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Wr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wr._jsonSchema={type:Ke("string",Wr._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class $a extends Wr{data(e={}){return super.data(e)}}class Ms{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Hi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $a(this._firestore,this._userDataWriter,r.key,r,new Hi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new $a(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Hi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new $a(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Hi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),m=o.indexOf(u.doc.key)),{type:PT(u.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Y(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ms._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t){t=bn(t,He);const e=bn(t.firestore,ai);return gT(tf(e),t._key).then(n=>DT(e,t,n))}Ms._jsonSchemaVersion="firestore/querySnapshot/1.0",Ms._jsonSchema={type:Ke("string",Ms._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class jx extends jT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,n)}}function Tt(t){t=bn(t,os);const e=bn(t.firestore,ai),n=tf(e),r=new jx(e);return kT(t._query),yT(n,t._query).then(s=>new Ms(e,r,t,s))}function Xn(t,e,n){t=bn(t,He);const r=bn(t.firestore,ai),s=RT(t.converter,e,n);return df(r,[ST(sf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,an.none())])}function Di(t,e,n,...r){t=bn(t,He);const s=bn(t.firestore,ai),i=sf(s);let o;return o=typeof(e=On(e))=="string"||e instanceof au?NT(i,"updateDoc",t._key,e,n,r):TT(i,"updateDoc",t._key,e),df(s,[o.toMutation(t._key,an.exists(!0))])}function Tn(t){return df(bn(t.firestore,ai),[new Lh(t._key,an.none())])}function df(t,e){return function(r,s){const i=new Rn;return r.asyncQueue.enqueueAndForget(async()=>sT(await pT(r),s,i)),i.promise}(tf(t),e)}function DT(t,e,n){const r=n.docs.get(e._key),s=new jx(t);return new Wr(t,s,e._key,r,new Hi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){ni=s})(u2),vl(new So("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new ai(new T2(r.getProvider("auth-internal")),new A2(o,r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Y(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ao(h.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Ds(Ip,Ap,e),Ds(Ip,Ap,"esm2020")})();const Cd={apiKey:"AIzaSyAO32W5Qdmdbt9mtp_ScyQE2fO5bEYC3LU",authDomain:"yj-order.firebaseapp.com",projectId:"yj-order",storageBucket:"yj-order.firebasestorage.app",messagingSenderId:"399409684502",appId:"1:399409684502:web:33a5660e855671d3211537"},VT=Xy(Cd),de=xT(VT),MT=!!Cd.apiKey&&!!Cd.projectId,ye={ORDERS:"cofoodie_orders",MENU_CATEGORIES:"cofoodie_menus_v3",EMPLOYEES:"cofoodie_employees_v2",ANNOUNCEMENTS:"cofoodie_announcements",ADMIN_SETTINGS:"cofoodie_admin_settings",ADMIN_ACCOUNTS:"cofoodie_admin_accounts",SESSION:"cofoodie_session",SESSION_USER_ID:"cofoodie_session_user_id",FRONTEND_PASSWORD:"cofoodie_frontend_password"},OT=[],LT=[],FT=[],Vi=[{id:"default_admin",name:"",username:"admin",password:"password",isSuperAdmin:!0}],Sa="24664941";class UT{get useCloud(){return MT}async getOrders(){if(this.useCloud)try{const n=Yn(Mt(de,"orders"),bg("timestamp","desc"));return(await Tt(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){return console.error("Fetch Orders Error:",n),[]}const e=localStorage.getItem(ye.ORDERS);return e?JSON.parse(e):[]}async saveOrder(e){if(this.useCloud){const{id:s,...i}=e;await Xn(Ve(de,"orders",s),i);return}const n=await this.getOrders(),r=n.findIndex(s=>s.id===e.id);r!==-1?n[r]=e:n.push(e),localStorage.setItem(ye.ORDERS,JSON.stringify(n))}async deleteOrder(e){if(this.useCloud){await Tn(Ve(de,"orders",e));return}let n=await this.getOrders();n=n.filter(r=>r.id!==e),localStorage.setItem(ye.ORDERS,JSON.stringify(n))}async updateOrderStatus(e,n){if(this.useCloud){const i=Ve(de,"orders",e);await Di(i,{status:n});return}const r=await this.getOrders(),s=r.findIndex(i=>i.id===e);s!==-1&&(r[s].status=n,localStorage.setItem(ye.ORDERS,JSON.stringify(r)))}async toggleOrderPayment(e){if(this.useCloud){const s=Ve(de,"orders",e),i=await Ng(s);if(i.exists()){const o=i.data().isPaid;await Di(s,{isPaid:!o})}else console.error(`Order with ID ${e} not found for payment toggle.`);return}const n=await this.getOrders(),r=n.findIndex(s=>s.id===e);r!==-1&&(n[r].isPaid=!n[r].isPaid,localStorage.setItem(ye.ORDERS,JSON.stringify(n)))}async deleteOrdersByContext(e,n){if(this.useCloud){try{const s=Yn(Mt(de,"orders"),Pi("dateStr","==",e),Pi("categoryLabel","==",n)),o=(await Tt(s)).docs.map(u=>Tn(Ve(de,"orders",u.id)));await Promise.all(o)}catch(s){console.error("Delete Orders Error:",s)}return}let r=await this.getOrders();r=r.filter(s=>!(s.dateStr===e&&s.categoryLabel===n)),localStorage.setItem(ye.ORDERS,JSON.stringify(r))}async getMenuCategories(){if(this.useCloud){const n=Yn(Mt(de,"menus"));return(await Tt(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(ye.MENU_CATEGORIES);return e?JSON.parse(e):OT}async saveMenuCategories(e){this.useCloud||localStorage.setItem(ye.MENU_CATEGORIES,JSON.stringify(e))}async addMenuCategory(e,n){if(this.useCloud){const i="MENU_"+Date.now();await Xn(Ve(de,"menus",i),{label:e,config:n});return}const r=await this.getMenuCategories(),s="MENU_"+Date.now();r.push({id:s,label:e,config:n}),await this.saveMenuCategories(r)}async updateMenuCategory(e,n,r){if(this.useCloud){await Di(Ve(de,"menus",e),{label:n,config:r});return}const s=await this.getMenuCategories(),i=s.findIndex(o=>o.id===e);i!==-1&&(s[i].label=n,s[i].config=r,await this.saveMenuCategories(s))}async deleteMenuCategory(e){if(this.useCloud){await Tn(Ve(de,"menus",e));return}let n=await this.getMenuCategories();n=n.filter(r=>r.id!==e),await this.saveMenuCategories(n)}async getEmployees(){if(this.useCloud){const n=Yn(Mt(de,"employees"),bg("name"));return(await Tt(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(ye.EMPLOYEES);return e?JSON.parse(e):LT}async saveEmployees(e){this.useCloud||localStorage.setItem(ye.EMPLOYEES,JSON.stringify(e))}async addEmployee(e){if(this.useCloud){const{id:r,...s}=e;await Xn(Ve(de,"employees",r),s);return}const n=await this.getEmployees();n.push(e),await this.saveEmployees(n)}async updateEmployee(e){if(this.useCloud){await Di(Ve(de,"employees",e.id),{name:e.name});return}const r=(await this.getEmployees()).map(s=>s.id===e.id?e:s);await this.saveEmployees(r)}async deleteEmployee(e){if(this.useCloud){await Tn(Ve(de,"employees",e));return}const r=(await this.getEmployees()).filter(s=>s.id!==e);await this.saveEmployees(r)}async getAnnouncements(){if(this.useCloud){const n=Yn(Mt(de,"announcements"));return(await Tt(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(ye.ANNOUNCEMENTS);return e?JSON.parse(e):FT}async saveAnnouncements(e){if(this.useCloud){for(const n of e)await Xn(Ve(de,"announcements",n.id),{content:n.content,isActive:n.isActive},{merge:!0});return}localStorage.setItem(ye.ANNOUNCEMENTS,JSON.stringify(e))}async getAdminSettings(){if(this.useCloud)return{isGoogleBound:!0,googleAccountName:"Firebase Mode",googleAccountType:"WORKSPACE"};const e=localStorage.getItem(ye.ADMIN_SETTINGS);return e?JSON.parse(e):{isGoogleBound:!1,googleAccountName:"",googleAccountType:"PERSONAL"}}async setGoogleBound(e,n="",r="PERSONAL"){const s={isGoogleBound:e,googleAccountName:n,googleAccountType:r};localStorage.setItem(ye.ADMIN_SETTINGS,JSON.stringify(s))}async checkDatabaseConnection(){if(this.useCloud)try{return await Tt(Mt(de,"admins")),!0}catch{return!1}return new Promise(e=>{setTimeout(()=>{e(!0)},1e3)})}async getAdminAccounts(){if(this.useCloud){const n=Yn(Mt(de,"admins")),s=(await Tt(n)).docs.map(i=>({id:i.id,...i.data()}));if(s.length===0){for(const i of Vi)await Xn(Ve(de,"admins",i.id),{...i});return Vi}return s}const e=localStorage.getItem(ye.ADMIN_ACCOUNTS);return e?JSON.parse(e):(localStorage.setItem(ye.ADMIN_ACCOUNTS,JSON.stringify(Vi)),Vi)}async saveAdminAccounts(e){this.useCloud||localStorage.setItem(ye.ADMIN_ACCOUNTS,JSON.stringify(e))}async verifyAdmin(e,n){if(this.useCloud){if(!de)return null;const i=Mt(de,"admins");if((await Tt(i)).empty){console.log("No admins found in DB, seeding default admins...");for(const m of Vi)await Xn(Ve(de,"admins",m.id),{...m})}const u=Yn(i,Pi("username","==",e),Pi("password","==",n)),c=await Tt(u);if(c.empty)return null;const h=c.docs[0];return{id:h.id,...h.data()}}return(await this.getAdminAccounts()).find(i=>i.username===e&&i.password===n)||null}async getAdminById(e){return(await this.getAdminAccounts()).find(r=>r.id===e)}async addAdminAccount(e){if(this.useCloud){const r=Yn(Mt(de,"admins"),Pi("username","==",e.username));if(!(await Tt(r)).empty)throw new Error("");const{id:i,...o}=e;await Xn(Ve(de,"admins",i),o);return}const n=await this.getAdminAccounts();if(n.some(r=>r.username===e.username))throw new Error("");n.push(e),await this.saveAdminAccounts(n)}async updateAdminAccount(e){if(this.useCloud){const{id:s,...i}=e;await Di(Ve(de,"admins",s),i);return}const n=await this.getAdminAccounts(),r=n.findIndex(s=>s.id===e.id);r!==-1&&(n[r]=e,await this.saveAdminAccounts(n))}async deleteAdminAccount(e){if(this.useCloud){await Tn(Ve(de,"admins",e));return}let n=await this.getAdminAccounts();n=n.filter(r=>r.id!==e),await this.saveAdminAccounts(n)}async getFrontendPassword(){if(this.useCloud){if(!de)return Sa;try{const n=Ve(de,"settings","global"),r=await Ng(n);return r.exists()&&r.data().frontendPassword?r.data().frontendPassword:Sa}catch(n){return console.error("Error fetching frontend password:",n),Sa}}return localStorage.getItem(ye.FRONTEND_PASSWORD)||Sa}async setFrontendPassword(e){if(this.useCloud){await Xn(Ve(de,"settings","global"),{frontendPassword:e},{merge:!0});return}localStorage.setItem(ye.FRONTEND_PASSWORD,e)}async clearAllData(){if(this.useCloud){const e=await Tt(Mt(de,"orders"));for(const i of e.docs)await Tn(Ve(de,"orders",i.id));const n=await Tt(Mt(de,"menus"));for(const i of n.docs)await Tn(Ve(de,"menus",i.id));const r=await Tt(Mt(de,"employees"));for(const i of r.docs)await Tn(Ve(de,"employees",i.id));const s=await Tt(Mt(de,"announcements"));for(const i of s.docs)await Tn(Ve(de,"announcements",i.id));return}localStorage.removeItem(ye.ORDERS),localStorage.removeItem(ye.MENU_CATEGORIES),localStorage.removeItem(ye.EMPLOYEES),localStorage.removeItem(ye.ANNOUNCEMENTS)}setSession(e,n,r=!1){const s=r?localStorage:sessionStorage,i=r?sessionStorage:localStorage;i.removeItem(ye.SESSION),i.removeItem(ye.SESSION_USER_ID),s.setItem(ye.SESSION,e),n&&s.setItem(ye.SESSION_USER_ID,n)}getSession(){let e=localStorage.getItem(ye.SESSION),n=localStorage.getItem(ye.SESSION_USER_ID);return e||(e=sessionStorage.getItem(ye.SESSION),n=sessionStorage.getItem(ye.SESSION_USER_ID)),{role:e,userId:n}}clearSession(){localStorage.removeItem(ye.SESSION),localStorage.removeItem(ye.SESSION_USER_ID),sessionStorage.removeItem(ye.SESSION),sessionStorage.removeItem(ye.SESSION_USER_ID)}}const zT=new UT,ee=zT;var Rx=(t=>(t.PENDING="PENDING",t.CONFIRMED="CONFIRMED",t.COMPLETED="COMPLETED",t.CANCELLED="CANCELLED",t))(Rx||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $T={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),se=(t,e)=>{const n=H.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...h},m)=>H.createElement("svg",{ref:m,...$T,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${BT(t)}`,u].join(" "),...h},[...e.map(([p,g])=>H.createElement(p,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=se("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=se("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=se("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=se("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=se("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=se("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=se("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=se("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=se("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=se("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=se("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=se("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=se("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=se("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=se("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=se("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=se("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=se("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=se("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=se("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=se("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=se("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=se("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=se("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),hc=[{label:"",badge:"bg-blue-100 text-blue-700",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200"},{label:"",badge:"bg-emerald-100 text-emerald-700",bg:"bg-emerald-100",text:"text-emerald-700",border:"border-emerald-200"},{label:"",badge:"bg-amber-100 text-amber-700",bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-200"},{label:"",badge:"bg-rose-100 text-rose-700",bg:"bg-rose-100",text:"text-rose-700",border:"border-rose-200"},{label:"",badge:"bg-violet-100 text-violet-700",bg:"bg-violet-100",text:"text-violet-700",border:"border-violet-200"}],kg=t=>{if(!t)return{badge:"bg-slate-100 text-slate-500",bg:"bg-slate-100",text:"text-slate-500",border:"border-slate-200"};const e=hc.find(r=>r.label===t);if(e)return e;const n=t.split("").reduce((r,s)=>r+s.charCodeAt(0),1)%hc.length;return hc[n]},pN=({onLogout:t,onGoToAdmin:e})=>{const[n,r]=H.useState([]),[s,i]=H.useState(""),[o,u]=H.useState("CARD"),[c,h]=H.useState(null),[m,p]=H.useState(null),[g,I]=H.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[k,R]=H.useState([]),[P,S]=H.useState(""),[w,N]=H.useState(""),[O,M]=H.useState(""),[F,x]=H.useState(""),[y,_]=H.useState("ALL"),[E,T]=H.useState([]),[C,b]=H.useState([]),[we,Pe]=H.useState([]),[ht,L]=H.useState(new Date),$=B=>{const le=new Date(B),J=le.getDay(),Se=le.getDate()-J+(J===0?-6:1);return new Date(le.setDate(Se))},D=new Date().toISOString().split("T")[0];H.useEffect(()=>{const B=setInterval(()=>L(new Date),1e3);(async()=>{const[Se,A,U,G]=await Promise.all([ee.getMenuCategories(),ee.getEmployees(),ee.getAnnouncements(),ee.getOrders()]);r(Se);const te=Array.from(new Set(Se.map(Te=>Te.label)));if(te.length>0&&!s){const Te=te.includes("")?"":te[0];i(Te)}T(A),b(U.filter(Te=>Te.isActive)),Pe(G)})();const J=()=>{window.innerWidth>=1024&&I(!0)};return window.addEventListener("resize",J),()=>{clearInterval(B),window.removeEventListener("resize",J)}},[]),H.useEffect(()=>{if(!s)return;const B=n.filter(J=>J.label===s),le=B.find(J=>J.config.date===D);if(le)h(le);else if(B.length>0){const J=[...B].sort((Se,A)=>A.config.date.localeCompare(Se.config.date));h(J[0])}else h(null)},[s,n]);const Q=Array.from(new Set(n.map(B=>B.label))),ne=n.filter(B=>B.label===s),he=$(new Date),et=Array.from({length:5}).map((B,le)=>{const J=new Date(he);return J.setDate(he.getDate()+le),J.toISOString().split("T")[0]}),Ue=["","","","",""],Pt=[{active:"bg-blue-50 text-blue-800 border-blue-600",hover:"hover:bg-blue-50 hover:text-blue-600",border:"border-blue-600",badge:"bg-blue-100 text-blue-700"},{active:"bg-emerald-50 text-emerald-800 border-emerald-600",hover:"hover:bg-emerald-50 hover:text-emerald-600",border:"border-emerald-600",badge:"bg-emerald-100 text-emerald-700"},{active:"bg-amber-50 text-amber-800 border-amber-600",hover:"hover:bg-amber-50 hover:text-amber-600",border:"border-amber-600",badge:"bg-amber-100 text-amber-700"},{active:"bg-rose-50 text-rose-800 border-rose-600",hover:"hover:bg-rose-50 hover:text-rose-600",border:"border-rose-600",badge:"bg-rose-100 text-rose-700"},{active:"bg-violet-50 text-violet-800 border-violet-600",hover:"hover:bg-violet-50 hover:text-violet-600",border:"border-violet-600",badge:"bg-violet-100 text-violet-700"}],ge=c?c.config.date<D:!1,ce=()=>{if(!P){alert("");return}if(!w){alert("");return}if(!F){alert("");return}const B={id:Date.now().toString(),name:w,note:O,price:Number(F)};R([...k,B]),N(""),M(""),x("")},tt=async()=>{if(!P||k.length===0){alert("");return}const B=E.find(Se=>Se.id===P),le={id:Date.now().toString(),employeeName:B?B.name:"Unknown",items:k,totalAmount:k.reduce((Se,A)=>Se+A.price,0),timestamp:Date.now(),status:Rx.PENDING,dateStr:D,categoryLabel:s};await ee.saveOrder(le),alert(""),R([]),S("");const J=await ee.getOrders();Pe(J)},Ht=we.filter(B=>B.dateStr===D).sort((B,le)=>le.timestamp-B.timestamp),kr=Array.from(new Set(Ht.map(B=>B.categoryLabel||""))),$n=Ht.filter(B=>y==="ALL"||(B.categoryLabel||"")===y),Dt=s===""||s===""||s===""||s==="",[cn,as]=H.useState(0);return H.useEffect(()=>{if(C.length<=1)return;const B=setInterval(()=>{as(le=>(le+1)%C.length)},5e3);return()=>clearInterval(B)},[C]),l.jsxs("div",{className:"min-h-screen bg-slate-50 pb-16 flex flex-col",children:[l.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-40 flex-shrink-0",children:[l.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 flex justify-between items-center text-sm",children:[l.jsxs("div",{className:"font-mono flex items-center gap-2",children:[l.jsx(uc,{size:14}),ht.toLocaleDateString("zh-TW")," ",ht.toLocaleTimeString("zh-TW",{hour12:!1})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:e,className:"flex items-center gap-1 text-slate-300 hover:text-white text-xs transition-colors",children:[l.jsx(YT,{size:14})," "]}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white text-xs",children:"Exit"})]})]}),l.jsx("div",{className:"bg-white text-orange-600 font-bold py-2 shadow-md border-b-2 border-orange-100 overflow-hidden relative h-10 flex items-center justify-center z-30",children:C.length>0?l.jsx("div",{className:"h-6 overflow-hidden relative w-full max-w-2xl mx-auto px-4",children:C.map((B,le)=>l.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-all duration-500 ease-in-out transform ${le===cn?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:l.jsxs("span",{className:"drop-shadow-sm flex items-center gap-2 truncate",children:[" ",B.content]})},le))}):l.jsx("span",{className:"text-sm opacity-80",children:""})}),l.jsx("div",{className:"text-center py-4 bg-white border-b border-slate-100",children:l.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:""})}),l.jsx("div",{className:"flex justify-center border-b border-slate-200 overflow-x-auto px-4 bg-white",children:Q.length===0?l.jsxs("div",{className:"p-4 text-slate-400 text-sm flex items-center gap-2",children:[l.jsx(QT,{size:16})," "]}):Q.map((B,le)=>{const J=Pt[le%Pt.length],Se=s===B;return l.jsx("button",{onClick:()=>{i(B),u("CARD")},className:`px-6 md:px-8 py-3 text-lg font-bold rounded-t-lg transition-all whitespace-nowrap border-b-4 mx-1 ${Se?J.active:`border-transparent text-slate-500 bg-transparent ${J.hover}`}`,children:B},B)})})]}),l.jsxs("main",{className:"container mx-auto p-4 md:p-6 space-y-8 flex-grow",children:[l.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg shadow-sm border border-slate-200 cursor-pointer lg:cursor-auto select-none",onClick:()=>window.innerWidth<1024&&I(!g),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(jd,{className:"text-primary"}),s," - ",Dt?"":""]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"lg:hidden text-slate-400 flex items-center gap-1 text-xs",children:g?l.jsxs(l.Fragment,{children:[" ",l.jsx(WT,{size:20})]}):l.jsxs(l.Fragment,{children:[" ",l.jsx(HT,{size:20})]})}),l.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1 shadow-inner",onClick:B=>B.stopPropagation(),children:[l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded flex items-center gap-2 transition-colors ${o==="CARD"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,title:"",children:l.jsx(ts,{size:18})}),l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded flex items-center gap-2 transition-colors ${o==="LIST"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,title:"",children:l.jsx(JT,{size:18})})]})]})]}),g&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 duration-300",children:[Dt&&o==="CARD"&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:et.map((B,le)=>{const J=ne.find(G=>G.config.date===B),Se=B===D,A=(c==null?void 0:c.id)===(J==null?void 0:J.id);let U=!1;if(B<D)U=!0;else if(B===D&&(J!=null&&J.config.cutoffTime)){const G=new Date;`${G.getHours().toString().padStart(2,"0")}:${G.getMinutes().toString().padStart(2,"0")}`>J.config.cutoffTime&&(U=!0)}else B===D&&!(J!=null&&J.config.cutoffTime)&&(U=!1);return l.jsxs("div",{onClick:()=>J&&h(J),className:`relative flex flex-col rounded-xl overflow-hidden transition-all cursor-pointer border-2 ${Se?"border-amber-400 shadow-lg ring-2 ring-amber-100 scale-[1.02] z-10":"border-slate-200 hover:border-blue-300"} ${A?"ring-2 ring-primary":""} bg-white`,children:[l.jsxs("div",{className:`p-2 text-center font-bold text-sm ${Se?"bg-amber-400 text-white":"bg-slate-100 text-slate-600"}`,children:[Ue[le]," ",l.jsx("span",{className:"text-xs font-normal opacity-90 block",children:B.slice(5)})]}),l.jsx("div",{className:"flex-1 min-h-[140px] flex items-center justify-center bg-slate-50 relative group flex-col",children:J?l.jsxs(l.Fragment,{children:[J.config.imageUrl?l.jsx("img",{src:J.config.imageUrl,alt:"Menu",className:`w-full h-full object-cover absolute inset-0 ${U?"grayscale-[0.5] opacity-80":""}`}):l.jsxs("div",{className:"text-xs text-slate-400 flex flex-col items-center z-10",children:[l.jsx(Po,{size:24})," ",l.jsx("span",{children:""})]}),l.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-2 z-10",children:[l.jsx("div",{className:"text-white text-xs font-bold truncate",children:J.config.shopName}),J.config.cutoffTime&&l.jsxs("div",{className:"text-red-500 text-xs font-bold bg-white/90 px-1 rounded backdrop-blur-sm mt-1 inline-block",children:[": ",J.config.cutoffTime]})]}),U&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 pointer-events-none",children:l.jsx("div",{className:"border-4 border-red-600 text-red-600 text-xl font-black px-4 py-2 rounded-lg -rotate-12 bg-white/80 shadow-lg tracking-widest backdrop-blur-sm",children:""})})]}):l.jsx("div",{className:"text-slate-300 text-xs",children:""})}),Se&&l.jsx("div",{className:"absolute top-1 right-1 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-full shadow animate-pulse z-20",children:"Today"})]},B)})}),Dt&&o==="LIST"&&l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsx("div",{className:"grid grid-cols-1 divide-y divide-slate-100",children:et.map((B,le)=>{const J=ne.find(U=>U.config.date===B),Se=B===D,A=(c==null?void 0:c.id)===(J==null?void 0:J.id);return l.jsxs("div",{onClick:()=>J&&h(J),className:`p-4 flex flex-col sm:flex-row sm:items-center gap-4 transition-all cursor-pointer relative ${Se?"bg-amber-50/60 hover:bg-amber-100/50":"hover:bg-slate-50"} ${A?"bg-blue-50/40 ring-1 ring-inset ring-primary":""}`,children:[Se&&l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 bg-amber-400"}),l.jsxs("div",{className:"sm:w-40 flex-shrink-0 flex items-center gap-2 pl-2",children:[l.jsx("div",{className:`font-bold text-lg ${Se?"text-amber-700":"text-slate-600"}`,children:Ue[le]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs text-slate-400 font-mono",children:B}),Se&&l.jsx("span",{className:"inline-block px-1.5 py-0.5 rounded-full bg-red-500 text-white text-[10px] font-bold w-fit mt-0.5",children:"Today"})]})]}),l.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[l.jsxs("div",{className:"w-20 h-14 bg-slate-100 rounded overflow-hidden flex-shrink-0 border border-slate-200 shadow-sm relative",children:[J!=null&&J.config.imageUrl?l.jsx("img",{src:J.config.imageUrl,className:"w-full h-full object-cover",alt:"thumb"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(Po,{size:16})}),!J&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-50 text-[10px] text-slate-400",children:""})]}),l.jsx("div",{className:"flex-1 min-w-0",children:J?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"font-bold text-slate-800 text-base truncate",children:J.config.shopName}),J.config.cutoffTime?l.jsxs("div",{className:"text-xs font-bold text-red-600 flex items-center gap-1 mt-1",children:[l.jsx(uc,{size:12})," : ",J.config.cutoffTime]}):l.jsx("div",{className:"text-xs text-slate-400 mt-1",children:""})]}):l.jsx("span",{className:"text-slate-400 italic text-sm",children:"--  --"})})]}),l.jsx("div",{className:"text-right flex-shrink-0",children:J?l.jsx("button",{className:`px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition-all border ${A?"bg-primary text-white border-primary shadow-md":"bg-white border-slate-300 text-slate-600 hover:border-primary hover:text-primary"}`,children:A?"":""}):l.jsx("button",{disabled:!0,className:"px-4 py-2 rounded-lg text-sm text-slate-300 border border-slate-100 bg-slate-50 cursor-not-allowed",children:""})})]},B)})})}),!Dt&&o==="CARD"&&l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[ne.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-8",children:""}),ne.map(B=>{const le=(c==null?void 0:c.id)===B.id;return l.jsxs("div",{onClick:()=>h(B),className:`bg-white rounded-xl shadow-sm border transition-all cursor-pointer overflow-hidden group hover:shadow-md ${le?"border-primary ring-2 ring-primary/20":"border-slate-200 hover:border-blue-300"}`,children:[l.jsxs("div",{className:"aspect-video bg-slate-100 relative",children:[B.config.imageUrl?l.jsx("img",{src:B.config.imageUrl,alt:"item",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(jd,{size:32})}),l.jsx("div",{className:"absolute top-2 right-2 bg-white/90 backdrop-blur px-2 py-1 rounded text-xs font-bold shadow text-slate-700",children:B.config.date})]}),l.jsxs("div",{className:"p-3",children:[l.jsx("h3",{className:"font-bold text-slate-800 truncate",children:B.config.shopName}),B.config.cutoffTime&&l.jsxs("div",{className:"text-sm font-bold text-red-600 mt-1",children:[": ",B.config.date," ",B.config.cutoffTime]}),l.jsx("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:""})]})]},B.id)})]}),!Dt&&o==="LIST"&&l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 text-slate-600 font-semibold w-32",children:""}),l.jsx("th",{className:"p-4 text-slate-600 font-semibold",children:" / "}),l.jsx("th",{className:"p-4 text-slate-600 font-semibold text-right",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[ne.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-8 text-center text-slate-400",children:""})}),ne.sort((B,le)=>le.config.date.localeCompare(B.config.date)).map(B=>l.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${(c==null?void 0:c.id)===B.id?"bg-blue-50/50":""}`,children:[l.jsx("td",{className:"p-4 text-slate-600 font-mono text-sm",children:B.config.date}),l.jsxs("td",{className:"p-4",children:[l.jsx("div",{className:"font-bold text-slate-800",children:B.config.shopName}),B.config.cutoffTime&&l.jsxs("div",{className:"text-red-600 text-sm font-bold mt-1",children:[": ",B.config.date," ",B.config.cutoffTime]})]}),l.jsx("td",{className:"p-4 text-right",children:l.jsx("button",{onClick:()=>h(B),className:"px-4 py-2 bg-white border border-slate-300 rounded text-sm font-medium hover:bg-primary hover:text-white hover:border-primary transition-colors shadow-sm",children:""})})]},B.id))]})]})})]}),c&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 pt-4",children:[l.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(lN,{className:"text-amber-400 fill-amber-400"})," ",c.config.shopName]}),c.config.cutoffTime&&l.jsxs("div",{className:"text-red-600 font-bold mt-1 flex items-center gap-1 animate-pulse",children:[l.jsx(uc,{size:16})," : ",c.config.date," ",c.config.cutoffTime]})]}),l.jsx("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded",children:c.config.date})]}),l.jsx("div",{className:"w-full bg-white rounded-xl shadow border border-slate-200 overflow-hidden cursor-zoom-in group relative",onClick:()=>c.config.imageUrl&&p(c.config.imageUrl),children:c.config.imageUrl?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:c.config.imageUrl,alt:"Menu Detail",className:"w-full h-auto max-h-[500px] object-contain"}),l.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all flex items-center justify-center",children:l.jsxs("div",{className:"opacity-0 group-hover:opacity-100 bg-white px-4 py-2 rounded-full shadow-lg font-bold flex items-center gap-2 transform translate-y-2 group-hover:translate-y-0 transition-all",children:[l.jsx(Lx,{size:18})," "]})})]}):l.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:""})})]}),l.jsxs("div",{className:"lg:col-span-7 bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden flex flex-col relative",children:[ge&&l.jsx("div",{className:"absolute inset-0 bg-slate-100/60 z-20 flex items-center justify-center backdrop-blur-[2px]",children:l.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl text-center border-2 border-red-100 max-w-sm",children:[l.jsx("div",{className:"bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:l.jsx(jl,{size:32})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:""}),l.jsx("p",{className:"text-slate-500",children:""})]})}),l.jsx("div",{className:`${ge?"bg-slate-400":"bg-slate-800"} text-white p-4 transition-colors`,children:l.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(aN,{size:20})," "]})}),l.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"1. "}),l.jsxs("select",{disabled:ge,value:P,onChange:B=>S(B.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none disabled:bg-slate-100 disabled:text-slate-400",children:[l.jsx("option",{value:"",children:"--  --"}),E.map(B=>l.jsx("option",{value:B.id,children:B.name},B.id))]})]}),l.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-100 space-y-3",children:[l.jsx("div",{className:"text-sm font-bold text-slate-700 border-b pb-2 mb-2",children:"2. "}),l.jsx("input",{disabled:ge,placeholder:" (: )",value:w,onChange:B=>N(B.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsx("input",{disabled:ge,type:"number",placeholder:"",value:F,onChange:B=>x(B.target.value===""?"":Number(B.target.value)),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsx("input",{disabled:ge,placeholder:" (: )",value:O,onChange:B=>M(B.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsxs("button",{disabled:ge,onClick:ce,className:"w-full py-2 bg-secondary text-white rounded hover:bg-slate-700 text-sm font-bold flex items-center justify-center gap-2 disabled:bg-slate-400 disabled:cursor-not-allowed",children:[l.jsx(sN,{size:16})," "]})]})]}),l.jsxs("div",{className:"flex flex-col bg-amber-50 rounded-lg border border-amber-100 p-4",children:[l.jsx("h3",{className:"text-sm font-bold text-amber-800 mb-3",children:""}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-[200px] space-y-2 mb-3 pr-1 custom-scrollbar",children:k.length===0?l.jsx("p",{className:"text-xs text-amber-600/60 text-center py-4",children:""}):k.map((B,le)=>l.jsxs("div",{className:"bg-white p-2 rounded shadow-sm flex justify-between items-start text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800",children:B.name}),B.note&&l.jsx("div",{className:"text-xs text-slate-500",children:B.note})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"font-medium",children:["$",B.price]}),l.jsx("button",{disabled:ge,onClick:()=>R(k.filter((J,Se)=>Se!==le)),className:"text-red-400 hover:text-red-600 disabled:text-slate-300",children:l.jsx(Os,{size:14})})]})]},le))}),l.jsxs("div",{className:"pt-3 border-t border-amber-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),l.jsxs("span",{className:"text-xl font-bold text-primary",children:["$",k.reduce((B,le)=>B+le.price,0)]})]}),l.jsx("button",{onClick:tt,disabled:k.length===0||ge,className:`w-full py-3 rounded font-bold transition-all ${k.length>0&&!ge?"bg-primary text-white hover:bg-blue-700 shadow":"bg-slate-300 text-slate-500 cursor-not-allowed"}`,children:""}),l.jsx("p",{className:"text-xs text-red-500 font-bold mt-2 text-center",children:""})]})]})]})]})]}),l.jsxs("section",{className:"bg-white rounded-xl shadow border border-slate-200 overflow-hidden",children:[l.jsx("div",{className:"bg-slate-100 p-4 border-b border-slate-200",children:l.jsxs("h2",{className:"font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(XT,{size:20,className:"text-primary"})," "]})}),l.jsxs("div",{className:"p-3 border-b border-slate-100 flex gap-2 overflow-x-auto",children:[l.jsx("button",{onClick:()=>_("ALL"),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${y==="ALL"?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),kr.map(B=>{const le=y===B,J=kg(B);return l.jsx("button",{onClick:()=>_(B),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors border ${le?"bg-slate-800 text-white":`bg-white ${J.border} text-slate-500 hover:bg-slate-50`}`,children:B},B)})]}),l.jsx("div",{className:"p-0 divide-y divide-slate-100",children:$n.length===0?l.jsx("div",{className:"p-8 text-center text-slate-400",children:""}):$n.map(B=>{const le=kg(B.categoryLabel).badge;return l.jsxs("div",{className:"p-4 flex items-center gap-4 hover:bg-slate-50",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 flex-shrink-0",children:l.jsx(Ox,{size:16})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-slate-800",children:B.employeeName}),B.categoryLabel&&l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${le}`,children:B.categoryLabel})]}),l.jsx("span",{className:"text-xs text-slate-400 flex-shrink-0",children:new Date(B.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})})]}),l.jsx("div",{className:"text-sm text-slate-600 truncate",children:B.items.map(J=>`${J.name}${J.note?`(${J.note})`:""}`).join(", ")})]})]},B.id)})})]})]}),l.jsx("footer",{className:"bg-slate-900 text-slate-400 py-6 text-center text-sm font-mono border-t border-slate-800",children:" 2025 Powered by 007"}),m&&l.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4 cursor-zoom-out backdrop-blur-sm",onClick:()=>p(null),children:[l.jsx("img",{src:m,alt:"Zoom",className:"max-w-full max-h-[90vh] rounded shadow-2xl animate-in fade-in zoom-in duration-200"}),l.jsx("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white",children:l.jsx(Os,{size:32})})]}),l.jsx("style",{children:".custom-scrollbar::-webkit-scrollbar { width: 4px; } .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }"})]})},gN=()=>{const t=new Date,e=t.getDay(),n=e===0?-6:1-e,r=new Date(t);r.setDate(t.getDate()+n);const s=[];for(let i=0;i<5;i++){const o=new Date(r);o.setDate(r.getDate()+i),s.push(o.toISOString().split("T")[0])}return s},Lt=gN(),yN=[{id:"MENU_LUNCH_MON",label:"",config:{imageUrl:"./sample-images/bento_mon.svg",shopName:"",date:Lt[0],cutoffTime:"10:30",options:[{id:"opt_1",label:"",price:100},{id:"opt_2",label:"",price:110},{id:"opt_3",label:"",price:105},{id:"opt_4",label:"",price:120},{id:"opt_5",label:"",price:100}]}},{id:"MENU_LUNCH_TUE",label:"",config:{imageUrl:"./sample-images/bento_tue.svg",shopName:"",date:Lt[1],cutoffTime:"10:30",options:[{id:"opt_6",label:"",price:180},{id:"opt_7",label:"",price:150},{id:"opt_8",label:"",price:140},{id:"opt_9",label:"",price:160},{id:"opt_10",label:"",price:130}]}},{id:"MENU_LUNCH_WED",label:"",config:{imageUrl:"./sample-images/bento_wed.svg",shopName:"",date:Lt[2],cutoffTime:"10:30",options:[{id:"opt_11",label:"",price:180},{id:"opt_12",label:"",price:150},{id:"opt_13",label:"",price:160},{id:"opt_14",label:"",price:170},{id:"opt_15",label:"",price:140}]}},{id:"MENU_LUNCH_THU",label:"",config:{imageUrl:"./sample-images/bento_thu.svg",shopName:"",date:Lt[3],cutoffTime:"10:30",options:[{id:"opt_16",label:"",price:130},{id:"opt_17",label:"",price:140},{id:"opt_18",label:"",price:150},{id:"opt_19",label:"",price:120},{id:"opt_20",label:"",price:100}]}},{id:"MENU_LUNCH_FRI",label:"",config:{imageUrl:"./sample-images/bento_fri.svg",shopName:"",date:Lt[4],cutoffTime:"10:30",options:[{id:"opt_21",label:"",price:150},{id:"opt_22",label:"",price:180},{id:"opt_23",label:"",price:140},{id:"opt_24",label:"",price:160},{id:"opt_25",label:"",price:120}]}}],vN=[{id:"MENU_DRINK_MON",label:"",config:{imageUrl:"./sample-images/drink_mon.svg",shopName:"50",date:Lt[0],cutoffTime:"14:00",options:[{id:"drink_1",label:"",price:55},{id:"drink_2",label:"",price:35},{id:"drink_3",label:"",price:60},{id:"drink_4",label:"",price:35},{id:"drink_5",label:"",price:50},{id:"drink_6",label:"",price:65}]}},{id:"MENU_DRINK_TUE",label:"",config:{imageUrl:"./sample-images/drink_tue.svg",shopName:"",date:Lt[1],cutoffTime:"14:00",options:[{id:"drink_7",label:"",price:55},{id:"drink_8",label:"",price:70},{id:"drink_9",label:"",price:65},{id:"drink_10",label:"",price:80},{id:"drink_11",label:"",price:90}]}},{id:"MENU_DRINK_WED",label:"",config:{imageUrl:"./sample-images/drink_wed.svg",shopName:"",date:Lt[2],cutoffTime:"14:00",options:[{id:"drink_12",label:"",price:55},{id:"drink_13",label:"",price:75},{id:"drink_14",label:"",price:65},{id:"drink_15",label:"",price:40},{id:"drink_16",label:"",price:60}]}},{id:"MENU_DRINK_THU",label:"",config:{imageUrl:"./sample-images/drink_thu.svg",shopName:"",date:Lt[3],cutoffTime:"14:00",options:[{id:"drink_17",label:"",price:65},{id:"drink_18",label:"",price:65},{id:"drink_19",label:"",price:70},{id:"drink_20",label:"",price:60},{id:"drink_21",label:"",price:65}]}},{id:"MENU_DRINK_FRI",label:"",config:{imageUrl:"./sample-images/drink_fri.svg",shopName:"",date:Lt[4],cutoffTime:"14:00",options:[{id:"drink_22",label:"",price:35},{id:"drink_23",label:"",price:45},{id:"drink_24",label:"",price:60},{id:"drink_25",label:"",price:35},{id:"drink_26",label:"",price:55}]}}],xN=[{id:"MENU_GROUP_1",label:"",config:{imageUrl:"./sample-images/group_1.jpg",shopName:"",date:Lt[0],cutoffTime:"16:00",options:[{id:"group_1",label:" ()",price:150},{id:"group_2",label:" ()",price:170},{id:"group_3",label:" ()",price:160},{id:"group_4",label:" ()",price:190}]}},{id:"MENU_GROUP_2",label:"",config:{imageUrl:"./sample-images/group_2.jpg",shopName:"",date:Lt[2],cutoffTime:"16:00",options:[{id:"group_5",label:" ()",price:250},{id:"group_6",label:" ()",price:120},{id:"group_7",label:" ()",price:120},{id:"group_8",label:" ()",price:180}]}},{id:"MENU_GROUP_3",label:"",config:{imageUrl:"./sample-images/group_3.jpg",shopName:"",date:Lt[4],cutoffTime:"16:00",options:[{id:"group_9",label:" ()",price:150},{id:"group_10",label:" ()",price:150},{id:"group_11",label:" ()",price:150},{id:"group_12",label:" ()",price:150}]}}],_N=[...yN,...vN,...xN],wN=[{id:"EMP_001",name:""},{id:"EMP_002",name:""},{id:"EMP_003",name:""},{id:"EMP_004",name:""},{id:"EMP_005",name:""},{id:"EMP_006",name:""},{id:"EMP_007",name:""},{id:"EMP_008",name:""},{id:"EMP_009",name:""},{id:"EMP_010",name:""}],EN=[{id:"ANN_001",content:" ",isActive:!0},{id:"ANN_002",content:" ",isActive:!0},{id:"ANN_003",content:" ",isActive:!0},{id:"ANN_004",content:" ",isActive:!0},{id:"ANN_005",content:" ",isActive:!0}],bN=async()=>{console.log("Starting full database seed...");let t=0;try{if((await ee.getMenuCategories()).length===0){console.log("Seeding menus...");for(const s of _N)await ee.addMenuCategory(s.label,s.config);t++}else console.log("Menus already exist.");if((await ee.getEmployees()).length===0){console.log("Seeding employees...");for(const s of wN)await ee.addEmployee(s);t++}else console.log("Employees already exist.");(await ee.getAnnouncements()).length===0?(console.log("Seeding announcements..."),await ee.saveAnnouncements(EN),t++):console.log("Announcements already exist."),t>0?(console.log("Database seed completed!"),alert(`


 10
 13 (553)
 5`),window.location.reload()):alert(`

`)}catch(e){console.error("Seeding failed:",e),alert(" Console")}},qa=[{label:"",badge:"bg-blue-100 text-blue-700",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200",tab:"data-[state=active]:bg-blue-600"},{label:"",badge:"bg-emerald-100 text-emerald-700",bg:"bg-emerald-100",text:"text-emerald-700",border:"border-emerald-200",tab:"data-[state=active]:bg-emerald-600"},{label:"",badge:"bg-amber-100 text-amber-700",bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-200",tab:"data-[state=active]:bg-amber-600"},{label:"",badge:"bg-rose-100 text-rose-700",bg:"bg-rose-100",text:"text-rose-700",border:"border-rose-200",tab:"data-[state=active]:bg-rose-600"},{label:"",badge:"bg-violet-100 text-violet-700",bg:"bg-violet-100",text:"text-violet-700",border:"border-violet-200",tab:"data-[state=active]:bg-violet-600"}],Wt=t=>{if(!t)return{badge:"bg-slate-100 text-slate-500",bg:"bg-slate-100",text:"text-slate-500",border:"border-slate-200",tab:""};const e=qa.find(r=>r.label===t);if(e)return e;const n=t.split("").reduce((r,s)=>r+s.charCodeAt(0),0)%qa.length;return qa[n]},SN=({onLogout:t,onGoToFrontend:e,currentUser:n})=>{const[r,s]=H.useState("ORDERS"),[i,o]=H.useState({}),[u,c]=H.useState(!1);H.useEffect(()=>{ee.getAdminSettings().then(o)},[]);const h=async(g,I)=>{await ee.setGoogleBound(!0,g,I);const k=await ee.getAdminSettings();o(k)},m=()=>{switch(r){case"ORDERS":return l.jsx(jg,{});case"MENU":return l.jsx(TN,{});case"EMPLOYEES":return l.jsx(NN,{});case"ANNOUNCEMENTS":return l.jsx(IN,{});case"SYSTEM":return l.jsx(AN,{settings:i,onBind:h,currentUser:n});default:return l.jsx(jg,{})}},p=()=>{switch(r){case"ORDERS":return"";case"MENU":return"";case"EMPLOYEES":return"";case"ANNOUNCEMENTS":return"";case"SYSTEM":return"";default:return""}};return l.jsxs("div",{className:"flex h-screen bg-slate-100 relative overflow-hidden",children:[u&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>c(!1)}),l.jsxs("aside",{className:`fixed md:relative z-50 w-64 h-full bg-slate-900 text-white flex flex-col shadow-lg transition-transform duration-300 ease-in-out ${u?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:[l.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-xl font-bold tracking-wide",children:["",l.jsx("br",{}),""]}),l.jsx("p",{className:"text-xs text-slate-400 mt-2",children:""})]}),l.jsx("button",{onClick:()=>c(!1),className:"md:hidden text-slate-400 hover:text-white",children:l.jsx(Os,{size:24})})]}),l.jsxs("div",{className:"px-6 py-4 flex items-center gap-3 bg-slate-800/50 border-b border-slate-800",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-slate-300 font-bold",children:n.name.charAt(0)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-bold text-white truncate",children:n.name}),l.jsxs("div",{className:"text-xs text-emerald-400 flex items-center gap-1",children:[l.jsx(Mx,{size:10})," ",n.isSuperAdmin?"":""]})]})]}),l.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[l.jsx(Oi,{icon:l.jsx(oN,{size:20}),label:"",active:r==="ORDERS",onClick:()=>{s("ORDERS"),c(!1)}}),l.jsx(Oi,{icon:l.jsx(hN,{size:20}),label:"",active:r==="MENU",onClick:()=>{s("MENU"),c(!1)}}),l.jsx(Oi,{icon:l.jsx(dN,{size:20}),label:"",active:r==="EMPLOYEES",onClick:()=>{s("EMPLOYEES"),c(!1)}}),l.jsx(Oi,{icon:l.jsx(eN,{size:20}),label:"",active:r==="ANNOUNCEMENTS",onClick:()=>{s("ANNOUNCEMENTS"),c(!1)}}),l.jsx(Oi,{icon:l.jsx(Vx,{size:20}),label:"",active:r==="SYSTEM",onClick:()=>{s("SYSTEM"),c(!1)}})]}),l.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-2",children:[l.jsxs("button",{onClick:e,className:"flex items-center gap-3 w-full px-4 py-2 text-slate-300 hover:text-white hover:bg-slate-800 rounded transition-colors",children:[l.jsx(jd,{size:20}),l.jsx("span",{children:""})]}),l.jsxs("button",{onClick:t,className:"flex items-center gap-3 w-full px-4 py-2 text-red-400 hover:bg-slate-800 rounded transition-colors",children:[l.jsx(ZT,{size:20}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:[l.jsxs("header",{className:"md:hidden bg-slate-900 text-white p-4 flex items-center justify-between shadow-md shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>c(!0),className:"text-white hover:text-slate-300",children:l.jsx(tN,{size:24})}),l.jsx("h2",{className:"font-bold text-lg",children:p()})]}),l.jsx("div",{className:"text-xs text-slate-400",children:n.username})]}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 w-full bg-slate-100",children:m()})]})]})},Oi=({icon:t,label:e,active:n,onClick:r})=>l.jsxs("button",{onClick:r,className:`flex items-center gap-3 w-full px-4 py-3 rounded transition-colors ${n?"bg-primary text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[t,l.jsx("span",{className:"font-medium",children:e})]}),jg=()=>{const[t,e]=H.useState([]),[n,r]=H.useState([]),[s,i]=H.useState("TODAY"),[o,u]=H.useState("CARD"),[c,h]=H.useState(""),[m,p]=H.useState("WEEK"),[g,I]=H.useState(new Date),[k,R]=H.useState({start:"",end:""}),[P,S]=H.useState(null),w=H.useRef(null),N=H.useRef(null),[O,M]=H.useState([]),[F,x]=H.useState(null);H.useEffect(()=>{(async()=>{const[U,G]=await Promise.all([ee.getOrders(),ee.getMenuCategories()]);e(U),r(G);const te=Array.from(new Set(G.map(Te=>Te.label)));M(te)})()},[]);const y=new Date().toISOString().split("T")[0],_=A=>{const U=new Date(A),G=U.getDay(),te=U.getDate()-G+(G===0?-6:1);return new Date(U.setDate(te))},E=A=>{const U=_(A);return Array.from({length:5}).map((G,te)=>{const Te=new Date(U);return Te.setDate(U.getDate()+te),Te.toISOString().split("T")[0]})},T=A=>{const U=A.getFullYear(),G=A.getMonth(),te=new Date(U,G,1),Te=[];for(;te.getMonth()===G;)Te.push(new Date(te).toISOString().split("T")[0]),te.setDate(te.getDate()+1);return Te},C=A=>{const U=new Date(g);m==="WEEK"?U.setDate(U.getDate()+A*7):m==="MONTH"&&U.setMonth(U.getMonth()+A),I(U)},b=A=>c===""?!0:A.categoryLabel===c,we=t.filter(A=>A.dateStr===y).filter(b).sort((A,U)=>U.timestamp-A.timestamp),Pe=t.filter(A=>A.dateStr===y),ht=Pe.reduce((A,U)=>{const G=U.categoryLabel||"";return A[G]||(A[G]={amount:0,count:0}),A[G].amount+=U.totalAmount,A[G].count+=1,A},{}),L=Pe.reduce((A,U)=>A+U.totalAmount,0),$=Pe.length,Q=(()=>{let A=[];return m==="WEEK"?A=t.filter(U=>U.dateStr<y):m==="MONTH"?A=t.filter(U=>U.dateStr.startsWith(g.toISOString().slice(0,7))):A=k.start&&k.end?t.filter(U=>U.dateStr>=k.start&&U.dateStr<=k.end):[],A.filter(b)})(),ne=P?t.filter(A=>A.dateStr===P).filter(b):[],he=ne.reduce((A,U)=>A+U.totalAmount,0),et=A=>{var U,G,te;try{(U=A.current)==null||U.showPicker()}catch{(G=A.current)==null||G.focus(),(te=A.current)==null||te.click()}},Ue=(A,U)=>{if(!U)return;const G=n.find(te=>te.config.date===A&&te.label===U);return G==null?void 0:G.config.imageUrl},[Pt,ge]=H.useState(!1),[ce,tt]=H.useState(null),[Ht,kr]=H.useState([]);H.useEffect(()=>{ee.getEmployees().then(kr)},[]);const $n=async A=>{await ee.toggleOrderPayment(A),e(await ee.getOrders())},Dt=async A=>{window.confirm("")&&(await ee.deleteOrder(A),e(await ee.getOrders()),P&&S(null))},cn=A=>{tt(JSON.parse(JSON.stringify(A))),ge(!0)},as=async()=>{if(!ce)return;const A=ce.items.reduce((G,te)=>G+te.price,0),U={...ce,totalAmount:A};await ee.saveOrder(U),e(await ee.getOrders()),ge(!1),tt(null)},B=(A,U,G)=>{if(!ce)return;const te=[...ce.items];te[A]={...te[A],[U]:G},tt({...ce,items:te})},le=A=>{if(!ce)return;const U=ce.items.filter((G,te)=>te!==A);tt({...ce,items:U})},J=()=>{if(!ce)return;const A={id:Date.now().toString(),name:"",price:0,note:""};tt({...ce,items:[...ce.items,A]})},Se=()=>{var A;return!Pt||!ce?null:l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"bg-slate-900 text-white p-4 flex justify-between items-center",children:[l.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(An,{size:18})," "]}),l.jsx("button",{onClick:()=>ge(!1),className:"text-slate-400 hover:text-white",children:l.jsx(Os,{size:24})})]}),l.jsxs("div",{className:"p-6 overflow-y-auto space-y-4 flex-1",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("select",{value:((A=Ht.find(U=>U.name===ce.employeeName))==null?void 0:A.id)||"",onChange:U=>{const G=Ht.find(te=>te.id===U.target.value);G&&tt({...ce,employeeName:G.name})},className:"w-full p-2 border border-slate-300 rounded",children:[l.jsx("option",{value:"",children:"..."}),Ht.map(U=>l.jsx("option",{value:U.id,children:U.name},U.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("select",{value:ce.status,onChange:U=>tt({...ce,status:U.target.value}),className:"w-full p-2 border border-slate-300 rounded",children:[l.jsx("option",{value:"PENDING",children:""}),l.jsx("option",{value:"CONFIRMED",children:""}),l.jsx("option",{value:"COMPLETED",children:""}),l.jsx("option",{value:"CANCELLED",children:""})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-sm font-bold text-slate-700",children:""}),l.jsxs("button",{onClick:J,className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded font-bold hover:bg-emerald-200 flex items-center gap-1",children:[l.jsx(Gr,{size:12})," "]})]}),l.jsx("div",{className:"space-y-2",children:ce.items.map((U,G)=>l.jsxs("div",{className:"flex gap-2 items-start bg-slate-50 p-2 rounded border border-slate-200",children:[l.jsxs("div",{className:"flex-1 space-y-1",children:[l.jsx("input",{value:U.name,onChange:te=>B(G,"name",te.target.value),className:"w-full p-1 text-sm border border-slate-300 rounded",placeholder:""}),l.jsx("input",{value:U.note,onChange:te=>B(G,"note",te.target.value),className:"w-full p-1 text-xs border border-slate-300 rounded text-slate-500",placeholder:" ()"})]}),l.jsx("div",{className:"w-20",children:l.jsx("input",{type:"number",value:U.price,onChange:te=>B(G,"price",Number(te.target.value)),className:"w-full p-1 text-sm border border-slate-300 rounded text-right font-mono",placeholder:""})}),l.jsx("button",{onClick:()=>le(G),className:"p-1.5 text-slate-400 hover:text-red-500",children:l.jsx(Fr,{size:16})})]},G))})]}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-600",children:":"}),l.jsxs("span",{className:"text-2xl font-bold text-primary",children:["$",ce.items.reduce((U,G)=>U+G.price,0)]})]})]}),l.jsxs("div",{className:"p-4 bg-slate-50 flex gap-4 border-t border-slate-200",children:[l.jsxs("button",{onClick:as,className:"flex-1 bg-primary text-white py-2 rounded font-bold hover:bg-blue-700 shadow-sm flex items-center justify-center gap-2",children:[l.jsx(hf,{size:18})," "]}),l.jsx("button",{onClick:()=>ge(!1),className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded font-bold hover:bg-slate-100",children:""})]})]})})};return l.jsxs("div",{className:"space-y-6 relative",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>i("TODAY"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${s==="TODAY"?"bg-primary text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:""}),l.jsx("button",{onClick:()=>i("HISTORY"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${s==="HISTORY"?"bg-primary text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:""})]})]}),s==="TODAY"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-2",children:[l.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-white shadow-md flex flex-col justify-between relative overflow-hidden",children:[l.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10",children:l.jsx(GT,{size:48})}),l.jsx("div",{className:"text-sm text-slate-400 font-bold mb-1",children:""}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-2xl font-bold tracking-tight",children:["$",L.toLocaleString()]}),l.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[$," "]})]})]}),O.map(A=>{const U=Wt(A),G=ht[A]||{amount:0,count:0};return l.jsxs("div",{className:`rounded-xl p-4 shadow-sm border flex flex-col justify-between ${U.bg} ${U.border}`,children:[l.jsxs("div",{className:"text-xs font-bold opacity-70 mb-1 flex items-center gap-1",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${U.tab.replace("data-[state=active]:","")}`}),A]}),l.jsxs("div",{children:[l.jsxs("div",{className:`text-xl font-bold ${U.text}`,children:["$",G.amount.toLocaleString()]}),l.jsxs("div",{className:"text-xs opacity-60 font-bold",children:[G.count," "]})]})]},A)})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-500 mr-2 flex items-center gap-1",children:[l.jsx(Cg,{size:14})," :"]}),l.jsx("button",{onClick:()=>h(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${c===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),O.map(A=>{const U=c===A,G=Wt(A);return l.jsx("button",{onClick:()=>h(A),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${U?`${G.bg} ${G.text} ${G.border}`:`bg-white ${G.border} text-slate-500 hover:${G.bg}`}`,children:A},A)})]}),l.jsx("div",{className:"flex justify-end md:justify-start",children:l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded ${o==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(ts,{size:18})}),l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded ${o==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(Xs,{size:18})})]})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[l.jsx("div",{className:`${o==="LIST"?"md:hidden":""}`,children:l.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[we.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-8",children:""}),we.map(A=>{const U=Wt(A.categoryLabel),G=Ue(A.dateStr,A.categoryLabel);return l.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-bold text-lg",children:A.employeeName.charAt(0)}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-slate-700 leading-none text-base",children:A.employeeName}),A.categoryLabel&&l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${U.badge} w-fit mt-0.5`,children:A.categoryLabel})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>cn(A),className:"p-1.5 text-slate-400 hover:text-primary hover:bg-blue-50 rounded transition-colors",children:l.jsx(An,{size:16})}),l.jsx("button",{onClick:()=>Dt(A.id),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",children:l.jsx(Fr,{size:16})})]})]}),l.jsxs("div",{className:"flex gap-3 mb-3",children:[G&&l.jsxs("div",{className:"w-16 h-16 rounded-md bg-slate-100 overflow-hidden border border-slate-200 flex-shrink-0 cursor-zoom-in relative group",onClick:()=>x(G),children:[l.jsx("img",{src:G,alt:"Menu",className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all flex items-center justify-center",children:l.jsx(Lx,{size:14,className:"text-white opacity-0 group-hover:opacity-100"})})]}),l.jsx("div",{className:"flex-1 space-y-1",children:A.items.map((te,Te)=>l.jsxs("div",{className:"text-sm text-slate-600 flex justify-between items-start",children:[l.jsxs("span",{children:[te.name," ",te.note&&l.jsxs("span",{className:"text-xs text-slate-400",children:["(",te.note,")"]})]}),l.jsxs("span",{className:"font-mono font-medium",children:["$",te.price]})]},Te))})]}),l.jsxs("div",{className:"pt-3 border-t border-slate-100 flex justify-between items-center",children:[l.jsx("div",{className:"flex flex-col",children:l.jsxs("span",{className:"font-bold text-primary text-xl",children:["$",A.totalAmount]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>$n(A.id),className:`px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-1 transition-all ${A.isPaid?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[A.isPaid?l.jsx(kd,{size:14}):l.jsx(Ag,{size:14}),A.isPaid?"":""]}),l.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 text-xs rounded-full font-bold",children:A.status})]})]})]},A.id)})]})}),l.jsx("div",{className:`hidden ${o==="LIST"?"md:block":""}`,children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-semibold text-slate-600 w-24",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-right",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-center",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-center",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[we.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400",children:""})}),we.map(A=>{const U=Wt(A.categoryLabel),G=Ue(A.dateStr,A.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 text-slate-500 text-sm font-mono",children:new Date(A.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}),l.jsx("td",{className:"p-4",children:G?l.jsx("div",{className:"w-10 h-10 rounded bg-slate-100 border border-slate-200 overflow-hidden cursor-zoom-in",onClick:()=>x(G),children:l.jsx("img",{src:G,alt:"Menu",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-10 h-10 rounded bg-slate-50 border border-slate-100 flex items-center justify-center text-slate-300",children:l.jsx(Po,{size:16})})}),l.jsx("td",{className:"p-4 font-bold text-slate-700",children:A.employeeName}),l.jsx("td",{className:"p-4",children:A.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${U.badge}`,children:A.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsx("td",{className:"p-4 text-sm text-slate-600",children:A.items.map(te=>`${te.name}${te.note?`(${te.note})`:""}`).join(", ")}),l.jsxs("td",{className:"p-4 font-bold text-primary text-right",children:["$",A.totalAmount]}),l.jsx("td",{className:"p-4 text-center",children:l.jsxs("button",{onClick:()=>$n(A.id),className:`mx-auto px-3 py-1 rounded-full text-xs font-bold flex items-center justify-center gap-1 transition-all ${A.isPaid?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[A.isPaid?l.jsx(kd,{size:12}):l.jsx(Ag,{size:12}),A.isPaid?"":""]})}),l.jsxs("td",{className:"p-4 text-center flex items-center justify-center gap-2",children:[l.jsx("button",{onClick:()=>cn(A),className:"p-1 text-slate-400 hover:text-primary",children:l.jsx(An,{size:16})}),l.jsx("button",{onClick:()=>Dt(A.id),className:"p-1 text-slate-400 hover:text-red-500",children:l.jsx(Fr,{size:16})})]})]},A.id)})]})]})})]})]}),s==="HISTORY"&&l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-500 mr-2 flex items-center gap-1",children:[l.jsx(Cg,{size:14})," :"]}),l.jsx("button",{onClick:()=>h(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${c===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),O.map(A=>{const U=c===A,G=Wt(A);return l.jsx("button",{onClick:()=>h(A),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${U?`${G.bg} ${G.text} ${G.border}`:`bg-white ${G.border} text-slate-500 hover:${G.bg}`}`,children:A},A)})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[l.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1 self-start",children:[l.jsx("button",{onClick:()=>p("WEEK"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="WEEK"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""}),l.jsx("button",{onClick:()=>p("MONTH"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="MONTH"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""}),l.jsx("button",{onClick:()=>p("CUSTOM"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="CUSTOM"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""})]}),m!=="CUSTOM"?l.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>C(-1),className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Px,{size:18})}),l.jsx("span",{className:"font-mono font-bold text-slate-700",children:m==="WEEK"?`${_(g).toLocaleDateString()} - ${(()=>{const A=_(g);return A.setDate(A.getDate()+4),A.toLocaleDateString()})()}`:g.toLocaleDateString("zh-TW",{year:"numeric",month:"long"})}),l.jsx("button",{onClick:()=>C(1),className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Dx,{size:18})})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"relative group",onClick:()=>et(w),children:[l.jsx(Ba,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-primary transition-colors cursor-pointer",size:16}),l.jsx("input",{ref:w,type:"date",value:k.start,onClick:()=>et(w),onChange:A=>R(U=>({...U,start:A.target.value})),className:"pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary outline-none shadow-sm cursor-pointer hover:border-primary transition-colors w-40"})]}),l.jsx("span",{className:"text-slate-400 font-bold",children:"-"}),l.jsxs("div",{className:"relative group",onClick:()=>et(N),children:[l.jsx(Ba,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-primary transition-colors cursor-pointer",size:16}),l.jsx("input",{ref:N,type:"date",value:k.end,onClick:()=>et(N),onChange:A=>R(U=>({...U,end:A.target.value})),className:"pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary outline-none shadow-sm cursor-pointer hover:border-primary transition-colors w-40"})]})]})]}),m==="WEEK"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:E(g).map((A,U)=>{const G=t.filter(Te=>Te.dateStr===A).filter(b),te=G.reduce((Te,li)=>Te+li.totalAmount,0);return l.jsxs("div",{className:`border rounded-lg p-3 ${A===y?"border-amber-400 bg-amber-50":"border-slate-200 bg-slate-50"}`,children:[l.jsxs("div",{className:"font-bold text-slate-700 mb-2 border-b border-slate-200 pb-1 flex justify-between",children:[l.jsx("span",{children:["","","","",""][U]}),l.jsx("span",{className:"text-xs font-normal text-slate-500",children:A.slice(5)})]}),G.length===0?l.jsx("div",{className:"text-xs text-slate-400 text-center py-4",children:""}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-xs text-slate-500",children:[": ",G.length]}),l.jsxs("div",{className:"text-sm font-bold text-primary",children:[": $",te]}),l.jsx("button",{onClick:()=>S(A),className:"w-full text-xs bg-white border border-slate-300 py-1 rounded hover:bg-slate-100 font-bold text-slate-600",children:""})]})]},A)})}),m==="MONTH"&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:T(g).map(A=>{const U=t.filter(Te=>Te.dateStr===A).filter(b),G=U.reduce((Te,li)=>Te+li.totalAmount,0),te=U.length>0;return l.jsxs("div",{onClick:()=>te&&S(A),className:`border rounded p-2 min-h-[80px] flex flex-col justify-between cursor-pointer transition-colors ${te?"bg-white border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-100 text-slate-300"}`,children:[l.jsx("div",{className:"text-xs font-mono text-right",children:A.slice(8)}),te&&l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-bold text-slate-700",children:[U.length," "]}),l.jsxs("div",{className:"text-xs text-primary",children:["$",G]})]})]},A)})}),m==="CUSTOM"&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600 text-center",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600 text-center",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:Q.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-400",children:""})}):Q.map(A=>{const U=Wt(A.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-3 text-sm text-slate-500 font-mono",children:A.dateStr}),l.jsx("td",{className:"p-3 text-sm font-bold text-slate-700",children:A.employeeName}),l.jsx("td",{className:"p-3",children:A.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${U.badge}`,children:A.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsxs("td",{className:"p-3 text-sm text-slate-600",children:[A.items[0].name,"..."]}),l.jsxs("td",{className:"p-3 text-sm font-bold text-primary",children:["$",A.totalAmount]}),l.jsx("td",{className:"p-3 text-center",children:l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${A.isPaid?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:A.isPaid?"":""})}),l.jsxs("td",{className:"p-3 text-center flex items-center justify-center gap-2",children:[l.jsx("button",{onClick:()=>cn(A),className:"p-1 text-slate-400 hover:text-primary",children:l.jsx(An,{size:16})}),l.jsx("button",{onClick:()=>Dt(A.id),className:"p-1 text-slate-400 hover:text-red-500",children:l.jsx(Fr,{size:16})})]})]},A.id)})})]})})]}),P&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[80vh] flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"bg-slate-900 text-white p-4 flex justify-between items-center",children:[l.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(Ba,{size:18})," ",P,"  ",c!==""&&l.jsxs("span",{className:"text-xs bg-slate-700 px-2 py-0.5 rounded ml-2",children:[": ",c]})]}),l.jsx("button",{onClick:()=>S(null),className:"text-slate-400 hover:text-white",children:l.jsx(Os,{size:24})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-0",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-right",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-center",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-center",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:ne.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400",children:""})}):ne.map(A=>{const U=Wt(A.categoryLabel),G=Ue(A.dateStr,A.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 text-xs font-mono text-slate-500",children:new Date(A.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}),l.jsx("td",{className:"p-4",children:G?l.jsx("div",{className:"w-8 h-8 rounded bg-slate-100 border border-slate-200 overflow-hidden cursor-zoom-in",onClick:()=>x(G),children:l.jsx("img",{src:G,alt:"Menu",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-8 h-8 rounded bg-slate-50 border border-slate-100 flex items-center justify-center text-slate-300",children:l.jsx(Po,{size:14})})}),l.jsx("td",{className:"p-4 font-bold text-slate-800",children:A.employeeName}),l.jsx("td",{className:"p-4",children:A.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${U.badge}`,children:A.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsx("td",{className:"p-4 text-sm text-slate-600",children:A.items.map(te=>l.jsxs("div",{className:"flex gap-1",children:[l.jsx("span",{children:te.name}),te.note&&l.jsxs("span",{className:"text-xs text-slate-400",children:["(",te.note,")"]})]},te.name))}),l.jsxs("td",{className:"p-4 font-bold text-primary text-right",children:["$",A.totalAmount]}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("button",{onClick:()=>$n(A.id),className:`mx-auto px-2 py-0.5 rounded-full text-[10px] font-bold transition-all border ${A.isPaid?"bg-emerald-100 text-emerald-700 border-emerald-200 hover:bg-emerald-200":"bg-slate-100 text-slate-500 border-slate-200 hover:bg-slate-200"}`,children:A.isPaid?"":""})}),l.jsxs("td",{className:"p-4 text-center flex items-center justify-center gap-2",children:[l.jsx("button",{onClick:()=>cn(A),className:"p-1 text-slate-400 hover:text-primary",children:l.jsx(An,{size:16})}),l.jsx("button",{onClick:()=>Dt(A.id),className:"p-1 text-slate-400 hover:text-red-500",children:l.jsx(Fr,{size:16})})]})]},A.id)})})]})}),l.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-between items-center",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("span",{className:"text-sm text-slate-500",children:[" ",ne.length," "]}),l.jsxs("span",{className:"text-sm text-emerald-600 font-bold",children:[": $",ne.filter(A=>A.isPaid).reduce((A,U)=>A+U.totalAmount,0)]}),l.jsxs("span",{className:"text-sm text-slate-400",children:[": $",ne.filter(A=>!A.isPaid).reduce((A,U)=>A+U.totalAmount,0)]})]}),l.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[": ",l.jsxs("span",{className:"text-primary",children:["$",he]})]})]})]})}),F&&l.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4 cursor-zoom-out backdrop-blur-sm",onClick:()=>x(null),children:[l.jsx("img",{src:F,alt:"Zoom",className:"max-w-full max-h-[90vh] rounded shadow-2xl animate-in fade-in zoom-in duration-200"}),l.jsx("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white",children:l.jsx(Os,{size:32})})]}),l.jsx(Se,{})]})},TN=()=>{const[t,e]=H.useState([]),[n,r]=H.useState("ACTIVE"),[s,i]=H.useState(""),[o,u]=H.useState("CARD"),[c,h]=H.useState(!1),[m,p]=H.useState(null),[g,I]=H.useState(new Date),[k,R]=H.useState(""),[P,S]=H.useState({categoryLabel:"",shopName:"",date:new Date().toISOString().split("T")[0],cutoffTime:"",imageFile:null,imageUrl:""}),w=new Date().toISOString().split("T")[0];H.useEffect(()=>{ee.getMenuCategories().then(e)},[]);const N=async()=>{try{if(!P.shopName){alert("");return}let L=P.imageUrl;if(P.imageFile)try{L=await M(P.imageFile)}catch{alert("");return}if(L&&L.length>5e4){alert(" ( 50,000 )");return}const $={imageUrl:L,shopName:P.shopName,date:P.date,cutoffTime:P.cutoffTime};await O($)}catch(L){console.error(L),alert(`
: `+L.message)}},O=async L=>{m?await ee.updateMenuCategory(m,P.categoryLabel,L):await ee.addMenuCategory(P.categoryLabel,L),e(await ee.getMenuCategories()),h(!1),_()},M=L=>new Promise(($,D)=>{const Q=new FileReader;Q.readAsDataURL(L),Q.onload=ne=>{var et;const he=new Image;he.src=(et=ne.target)==null?void 0:et.result,he.onload=()=>{let ge=he.width,ce=he.height;ge>ce?ge>400&&(ce*=400/ge,ge=400):ce>400&&(ge*=400/ce,ce=400);const tt=document.createElement("canvas");tt.width=ge,tt.height=ce;const Ht=tt.getContext("2d");if(!Ht){D(new Error("Canvas context not supported"));return}Ht.drawImage(he,0,0,ge,ce);const kr=tt.toDataURL("image/jpeg",.5);$(kr)},he.onerror=Ue=>D(Ue)},Q.onerror=ne=>D(ne)}),F=async L=>{const $=t.find(ne=>ne.id===L);if(!$)return;const Q=(await ee.getOrders()).filter(ne=>ne.dateStr===$.config.date&&ne.categoryLabel===$.label);if(Q.length>0){const ne=` ${$.config.date}${$.label} ${Q.length} 



`;confirm(ne)&&(await ee.deleteOrdersByContext($.config.date,$.label),await ee.deleteMenuCategory(L),e(await ee.getMenuCategories()),alert(""))}else confirm("")&&(await ee.deleteMenuCategory(L),e(await ee.getMenuCategories()))},x=L=>{if(L.config.date<w){alert(`
`);return}h(!0),p(L.id),S({categoryLabel:L.label,shopName:L.config.shopName,date:L.config.date,cutoffTime:L.config.cutoffTime||"",imageUrl:L.config.imageUrl,imageFile:null})},y=L=>{h(!0),p(null),S({categoryLabel:L.label,shopName:L.config.shopName,date:w,cutoffTime:L.config.cutoffTime||"",imageUrl:L.config.imageUrl,imageFile:null})},_=()=>{p(null),S({categoryLabel:"",shopName:"",date:w,cutoffTime:"",imageFile:null,imageUrl:""})},E=L=>{const $=new Date(L),D=$.getDay(),Q=$.getDate()-D+(D===0?-6:1);return new Date($.setDate(Q))},T=L=>{const $=E(L);return Array.from({length:5}).map((D,Q)=>{const ne=new Date($);return ne.setDate($.getDate()+Q),ne.toISOString().split("T")[0]})},C=Array.from(new Set(t.map(L=>L.label))),b=t.filter(L=>L.config.date>=w).filter(L=>s===""?!0:L.label===s),we=t.filter(L=>L.config.date<w),Pe=T(g),ht=we.filter(L=>Pe.includes(L.config.date));return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""})}),l.jsxs("div",{className:"flex border-b border-slate-200",children:[l.jsx("button",{onClick:()=>r("ACTIVE"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${n==="ACTIVE"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700"}`,children:" ()"}),l.jsx("button",{onClick:()=>r("HISTORY"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${n==="HISTORY"?"border-slate-500 text-slate-700":"border-transparent text-slate-500 hover:text-slate-700"}`,children:" ()"})]}),c?l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-2xl mx-auto",children:[l.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[l.jsx(An,{className:"text-primary"})," ",m?"":""]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"1.  (Tab)"}),l.jsxs("select",{value:P.categoryLabel,onChange:L=>S({...P,categoryLabel:L.target.value}),className:"w-full p-2.5 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",children:[C.length===0&&l.jsx("option",{value:"",children:" ()"}),C.map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"2. "}),l.jsx("input",{value:P.shopName,onChange:L=>S({...P,shopName:L.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",placeholder:": "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"3. "}),l.jsx("input",{type:"date",value:P.date,onChange:L=>S({...P,date:L.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary"})]})]}),"              ",l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["4. ",P.categoryLabel===""?"":" ()"]}),P.categoryLabel===""?l.jsx("input",{type:"datetime-local",value:P.cutoffTime.replace(" ","T"),onChange:L=>{const D=L.target.value.replace("T"," ");S({...P,cutoffTime:D})},className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary"}):l.jsxs("select",{value:P.cutoffTime,onChange:L=>S({...P,cutoffTime:L.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"",children:""}),Array.from({length:21}).map((L,$)=>{const D=480+$*30,Q=Math.floor(D/60),ne=D%60,he=`${Q.toString().padStart(2,"0")}:${ne.toString().padStart(2,"0")}`;return l.jsx("option",{value:he,children:he},he)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"5. "}),l.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:bg-slate-50 transition-colors relative",children:[l.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/gif, image/bmp",onChange:L=>{var D;const $=(D=L.target.files)==null?void 0:D[0];if($){if($.size>2*1024*1024){alert(" 2MB");return}const Q=new FileReader;Q.onloadend=()=>{S({...P,imageFile:$,imageUrl:Q.result})},Q.readAsDataURL($)}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),P.imageFile||P.imageUrl?l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("img",{src:P.imageUrl,alt:"Preview",className:"h-32 object-contain mb-2 rounded shadow-sm"}),l.jsx("div",{className:"text-sm text-slate-600 font-bold",children:P.imageFile?`: ${P.imageFile.name}`:""}),l.jsx("span",{className:"text-xs text-slate-500 mt-1",children:""})]}):l.jsxs("div",{className:"text-slate-400 flex flex-col items-center",children:[l.jsx(uN,{size:32,className:"mb-2"}),"   ",l.jsx("span",{className:"text-xs mt-1",children:"JPG, PNG, GIF, BMP (Max 2MB)"})]})]})]}),l.jsxs("div",{className:"flex gap-4 pt-4",children:[l.jsx("button",{onClick:N,className:"flex-1 bg-primary text-white py-2 rounded-lg font-bold hover:bg-blue-700 transition-colors shadow-sm",children:m?"":""}),l.jsx("button",{onClick:()=>{h(!1),_()},className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded-lg font-bold hover:bg-slate-50 transition-colors",children:""})]})]})]}):l.jsxs(l.Fragment,{children:[n==="ACTIVE"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>i(""),className:`px-4 py-1.5 rounded-full text-sm font-bold transition-all ${s===""?"bg-slate-800 text-white":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:""}),C.map(L=>{const $=s===L,D=Wt(L);return l.jsx("button",{onClick:()=>i(L),className:`px-4 py-1.5 rounded-full text-sm font-bold transition-all border-2 ${$?`${D.bg} ${D.text} ${D.border}`:`bg-white ${D.border} text-slate-500 hover:${D.bg}`}`,children:L},L)})]}),l.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[l.jsxs("button",{onClick:()=>{_(),h(!0)},className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors shadow-sm font-bold",children:[l.jsx(Gr,{size:18})," "]}),l.jsxs("div",{className:"hidden md:flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded ${o==="LIST"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(Xs,{size:18})}),l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded ${o==="CARD"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(ts,{size:18})})]})]})]}),l.jsx("div",{className:`${o==="LIST"?"md:hidden":""}`,children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-12",children:""}),b.map(L=>{const $=Wt(L.label);return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden group hover:shadow-md transition-all",children:[l.jsxs("div",{className:`px-4 py-2 border-b flex justify-between items-center ${$.bg} ${$.border}`,children:[l.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${$.badge}`,children:L.label}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>x(L),className:"p-1.5 bg-white rounded-full text-slate-500 hover:text-primary shadow-sm",children:l.jsx(An,{size:14})}),l.jsx("button",{onClick:()=>F(L.id),className:"p-1.5 bg-white rounded-full text-slate-500 hover:text-red-500 shadow-sm",children:l.jsx(Fr,{size:14})})]})]}),l.jsxs("div",{className:"aspect-video bg-slate-100 relative",children:[L.config.imageUrl?l.jsx("img",{src:L.config.imageUrl,alt:"Menu",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(Po,{size:32})}),l.jsxs("div",{className:"absolute bottom-0 inset-x-0 bg-gradient-to-t from-black/70 to-transparent p-3 text-white",children:[l.jsx("h4",{className:"font-bold truncate",children:L.config.shopName}),l.jsxs("div",{className:"text-xs opacity-90",children:[L.config.date," ",L.config.cutoffTime&&` ${L.config.cutoffTime} `]})]})]})]},L.id)})]})}),l.jsx("div",{className:`hidden ${o==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:" / "}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 w-32",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-right",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[b.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-400",children:""})}),b.map(L=>{const $=Wt(L.label);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4",children:l.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${$.badge}`,children:L.label})}),l.jsxs("td",{className:"p-4",children:[l.jsx("div",{className:"font-bold text-slate-800",children:L.config.shopName}),l.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(Ba,{size:14})," ",L.config.date,L.config.cutoffTime&&l.jsxs("span",{className:"text-red-500 font-bold ml-2",children:["(",L.config.cutoffTime," )"]})]})]}),l.jsx("td",{className:"p-4",children:l.jsx("div",{className:"w-16 h-10 bg-slate-100 rounded overflow-hidden border border-slate-200",children:L.config.imageUrl?l.jsx("img",{src:L.config.imageUrl,className:"w-full h-full object-cover"}):null})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>x(L),className:"px-3 py-1.5 border border-slate-300 rounded text-sm hover:bg-primary hover:text-white hover:border-primary transition-colors",children:""}),l.jsx("button",{onClick:()=>F(L.id),className:"px-3 py-1.5 border border-slate-300 rounded text-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-colors",children:""})]})]},L.id)})]})]})})})]}),n==="HISTORY"&&l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 border-b border-slate-100 pb-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-500 flex items-center mr-2",children:":"}),l.jsx("button",{onClick:()=>R(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${k===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),C.map(L=>{const $=k===L,D=Wt(L);return l.jsx("button",{onClick:()=>R(L),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${$?`${D.bg} ${D.text} ${D.border}`:`bg-white ${D.border} text-slate-500 hover:${D.bg}`}`,children:L},L)})]}),l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(KT,{size:18})," "]}),l.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>{const L=new Date(g);L.setDate(L.getDate()-7),I(L)},className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Px,{size:18})}),l.jsxs("span",{className:"font-mono text-sm font-bold text-slate-700",children:[E(g).toLocaleDateString()," - ",(()=>{const L=E(g);return L.setDate(L.getDate()+4),L.toLocaleDateString()})()]}),l.jsx("button",{onClick:()=>{const L=new Date(g);L.setDate(L.getDate()+7),I(L)},className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Dx,{size:18})})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:T(g).map((L,$)=>{const D=ht.filter(Q=>Q.config.date===L&&(k===""||Q.label===k));return l.jsxs("div",{className:"border border-slate-200 rounded-lg bg-slate-50 min-h-[150px] flex flex-col",children:[l.jsxs("div",{className:"p-2 border-b border-slate-200 bg-white rounded-t-lg text-center",children:[l.jsx("div",{className:"text-sm font-bold text-slate-700",children:["","","","",""][$]}),l.jsx("div",{className:"text-xs text-slate-400",children:L})]}),l.jsx("div",{className:"p-2 space-y-2 flex-1",children:D.length===0?l.jsx("div",{className:"text-center text-xs text-slate-300 py-4",children:""}):D.map(Q=>{const ne=Wt(Q.label);return l.jsxs("div",{className:"bg-white border border-slate-200 rounded p-2 shadow-sm text-xs cursor-pointer hover:border-primary group hover:bg-blue-50 transition-colors",onClick:()=>y(Q),title:"",children:[l.jsx("div",{className:`inline-block px-1.5 py-0.5 rounded-full text-[10px] font-bold mb-1 ${ne.badge}`,children:Q.label}),l.jsx("div",{className:"font-bold text-slate-700 truncate",children:Q.config.shopName}),l.jsx("div",{className:"hidden group-hover:block text-[10px] text-primary mt-1 text-center font-bold",children:""})]},Q.id)})})]},L)})})]})]})]})},NN=()=>{const[t,e]=H.useState([]),[n,r]=H.useState({}),[s,i]=H.useState("CARD"),[o,u]=H.useState(!1),[c,h]=H.useState(null),[m,p]=H.useState(""),[g,I]=H.useState(null),[k,R]=H.useState(!1);H.useEffect(()=>{P()},[]);const P=async()=>{const _=await ee.getEmployees();e(_);const E=await ee.getOrders(),T=new Date().toISOString().slice(0,7),C={};_.forEach(b=>{const we=E.filter(Pe=>Pe.employeeName===b.name&&Pe.dateStr.startsWith(T)).length;C[b.id]=we}),r(C),R(!1)},S=async()=>{if(!m.trim()){alert("");return}c?await ee.updateEmployee({id:c,name:m}):await ee.addEmployee({id:Date.now().toString(),name:m}),P(),u(!1),p(""),h(null)},w=async _=>{confirm("")&&(await ee.deleteEmployee(_),P())},N=_=>{u(!0),h(_.id),p(_.name)},O=()=>{const _=[...t].sort((E,T)=>E.name.localeCompare(T.name,"zh-TW"));e(_),R(!0)},M=(_,E)=>{I(E),_.dataTransfer.effectAllowed="move"},F=(_,E)=>{if(_.preventDefault(),g===null||g===E)return;const T=[...t],C=T[g];T.splice(g,1),T.splice(E,0,C),e(T),I(E),R(!0)},x=()=>{I(null)},y=async()=>{await ee.saveEmployees(t),R(!1),alert("")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>i("CARD"),className:`p-2 rounded ${s==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(ts,{size:18})}),l.jsx("button",{onClick:()=>i("LIST"),className:`p-2 rounded ${s==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(Xs,{size:18})})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-wrap gap-4 items-center justify-between",children:[k&&l.jsxs("button",{onClick:y,className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg font-bold shadow animate-pulse",children:[l.jsx(hf,{size:18})," "]}),l.jsxs("div",{className:"flex gap-2 ml-auto",children:[l.jsxs("button",{onClick:O,className:"flex items-center gap-2 bg-white border border-slate-300 px-4 py-2 rounded-lg hover:bg-slate-50 text-slate-700 font-medium",children:[l.jsx(qT,{size:16})," "]}),l.jsxs("button",{onClick:()=>{u(!0),h(null),p("")},className:"flex items-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 font-bold shadow-sm",children:[l.jsx(Gr,{size:18})," "]})]})]}),o&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-md mx-auto",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:c?"":""}),l.jsx("input",{value:m,onChange:_=>p(_.target.value),className:"w-full p-2 border border-slate-300 rounded mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:S,className:"flex-1 bg-primary text-white py-2 rounded font-bold",children:""}),l.jsx("button",{onClick:()=>u(!1),className:"flex-1 border border-slate-300 py-2 rounded font-bold",children:""})]})]}),l.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[l.jsx(mN,{size:12})," "]}),l.jsx("div",{className:`${s==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((_,E)=>l.jsxs("div",{draggable:!o,onDragStart:T=>M(T,E),onDragOver:T=>F(T,E),onDragEnd:x,className:`relative p-4 rounded-xl border cursor-move transition-all flex flex-col items-center text-center ${E%2===0?"bg-white border-slate-200":"bg-blue-50 border-blue-200"} hover:shadow-md hover:scale-[1.02]`,children:[l.jsx("div",{className:"absolute top-2 right-2 text-slate-300",children:l.jsx(kl,{size:16})}),l.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-bold text-lg mb-2",children:_.name.charAt(0)}),l.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:_.name}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[l.jsx(Ig,{size:12})," : ",l.jsx("span",{className:"font-bold text-primary",children:n[_.id]||0})]}),l.jsxs("div",{className:"flex gap-2 mt-4 w-full",children:[l.jsx("button",{onClick:()=>N(_),className:"flex-1 py-1 text-xs border border-slate-300 rounded hover:bg-white text-slate-600",children:""}),l.jsx("button",{onClick:()=>w(_.id),className:"flex-1 py-1 text-xs border border-red-200 text-red-500 rounded hover:bg-red-50",children:""})]})]},_.id))})}),l.jsx("div",{className:`hidden ${s==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-16",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 text-right",children:""})]})}),l.jsx("tbody",{children:t.map((_,E)=>l.jsxs("tr",{draggable:!o,onDragStart:T=>M(T,E),onDragOver:T=>F(T,E),onDragEnd:x,className:`cursor-move transition-colors ${E%2===0?"bg-white":"bg-slate-50"} hover:bg-blue-50/50`,children:[l.jsx("td",{className:"p-4 text-slate-300",children:l.jsx(kl,{size:20})}),l.jsx("td",{className:"p-4 font-bold text-slate-700 text-lg",children:_.name}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ig,{size:16,className:"text-slate-400"}),l.jsx("span",{className:"font-bold text-primary",children:n[_.id]||0})]})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>N(_),className:"text-sm font-bold text-blue-600 hover:underline",children:""}),l.jsx("button",{onClick:()=>w(_.id),className:"text-sm font-bold text-red-500 hover:underline",children:""})]})]},_.id))})]})})})]})},IN=()=>{const[t,e]=H.useState([]),[n,r]=H.useState(!1),[s,i]=H.useState(null),[o,u]=H.useState(""),[c,h]=H.useState("CARD"),[m,p]=H.useState(null),[g,I]=H.useState(!1);H.useEffect(()=>{ee.getAnnouncements().then(e)},[]);const k=async()=>{if(!o.trim()){alert("");return}const M=[...t];if(s){const F=M.findIndex(x=>x.id===s);F!==-1&&(M[F].content=o)}else M.push({id:Date.now().toString(),content:o,isActive:!0});await ee.saveAnnouncements(M),e(M),r(!1),u(""),i(null)},R=async M=>{if(confirm("")){const F=t.filter(x=>x.id!==M);await ee.saveAnnouncements(F),e(F)}},P=async M=>{const F=t.map(x=>x.id===M?{...x,isActive:!x.isActive}:x);await ee.saveAnnouncements(F),e(F)},S=M=>{r(!0),i(M.id),u(M.content)},w=(M,F)=>{p(F),M.dataTransfer.effectAllowed="move"},N=(M,F)=>{if(M.preventDefault(),m===null||m===F)return;const x=[...t],y=x[m];x.splice(m,1),x.splice(F,0,y),e(x),p(F),I(!0)},O=async()=>{await ee.saveAnnouncements(t),I(!1),alert("")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>h("CARD"),className:`p-2 rounded ${c==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(ts,{size:18})}),l.jsx("button",{onClick:()=>h("LIST"),className:`p-2 rounded ${c==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(Xs,{size:18})})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex justify-between items-center",children:[g?l.jsxs("button",{onClick:O,className:"bg-primary text-white px-4 py-2 rounded-lg font-bold shadow animate-pulse flex items-center gap-2",children:[l.jsx(hf,{size:18})," "]}):l.jsx("div",{}),l.jsxs("button",{onClick:()=>{r(!0),i(null),u("")},className:"bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold hover:bg-emerald-600 flex items-center gap-2",children:[l.jsx(Gr,{size:18})," "]})]}),n&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200",children:[l.jsx("textarea",{value:o,onChange:M=>u(M.target.value),className:"w-full p-4 border border-slate-300 rounded-lg mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:"...",rows:3}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:k,className:"bg-primary text-white px-6 py-2 rounded font-bold",children:""}),l.jsx("button",{onClick:()=>r(!1),className:"border border-slate-300 px-6 py-2 rounded font-bold",children:""})]})]}),l.jsx("div",{className:`${c==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((M,F)=>l.jsxs("div",{draggable:!0,onDragStart:x=>w(x,F),onDragOver:x=>N(x,F),className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 cursor-move hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("div",{className:"p-1 text-slate-300",children:l.jsx(kl,{size:16})}),l.jsxs("button",{onClick:()=>P(M.id),className:`px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 ${M.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:[M.isActive?l.jsx(rN,{size:12}):l.jsx(nN,{size:12}),M.isActive?"":""]})]}),l.jsx("p",{className:"text-slate-700 font-medium mb-4 min-h-[3rem]",children:M.content}),l.jsxs("div",{className:"flex border-t border-slate-100 pt-3 gap-2",children:[l.jsx("button",{onClick:()=>S(M),className:"flex-1 py-1 text-sm bg-slate-50 text-slate-600 rounded hover:bg-slate-100",children:""}),l.jsx("button",{onClick:()=>R(M.id),className:"flex-1 py-1 text-sm bg-red-50 text-red-500 rounded hover:bg-red-100",children:""})]})]},M.id))})}),l.jsx("div",{className:`hidden ${c==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-12"}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 w-32 text-center",children:""}),l.jsx("th",{className:"p-4 w-32 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:t.map((M,F)=>l.jsxs("tr",{draggable:!0,onDragStart:x=>w(x,F),onDragOver:x=>N(x,F),className:"hover:bg-slate-50 cursor-move",children:[l.jsx("td",{className:"p-4 text-slate-300",children:l.jsx(kl,{size:20})}),l.jsx("td",{className:"p-4 text-slate-700 font-medium",children:M.content}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("button",{onClick:()=>P(M.id),className:`px-3 py-1 rounded-full text-xs font-bold transition-all ${M.isActive?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:M.isActive?"":""})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>S(M),className:"text-blue-600 font-bold text-sm hover:underline",children:""}),l.jsx("button",{onClick:()=>R(M.id),className:"text-red-500 font-bold text-sm hover:underline",children:""})]})]},M.id))})]})})})]})},AN=({currentUser:t})=>{const[e,n]=H.useState("ACCOUNT"),[r,s]=H.useState([]),[i,o]=H.useState(!1),[u,c]=H.useState(null),[h,m]=H.useState({name:"",username:"",password:"",isSuperAdmin:!1}),[p,g]=H.useState(!1),[I,k]=H.useState(""),[R,P]=H.useState(""),[S,w]=H.useState(!1),[N,O]=H.useState(!1),[M,F]=H.useState("GRID"),[x,y]=H.useState("IDLE");H.useEffect(()=>{_(),E()},[]);const _=async()=>{const D=await ee.getAdminAccounts();s(D)},E=async()=>{y("CHECKING");try{const D=await ee.checkDatabaseConnection();y(D?"SUCCESS":"ERROR")}catch{y("ERROR")}},T=async()=>{if(!h.name||!h.username){alert("");return}if(!u&&!h.password){alert("");return}try{if(u){const D=r.find(Q=>Q.id===u);D&&await ee.updateAdminAccount({...D,name:h.name,username:h.username,password:h.password,isSuperAdmin:h.isSuperAdmin})}else await ee.addAdminAccount({id:Date.now().toString(),name:h.name,username:h.username,password:h.password,isSuperAdmin:h.isSuperAdmin});alert(u?"":""),o(!1),ht(),_()}catch(D){alert(": "+D.message)}},C=async D=>{if(confirm(""))try{await ee.deleteAdminAccount(D),alert(""),_()}catch(Q){alert(": "+Q.message)}},b=D=>t.isSuperAdmin||t.id===D.id,we=D=>t.isSuperAdmin&&t.id!==D.id,Pe=D=>{o(!0),c(D.id),m({name:D.name,username:D.username,password:"",isSuperAdmin:D.isSuperAdmin||!1})},ht=()=>{c(null),m({name:"",username:"",password:"",isSuperAdmin:!1})},L=async()=>{if(!I||!R){alert("");return}if(I!==R){alert("");return}confirm("")&&(await ee.setFrontendPassword(I),alert(""),k(""),P(""))},$=async D=>{if(!t.isSuperAdmin){alert("");return}const Q=prompt("");if(!Q)return;Q===t.password?await D():alert("")};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(Vx,{className:"text-slate-600"})," "]}),l.jsx("p",{className:"text-slate-500 text-sm mt-1",children:""})]}),l.jsxs("div",{className:"flex bg-white p-1 rounded-lg border border-slate-200 shadow-sm",children:[l.jsxs("button",{onClick:()=>n("ACCOUNT"),className:`px-4 py-2 rounded font-bold text-sm transition-all flex items-center gap-2 ${e==="ACCOUNT"?"bg-slate-800 text-white shadow":"text-slate-500 hover:bg-slate-50"}`,children:[l.jsx(cN,{size:16})," "]}),l.jsxs("button",{onClick:()=>n("FEATURE"),className:`px-4 py-2 rounded font-bold text-sm transition-all flex items-center gap-2 ${e==="FEATURE"?"bg-slate-800 text-white shadow":"text-slate-500 hover:bg-slate-50"}`,children:[l.jsx(ts,{size:16})," "]}),l.jsxs("button",{onClick:()=>n("INFO"),className:`px-4 py-2 rounded font-bold text-sm transition-all flex items-center gap-2 ${e==="INFO"?"bg-slate-800 text-white shadow":"text-slate-500 hover:bg-slate-50"}`,children:[l.jsx(Mi,{size:16})," "]})]})]}),e==="ACCOUNT"&&l.jsxs(l.Fragment,{children:[!i&&l.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[l.jsxs("button",{onClick:()=>{o(!0),ht()},className:"bg-primary text-white px-4 py-2 rounded-lg font-bold hover:bg-blue-700 shadow-md flex items-center gap-2",children:[l.jsx(Gr,{size:18})," "]}),l.jsxs("div",{className:"flex bg-white rounded p-1 border border-slate-200",children:[l.jsx("button",{onClick:()=>F("GRID"),className:`p-2 rounded ${M==="GRID"?"bg-slate-100 text-slate-800":"text-slate-400"}`,children:l.jsx(ts,{size:18})}),l.jsx("button",{onClick:()=>F("LIST"),className:`p-2 rounded ${M==="LIST"?"bg-slate-100 text-slate-800":"text-slate-400"}`,children:l.jsx(Xs,{size:18})})]})]}),i&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-primary/20 mb-8 animate-in fade-in slide-in-from-top-4",children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[u?l.jsx(An,{size:18}):l.jsx(Gr,{size:18})," ",u?"":""]}),l.jsxs("div",{className:"space-y-4 max-w-md",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{value:h.name,onChange:D=>m({...h,name:D.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none",placeholder:"e.g. "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 p-3 rounded border border-slate-200",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",checked:!h.isSuperAdmin,onChange:()=>m({...h,isSuperAdmin:!1}),className:"w-4 h-4 text-primary"}),l.jsx("span",{className:"text-sm font-bold text-slate-700",children:" ()"})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",checked:h.isSuperAdmin,onChange:()=>m({...h,isSuperAdmin:!0}),className:"w-4 h-4 text-primary",disabled:t.id===u}),l.jsx("span",{className:"text-sm font-bold text-indigo-600",children:""})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{value:h.username,onChange:D=>m({...h,username:D.target.value}),disabled:!!u&&h.username==="sysop",className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none disabled:bg-slate-100"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{value:h.password,onChange:D=>m({...h,password:D.target.value}),className:"w-full p-2 pr-10 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none",type:p?"text":"password",placeholder:""}),l.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:p?l.jsx(cc,{size:18}):l.jsx(dc,{size:18})})]})]}),l.jsxs("div",{className:"flex gap-4 mt-4",children:[l.jsx("button",{onClick:T,className:"flex-1 bg-primary text-white py-2 rounded-lg font-bold hover:bg-blue-700",children:""}),l.jsx("button",{onClick:()=>{o(!1),ht()},className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded-lg font-bold hover:bg-slate-50",children:""})]})]})]}),l.jsx("div",{className:`${M==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(D=>l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${D.isSuperAdmin?"bg-indigo-600":"bg-slate-500"}`,children:D.name.charAt(0)}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800",children:D.name}),l.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[l.jsx(Ox,{size:12})," ",D.username]})]})]}),D.isSuperAdmin&&l.jsx(Mx,{className:"text-amber-500",size:20})]}),l.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-100",children:[b(D)?l.jsx("button",{onClick:()=>Pe(D),className:"flex-1 py-1.5 text-sm bg-blue-50 text-blue-600 rounded hover:bg-blue-100 font-bold",children:"/"}):l.jsx("button",{disabled:!0,className:"flex-1 py-1.5 text-sm bg-slate-50 text-slate-300 rounded cursor-not-allowed",children:""}),we(D)&&l.jsx("button",{onClick:()=>C(D.id),className:"px-3 py-1.5 text-sm bg-red-50 text-red-500 rounded hover:bg-red-100 font-bold",children:""})]})]},D.id))})}),l.jsx("div",{className:`hidden ${M==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(D=>l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-700",children:D.name}),l.jsx("td",{className:"p-4 font-mono text-slate-600",children:D.username}),l.jsx("td",{className:"p-4",children:D.isSuperAdmin?l.jsx("span",{className:"text-xs font-bold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:""}):l.jsx("span",{className:"text-xs font-bold bg-slate-100 text-slate-600 px-2 py-1 rounded-full",children:""})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[b(D)&&l.jsx("button",{onClick:()=>Pe(D),className:"text-blue-600 font-bold text-sm hover:underline",children:""}),we(D)&&l.jsx("button",{onClick:()=>C(D.id),className:"text-red-500 font-bold text-sm hover:underline",children:""})]})]},D.id))})]})})}),l.jsxs("div",{className:"bg-red-50/50 p-6 rounded-xl shadow-sm border border-red-100 mt-8",children:[l.jsxs("h3",{className:"text-lg font-bold text-red-600 flex items-center gap-2 mb-4",children:[l.jsx(jl,{size:18})," "]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:S?"text":"password",value:I,onChange:D=>k(D.target.value),className:"w-full p-2 pr-10 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-red-500 outline-none",placeholder:""}),l.jsx("button",{type:"button",onClick:()=>w(!S),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:S?l.jsx(cc,{size:18}):l.jsx(dc,{size:18})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:N?"text":"password",value:R,onChange:D=>P(D.target.value),className:"w-full p-2 pr-10 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-red-500 outline-none",placeholder:""}),l.jsx("button",{type:"button",onClick:()=>O(!N),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:N?l.jsx(cc,{size:18}):l.jsx(dc,{size:18})})]})]}),l.jsx("div",{children:l.jsx("button",{onClick:L,className:"w-full bg-red-600 text-white py-2 rounded font-bold hover:bg-red-700 transition-colors shadow-sm",children:""})})]}),l.jsx("p",{className:"text-xs text-red-400 mt-2 font-bold",children:""})]})]}),e==="FEATURE"&&l.jsx("div",{className:"grid grid-cols-1 gap-6 animate-in fade-in slide-in-from-top-4",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[l.jsx(Xs,{className:"text-primary"})," "]}),l.jsx("p",{className:"text-slate-400 text-xs mt-1",children:""})]}),l.jsx("button",{className:"text-sm bg-slate-100 text-slate-600 px-3 py-1.5 rounded font-bold hover:bg-slate-200 transition-colors",onClick:()=>alert(""),children:""})]}),l.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-lg p-4",children:[l.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:""}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[qa.map((D,Q)=>l.jsxs("div",{className:`px-3 py-1.5 rounded-full text-sm font-bold border flex items-center gap-2 ${D.bg} ${D.text} ${D.border}`,children:[D.label,l.jsx("button",{className:"opacity-50 hover:opacity-100",children:l.jsx(An,{size:12})})]},Q)),l.jsxs("button",{className:"px-3 py-1.5 rounded-full text-sm font-bold border border-dashed border-slate-300 text-slate-400 bg-white hover:border-slate-400 hover:text-slate-500 flex items-center gap-1",children:[l.jsx(Gr,{size:14})," "]})]})]}),l.jsx("p",{className:"text-xs text-slate-400 mt-4 text-center",children:""})]})}),e==="INFO"&&l.jsxs("div",{className:"grid grid-cols-1 gap-6 animate-in fade-in slide-in-from-top-4",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[l.jsx(Mi,{className:"text-indigo-600"})," "]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"bg-orange-500 p-1 rounded-full text-white",children:l.jsx(Mi,{size:14})}),l.jsx("span",{className:"font-mono font-bold text-slate-800",children:"Firebase Mode"})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),x==="IDLE"&&l.jsx("span",{className:"text-slate-400 font-bold text-sm",children:""}),x==="CHECKING"&&l.jsx("span",{className:"text-blue-500 font-bold text-sm animate-pulse",children:"..."}),x==="SUCCESS"&&l.jsxs("span",{className:"text-emerald-600 font-bold text-sm flex items-center gap-1",children:[l.jsx(kd,{size:14})," "]}),x==="ERROR"&&l.jsxs("span",{className:"text-red-500 font-bold text-sm flex items-center gap-1",children:[l.jsx(fN,{size:14})," "]})]})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[l.jsx(Mi,{className:"text-indigo-600"})," "]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-slate-800 mb-1 font-bold",children:""}),l.jsx("p",{className:"text-xs text-slate-400",children:"353"})]}),l.jsxs("button",{onClick:()=>$(()=>bN()),className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-2 rounded-lg font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md flex items-center gap-2 whitespace-nowrap",children:[l.jsx(Mi,{size:16})," "]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-red-600 mb-1 font-bold",children:""}),l.jsx("p",{className:"text-xs text-slate-400",children:""})]}),l.jsxs("button",{onClick:()=>$(async()=>{await ee.clearAllData(),alert(""),window.location.reload()}),className:"bg-white border-2 border-red-100 text-red-500 px-6 py-2 rounded-lg font-bold hover:bg-red-50 hover:border-red-200 transition-all flex items-center gap-2 whitespace-nowrap",children:[l.jsx(Fr,{size:16})," "]})]})]})]})]}),l.jsx("footer",{className:"bg-white border-t border-slate-200 mt-8 py-6 text-center text-sm font-mono text-slate-400",children:" 2025 Powered by 007"})]})},CN=()=>{const[t,e]=H.useState(!1),[n,r]=H.useState(!1),[s,i]=H.useState(void 0),[o,u]=H.useState(!0),[c,h]=H.useState(""),[m,p]=H.useState(""),[g,I]=H.useState(""),[k,R]=H.useState("USER"),[P,S]=H.useState(""),[w,N]=H.useState(!1);H.useEffect(()=>{(async()=>{const{role:y,userId:_}=ee.getSession();if(y==="USER")e(!0);else if(y==="ADMIN"&&_){const E=await ee.getAdminById(_);E?(r(!0),i(E)):ee.clearSession()}u(!1)})()},[]);const O=async x=>{x.preventDefault(),u(!0);const y=await ee.getFrontendPassword();u(!1),c===y?(e(!0),S(""),ee.setSession("USER",void 0,w)):S("")},M=async x=>{x.preventDefault(),u(!0);const y=await ee.verifyAdmin(m,g);u(!1),y?(r(!0),i(y),S(""),ee.setSession("ADMIN",y.id,w)):S("")},F=()=>{e(!1),r(!1),i(void 0),ee.clearSession(),h(""),I(""),p("")};return o?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:"Loading..."}):n&&s?l.jsx(SN,{currentUser:s,onLogout:F,onGoToFrontend:()=>{r(!1),e(!0)}}):t?l.jsx(pN,{onLogout:F,onGoToAdmin:()=>{F(),R("ADMIN")}}):l.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-800 to-slate-900 p-4",children:[l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden w-full max-w-md",children:[l.jsxs("div",{className:"flex text-sm font-bold text-center border-b bg-gray-50",children:[l.jsx("button",{onClick:()=>{R("USER"),S("")},className:`flex-1 py-4 uppercase tracking-wider transition-all border-t-4 ${k==="USER"?"bg-white text-primary border-primary":"bg-gray-100 text-gray-400 border-transparent hover:bg-gray-50"}`,children:""}),l.jsx("button",{onClick:()=>{R("ADMIN"),S("")},className:`flex-1 py-4 uppercase tracking-wider transition-all border-t-4 ${k==="ADMIN"?"bg-white text-slate-800 border-slate-800":"bg-gray-100 text-gray-400 border-transparent hover:bg-gray-50"}`,children:""})]}),l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),l.jsx("p",{className:"text-slate-500 text-sm",children:""})]}),P&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded border border-red-200 text-center",children:P}),k==="USER"?l.jsxs("form",{onSubmit:O,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(jl,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"password",value:c,onChange:x=>h(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none",placeholder:"",autoComplete:"current-password"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember-user",type:"checkbox",checked:w,onChange:x=>N(x.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary bg-white"}),l.jsx("label",{htmlFor:"remember-user",className:"ml-2 block text-sm text-slate-600 cursor-pointer",children:" (Remember me)"})]}),l.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors",children:""})]}):l.jsxs("form",{onSubmit:M,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(iN,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"text",value:m,onChange:x=>p(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none",placeholder:"",autoComplete:"username"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(jl,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"password",value:g,onChange:x=>I(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none",placeholder:"",autoComplete:"current-password"})]})]}),l.jsxs("div",{className:"flex items-center pt-2",children:[l.jsx("input",{id:"remember-admin",type:"checkbox",checked:w,onChange:x=>N(x.target.checked),className:"w-4 h-4 text-slate-800 border-gray-300 rounded focus:ring-slate-800 bg-white"}),l.jsx("label",{htmlFor:"remember-admin",className:"ml-2 block text-sm text-slate-600 cursor-pointer",children:" (Remember me)"})]}),l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white py-3 rounded-lg font-bold hover:bg-slate-900 transition-colors mt-2",children:""})]})]})]}),l.jsx("div",{className:"fixed bottom-6 text-center w-full text-slate-500 text-xs font-mono opacity-60",children:" 2025 Powered by 007"})]})},Fx=document.getElementById("root");if(!Fx)throw new Error("Could not find root element to mount to");const kN=fc.createRoot(Fx);kN.render(l.jsx(N1.StrictMode,{children:l.jsx(CN,{})}));
