(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function i1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sg={exports:{}},Nl={},Ng={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Io=Symbol.for("react.element"),o1=Symbol.for("react.portal"),a1=Symbol.for("react.fragment"),l1=Symbol.for("react.strict_mode"),u1=Symbol.for("react.profiler"),c1=Symbol.for("react.provider"),d1=Symbol.for("react.context"),h1=Symbol.for("react.forward_ref"),f1=Symbol.for("react.suspense"),m1=Symbol.for("react.memo"),p1=Symbol.for("react.lazy"),Zf=Symbol.iterator;function g1(t){return t===null||typeof t!="object"?null:(t=Zf&&t[Zf]||t["@@iterator"],typeof t=="function"?t:null)}var Ig={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ag=Object.assign,Cg={};function qs(t,e,n){this.props=t,this.context=e,this.refs=Cg,this.updater=n||Ig}qs.prototype.isReactComponent={};qs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function kg(){}kg.prototype=qs.prototype;function Sd(t,e,n){this.props=t,this.context=e,this.refs=Cg,this.updater=n||Ig}var Nd=Sd.prototype=new kg;Nd.constructor=Sd;Ag(Nd,qs.prototype);Nd.isPureReactComponent=!0;var em=Array.isArray,Rg=Object.prototype.hasOwnProperty,Id={current:null},jg={key:!0,ref:!0,__self:!0,__source:!0};function Pg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Rg.call(e,r)&&!jg.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Io,type:t,key:i,ref:o,props:s,_owner:Id.current}}function y1(t,e){return{$$typeof:Io,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ad(t){return typeof t=="object"&&t!==null&&t.$$typeof===Io}function v1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tm=/\/+/g;function bu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?v1(""+t.key):e.toString(36)}function _a(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Io:case o1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+bu(o,0):r,em(s)?(n="",t!=null&&(n=t.replace(tm,"$&/")+"/"),_a(s,e,n,"",function(h){return h})):s!=null&&(Ad(s)&&(s=y1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(tm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",em(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+bu(i,u);o+=_a(i,e,n,c,s)}else if(c=g1(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+bu(i,u++),o+=_a(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yo(t,e,n){if(t==null)return t;var r=[],s=0;return _a(t,r,"","",function(i){return e.call(n,i,s++)}),r}function x1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},wa={transition:null},_1={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:wa,ReactCurrentOwner:Id};function Dg(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Yo,forEach:function(t,e,n){Yo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yo(t,function(){e++}),e},toArray:function(t){return Yo(t,function(e){return e})||[]},only:function(t){if(!Ad(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=qs;he.Fragment=a1;he.Profiler=u1;he.PureComponent=Sd;he.StrictMode=l1;he.Suspense=f1;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_1;he.act=Dg;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ag({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Id.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Rg.call(e,c)&&!jg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Io,type:t.type,key:s,ref:i,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:d1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:c1,_context:t},t.Consumer=t};he.createElement=Pg;he.createFactory=function(t){var e=Pg.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:h1,render:t}};he.isValidElement=Ad;he.lazy=function(t){return{$$typeof:p1,_payload:{_status:-1,_result:t},_init:x1}};he.memo=function(t,e){return{$$typeof:m1,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=wa.transition;wa.transition={};try{t()}finally{wa.transition=e}};he.unstable_act=Dg;he.useCallback=function(t,e){return Tt.current.useCallback(t,e)};he.useContext=function(t){return Tt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};he.useEffect=function(t,e){return Tt.current.useEffect(t,e)};he.useId=function(){return Tt.current.useId()};he.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Tt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};he.useRef=function(t){return Tt.current.useRef(t)};he.useState=function(t){return Tt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Tt.current.useTransition()};he.version="18.3.1";Ng.exports=he;var H=Ng.exports;const w1=i1(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E1=H,b1=Symbol.for("react.element"),T1=Symbol.for("react.fragment"),S1=Object.prototype.hasOwnProperty,N1=E1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I1={key:!0,ref:!0,__self:!0,__source:!0};function Vg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)S1.call(e,r)&&!I1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:b1,type:t,key:i,ref:o,props:s,_owner:N1.current}}Nl.Fragment=T1;Nl.jsx=Vg;Nl.jsxs=Vg;Sg.exports=Nl;var l=Sg.exports,oc={},Mg={exports:{}},$t={},Og={exports:{}},Lg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,G){var X=$.length;$.push(G);e:for(;0<X;){var ne=X-1>>>1,xe=$[ne];if(0<s(xe,G))$[ne]=G,$[X]=xe,X=ne;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],X=$.pop();if(X!==G){$[0]=X;e:for(var ne=0,xe=$.length,tt=xe>>>1;ne<tt;){var We=2*(ne+1)-1,Se=$[We],k=We+1,B=$[k];if(0>s(Se,X))k<xe&&0>s(B,Se)?($[ne]=B,$[k]=X,ne=k):($[ne]=Se,$[We]=X,ne=We);else if(k<xe&&0>s(B,X))$[ne]=B,$[k]=X,ne=k;else break e}}return G}function s($,G){var X=$.sortIndex-G.sortIndex;return X!==0?X:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],m=1,p=null,g=3,I=!1,C=!1,j=!1,P=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A($){for(var G=n(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=$)r(h),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(h)}}function V($){if(j=!1,A($),!C)if(n(c)!==null)C=!0,F(M);else{var G=n(h);G!==null&&ie(V,G.startTime-$)}}function M($,G){C=!1,j&&(j=!1,S(y),y=-1),I=!0;var X=g;try{for(A(G),p=n(c);p!==null&&(!(p.expirationTime>G)||$&&!T());){var ne=p.callback;if(typeof ne=="function"){p.callback=null,g=p.priorityLevel;var xe=ne(p.expirationTime<=G);G=t.unstable_now(),typeof xe=="function"?p.callback=xe:p===n(c)&&r(c),A(G)}else r(c);p=n(c)}if(p!==null)var tt=!0;else{var We=n(h);We!==null&&ie(V,We.startTime-G),tt=!1}return tt}finally{p=null,g=X,I=!1}}var O=!1,x=null,y=-1,_=5,E=-1;function T(){return!(t.unstable_now()-E<_)}function N(){if(x!==null){var $=t.unstable_now();E=$;var G=!0;try{G=x(!0,$)}finally{G?b():(O=!1,x=null)}}else O=!1}var b;if(typeof w=="function")b=function(){w(N)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,$e=Ee.port2;Ee.port1.onmessage=N,b=function(){$e.postMessage(null)}}else b=function(){P(N,0)};function F($){x=$,O||(O=!0,b())}function ie($,G){y=P(function(){$(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){C||I||(C=!0,F(M))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var X=g;g=G;try{return $()}finally{g=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=g;g=$;try{return G()}finally{g=X}},t.unstable_scheduleCallback=function($,G,X){var ne=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ne+X:ne):X=ne,$){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=X+xe,$={id:m++,callback:G,priorityLevel:$,startTime:X,expirationTime:xe,sortIndex:-1},X>ne?($.sortIndex=X,e(h,$),n(c)===null&&$===n(h)&&(j?(S(y),y=-1):j=!0,ie(V,X-ne))):($.sortIndex=xe,e(c,$),C||I||(C=!0,F(M))),$},t.unstable_shouldYield=T,t.unstable_wrapCallback=function($){var G=g;return function(){var X=g;g=G;try{return $.apply(this,arguments)}finally{g=X}}}})(Lg);Og.exports=Lg;var A1=Og.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1=H,zt=A1;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fg=new Set,Ji={};function Xr(t,e){Rs(t,e),Rs(t+"Capture",e)}function Rs(t,e){for(Ji[t]=e,t=0;t<e.length;t++)Fg.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ac=Object.prototype.hasOwnProperty,k1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nm={},rm={};function R1(t){return ac.call(rm,t)?!0:ac.call(nm,t)?!1:k1.test(t)?rm[t]=!0:(nm[t]=!0,!1)}function j1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function P1(t,e,n,r){if(e===null||typeof e>"u"||j1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cd=/[\-:]([a-z])/g;function kd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cd,kd);dt[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cd,kd);dt[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cd,kd);dt[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rd(t,e,n,r){var s=dt.hasOwnProperty(e)?dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(P1(e,n,s,r)&&(n=null),r||s===null?R1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var On=C1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xo=Symbol.for("react.element"),cs=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),jd=Symbol.for("react.strict_mode"),lc=Symbol.for("react.profiler"),Ug=Symbol.for("react.provider"),zg=Symbol.for("react.context"),Pd=Symbol.for("react.forward_ref"),uc=Symbol.for("react.suspense"),cc=Symbol.for("react.suspense_list"),Dd=Symbol.for("react.memo"),Kn=Symbol.for("react.lazy"),$g=Symbol.for("react.offscreen"),sm=Symbol.iterator;function vi(t){return t===null||typeof t!="object"?null:(t=sm&&t[sm]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Tu;function ki(t){if(Tu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Tu=e&&e[1]||""}return`
`+Tu+t}var Su=!1;function Nu(t,e){if(!t||Su)return"";Su=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Su=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ki(t):""}function D1(t){switch(t.tag){case 5:return ki(t.type);case 16:return ki("Lazy");case 13:return ki("Suspense");case 19:return ki("SuspenseList");case 0:case 2:case 15:return t=Nu(t.type,!1),t;case 11:return t=Nu(t.type.render,!1),t;case 1:return t=Nu(t.type,!0),t;default:return""}}function dc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ds:return"Fragment";case cs:return"Portal";case lc:return"Profiler";case jd:return"StrictMode";case uc:return"Suspense";case cc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zg:return(t.displayName||"Context")+".Consumer";case Ug:return(t._context.displayName||"Context")+".Provider";case Pd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dd:return e=t.displayName||null,e!==null?e:dc(t.type)||"Memo";case Kn:e=t._payload,t=t._init;try{return dc(t(e))}catch{}}return null}function V1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dc(e);case 8:return e===jd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function M1(t){var e=Bg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jo(t){t._valueTracker||(t._valueTracker=M1(t))}function qg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Bg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hc(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function im(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Hg(t,e){e=e.checked,e!=null&&Rd(t,"checked",e,!1)}function fc(t,e){Hg(t,e);var n=mr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mc(t,e.type,n):e.hasOwnProperty("defaultValue")&&mc(t,e.type,mr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function om(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mc(t,e,n){(e!=="number"||Fa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ri=Array.isArray;function Es(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function pc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function am(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(Ri(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mr(n)}}function Wg(t,e){var n=mr(e.value),r=mr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function lm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Gg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Gg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zo,Qg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zo=Zo||document.createElement("div"),Zo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Li={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},O1=["Webkit","ms","Moz","O"];Object.keys(Li).forEach(function(t){O1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Li[e]=Li[t]})});function Kg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Li.hasOwnProperty(t)&&Li[t]?(""+e).trim():e+"px"}function Yg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Kg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var L1=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yc(t,e){if(e){if(L1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function vc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xc=null;function Vd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _c=null,bs=null,Ts=null;function um(t){if(t=ko(t)){if(typeof _c!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Rl(e),_c(t.stateNode,t.type,e))}}function Xg(t){bs?Ts?Ts.push(t):Ts=[t]:bs=t}function Jg(){if(bs){var t=bs,e=Ts;if(Ts=bs=null,um(t),e)for(t=0;t<e.length;t++)um(e[t])}}function Zg(t,e){return t(e)}function e0(){}var Iu=!1;function t0(t,e,n){if(Iu)return t(e,n);Iu=!0;try{return Zg(t,e,n)}finally{Iu=!1,(bs!==null||Ts!==null)&&(e0(),Jg())}}function eo(t,e){var n=t.stateNode;if(n===null)return null;var r=Rl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var wc=!1;if(Cn)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){wc=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{wc=!1}function F1(t,e,n,r,s,i,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var Fi=!1,Ua=null,za=!1,Ec=null,U1={onError:function(t){Fi=!0,Ua=t}};function z1(t,e,n,r,s,i,o,u,c){Fi=!1,Ua=null,F1.apply(U1,arguments)}function $1(t,e,n,r,s,i,o,u,c){if(z1.apply(this,arguments),Fi){if(Fi){var h=Ua;Fi=!1,Ua=null}else throw Error(q(198));za||(za=!0,Ec=h)}}function Jr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function n0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cm(t){if(Jr(t)!==t)throw Error(q(188))}function B1(t){var e=t.alternate;if(!e){if(e=Jr(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return cm(s),t;if(i===r)return cm(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function r0(t){return t=B1(t),t!==null?s0(t):null}function s0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=s0(t);if(e!==null)return e;t=t.sibling}return null}var i0=zt.unstable_scheduleCallback,dm=zt.unstable_cancelCallback,q1=zt.unstable_shouldYield,H1=zt.unstable_requestPaint,qe=zt.unstable_now,W1=zt.unstable_getCurrentPriorityLevel,Md=zt.unstable_ImmediatePriority,o0=zt.unstable_UserBlockingPriority,$a=zt.unstable_NormalPriority,G1=zt.unstable_LowPriority,a0=zt.unstable_IdlePriority,Il=null,mn=null;function Q1(t){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Il,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:X1,K1=Math.log,Y1=Math.LN2;function X1(t){return t>>>=0,t===0?32:31-(K1(t)/Y1|0)|0}var ea=64,ta=4194304;function ji(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ba(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=ji(u):(i&=o,i!==0&&(r=ji(i)))}else o=n&~s,o!==0?r=ji(o):i!==0&&(r=ji(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nn(e),s=1<<n,r|=t[n],e&=~s;return r}function J1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-nn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=J1(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function bc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function l0(){var t=ea;return ea<<=1,!(ea&4194240)&&(ea=64),t}function Au(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ao(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nn(e),t[e]=n}function e_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-nn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Od(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function u0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var c0,Ld,d0,h0,f0,Tc=!1,na=[],nr=null,rr=null,sr=null,to=new Map,no=new Map,Xn=[],t_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hm(t,e){switch(t){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":to.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":no.delete(e.pointerId)}}function _i(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ko(e),e!==null&&Ld(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function n_(t,e,n,r,s){switch(e){case"focusin":return nr=_i(nr,t,e,n,r,s),!0;case"dragenter":return rr=_i(rr,t,e,n,r,s),!0;case"mouseover":return sr=_i(sr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return to.set(i,_i(to.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,no.set(i,_i(no.get(i)||null,t,e,n,r,s)),!0}return!1}function m0(t){var e=Or(t.target);if(e!==null){var n=Jr(e);if(n!==null){if(e=n.tag,e===13){if(e=n0(n),e!==null){t.blockedOn=e,f0(t.priority,function(){d0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ea(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xc=r,n.target.dispatchEvent(r),xc=null}else return e=ko(n),e!==null&&Ld(e),t.blockedOn=n,!1;e.shift()}return!0}function fm(t,e,n){Ea(t)&&n.delete(e)}function r_(){Tc=!1,nr!==null&&Ea(nr)&&(nr=null),rr!==null&&Ea(rr)&&(rr=null),sr!==null&&Ea(sr)&&(sr=null),to.forEach(fm),no.forEach(fm)}function wi(t,e){t.blockedOn===e&&(t.blockedOn=null,Tc||(Tc=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,r_)))}function ro(t){function e(s){return wi(s,t)}if(0<na.length){wi(na[0],t);for(var n=1;n<na.length;n++){var r=na[n];r.blockedOn===t&&(r.blockedOn=null)}}for(nr!==null&&wi(nr,t),rr!==null&&wi(rr,t),sr!==null&&wi(sr,t),to.forEach(e),no.forEach(e),n=0;n<Xn.length;n++)r=Xn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)m0(n),n.blockedOn===null&&Xn.shift()}var Ss=On.ReactCurrentBatchConfig,qa=!0;function s_(t,e,n,r){var s=we,i=Ss.transition;Ss.transition=null;try{we=1,Fd(t,e,n,r)}finally{we=s,Ss.transition=i}}function i_(t,e,n,r){var s=we,i=Ss.transition;Ss.transition=null;try{we=4,Fd(t,e,n,r)}finally{we=s,Ss.transition=i}}function Fd(t,e,n,r){if(qa){var s=Sc(t,e,n,r);if(s===null)Lu(t,e,r,Ha,n),hm(t,r);else if(n_(s,t,e,n,r))r.stopPropagation();else if(hm(t,r),e&4&&-1<t_.indexOf(t)){for(;s!==null;){var i=ko(s);if(i!==null&&c0(i),i=Sc(t,e,n,r),i===null&&Lu(t,e,r,Ha,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Lu(t,e,r,null,n)}}var Ha=null;function Sc(t,e,n,r){if(Ha=null,t=Vd(r),t=Or(t),t!==null)if(e=Jr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=n0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ha=t,null}function p0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W1()){case Md:return 1;case o0:return 4;case $a:case G1:return 16;case a0:return 536870912;default:return 16}default:return 16}}var Zn=null,Ud=null,ba=null;function g0(){if(ba)return ba;var t,e=Ud,n=e.length,r,s="value"in Zn?Zn.value:Zn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ba=s.slice(t,1<r?1-r:void 0)}function Ta(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ra(){return!0}function mm(){return!1}function Bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ra:mm,this.isPropagationStopped=mm,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),e}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zd=Bt(Hs),Co=Me({},Hs,{view:0,detail:0}),o_=Bt(Co),Cu,ku,Ei,Al=Me({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$d,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ei&&(Ei&&t.type==="mousemove"?(Cu=t.screenX-Ei.screenX,ku=t.screenY-Ei.screenY):ku=Cu=0,Ei=t),Cu)},movementY:function(t){return"movementY"in t?t.movementY:ku}}),pm=Bt(Al),a_=Me({},Al,{dataTransfer:0}),l_=Bt(a_),u_=Me({},Co,{relatedTarget:0}),Ru=Bt(u_),c_=Me({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),d_=Bt(c_),h_=Me({},Hs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),f_=Bt(h_),m_=Me({},Hs,{data:0}),gm=Bt(m_),p_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=y_[t])?!!e[t]:!1}function $d(){return v_}var x_=Me({},Co,{key:function(t){if(t.key){var e=p_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ta(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?g_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$d,charCode:function(t){return t.type==="keypress"?Ta(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ta(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),__=Bt(x_),w_=Me({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ym=Bt(w_),E_=Me({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$d}),b_=Bt(E_),T_=Me({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),S_=Bt(T_),N_=Me({},Al,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),I_=Bt(N_),A_=[9,13,27,32],Bd=Cn&&"CompositionEvent"in window,Ui=null;Cn&&"documentMode"in document&&(Ui=document.documentMode);var C_=Cn&&"TextEvent"in window&&!Ui,y0=Cn&&(!Bd||Ui&&8<Ui&&11>=Ui),vm=" ",xm=!1;function v0(t,e){switch(t){case"keyup":return A_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hs=!1;function k_(t,e){switch(t){case"compositionend":return x0(e);case"keypress":return e.which!==32?null:(xm=!0,vm);case"textInput":return t=e.data,t===vm&&xm?null:t;default:return null}}function R_(t,e){if(hs)return t==="compositionend"||!Bd&&v0(t,e)?(t=g0(),ba=Ud=Zn=null,hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return y0&&e.locale!=="ko"?null:e.data;default:return null}}var j_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _m(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!j_[t.type]:e==="textarea"}function _0(t,e,n,r){Xg(r),e=Wa(e,"onChange"),0<e.length&&(n=new zd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zi=null,so=null;function P_(t){R0(t,0)}function Cl(t){var e=ps(t);if(qg(e))return t}function D_(t,e){if(t==="change")return e}var w0=!1;if(Cn){var ju;if(Cn){var Pu="oninput"in document;if(!Pu){var wm=document.createElement("div");wm.setAttribute("oninput","return;"),Pu=typeof wm.oninput=="function"}ju=Pu}else ju=!1;w0=ju&&(!document.documentMode||9<document.documentMode)}function Em(){zi&&(zi.detachEvent("onpropertychange",E0),so=zi=null)}function E0(t){if(t.propertyName==="value"&&Cl(so)){var e=[];_0(e,so,t,Vd(t)),t0(P_,e)}}function V_(t,e,n){t==="focusin"?(Em(),zi=e,so=n,zi.attachEvent("onpropertychange",E0)):t==="focusout"&&Em()}function M_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cl(so)}function O_(t,e){if(t==="click")return Cl(e)}function L_(t,e){if(t==="input"||t==="change")return Cl(e)}function F_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:F_;function io(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ac.call(e,s)||!on(t[s],e[s]))return!1}return!0}function bm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tm(t,e){var n=bm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bm(n)}}function b0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?b0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function T0(){for(var t=window,e=Fa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fa(t.document)}return e}function qd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function U_(t){var e=T0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&b0(n.ownerDocument.documentElement,n)){if(r!==null&&qd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Tm(n,i);var o=Tm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var z_=Cn&&"documentMode"in document&&11>=document.documentMode,fs=null,Nc=null,$i=null,Ic=!1;function Sm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ic||fs==null||fs!==Fa(r)||(r=fs,"selectionStart"in r&&qd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$i&&io($i,r)||($i=r,r=Wa(Nc,"onSelect"),0<r.length&&(e=new zd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fs)))}function sa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ms={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionend:sa("Transition","TransitionEnd")},Du={},S0={};Cn&&(S0=document.createElement("div").style,"AnimationEvent"in window||(delete ms.animationend.animation,delete ms.animationiteration.animation,delete ms.animationstart.animation),"TransitionEvent"in window||delete ms.transitionend.transition);function kl(t){if(Du[t])return Du[t];if(!ms[t])return t;var e=ms[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in S0)return Du[t]=e[n];return t}var N0=kl("animationend"),I0=kl("animationiteration"),A0=kl("animationstart"),C0=kl("transitionend"),k0=new Map,Nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(t,e){k0.set(t,e),Xr(e,[t])}for(var Vu=0;Vu<Nm.length;Vu++){var Mu=Nm[Vu],$_=Mu.toLowerCase(),B_=Mu[0].toUpperCase()+Mu.slice(1);Er($_,"on"+B_)}Er(N0,"onAnimationEnd");Er(I0,"onAnimationIteration");Er(A0,"onAnimationStart");Er("dblclick","onDoubleClick");Er("focusin","onFocus");Er("focusout","onBlur");Er(C0,"onTransitionEnd");Rs("onMouseEnter",["mouseout","mouseover"]);Rs("onMouseLeave",["mouseout","mouseover"]);Rs("onPointerEnter",["pointerout","pointerover"]);Rs("onPointerLeave",["pointerout","pointerover"]);Xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function Im(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$1(r,e,void 0,t),t.currentTarget=null}function R0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Im(s,u,h),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Im(s,u,h),i=c}}}if(za)throw t=Ec,za=!1,Ec=null,t}function Ce(t,e){var n=e[jc];n===void 0&&(n=e[jc]=new Set);var r=t+"__bubble";n.has(r)||(j0(e,t,2,!1),n.add(r))}function Ou(t,e,n){var r=0;e&&(r|=4),j0(n,t,r,e)}var ia="_reactListening"+Math.random().toString(36).slice(2);function oo(t){if(!t[ia]){t[ia]=!0,Fg.forEach(function(n){n!=="selectionchange"&&(q_.has(n)||Ou(n,!1,t),Ou(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ia]||(e[ia]=!0,Ou("selectionchange",!1,e))}}function j0(t,e,n,r){switch(p0(e)){case 1:var s=s_;break;case 4:s=i_;break;default:s=Fd}n=s.bind(null,e,n,t),s=void 0,!wc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Lu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Or(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}t0(function(){var h=i,m=Vd(n),p=[];e:{var g=k0.get(t);if(g!==void 0){var I=zd,C=t;switch(t){case"keypress":if(Ta(n)===0)break e;case"keydown":case"keyup":I=__;break;case"focusin":C="focus",I=Ru;break;case"focusout":C="blur",I=Ru;break;case"beforeblur":case"afterblur":I=Ru;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=pm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=l_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=b_;break;case N0:case I0:case A0:I=d_;break;case C0:I=S_;break;case"scroll":I=o_;break;case"wheel":I=I_;break;case"copy":case"cut":case"paste":I=f_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=ym}var j=(e&4)!==0,P=!j&&t==="scroll",S=j?g!==null?g+"Capture":null:g;j=[];for(var w=h,A;w!==null;){A=w;var V=A.stateNode;if(A.tag===5&&V!==null&&(A=V,S!==null&&(V=eo(w,S),V!=null&&j.push(ao(w,V,A)))),P)break;w=w.return}0<j.length&&(g=new I(g,C,null,n,m),p.push({event:g,listeners:j}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",g&&n!==xc&&(C=n.relatedTarget||n.fromElement)&&(Or(C)||C[kn]))break e;if((I||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,I?(C=n.relatedTarget||n.toElement,I=h,C=C?Or(C):null,C!==null&&(P=Jr(C),C!==P||C.tag!==5&&C.tag!==6)&&(C=null)):(I=null,C=h),I!==C)){if(j=pm,V="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(j=ym,V="onPointerLeave",S="onPointerEnter",w="pointer"),P=I==null?g:ps(I),A=C==null?g:ps(C),g=new j(V,w+"leave",I,n,m),g.target=P,g.relatedTarget=A,V=null,Or(m)===h&&(j=new j(S,w+"enter",C,n,m),j.target=A,j.relatedTarget=P,V=j),P=V,I&&C)t:{for(j=I,S=C,w=0,A=j;A;A=is(A))w++;for(A=0,V=S;V;V=is(V))A++;for(;0<w-A;)j=is(j),w--;for(;0<A-w;)S=is(S),A--;for(;w--;){if(j===S||S!==null&&j===S.alternate)break t;j=is(j),S=is(S)}j=null}else j=null;I!==null&&Am(p,g,I,j,!1),C!==null&&P!==null&&Am(p,P,C,j,!0)}}e:{if(g=h?ps(h):window,I=g.nodeName&&g.nodeName.toLowerCase(),I==="select"||I==="input"&&g.type==="file")var M=D_;else if(_m(g))if(w0)M=L_;else{M=M_;var O=V_}else(I=g.nodeName)&&I.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=O_);if(M&&(M=M(t,h))){_0(p,M,n,m);break e}O&&O(t,g,h),t==="focusout"&&(O=g._wrapperState)&&O.controlled&&g.type==="number"&&mc(g,"number",g.value)}switch(O=h?ps(h):window,t){case"focusin":(_m(O)||O.contentEditable==="true")&&(fs=O,Nc=h,$i=null);break;case"focusout":$i=Nc=fs=null;break;case"mousedown":Ic=!0;break;case"contextmenu":case"mouseup":case"dragend":Ic=!1,Sm(p,n,m);break;case"selectionchange":if(z_)break;case"keydown":case"keyup":Sm(p,n,m)}var x;if(Bd)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else hs?v0(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(y0&&n.locale!=="ko"&&(hs||y!=="onCompositionStart"?y==="onCompositionEnd"&&hs&&(x=g0()):(Zn=m,Ud="value"in Zn?Zn.value:Zn.textContent,hs=!0)),O=Wa(h,y),0<O.length&&(y=new gm(y,t,null,n,m),p.push({event:y,listeners:O}),x?y.data=x:(x=x0(n),x!==null&&(y.data=x)))),(x=C_?k_(t,n):R_(t,n))&&(h=Wa(h,"onBeforeInput"),0<h.length&&(m=new gm("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:h}),m.data=x))}R0(p,e)})}function ao(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=eo(t,n),i!=null&&r.unshift(ao(t,i,s)),i=eo(t,e),i!=null&&r.push(ao(t,i,s))),t=t.return}return r}function is(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Am(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,s?(c=eo(n,i),c!=null&&o.unshift(ao(n,c,u))):s||(c=eo(n,i),c!=null&&o.push(ao(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var H_=/\r\n?/g,W_=/\u0000|\uFFFD/g;function Cm(t){return(typeof t=="string"?t:""+t).replace(H_,`
`).replace(W_,"")}function oa(t,e,n){if(e=Cm(e),Cm(t)!==e&&n)throw Error(q(425))}function Ga(){}var Ac=null,Cc=null;function kc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rc=typeof setTimeout=="function"?setTimeout:void 0,G_=typeof clearTimeout=="function"?clearTimeout:void 0,km=typeof Promise=="function"?Promise:void 0,Q_=typeof queueMicrotask=="function"?queueMicrotask:typeof km<"u"?function(t){return km.resolve(null).then(t).catch(K_)}:Rc;function K_(t){setTimeout(function(){throw t})}function Fu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ro(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ro(e)}function ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),fn="__reactFiber$"+Ws,lo="__reactProps$"+Ws,kn="__reactContainer$"+Ws,jc="__reactEvents$"+Ws,Y_="__reactListeners$"+Ws,X_="__reactHandles$"+Ws;function Or(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Rm(t);t!==null;){if(n=t[fn])return n;t=Rm(t)}return e}t=n,n=t.parentNode}return null}function ko(t){return t=t[fn]||t[kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Rl(t){return t[lo]||null}var Pc=[],gs=-1;function br(t){return{current:t}}function Re(t){0>gs||(t.current=Pc[gs],Pc[gs]=null,gs--)}function Ie(t,e){gs++,Pc[gs]=t.current,t.current=e}var pr={},_t=br(pr),Rt=br(!1),qr=pr;function js(t,e){var n=t.type.contextTypes;if(!n)return pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function Qa(){Re(Rt),Re(_t)}function jm(t,e,n){if(_t.current!==pr)throw Error(q(168));Ie(_t,e),Ie(Rt,n)}function P0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,V1(t)||"Unknown",s));return Me({},n,r)}function Ka(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pr,qr=_t.current,Ie(_t,t),Ie(Rt,Rt.current),!0}function Pm(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=P0(t,e,qr),r.__reactInternalMemoizedMergedChildContext=t,Re(Rt),Re(_t),Ie(_t,t)):Re(Rt),Ie(Rt,n)}var Tn=null,jl=!1,Uu=!1;function D0(t){Tn===null?Tn=[t]:Tn.push(t)}function J_(t){jl=!0,D0(t)}function Tr(){if(!Uu&&Tn!==null){Uu=!0;var t=0,e=we;try{var n=Tn;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tn=null,jl=!1}catch(s){throw Tn!==null&&(Tn=Tn.slice(t+1)),i0(Md,Tr),s}finally{we=e,Uu=!1}}return null}var ys=[],vs=0,Ya=null,Xa=0,Ht=[],Wt=0,Hr=null,Sn=1,Nn="";function Dr(t,e){ys[vs++]=Xa,ys[vs++]=Ya,Ya=t,Xa=e}function V0(t,e,n){Ht[Wt++]=Sn,Ht[Wt++]=Nn,Ht[Wt++]=Hr,Hr=t;var r=Sn;t=Nn;var s=32-nn(r)-1;r&=~(1<<s),n+=1;var i=32-nn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Sn=1<<32-nn(e)+s|n<<s|r,Nn=i+t}else Sn=1<<i|n<<s|r,Nn=t}function Hd(t){t.return!==null&&(Dr(t,1),V0(t,1,0))}function Wd(t){for(;t===Ya;)Ya=ys[--vs],ys[vs]=null,Xa=ys[--vs],ys[vs]=null;for(;t===Hr;)Hr=Ht[--Wt],Ht[Wt]=null,Nn=Ht[--Wt],Ht[Wt]=null,Sn=Ht[--Wt],Ht[Wt]=null}var Ut=null,Lt=null,je=!1,tn=null;function M0(t,e){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,Lt=ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hr!==null?{id:Sn,overflow:Nn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,Lt=null,!0):!1;default:return!1}}function Dc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vc(t){if(je){var e=Lt;if(e){var n=e;if(!Dm(t,e)){if(Dc(t))throw Error(q(418));e=ir(n.nextSibling);var r=Ut;e&&Dm(t,e)?M0(r,n):(t.flags=t.flags&-4097|2,je=!1,Ut=t)}}else{if(Dc(t))throw Error(q(418));t.flags=t.flags&-4097|2,je=!1,Ut=t}}}function Vm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function aa(t){if(t!==Ut)return!1;if(!je)return Vm(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kc(t.type,t.memoizedProps)),e&&(e=Lt)){if(Dc(t))throw O0(),Error(q(418));for(;e;)M0(t,e),e=ir(e.nextSibling)}if(Vm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Ut?ir(t.stateNode.nextSibling):null;return!0}function O0(){for(var t=Lt;t;)t=ir(t.nextSibling)}function Ps(){Lt=Ut=null,je=!1}function Gd(t){tn===null?tn=[t]:tn.push(t)}var Z_=On.ReactCurrentBatchConfig;function bi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function la(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mm(t){var e=t._init;return e(t._payload)}function L0(t){function e(S,w){if(t){var A=S.deletions;A===null?(S.deletions=[w],S.flags|=16):A.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function s(S,w){return S=ur(S,w),S.index=0,S.sibling=null,S}function i(S,w,A){return S.index=A,t?(A=S.alternate,A!==null?(A=A.index,A<w?(S.flags|=2,w):A):(S.flags|=2,w)):(S.flags|=1048576,w)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,w,A,V){return w===null||w.tag!==6?(w=Gu(A,S.mode,V),w.return=S,w):(w=s(w,A),w.return=S,w)}function c(S,w,A,V){var M=A.type;return M===ds?m(S,w,A.props.children,V,A.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Kn&&Mm(M)===w.type)?(V=s(w,A.props),V.ref=bi(S,w,A),V.return=S,V):(V=Ra(A.type,A.key,A.props,null,S.mode,V),V.ref=bi(S,w,A),V.return=S,V)}function h(S,w,A,V){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=Qu(A,S.mode,V),w.return=S,w):(w=s(w,A.children||[]),w.return=S,w)}function m(S,w,A,V,M){return w===null||w.tag!==7?(w=$r(A,S.mode,V,M),w.return=S,w):(w=s(w,A),w.return=S,w)}function p(S,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Gu(""+w,S.mode,A),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xo:return A=Ra(w.type,w.key,w.props,null,S.mode,A),A.ref=bi(S,null,w),A.return=S,A;case cs:return w=Qu(w,S.mode,A),w.return=S,w;case Kn:var V=w._init;return p(S,V(w._payload),A)}if(Ri(w)||vi(w))return w=$r(w,S.mode,A,null),w.return=S,w;la(S,w)}return null}function g(S,w,A,V){var M=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return M!==null?null:u(S,w,""+A,V);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Xo:return A.key===M?c(S,w,A,V):null;case cs:return A.key===M?h(S,w,A,V):null;case Kn:return M=A._init,g(S,w,M(A._payload),V)}if(Ri(A)||vi(A))return M!==null?null:m(S,w,A,V,null);la(S,A)}return null}function I(S,w,A,V,M){if(typeof V=="string"&&V!==""||typeof V=="number")return S=S.get(A)||null,u(w,S,""+V,M);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Xo:return S=S.get(V.key===null?A:V.key)||null,c(w,S,V,M);case cs:return S=S.get(V.key===null?A:V.key)||null,h(w,S,V,M);case Kn:var O=V._init;return I(S,w,A,O(V._payload),M)}if(Ri(V)||vi(V))return S=S.get(A)||null,m(w,S,V,M,null);la(w,V)}return null}function C(S,w,A,V){for(var M=null,O=null,x=w,y=w=0,_=null;x!==null&&y<A.length;y++){x.index>y?(_=x,x=null):_=x.sibling;var E=g(S,x,A[y],V);if(E===null){x===null&&(x=_);break}t&&x&&E.alternate===null&&e(S,x),w=i(E,w,y),O===null?M=E:O.sibling=E,O=E,x=_}if(y===A.length)return n(S,x),je&&Dr(S,y),M;if(x===null){for(;y<A.length;y++)x=p(S,A[y],V),x!==null&&(w=i(x,w,y),O===null?M=x:O.sibling=x,O=x);return je&&Dr(S,y),M}for(x=r(S,x);y<A.length;y++)_=I(x,S,y,A[y],V),_!==null&&(t&&_.alternate!==null&&x.delete(_.key===null?y:_.key),w=i(_,w,y),O===null?M=_:O.sibling=_,O=_);return t&&x.forEach(function(T){return e(S,T)}),je&&Dr(S,y),M}function j(S,w,A,V){var M=vi(A);if(typeof M!="function")throw Error(q(150));if(A=M.call(A),A==null)throw Error(q(151));for(var O=M=null,x=w,y=w=0,_=null,E=A.next();x!==null&&!E.done;y++,E=A.next()){x.index>y?(_=x,x=null):_=x.sibling;var T=g(S,x,E.value,V);if(T===null){x===null&&(x=_);break}t&&x&&T.alternate===null&&e(S,x),w=i(T,w,y),O===null?M=T:O.sibling=T,O=T,x=_}if(E.done)return n(S,x),je&&Dr(S,y),M;if(x===null){for(;!E.done;y++,E=A.next())E=p(S,E.value,V),E!==null&&(w=i(E,w,y),O===null?M=E:O.sibling=E,O=E);return je&&Dr(S,y),M}for(x=r(S,x);!E.done;y++,E=A.next())E=I(x,S,y,E.value,V),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?y:E.key),w=i(E,w,y),O===null?M=E:O.sibling=E,O=E);return t&&x.forEach(function(N){return e(S,N)}),je&&Dr(S,y),M}function P(S,w,A,V){if(typeof A=="object"&&A!==null&&A.type===ds&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Xo:e:{for(var M=A.key,O=w;O!==null;){if(O.key===M){if(M=A.type,M===ds){if(O.tag===7){n(S,O.sibling),w=s(O,A.props.children),w.return=S,S=w;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Kn&&Mm(M)===O.type){n(S,O.sibling),w=s(O,A.props),w.ref=bi(S,O,A),w.return=S,S=w;break e}n(S,O);break}else e(S,O);O=O.sibling}A.type===ds?(w=$r(A.props.children,S.mode,V,A.key),w.return=S,S=w):(V=Ra(A.type,A.key,A.props,null,S.mode,V),V.ref=bi(S,w,A),V.return=S,S=V)}return o(S);case cs:e:{for(O=A.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(S,w.sibling),w=s(w,A.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=Qu(A,S.mode,V),w.return=S,S=w}return o(S);case Kn:return O=A._init,P(S,w,O(A._payload),V)}if(Ri(A))return C(S,w,A,V);if(vi(A))return j(S,w,A,V);la(S,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(S,w.sibling),w=s(w,A),w.return=S,S=w):(n(S,w),w=Gu(A,S.mode,V),w.return=S,S=w),o(S)):n(S,w)}return P}var Ds=L0(!0),F0=L0(!1),Ja=br(null),Za=null,xs=null,Qd=null;function Kd(){Qd=xs=Za=null}function Yd(t){var e=Ja.current;Re(Ja),t._currentValue=e}function Mc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ns(t,e){Za=t,Qd=xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(Qd!==t)if(t={context:t,memoizedValue:e,next:null},xs===null){if(Za===null)throw Error(q(308));xs=t,Za.dependencies={lanes:0,firstContext:t}}else xs=xs.next=t;return e}var Lr=null;function Xd(t){Lr===null?Lr=[t]:Lr.push(t)}function U0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Xd(e)):(n.next=s.next,s.next=n),e.interleaved=n,Rn(t,r)}function Rn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yn=!1;function Jd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function In(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Rn(t,n)}return s=r.interleaved,s===null?(e.next=e,Xd(r)):(e.next=s.next,s.next=e),r.interleaved=e,Rn(t,n)}function Sa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Od(t,n)}}function Om(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function el(t,e,n,r){var s=t.updateQueue;Yn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==o&&(u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,m=h=c=null,u=i;do{var g=u.lane,I=u.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:I,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var C=t,j=u;switch(g=e,I=n,j.tag){case 1:if(C=j.payload,typeof C=="function"){p=C.call(I,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=j.payload,g=typeof C=="function"?C.call(I,p,g):C,g==null)break e;p=Me({},p,g);break e;case 2:Yn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[u]:g.push(u))}else I={eventTime:I,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(h=m=I,c=p):m=m.next=I,o|=g;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;g=u,u=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(c=p),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Gr|=o,t.lanes=o,t.memoizedState=p}}function Lm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var Ro={},pn=br(Ro),uo=br(Ro),co=br(Ro);function Fr(t){if(t===Ro)throw Error(q(174));return t}function Zd(t,e){switch(Ie(co,e),Ie(uo,t),Ie(pn,Ro),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gc(e,t)}Re(pn),Ie(pn,e)}function Vs(){Re(pn),Re(uo),Re(co)}function $0(t){Fr(co.current);var e=Fr(pn.current),n=gc(e,t.type);e!==n&&(Ie(uo,t),Ie(pn,n))}function eh(t){uo.current===t&&(Re(pn),Re(uo))}var De=br(0);function tl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zu=[];function th(){for(var t=0;t<zu.length;t++)zu[t]._workInProgressVersionPrimary=null;zu.length=0}var Na=On.ReactCurrentDispatcher,$u=On.ReactCurrentBatchConfig,Wr=0,Ve=null,Je=null,st=null,nl=!1,Bi=!1,ho=0,ew=0;function mt(){throw Error(q(321))}function nh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function rh(t,e,n,r,s,i){if(Wr=i,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Na.current=t===null||t.memoizedState===null?sw:iw,t=n(r,s),Bi){i=0;do{if(Bi=!1,ho=0,25<=i)throw Error(q(301));i+=1,st=Je=null,e.updateQueue=null,Na.current=ow,t=n(r,s)}while(Bi)}if(Na.current=rl,e=Je!==null&&Je.next!==null,Wr=0,st=Je=Ve=null,nl=!1,e)throw Error(q(300));return t}function sh(){var t=ho!==0;return ho=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ve.memoizedState=st=t:st=st.next=t,st}function Xt(){if(Je===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=st===null?Ve.memoizedState:st.next;if(e!==null)st=e,Je=t;else{if(t===null)throw Error(q(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},st===null?Ve.memoizedState=st=t:st=st.next=t}return st}function fo(t,e){return typeof e=="function"?e(t):e}function Bu(t){var e=Xt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=Je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,h=i;do{var m=h.lane;if((Wr&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=p,o=r):c=c.next=p,Ve.lanes|=m,Gr|=m}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=u,on(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ve.lanes|=i,Gr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qu(t){var e=Xt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);on(i,e.memoizedState)||(kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function B0(){}function q0(t,e){var n=Ve,r=Xt(),s=e(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,kt=!0),r=r.queue,ih(G0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,mo(9,W0.bind(null,n,r,s,e),void 0,null),it===null)throw Error(q(349));Wr&30||H0(n,e,s)}return s}function H0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function W0(t,e,n,r){e.value=n,e.getSnapshot=r,Q0(e)&&K0(t)}function G0(t,e,n){return n(function(){Q0(e)&&K0(t)})}function Q0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function K0(t){var e=Rn(t,1);e!==null&&rn(e,t,1,-1)}function Fm(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:t},e.queue=t,t=t.dispatch=rw.bind(null,Ve,t),[e.memoizedState,t]}function mo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Y0(){return Xt().memoizedState}function Ia(t,e,n,r){var s=dn();Ve.flags|=t,s.memoizedState=mo(1|e,n,void 0,r===void 0?null:r)}function Pl(t,e,n,r){var s=Xt();r=r===void 0?null:r;var i=void 0;if(Je!==null){var o=Je.memoizedState;if(i=o.destroy,r!==null&&nh(r,o.deps)){s.memoizedState=mo(e,n,i,r);return}}Ve.flags|=t,s.memoizedState=mo(1|e,n,i,r)}function Um(t,e){return Ia(8390656,8,t,e)}function ih(t,e){return Pl(2048,8,t,e)}function X0(t,e){return Pl(4,2,t,e)}function J0(t,e){return Pl(4,4,t,e)}function Z0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ey(t,e,n){return n=n!=null?n.concat([t]):null,Pl(4,4,Z0.bind(null,e,t),n)}function oh(){}function ty(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ny(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ry(t,e,n){return Wr&21?(on(n,e)||(n=l0(),Ve.lanes|=n,Gr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function tw(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=$u.transition;$u.transition={};try{t(!1),e()}finally{we=n,$u.transition=r}}function sy(){return Xt().memoizedState}function nw(t,e,n){var r=lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},iy(t))oy(e,n);else if(n=U0(t,e,n,r),n!==null){var s=bt();rn(n,t,r,s),ay(n,e,r)}}function rw(t,e,n){var r=lr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(iy(t))oy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,on(u,o)){var c=e.interleaved;c===null?(s.next=s,Xd(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=U0(t,e,s,r),n!==null&&(s=bt(),rn(n,t,r,s),ay(n,e,r))}}function iy(t){var e=t.alternate;return t===Ve||e!==null&&e===Ve}function oy(t,e){Bi=nl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ay(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Od(t,n)}}var rl={readContext:Yt,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},sw={readContext:Yt,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:Um,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ia(4194308,4,Z0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ia(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ia(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=nw.bind(null,Ve,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:Fm,useDebugValue:oh,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=Fm(!1),e=t[0];return t=tw.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ve,s=dn();if(je){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),it===null)throw Error(q(349));Wr&30||H0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Um(G0.bind(null,r,i,t),[t]),r.flags|=2048,mo(9,W0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=dn(),e=it.identifierPrefix;if(je){var n=Nn,r=Sn;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ho++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ew++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iw={readContext:Yt,useCallback:ty,useContext:Yt,useEffect:ih,useImperativeHandle:ey,useInsertionEffect:X0,useLayoutEffect:J0,useMemo:ny,useReducer:Bu,useRef:Y0,useState:function(){return Bu(fo)},useDebugValue:oh,useDeferredValue:function(t){var e=Xt();return ry(e,Je.memoizedState,t)},useTransition:function(){var t=Bu(fo)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:B0,useSyncExternalStore:q0,useId:sy,unstable_isNewReconciler:!1},ow={readContext:Yt,useCallback:ty,useContext:Yt,useEffect:ih,useImperativeHandle:ey,useInsertionEffect:X0,useLayoutEffect:J0,useMemo:ny,useReducer:qu,useRef:Y0,useState:function(){return qu(fo)},useDebugValue:oh,useDeferredValue:function(t){var e=Xt();return Je===null?e.memoizedState=t:ry(e,Je.memoizedState,t)},useTransition:function(){var t=qu(fo)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:B0,useSyncExternalStore:q0,useId:sy,unstable_isNewReconciler:!1};function Zt(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Oc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Dl={isMounted:function(t){return(t=t._reactInternals)?Jr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bt(),s=lr(t),i=In(r,s);i.payload=e,n!=null&&(i.callback=n),e=or(t,i,s),e!==null&&(rn(e,t,s,r),Sa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bt(),s=lr(t),i=In(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=or(t,i,s),e!==null&&(rn(e,t,s,r),Sa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bt(),r=lr(t),s=In(n,r);s.tag=2,e!=null&&(s.callback=e),e=or(t,s,r),e!==null&&(rn(e,t,r,n),Sa(e,t,r))}};function zm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!io(n,r)||!io(s,i):!0}function ly(t,e,n){var r=!1,s=pr,i=e.contextType;return typeof i=="object"&&i!==null?i=Yt(i):(s=jt(e)?qr:_t.current,r=e.contextTypes,i=(r=r!=null)?js(t,s):pr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $m(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Dl.enqueueReplaceState(e,e.state,null)}function Lc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Jd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Yt(i):(i=jt(e)?qr:_t.current,s.context=js(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Oc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Dl.enqueueReplaceState(s,s.state,null),el(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ms(t,e){try{var n="",r=e;do n+=D1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var aw=typeof WeakMap=="function"?WeakMap:Map;function uy(t,e,n){n=In(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){il||(il=!0,Kc=r),Fc(t,e)},n}function cy(t,e,n){n=In(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Fc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Fc(t,e),typeof r!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Bm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new aw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ww.bind(null,t,e,n),e.then(t,t))}function qm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=In(-1,1),e.tag=2,or(n,e,1))),n.lanes|=1),t)}var lw=On.ReactCurrentOwner,kt=!1;function Et(t,e,n,r){e.child=t===null?F0(e,null,n,r):Ds(e,t.child,n,r)}function Wm(t,e,n,r,s){n=n.render;var i=e.ref;return Ns(e,s),r=rh(t,e,n,r,i,s),n=sh(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jn(t,e,s)):(je&&n&&Hd(e),e.flags|=1,Et(t,e,r,s),e.child)}function Gm(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!mh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,dy(t,e,i,r,s)):(t=Ra(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:io,n(o,r)&&t.ref===e.ref)return jn(t,e,s)}return e.flags|=1,t=ur(i,r),t.ref=e.ref,t.return=e,e.child=t}function dy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(io(i,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,jn(t,e,s)}return Uc(t,e,n,r,s)}function hy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(ws,Mt),Mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(ws,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(ws,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ie(ws,Mt),Mt|=r;return Et(t,e,s,n),e.child}function fy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uc(t,e,n,r,s){var i=jt(n)?qr:_t.current;return i=js(e,i),Ns(e,s),n=rh(t,e,n,r,i,s),r=sh(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,jn(t,e,s)):(je&&r&&Hd(e),e.flags|=1,Et(t,e,n,s),e.child)}function Qm(t,e,n,r,s){if(jt(n)){var i=!0;Ka(e)}else i=!1;if(Ns(e,s),e.stateNode===null)Aa(t,e),ly(e,n,r),Lc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Yt(h):(h=jt(n)?qr:_t.current,h=js(e,h));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&$m(e,o,r,h),Yn=!1;var g=e.memoizedState;o.state=g,el(e,r,o,s),c=e.memoizedState,u!==r||g!==c||Rt.current||Yn?(typeof m=="function"&&(Oc(e,n,m,r),c=e.memoizedState),(u=Yn||zm(e,n,u,r,g,c,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,z0(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:Zt(e.type,u),o.props=h,p=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Yt(c):(c=jt(n)?qr:_t.current,c=js(e,c));var I=n.getDerivedStateFromProps;(m=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==p||g!==c)&&$m(e,o,r,c),Yn=!1,g=e.memoizedState,o.state=g,el(e,r,o,s);var C=e.memoizedState;u!==p||g!==C||Rt.current||Yn?(typeof I=="function"&&(Oc(e,n,I,r),C=e.memoizedState),(h=Yn||zm(e,n,h,r,g,C,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return zc(t,e,n,r,i,s)}function zc(t,e,n,r,s,i){fy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Pm(e,n,!1),jn(t,e,i);r=e.stateNode,lw.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ds(e,t.child,null,i),e.child=Ds(e,null,u,i)):Et(t,e,u,i),e.memoizedState=r.state,s&&Pm(e,n,!0),e.child}function my(t){var e=t.stateNode;e.pendingContext?jm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jm(t,e.context,!1),Zd(t,e.containerInfo)}function Km(t,e,n,r,s){return Ps(),Gd(s),e.flags|=256,Et(t,e,n,r),e.child}var $c={dehydrated:null,treeContext:null,retryLane:0};function Bc(t){return{baseLanes:t,cachePool:null,transitions:null}}function py(t,e,n){var r=e.pendingProps,s=De.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ie(De,s&1),t===null)return Vc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ol(o,r,0,null),t=$r(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Bc(n),e.memoizedState=$c,t):ah(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return uw(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ur(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=ur(u,i):(i=$r(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Bc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=$c,r}return i=t.child,t=i.sibling,r=ur(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ah(t,e){return e=Ol({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ua(t,e,n,r){return r!==null&&Gd(r),Ds(e,t.child,null,n),t=ah(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uw(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Hu(Error(q(422))),ua(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ol({mode:"visible",children:r.children},s,0,null),i=$r(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ds(e,t.child,null,o),e.child.memoizedState=Bc(o),e.memoizedState=$c,i);if(!(e.mode&1))return ua(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(q(419)),r=Hu(i,r,void 0),ua(t,e,o,r)}if(u=(o&t.childLanes)!==0,kt||u){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Rn(t,s),rn(r,t,s,-1))}return fh(),r=Hu(Error(q(421))),ua(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ew.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Lt=ir(s.nextSibling),Ut=e,je=!0,tn=null,t!==null&&(Ht[Wt++]=Sn,Ht[Wt++]=Nn,Ht[Wt++]=Hr,Sn=t.id,Nn=t.overflow,Hr=e),e=ah(e,r.children),e.flags|=4096,e)}function Ym(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mc(t.return,e,n)}function Wu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function gy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Et(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ym(t,n,e);else if(t.tag===19)Ym(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ie(De,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&tl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Wu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&tl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Wu(e,!0,n,null,i);break;case"together":Wu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Aa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cw(t,e,n){switch(e.tag){case 3:my(e),Ps();break;case 5:$0(e);break;case 1:jt(e.type)&&Ka(e);break;case 4:Zd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ie(Ja,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ie(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?py(t,e,n):(Ie(De,De.current&1),t=jn(t,e,n),t!==null?t.sibling:null);Ie(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return gy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,hy(t,e,n)}return jn(t,e,n)}var yy,qc,vy,xy;yy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qc=function(){};vy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Fr(pn.current);var i=null;switch(n){case"input":s=hc(t,s),r=hc(t,r),i=[];break;case"select":s=Me({},s,{value:void 0}),r=Me({},r,{value:void 0}),i=[];break;case"textarea":s=pc(t,s),r=pc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ga)}yc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ji.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ji.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Ce("scroll",t),i||u===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};xy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ti(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function dw(t,e,n){var r=e.pendingProps;switch(Wd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return jt(e.type)&&Qa(),pt(e),null;case 3:return r=e.stateNode,Vs(),Re(Rt),Re(_t),th(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(aa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tn!==null&&(Jc(tn),tn=null))),qc(t,e),pt(e),null;case 5:eh(e);var s=Fr(co.current);if(n=e.type,t!==null&&e.stateNode!=null)vy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return pt(e),null}if(t=Fr(pn.current),aa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fn]=e,r[lo]=i,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<Pi.length;s++)Ce(Pi[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":im(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":am(r,i),Ce("invalid",r)}yc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&oa(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&oa(r.textContent,u,t),s=["children",""+u]):Ji.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Jo(r),om(r,i,!0);break;case"textarea":Jo(r),lm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ga)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Gg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[lo]=r,yy(t,e,!1,!1),e.stateNode=t;e:{switch(o=vc(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),s=r;break;case"iframe":case"object":case"embed":Ce("load",t),s=r;break;case"video":case"audio":for(s=0;s<Pi.length;s++)Ce(Pi[s],t);s=r;break;case"source":Ce("error",t),s=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),s=r;break;case"details":Ce("toggle",t),s=r;break;case"input":im(t,r),s=hc(t,r),Ce("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Me({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":am(t,r),s=pc(t,r),Ce("invalid",t);break;default:s=r}yc(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?Yg(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Qg(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Zi(t,c):typeof c=="number"&&Zi(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ji.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ce("scroll",t):c!=null&&Rd(t,i,c,o))}switch(n){case"input":Jo(t),om(t,r,!1);break;case"textarea":Jo(t),lm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Es(t,!!r.multiple,i,!1):r.defaultValue!=null&&Es(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ga)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)xy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Fr(co.current),Fr(pn.current),aa(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(i=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:oa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&oa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return pt(e),null;case 13:if(Re(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&Lt!==null&&e.mode&1&&!(e.flags&128))O0(),Ps(),e.flags|=98560,i=!1;else if(i=aa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[fn]=e}else Ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),i=!1}else tn!==null&&(Jc(tn),tn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ze===0&&(Ze=3):fh())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return Vs(),qc(t,e),t===null&&oo(e.stateNode.containerInfo),pt(e),null;case 10:return Yd(e.type._context),pt(e),null;case 17:return jt(e.type)&&Qa(),pt(e),null;case 19:if(Re(De),i=e.memoizedState,i===null)return pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ti(i,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=tl(t),o!==null){for(e.flags|=128,Ti(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(De,De.current&1|2),e.child}t=t.sibling}i.tail!==null&&qe()>Os&&(e.flags|=128,r=!0,Ti(i,!1),e.lanes=4194304)}else{if(!r)if(t=tl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ti(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!je)return pt(e),null}else 2*qe()-i.renderingStartTime>Os&&n!==1073741824&&(e.flags|=128,r=!0,Ti(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qe(),e.sibling=null,n=De.current,Ie(De,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return hh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function hw(t,e){switch(Wd(e),e.tag){case 1:return jt(e.type)&&Qa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vs(),Re(Rt),Re(_t),th(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return eh(e),null;case 13:if(Re(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Ps()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(De),null;case 4:return Vs(),null;case 10:return Yd(e.type._context),null;case 22:case 23:return hh(),null;case 24:return null;default:return null}}var ca=!1,vt=!1,fw=typeof WeakSet=="function"?WeakSet:Set,Y=null;function _s(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function Hc(t,e,n){try{n()}catch(r){ze(t,e,r)}}var Xm=!1;function mw(t,e){if(Ac=qa,t=T0(),qd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,m=0,p=t,g=null;t:for(;;){for(var I;p!==n||s!==0&&p.nodeType!==3||(u=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(I=p.firstChild)!==null;)g=p,p=I;for(;;){if(p===t)break t;if(g===n&&++h===s&&(u=o),g===i&&++m===r&&(c=o),(I=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=I}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cc={focusedElem:t,selectionRange:n},qa=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var j=C.memoizedProps,P=C.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?j:Zt(e.type,j),P);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(V){ze(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return C=Xm,Xm=!1,C}function qi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hc(e,n,i)}s=s.next}while(s!==r)}}function Vl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _y(t){var e=t.alternate;e!==null&&(t.alternate=null,_y(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[lo],delete e[jc],delete e[Y_],delete e[X_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wy(t){return t.tag===5||t.tag===3||t.tag===4}function Jm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ga));else if(r!==4&&(t=t.child,t!==null))for(Gc(t,e,n),t=t.sibling;t!==null;)Gc(t,e,n),t=t.sibling}function Qc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qc(t,e,n),t=t.sibling;t!==null;)Qc(t,e,n),t=t.sibling}var at=null,en=!1;function Hn(t,e,n){for(n=n.child;n!==null;)Ey(t,e,n),n=n.sibling}function Ey(t,e,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Il,n)}catch{}switch(n.tag){case 5:vt||_s(n,e);case 6:var r=at,s=en;at=null,Hn(t,e,n),at=r,en=s,at!==null&&(en?(t=at,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(en?(t=at,n=n.stateNode,t.nodeType===8?Fu(t.parentNode,n):t.nodeType===1&&Fu(t,n),ro(t)):Fu(at,n.stateNode));break;case 4:r=at,s=en,at=n.stateNode.containerInfo,en=!0,Hn(t,e,n),at=r,en=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hc(n,e,o),s=s.next}while(s!==r)}Hn(t,e,n);break;case 1:if(!vt&&(_s(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){ze(n,e,u)}Hn(t,e,n);break;case 21:Hn(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,Hn(t,e,n),vt=r):Hn(t,e,n);break;default:Hn(t,e,n)}}function Zm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fw),e.forEach(function(r){var s=bw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:at=u.stateNode,en=!1;break e;case 3:at=u.stateNode.containerInfo,en=!0;break e;case 4:at=u.stateNode.containerInfo,en=!0;break e}u=u.return}if(at===null)throw Error(q(160));Ey(i,o,s),at=null,en=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){ze(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)by(e,t),e=e.sibling}function by(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),cn(t),r&4){try{qi(3,t,t.return),Vl(3,t)}catch(j){ze(t,t.return,j)}try{qi(5,t,t.return)}catch(j){ze(t,t.return,j)}}break;case 1:Jt(e,t),cn(t),r&512&&n!==null&&_s(n,n.return);break;case 5:if(Jt(e,t),cn(t),r&512&&n!==null&&_s(n,n.return),t.flags&32){var s=t.stateNode;try{Zi(s,"")}catch(j){ze(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Hg(s,i),vc(u,o);var h=vc(u,i);for(o=0;o<c.length;o+=2){var m=c[o],p=c[o+1];m==="style"?Yg(s,p):m==="dangerouslySetInnerHTML"?Qg(s,p):m==="children"?Zi(s,p):Rd(s,m,p,h)}switch(u){case"input":fc(s,i);break;case"textarea":Wg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?Es(s,!!i.multiple,I,!1):g!==!!i.multiple&&(i.defaultValue!=null?Es(s,!!i.multiple,i.defaultValue,!0):Es(s,!!i.multiple,i.multiple?[]:"",!1))}s[lo]=i}catch(j){ze(t,t.return,j)}}break;case 6:if(Jt(e,t),cn(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(j){ze(t,t.return,j)}}break;case 3:if(Jt(e,t),cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ro(e.containerInfo)}catch(j){ze(t,t.return,j)}break;case 4:Jt(e,t),cn(t);break;case 13:Jt(e,t),cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ch=qe())),r&4&&Zm(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(h=vt)||m,Jt(e,t),vt=h):Jt(e,t),cn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(Y=t,m=t.child;m!==null;){for(p=Y=m;Y!==null;){switch(g=Y,I=g.child,g.tag){case 0:case 11:case 14:case 15:qi(4,g,g.return);break;case 1:_s(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(j){ze(r,n,j)}}break;case 5:_s(g,g.return);break;case 22:if(g.memoizedState!==null){tp(p);continue}}I!==null?(I.return=g,Y=I):tp(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Kg("display",o))}catch(j){ze(t,t.return,j)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(j){ze(t,t.return,j)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Jt(e,t),cn(t),r&4&&Zm(t);break;case 21:break;default:Jt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wy(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Zi(s,""),r.flags&=-33);var i=Jm(t);Qc(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=Jm(t);Gc(t,u,o);break;default:throw Error(q(161))}}catch(c){ze(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pw(t,e,n){Y=t,Ty(t)}function Ty(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ca;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||vt;u=ca;var h=vt;if(ca=o,(vt=c)&&!h)for(Y=s;Y!==null;)o=Y,c=o.child,o.tag===22&&o.memoizedState!==null?np(s):c!==null?(c.return=o,Y=c):np(s);for(;i!==null;)Y=i,Ty(i),i=i.sibling;Y=s,ca=u,vt=h}ep(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):ep(t)}}function ep(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Vl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Zt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Lm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lm(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&ro(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}vt||e.flags&512&&Wc(e)}catch(g){ze(e,e.return,g)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function tp(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function np(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vl(4,e)}catch(c){ze(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ze(e,s,c)}}var i=e.return;try{Wc(e)}catch(c){ze(e,i,c)}break;case 5:var o=e.return;try{Wc(e)}catch(c){ze(e,o,c)}}}catch(c){ze(e,e.return,c)}if(e===t){Y=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Y=u;break}Y=e.return}}var gw=Math.ceil,sl=On.ReactCurrentDispatcher,lh=On.ReactCurrentOwner,Kt=On.ReactCurrentBatchConfig,ye=0,it=null,Qe=null,ct=0,Mt=0,ws=br(0),Ze=0,po=null,Gr=0,Ml=0,uh=0,Hi=null,At=null,ch=0,Os=1/0,bn=null,il=!1,Kc=null,ar=null,da=!1,er=null,ol=0,Wi=0,Yc=null,Ca=-1,ka=0;function bt(){return ye&6?qe():Ca!==-1?Ca:Ca=qe()}function lr(t){return t.mode&1?ye&2&&ct!==0?ct&-ct:Z_.transition!==null?(ka===0&&(ka=l0()),ka):(t=we,t!==0||(t=window.event,t=t===void 0?16:p0(t.type)),t):1}function rn(t,e,n,r){if(50<Wi)throw Wi=0,Yc=null,Error(q(185));Ao(t,n,r),(!(ye&2)||t!==it)&&(t===it&&(!(ye&2)&&(Ml|=n),Ze===4&&Jn(t,ct)),Pt(t,r),n===1&&ye===0&&!(e.mode&1)&&(Os=qe()+500,jl&&Tr()))}function Pt(t,e){var n=t.callbackNode;Z1(t,e);var r=Ba(t,t===it?ct:0);if(r===0)n!==null&&dm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&dm(n),e===1)t.tag===0?J_(rp.bind(null,t)):D0(rp.bind(null,t)),Q_(function(){!(ye&6)&&Tr()}),n=null;else{switch(u0(r)){case 1:n=Md;break;case 4:n=o0;break;case 16:n=$a;break;case 536870912:n=a0;break;default:n=$a}n=jy(n,Sy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Sy(t,e){if(Ca=-1,ka=0,ye&6)throw Error(q(327));var n=t.callbackNode;if(Is()&&t.callbackNode!==n)return null;var r=Ba(t,t===it?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=al(t,r);else{e=r;var s=ye;ye|=2;var i=Iy();(it!==t||ct!==e)&&(bn=null,Os=qe()+500,zr(t,e));do try{xw();break}catch(u){Ny(t,u)}while(!0);Kd(),sl.current=i,ye=s,Qe!==null?e=0:(it=null,ct=0,e=Ze)}if(e!==0){if(e===2&&(s=bc(t),s!==0&&(r=s,e=Xc(t,s))),e===1)throw n=po,zr(t,0),Jn(t,r),Pt(t,qe()),n;if(e===6)Jn(t,r);else{if(s=t.current.alternate,!(r&30)&&!yw(s)&&(e=al(t,r),e===2&&(i=bc(t),i!==0&&(r=i,e=Xc(t,i))),e===1))throw n=po,zr(t,0),Jn(t,r),Pt(t,qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Vr(t,At,bn);break;case 3:if(Jn(t,r),(r&130023424)===r&&(e=ch+500-qe(),10<e)){if(Ba(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Rc(Vr.bind(null,t,At,bn),e);break}Vr(t,At,bn);break;case 4:if(Jn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-nn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gw(r/1960))-r,10<r){t.timeoutHandle=Rc(Vr.bind(null,t,At,bn),r);break}Vr(t,At,bn);break;case 5:Vr(t,At,bn);break;default:throw Error(q(329))}}}return Pt(t,qe()),t.callbackNode===n?Sy.bind(null,t):null}function Xc(t,e){var n=Hi;return t.current.memoizedState.isDehydrated&&(zr(t,e).flags|=256),t=al(t,e),t!==2&&(e=At,At=n,e!==null&&Jc(e)),t}function Jc(t){At===null?At=t:At.push.apply(At,t)}function yw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jn(t,e){for(e&=~uh,e&=~Ml,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nn(e),r=1<<n;t[n]=-1,e&=~r}}function rp(t){if(ye&6)throw Error(q(327));Is();var e=Ba(t,0);if(!(e&1))return Pt(t,qe()),null;var n=al(t,e);if(t.tag!==0&&n===2){var r=bc(t);r!==0&&(e=r,n=Xc(t,r))}if(n===1)throw n=po,zr(t,0),Jn(t,e),Pt(t,qe()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vr(t,At,bn),Pt(t,qe()),null}function dh(t,e){var n=ye;ye|=1;try{return t(e)}finally{ye=n,ye===0&&(Os=qe()+500,jl&&Tr())}}function Qr(t){er!==null&&er.tag===0&&!(ye&6)&&Is();var e=ye;ye|=1;var n=Kt.transition,r=we;try{if(Kt.transition=null,we=1,t)return t()}finally{we=r,Kt.transition=n,ye=e,!(ye&6)&&Tr()}}function hh(){Mt=ws.current,Re(ws)}function zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,G_(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(Wd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qa();break;case 3:Vs(),Re(Rt),Re(_t),th();break;case 5:eh(r);break;case 4:Vs();break;case 13:Re(De);break;case 19:Re(De);break;case 10:Yd(r.type._context);break;case 22:case 23:hh()}n=n.return}if(it=t,Qe=t=ur(t.current,null),ct=Mt=e,Ze=0,po=null,uh=Ml=Gr=0,At=Hi=null,Lr!==null){for(e=0;e<Lr.length;e++)if(n=Lr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Lr=null}return t}function Ny(t,e){do{var n=Qe;try{if(Kd(),Na.current=rl,nl){for(var r=Ve.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}nl=!1}if(Wr=0,st=Je=Ve=null,Bi=!1,ho=0,lh.current=null,n===null||n.return===null){Ze=1,po=e,Qe=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=ct,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=u,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var I=qm(o);if(I!==null){I.flags&=-257,Hm(I,o,u,i,e),I.mode&1&&Bm(i,h,e),e=I,c=h;var C=e.updateQueue;if(C===null){var j=new Set;j.add(c),e.updateQueue=j}else C.add(c);break e}else{if(!(e&1)){Bm(i,h,e),fh();break e}c=Error(q(426))}}else if(je&&u.mode&1){var P=qm(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Hm(P,o,u,i,e),Gd(Ms(c,u));break e}}i=c=Ms(c,u),Ze!==4&&(Ze=2),Hi===null?Hi=[i]:Hi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=uy(i,c,e);Om(i,S);break e;case 1:u=c;var w=i.type,A=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ar===null||!ar.has(A)))){i.flags|=65536,e&=-e,i.lanes|=e;var V=cy(i,u,e);Om(i,V);break e}}i=i.return}while(i!==null)}Cy(n)}catch(M){e=M,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function Iy(){var t=sl.current;return sl.current=rl,t===null?rl:t}function fh(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),it===null||!(Gr&268435455)&&!(Ml&268435455)||Jn(it,ct)}function al(t,e){var n=ye;ye|=2;var r=Iy();(it!==t||ct!==e)&&(bn=null,zr(t,e));do try{vw();break}catch(s){Ny(t,s)}while(!0);if(Kd(),ye=n,sl.current=r,Qe!==null)throw Error(q(261));return it=null,ct=0,Ze}function vw(){for(;Qe!==null;)Ay(Qe)}function xw(){for(;Qe!==null&&!q1();)Ay(Qe)}function Ay(t){var e=Ry(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?Cy(t):Qe=e,lh.current=null}function Cy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=hw(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Qe=null;return}}else if(n=dw(n,e,Mt),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);Ze===0&&(Ze=5)}function Vr(t,e,n){var r=we,s=Kt.transition;try{Kt.transition=null,we=1,_w(t,e,n,r)}finally{Kt.transition=s,we=r}return null}function _w(t,e,n,r){do Is();while(er!==null);if(ye&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(e_(t,i),t===it&&(Qe=it=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||da||(da=!0,jy($a,function(){return Is(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kt.transition,Kt.transition=null;var o=we;we=1;var u=ye;ye|=4,lh.current=null,mw(t,n),by(n,t),U_(Cc),qa=!!Ac,Cc=Ac=null,t.current=n,pw(n),H1(),ye=u,we=o,Kt.transition=i}else t.current=n;if(da&&(da=!1,er=t,ol=s),i=t.pendingLanes,i===0&&(ar=null),Q1(n.stateNode),Pt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(il)throw il=!1,t=Kc,Kc=null,t;return ol&1&&t.tag!==0&&Is(),i=t.pendingLanes,i&1?t===Yc?Wi++:(Wi=0,Yc=t):Wi=0,Tr(),null}function Is(){if(er!==null){var t=u0(ol),e=Kt.transition,n=we;try{if(Kt.transition=null,we=16>t?16:t,er===null)var r=!1;else{if(t=er,er=null,ol=0,ye&6)throw Error(q(331));var s=ye;for(ye|=4,Y=t.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(Y=h;Y!==null;){var m=Y;switch(m.tag){case 0:case 11:case 15:qi(8,m,i)}var p=m.child;if(p!==null)p.return=m,Y=p;else for(;Y!==null;){m=Y;var g=m.sibling,I=m.return;if(_y(m),m===h){Y=null;break}if(g!==null){g.return=I,Y=g;break}Y=I}}}var C=i.alternate;if(C!==null){var j=C.child;if(j!==null){C.child=null;do{var P=j.sibling;j.sibling=null,j=P}while(j!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qi(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,Y=S;break e}Y=i.return}}var w=t.current;for(Y=w;Y!==null;){o=Y;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Y=A;else e:for(o=w;Y!==null;){if(u=Y,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Vl(9,u)}}catch(M){ze(u,u.return,M)}if(u===o){Y=null;break e}var V=u.sibling;if(V!==null){V.return=u.return,Y=V;break e}Y=u.return}}if(ye=s,Tr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Il,t)}catch{}r=!0}return r}finally{we=n,Kt.transition=e}}return!1}function sp(t,e,n){e=Ms(n,e),e=uy(t,e,1),t=or(t,e,1),e=bt(),t!==null&&(Ao(t,1,e),Pt(t,e))}function ze(t,e,n){if(t.tag===3)sp(t,t,n);else for(;e!==null;){if(e.tag===3){sp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ar===null||!ar.has(r))){t=Ms(n,t),t=cy(e,t,1),e=or(e,t,1),t=bt(),e!==null&&(Ao(e,1,t),Pt(e,t));break}}e=e.return}}function ww(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ct&n)===n&&(Ze===4||Ze===3&&(ct&130023424)===ct&&500>qe()-ch?zr(t,0):uh|=n),Pt(t,e)}function ky(t,e){e===0&&(t.mode&1?(e=ta,ta<<=1,!(ta&130023424)&&(ta=4194304)):e=1);var n=bt();t=Rn(t,e),t!==null&&(Ao(t,e,n),Pt(t,n))}function Ew(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ky(t,n)}function bw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),ky(t,n)}var Ry;Ry=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,cw(t,e,n);kt=!!(t.flags&131072)}else kt=!1,je&&e.flags&1048576&&V0(e,Xa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Aa(t,e),t=e.pendingProps;var s=js(e,_t.current);Ns(e,n),s=rh(null,e,r,t,s,n);var i=sh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(i=!0,Ka(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jd(e),s.updater=Dl,e.stateNode=s,s._reactInternals=e,Lc(e,r,t,n),e=zc(null,e,r,!0,i,n)):(e.tag=0,je&&i&&Hd(e),Et(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Aa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Sw(r),t=Zt(r,t),s){case 0:e=Uc(null,e,r,t,n);break e;case 1:e=Qm(null,e,r,t,n);break e;case 11:e=Wm(null,e,r,t,n);break e;case 14:e=Gm(null,e,r,Zt(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),Uc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),Qm(t,e,r,s,n);case 3:e:{if(my(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,z0(t,e),el(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ms(Error(q(423)),e),e=Km(t,e,r,n,s);break e}else if(r!==s){s=Ms(Error(q(424)),e),e=Km(t,e,r,n,s);break e}else for(Lt=ir(e.stateNode.containerInfo.firstChild),Ut=e,je=!0,tn=null,n=F0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ps(),r===s){e=jn(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return $0(e),t===null&&Vc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,kc(r,s)?o=null:i!==null&&kc(r,i)&&(e.flags|=32),fy(t,e),Et(t,e,o,n),e.child;case 6:return t===null&&Vc(e),null;case 13:return py(t,e,n);case 4:return Zd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ds(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),Wm(t,e,r,s,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ie(Ja,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!Rt.current){e=jn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=In(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Mc(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Mc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Et(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ns(e,n),s=Yt(s),r=r(s),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,s=Zt(r,e.pendingProps),s=Zt(r.type,s),Gm(t,e,r,s,n);case 15:return dy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),Aa(t,e),e.tag=1,jt(r)?(t=!0,Ka(e)):t=!1,Ns(e,n),ly(e,r,s),Lc(e,r,s,n),zc(null,e,r,!0,t,n);case 19:return gy(t,e,n);case 22:return hy(t,e,n)}throw Error(q(156,e.tag))};function jy(t,e){return i0(t,e)}function Tw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(t,e,n,r){return new Tw(t,e,n,r)}function mh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Sw(t){if(typeof t=="function")return mh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Pd)return 11;if(t===Dd)return 14}return 2}function ur(t,e){var n=t.alternate;return n===null?(n=Qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ra(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")mh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ds:return $r(n.children,s,i,e);case jd:o=8,s|=8;break;case lc:return t=Qt(12,n,e,s|2),t.elementType=lc,t.lanes=i,t;case uc:return t=Qt(13,n,e,s),t.elementType=uc,t.lanes=i,t;case cc:return t=Qt(19,n,e,s),t.elementType=cc,t.lanes=i,t;case $g:return Ol(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ug:o=10;break e;case zg:o=9;break e;case Pd:o=11;break e;case Dd:o=14;break e;case Kn:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Qt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function $r(t,e,n,r){return t=Qt(7,t,r,e),t.lanes=n,t}function Ol(t,e,n,r){return t=Qt(22,t,r,e),t.elementType=$g,t.lanes=n,t.stateNode={isHidden:!1},t}function Gu(t,e,n){return t=Qt(6,t,null,e),t.lanes=n,t}function Qu(t,e,n){return e=Qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Nw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Au(0),this.expirationTimes=Au(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Au(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ph(t,e,n,r,s,i,o,u,c){return t=new Nw(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Qt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jd(i),t}function Iw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Py(t){if(!t)return pr;t=t._reactInternals;e:{if(Jr(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(jt(n))return P0(t,n,e)}return e}function Dy(t,e,n,r,s,i,o,u,c){return t=ph(n,r,!0,t,s,i,o,u,c),t.context=Py(null),n=t.current,r=bt(),s=lr(n),i=In(r,s),i.callback=e??null,or(n,i,s),t.current.lanes=s,Ao(t,s,r),Pt(t,r),t}function Ll(t,e,n,r){var s=e.current,i=bt(),o=lr(s);return n=Py(n),e.context===null?e.context=n:e.pendingContext=n,e=In(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=or(s,e,o),t!==null&&(rn(t,s,o,i),Sa(t,s,o)),o}function ll(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ip(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gh(t,e){ip(t,e),(t=t.alternate)&&ip(t,e)}function Aw(){return null}var Vy=typeof reportError=="function"?reportError:function(t){console.error(t)};function yh(t){this._internalRoot=t}Fl.prototype.render=yh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Ll(t,e,null,null)};Fl.prototype.unmount=yh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qr(function(){Ll(null,t,null,null)}),e[kn]=null}};function Fl(t){this._internalRoot=t}Fl.prototype.unstable_scheduleHydration=function(t){if(t){var e=h0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xn.length&&e!==0&&e<Xn[n].priority;n++);Xn.splice(n,0,t),n===0&&m0(t)}};function vh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ul(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function op(){}function Cw(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=ll(o);i.call(h)}}var o=Dy(e,r,t,0,null,!1,!1,"",op);return t._reactRootContainer=o,t[kn]=o.current,oo(t.nodeType===8?t.parentNode:t),Qr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=ll(c);u.call(h)}}var c=ph(t,0,!1,null,null,!1,!1,"",op);return t._reactRootContainer=c,t[kn]=c.current,oo(t.nodeType===8?t.parentNode:t),Qr(function(){Ll(e,c,n,r)}),c}function zl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=ll(o);u.call(c)}}Ll(e,o,t,s)}else o=Cw(n,e,t,s,r);return ll(o)}c0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ji(e.pendingLanes);n!==0&&(Od(e,n|1),Pt(e,qe()),!(ye&6)&&(Os=qe()+500,Tr()))}break;case 13:Qr(function(){var r=Rn(t,1);if(r!==null){var s=bt();rn(r,t,1,s)}}),gh(t,1)}};Ld=function(t){if(t.tag===13){var e=Rn(t,134217728);if(e!==null){var n=bt();rn(e,t,134217728,n)}gh(t,134217728)}};d0=function(t){if(t.tag===13){var e=lr(t),n=Rn(t,e);if(n!==null){var r=bt();rn(n,t,e,r)}gh(t,e)}};h0=function(){return we};f0=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};_c=function(t,e,n){switch(e){case"input":if(fc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Rl(r);if(!s)throw Error(q(90));qg(r),fc(r,s)}}}break;case"textarea":Wg(t,n);break;case"select":e=n.value,e!=null&&Es(t,!!n.multiple,e,!1)}};Zg=dh;e0=Qr;var kw={usingClientEntryPoint:!1,Events:[ko,ps,Rl,Xg,Jg,dh]},Si={findFiberByHostInstance:Or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rw={bundleType:Si.bundleType,version:Si.version,rendererPackageName:Si.rendererPackageName,rendererConfig:Si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=r0(t),t===null?null:t.stateNode},findFiberByHostInstance:Si.findFiberByHostInstance||Aw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ha=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ha.isDisabled&&ha.supportsFiber)try{Il=ha.inject(Rw),mn=ha}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kw;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vh(e))throw Error(q(200));return Iw(t,e,null,n)};$t.createRoot=function(t,e){if(!vh(t))throw Error(q(299));var n=!1,r="",s=Vy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ph(t,1,!1,null,null,n,!1,r,s),t[kn]=e.current,oo(t.nodeType===8?t.parentNode:t),new yh(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=r0(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return Qr(t)};$t.hydrate=function(t,e,n){if(!Ul(e))throw Error(q(200));return zl(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!vh(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Vy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Dy(e,null,t,1,n??null,s,!1,i,o),t[kn]=e.current,oo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Fl(e)};$t.render=function(t,e,n){if(!Ul(e))throw Error(q(200));return zl(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Ul(t))throw Error(q(40));return t._reactRootContainer?(Qr(function(){zl(null,null,t,!1,function(){t._reactRootContainer=null,t[kn]=null})}),!0):!1};$t.unstable_batchedUpdates=dh;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ul(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return zl(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function My(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(My)}catch(t){console.error(t)}}My(),Mg.exports=$t;var jw=Mg.exports,ap=jw;oc.createRoot=ap.createRoot,oc.hydrateRoot=ap.hydrateRoot;const Pw=()=>{};var lp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Dw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ly={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,m=i>>2,p=(i&3)<<4|u>>4;let g=(u&15)<<2|h>>6,I=h&63;c||(I=64,o||(g=64)),r.push(n[m],n[p],n[g],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Oy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Dw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||h==null||p==null)throw new Vw;const g=i<<2|u>>4;if(r.push(g),h!==64){const I=u<<4&240|h>>2;if(r.push(I),p!==64){const C=h<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Mw=function(t){const e=Oy(t);return Ly.encodeByteArray(e,!0)},ul=function(t){return Mw(t).replace(/\./g,"")},Ow=function(t){try{return Ly.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=()=>Lw().__FIREBASE_DEFAULTS__,Uw=()=>{if(typeof process>"u"||typeof lp>"u")return;const t=lp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ow(t[1]);return e&&JSON.parse(e)},xh=()=>{try{return Pw()||Fw()||Uw()||zw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$w=t=>{var e,n;return(n=(e=xh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Bw=t=>{const e=$w(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Fy=()=>{var t;return(t=xh())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ul(JSON.stringify(n)),ul(JSON.stringify(o)),""].join(".")}const Gi={};function Gw(){const t={prod:[],emulator:[]};for(const e of Object.keys(Gi))Gi[e]?t.emulator.push(e):t.prod.push(e);return t}function Qw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let up=!1;function Kw(t,e){if(typeof window>"u"||typeof document>"u"||!_h(window.location.host)||Gi[t]===e||Gi[t]||up)return;Gi[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=Gw().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function u(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,I){g.setAttribute("width","24"),g.setAttribute("id",I),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{up=!0,o()},g}function m(g,I){g.setAttribute("id",I),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=Qw(r),I=n("text"),C=document.getElementById(I)||document.createElement("span"),j=n("learnmore"),P=document.getElementById(j)||document.createElement("a"),S=n("preprendIcon"),w=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const A=g.element;u(A),m(P,j);const V=h();c(w,S),A.append(w,C,P,V),document.body.appendChild(A)}i?(C.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xw(){var e;const t=(e=xh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jw(){return!Xw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zw(){try{return typeof indexedDB=="object"}catch{return!1}}function eE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="FirebaseError";class Gs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tE,Object.setPrototypeOf(this,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uy.prototype.create)}}class Uy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?nE(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new Gs(s,u,r)}}function nE(t,e){return t.replace(rE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const rE=/\{\$([^}]+)}/g;function cl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(cp(i)&&cp(o)){if(!cl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function cp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t){return t&&t._delegate?t._delegate:t}class go{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oE(e))try{this.getOrInitializeService({instanceIdentifier:Mr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Mr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mr){return this.instances.has(e)}getOptions(e=Mr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mr){return this.component?this.component.multipleInstances?e:Mr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iE(t){return t===Mr?void 0:t}function oE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const lE={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},uE=ge.INFO,cE={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},dE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=cE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zy{constructor(e){this.name=e,this._logLevel=uE,this._logHandler=dE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const hE=(t,e)=>e.some(n=>t instanceof n);let dp,hp;function fE(){return dp||(dp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mE(){return hp||(hp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $y=new WeakMap,Zc=new WeakMap,By=new WeakMap,Ku=new WeakMap,wh=new WeakMap;function pE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(cr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$y.set(n,t)}).catch(()=>{}),wh.set(e,t),e}function gE(t){if(Zc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Zc.set(t,e)}let ed={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||By.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yE(t){ed=t(ed)}function vE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yu(this),e,...n);return By.set(r,e.sort?e.sort():[e]),cr(r)}:mE().includes(t)?function(...e){return t.apply(Yu(this),e),cr($y.get(this))}:function(...e){return cr(t.apply(Yu(this),e))}}function xE(t){return typeof t=="function"?vE(t):(t instanceof IDBTransaction&&gE(t),hE(t,fE())?new Proxy(t,ed):t)}function cr(t){if(t instanceof IDBRequest)return pE(t);if(Ku.has(t))return Ku.get(t);const e=xE(t);return e!==t&&(Ku.set(t,e),wh.set(e,t)),e}const Yu=t=>wh.get(t);function _E(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=cr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(cr(o.result),c.oldVersion,c.newVersion,cr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const wE=["get","getKey","getAll","getAllKeys","count"],EE=["put","add","delete","clear"],Xu=new Map;function fp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xu.get(e))return Xu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=EE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||wE.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return Xu.set(e,i),i}yE(t=>({...t,get:(e,n,r)=>fp(e,n)||t.get(e,n,r),has:(e,n)=>!!fp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function TE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const td="@firebase/app",mp="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new zy("@firebase/app"),SE="@firebase/app-compat",NE="@firebase/analytics-compat",IE="@firebase/analytics",AE="@firebase/app-check-compat",CE="@firebase/app-check",kE="@firebase/auth",RE="@firebase/auth-compat",jE="@firebase/database",PE="@firebase/data-connect",DE="@firebase/database-compat",VE="@firebase/functions",ME="@firebase/functions-compat",OE="@firebase/installations",LE="@firebase/installations-compat",FE="@firebase/messaging",UE="@firebase/messaging-compat",zE="@firebase/performance",$E="@firebase/performance-compat",BE="@firebase/remote-config",qE="@firebase/remote-config-compat",HE="@firebase/storage",WE="@firebase/storage-compat",GE="@firebase/firestore",QE="@firebase/ai",KE="@firebase/firestore-compat",YE="firebase",XE="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd="[DEFAULT]",JE={[td]:"fire-core",[SE]:"fire-core-compat",[IE]:"fire-analytics",[NE]:"fire-analytics-compat",[CE]:"fire-app-check",[AE]:"fire-app-check-compat",[kE]:"fire-auth",[RE]:"fire-auth-compat",[jE]:"fire-rtdb",[PE]:"fire-data-connect",[DE]:"fire-rtdb-compat",[VE]:"fire-fn",[ME]:"fire-fn-compat",[OE]:"fire-iid",[LE]:"fire-iid-compat",[FE]:"fire-fcm",[UE]:"fire-fcm-compat",[zE]:"fire-perf",[$E]:"fire-perf-compat",[BE]:"fire-rc",[qE]:"fire-rc-compat",[HE]:"fire-gcs",[WE]:"fire-gcs-compat",[GE]:"fire-fst",[KE]:"fire-fst-compat",[QE]:"fire-vertex","fire-js":"fire-js",[YE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=new Map,ZE=new Map,rd=new Map;function pp(t,e){try{t.container.addComponent(e)}catch(n){Dn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hl(t){const e=t.name;if(rd.has(e))return Dn.debug(`There were multiple attempts to register component ${e}.`),!1;rd.set(e,t);for(const n of dl.values())pp(n,t);for(const n of ZE.values())pp(n,t);return!0}function e2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function t2(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dr=new Uy("app","Firebase",n2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new go("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=XE;function qy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:nd,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw dr.create("bad-app-name",{appName:String(s)});if(n||(n=Fy()),!n)throw dr.create("no-options");const i=dl.get(s);if(i){if(cl(n,i.options)&&cl(r,i.config))return i;throw dr.create("duplicate-app",{appName:s})}const o=new aE(s);for(const c of rd.values())o.addComponent(c);const u=new r2(n,r,o);return dl.set(s,u),u}function i2(t=nd){const e=dl.get(t);if(!e&&t===nd&&Fy())return qy();if(!e)throw dr.create("no-app",{appName:t});return e}function As(t,e,n){let r=JE[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dn.warn(o.join(" "));return}hl(new go(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="firebase-heartbeat-database",a2=1,yo="firebase-heartbeat-store";let Ju=null;function Hy(){return Ju||(Ju=_E(o2,a2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yo)}catch(n){console.warn(n)}}}}).catch(t=>{throw dr.create("idb-open",{originalErrorMessage:t.message})})),Ju}async function l2(t){try{const n=(await Hy()).transaction(yo),r=await n.objectStore(yo).get(Wy(t));return await n.done,r}catch(e){if(e instanceof Gs)Dn.warn(e.message);else{const n=dr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dn.warn(n.message)}}}async function gp(t,e){try{const r=(await Hy()).transaction(yo,"readwrite");await r.objectStore(yo).put(e,Wy(t)),await r.done}catch(n){if(n instanceof Gs)Dn.warn(n.message);else{const r=dr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dn.warn(r.message)}}}function Wy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=1024,c2=30;class d2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new f2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=yp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>c2){const o=m2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Dn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yp(),{heartbeatsToSend:r,unsentEntries:s}=h2(this._heartbeatsCache.heartbeats),i=ul(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Dn.warn(n),""}}}function yp(){return new Date().toISOString().substring(0,10)}function h2(t,e=u2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),vp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),vp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class f2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zw()?eE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await l2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function vp(t){return ul(JSON.stringify({version:2,heartbeats:t})).length}function m2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t){hl(new go("platform-logger",e=>new bE(e),"PRIVATE")),hl(new go("heartbeat",e=>new d2(e),"PRIVATE")),As(td,mp,t),As(td,mp,"esm2020"),As("fire-js","")}p2("");var g2="firebase",y2="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */As(g2,y2,"app");var xp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hr,Gy;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,y){function _(){}_.prototype=y.prototype,x.F=y.prototype,x.prototype=new _,x.prototype.constructor=x,x.D=function(E,T,N){for(var b=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)b[Ee-2]=arguments[Ee];return y.prototype[T].apply(E,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,y,_){_||(_=0);const E=Array(16);if(typeof y=="string")for(var T=0;T<16;++T)E[T]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(T=0;T<16;++T)E[T]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=x.g[0],_=x.g[1],T=x.g[2];let N=x.g[3],b;b=y+(N^_&(T^N))+E[0]+3614090360&4294967295,y=_+(b<<7&4294967295|b>>>25),b=N+(T^y&(_^T))+E[1]+3905402710&4294967295,N=y+(b<<12&4294967295|b>>>20),b=T+(_^N&(y^_))+E[2]+606105819&4294967295,T=N+(b<<17&4294967295|b>>>15),b=_+(y^T&(N^y))+E[3]+3250441966&4294967295,_=T+(b<<22&4294967295|b>>>10),b=y+(N^_&(T^N))+E[4]+4118548399&4294967295,y=_+(b<<7&4294967295|b>>>25),b=N+(T^y&(_^T))+E[5]+1200080426&4294967295,N=y+(b<<12&4294967295|b>>>20),b=T+(_^N&(y^_))+E[6]+2821735955&4294967295,T=N+(b<<17&4294967295|b>>>15),b=_+(y^T&(N^y))+E[7]+4249261313&4294967295,_=T+(b<<22&4294967295|b>>>10),b=y+(N^_&(T^N))+E[8]+1770035416&4294967295,y=_+(b<<7&4294967295|b>>>25),b=N+(T^y&(_^T))+E[9]+2336552879&4294967295,N=y+(b<<12&4294967295|b>>>20),b=T+(_^N&(y^_))+E[10]+4294925233&4294967295,T=N+(b<<17&4294967295|b>>>15),b=_+(y^T&(N^y))+E[11]+2304563134&4294967295,_=T+(b<<22&4294967295|b>>>10),b=y+(N^_&(T^N))+E[12]+1804603682&4294967295,y=_+(b<<7&4294967295|b>>>25),b=N+(T^y&(_^T))+E[13]+4254626195&4294967295,N=y+(b<<12&4294967295|b>>>20),b=T+(_^N&(y^_))+E[14]+2792965006&4294967295,T=N+(b<<17&4294967295|b>>>15),b=_+(y^T&(N^y))+E[15]+1236535329&4294967295,_=T+(b<<22&4294967295|b>>>10),b=y+(T^N&(_^T))+E[1]+4129170786&4294967295,y=_+(b<<5&4294967295|b>>>27),b=N+(_^T&(y^_))+E[6]+3225465664&4294967295,N=y+(b<<9&4294967295|b>>>23),b=T+(y^_&(N^y))+E[11]+643717713&4294967295,T=N+(b<<14&4294967295|b>>>18),b=_+(N^y&(T^N))+E[0]+3921069994&4294967295,_=T+(b<<20&4294967295|b>>>12),b=y+(T^N&(_^T))+E[5]+3593408605&4294967295,y=_+(b<<5&4294967295|b>>>27),b=N+(_^T&(y^_))+E[10]+38016083&4294967295,N=y+(b<<9&4294967295|b>>>23),b=T+(y^_&(N^y))+E[15]+3634488961&4294967295,T=N+(b<<14&4294967295|b>>>18),b=_+(N^y&(T^N))+E[4]+3889429448&4294967295,_=T+(b<<20&4294967295|b>>>12),b=y+(T^N&(_^T))+E[9]+568446438&4294967295,y=_+(b<<5&4294967295|b>>>27),b=N+(_^T&(y^_))+E[14]+3275163606&4294967295,N=y+(b<<9&4294967295|b>>>23),b=T+(y^_&(N^y))+E[3]+4107603335&4294967295,T=N+(b<<14&4294967295|b>>>18),b=_+(N^y&(T^N))+E[8]+1163531501&4294967295,_=T+(b<<20&4294967295|b>>>12),b=y+(T^N&(_^T))+E[13]+2850285829&4294967295,y=_+(b<<5&4294967295|b>>>27),b=N+(_^T&(y^_))+E[2]+4243563512&4294967295,N=y+(b<<9&4294967295|b>>>23),b=T+(y^_&(N^y))+E[7]+1735328473&4294967295,T=N+(b<<14&4294967295|b>>>18),b=_+(N^y&(T^N))+E[12]+2368359562&4294967295,_=T+(b<<20&4294967295|b>>>12),b=y+(_^T^N)+E[5]+4294588738&4294967295,y=_+(b<<4&4294967295|b>>>28),b=N+(y^_^T)+E[8]+2272392833&4294967295,N=y+(b<<11&4294967295|b>>>21),b=T+(N^y^_)+E[11]+1839030562&4294967295,T=N+(b<<16&4294967295|b>>>16),b=_+(T^N^y)+E[14]+4259657740&4294967295,_=T+(b<<23&4294967295|b>>>9),b=y+(_^T^N)+E[1]+2763975236&4294967295,y=_+(b<<4&4294967295|b>>>28),b=N+(y^_^T)+E[4]+1272893353&4294967295,N=y+(b<<11&4294967295|b>>>21),b=T+(N^y^_)+E[7]+4139469664&4294967295,T=N+(b<<16&4294967295|b>>>16),b=_+(T^N^y)+E[10]+3200236656&4294967295,_=T+(b<<23&4294967295|b>>>9),b=y+(_^T^N)+E[13]+681279174&4294967295,y=_+(b<<4&4294967295|b>>>28),b=N+(y^_^T)+E[0]+3936430074&4294967295,N=y+(b<<11&4294967295|b>>>21),b=T+(N^y^_)+E[3]+3572445317&4294967295,T=N+(b<<16&4294967295|b>>>16),b=_+(T^N^y)+E[6]+76029189&4294967295,_=T+(b<<23&4294967295|b>>>9),b=y+(_^T^N)+E[9]+3654602809&4294967295,y=_+(b<<4&4294967295|b>>>28),b=N+(y^_^T)+E[12]+3873151461&4294967295,N=y+(b<<11&4294967295|b>>>21),b=T+(N^y^_)+E[15]+530742520&4294967295,T=N+(b<<16&4294967295|b>>>16),b=_+(T^N^y)+E[2]+3299628645&4294967295,_=T+(b<<23&4294967295|b>>>9),b=y+(T^(_|~N))+E[0]+4096336452&4294967295,y=_+(b<<6&4294967295|b>>>26),b=N+(_^(y|~T))+E[7]+1126891415&4294967295,N=y+(b<<10&4294967295|b>>>22),b=T+(y^(N|~_))+E[14]+2878612391&4294967295,T=N+(b<<15&4294967295|b>>>17),b=_+(N^(T|~y))+E[5]+4237533241&4294967295,_=T+(b<<21&4294967295|b>>>11),b=y+(T^(_|~N))+E[12]+1700485571&4294967295,y=_+(b<<6&4294967295|b>>>26),b=N+(_^(y|~T))+E[3]+2399980690&4294967295,N=y+(b<<10&4294967295|b>>>22),b=T+(y^(N|~_))+E[10]+4293915773&4294967295,T=N+(b<<15&4294967295|b>>>17),b=_+(N^(T|~y))+E[1]+2240044497&4294967295,_=T+(b<<21&4294967295|b>>>11),b=y+(T^(_|~N))+E[8]+1873313359&4294967295,y=_+(b<<6&4294967295|b>>>26),b=N+(_^(y|~T))+E[15]+4264355552&4294967295,N=y+(b<<10&4294967295|b>>>22),b=T+(y^(N|~_))+E[6]+2734768916&4294967295,T=N+(b<<15&4294967295|b>>>17),b=_+(N^(T|~y))+E[13]+1309151649&4294967295,_=T+(b<<21&4294967295|b>>>11),b=y+(T^(_|~N))+E[4]+4149444226&4294967295,y=_+(b<<6&4294967295|b>>>26),b=N+(_^(y|~T))+E[11]+3174756917&4294967295,N=y+(b<<10&4294967295|b>>>22),b=T+(y^(N|~_))+E[2]+718787259&4294967295,T=N+(b<<15&4294967295|b>>>17),b=_+(N^(T|~y))+E[9]+3951481745&4294967295,x.g[0]=x.g[0]+y&4294967295,x.g[1]=x.g[1]+(T+(b<<21&4294967295|b>>>11))&4294967295,x.g[2]=x.g[2]+T&4294967295,x.g[3]=x.g[3]+N&4294967295}r.prototype.v=function(x,y){y===void 0&&(y=x.length);const _=y-this.blockSize,E=this.C;let T=this.h,N=0;for(;N<y;){if(T==0)for(;N<=_;)s(this,x,N),N+=this.blockSize;if(typeof x=="string"){for(;N<y;)if(E[T++]=x.charCodeAt(N++),T==this.blockSize){s(this,E),T=0;break}}else for(;N<y;)if(E[T++]=x[N++],T==this.blockSize){s(this,E),T=0;break}}this.h=T,this.o+=y},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var y=1;y<x.length-8;++y)x[y]=0;y=this.o*8;for(var _=x.length-8;_<x.length;++_)x[_]=y&255,y/=256;for(this.v(x),x=Array(16),y=0,_=0;_<4;++_)for(let E=0;E<32;E+=8)x[y++]=this.g[_]>>>E&255;return x};function i(x,y){var _=u;return Object.prototype.hasOwnProperty.call(_,x)?_[x]:_[x]=y(x)}function o(x,y){this.h=y;const _=[];let E=!0;for(let T=x.length-1;T>=0;T--){const N=x[T]|0;E&&N==y||(_[T]=N,E=!1)}this.g=_}var u={};function c(x){return-128<=x&&x<128?i(x,function(y){return new o([y|0],y<0?-1:0)}):new o([x|0],x<0?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return p;if(x<0)return P(h(-x));const y=[];let _=1;for(let E=0;x>=_;E++)y[E]=x/_|0,_*=4294967296;return new o(y,0)}function m(x,y){if(x.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(x.charAt(0)=="-")return P(m(x.substring(1),y));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=h(Math.pow(y,8));let E=p;for(let N=0;N<x.length;N+=8){var T=Math.min(8,x.length-N);const b=parseInt(x.substring(N,N+T),y);T<8?(T=h(Math.pow(y,T)),E=E.j(T).add(h(b))):(E=E.j(_),E=E.add(h(b)))}return E}var p=c(0),g=c(1),I=c(16777216);t=o.prototype,t.m=function(){if(j(this))return-P(this).m();let x=0,y=1;for(let _=0;_<this.g.length;_++){const E=this.i(_);x+=(E>=0?E:4294967296+E)*y,y*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(C(this))return"0";if(j(this))return"-"+P(this).toString(x);const y=h(Math.pow(x,6));var _=this;let E="";for(;;){const T=V(_,y).g;_=S(_,T.j(y));let N=((_.g.length>0?_.g[0]:_.h)>>>0).toString(x);if(_=T,C(_))return N+E;for(;N.length<6;)N="0"+N;E=N+E}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function C(x){if(x.h!=0)return!1;for(let y=0;y<x.g.length;y++)if(x.g[y]!=0)return!1;return!0}function j(x){return x.h==-1}t.l=function(x){return x=S(this,x),j(x)?-1:C(x)?0:1};function P(x){const y=x.g.length,_=[];for(let E=0;E<y;E++)_[E]=~x.g[E];return new o(_,~x.h).add(g)}t.abs=function(){return j(this)?P(this):this},t.add=function(x){const y=Math.max(this.g.length,x.g.length),_=[];let E=0;for(let T=0;T<=y;T++){let N=E+(this.i(T)&65535)+(x.i(T)&65535),b=(N>>>16)+(this.i(T)>>>16)+(x.i(T)>>>16);E=b>>>16,N&=65535,b&=65535,_[T]=b<<16|N}return new o(_,_[_.length-1]&-2147483648?-1:0)};function S(x,y){return x.add(P(y))}t.j=function(x){if(C(this)||C(x))return p;if(j(this))return j(x)?P(this).j(P(x)):P(P(this).j(x));if(j(x))return P(this.j(P(x)));if(this.l(I)<0&&x.l(I)<0)return h(this.m()*x.m());const y=this.g.length+x.g.length,_=[];for(var E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(let T=0;T<x.g.length;T++){const N=this.i(E)>>>16,b=this.i(E)&65535,Ee=x.i(T)>>>16,$e=x.i(T)&65535;_[2*E+2*T]+=b*$e,w(_,2*E+2*T),_[2*E+2*T+1]+=N*$e,w(_,2*E+2*T+1),_[2*E+2*T+1]+=b*Ee,w(_,2*E+2*T+1),_[2*E+2*T+2]+=N*Ee,w(_,2*E+2*T+2)}for(x=0;x<y;x++)_[x]=_[2*x+1]<<16|_[2*x];for(x=y;x<2*y;x++)_[x]=0;return new o(_,0)};function w(x,y){for(;(x[y]&65535)!=x[y];)x[y+1]+=x[y]>>>16,x[y]&=65535,y++}function A(x,y){this.g=x,this.h=y}function V(x,y){if(C(y))throw Error("division by zero");if(C(x))return new A(p,p);if(j(x))return y=V(P(x),y),new A(P(y.g),P(y.h));if(j(y))return y=V(x,P(y)),new A(P(y.g),y.h);if(x.g.length>30){if(j(x)||j(y))throw Error("slowDivide_ only works with positive integers.");for(var _=g,E=y;E.l(x)<=0;)_=M(_),E=M(E);var T=O(_,1),N=O(E,1);for(E=O(E,2),_=O(_,2);!C(E);){var b=N.add(E);b.l(x)<=0&&(T=T.add(_),N=b),E=O(E,1),_=O(_,1)}return y=S(x,T.j(y)),new A(T,y)}for(T=p;x.l(y)>=0;){for(_=Math.max(1,Math.floor(x.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),N=h(_),b=N.j(y);j(b)||b.l(x)>0;)_-=E,N=h(_),b=N.j(y);C(N)&&(N=g),T=T.add(N),x=S(x,b)}return new A(T,x)}t.B=function(x){return V(this,x).h},t.and=function(x){const y=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<y;E++)_[E]=this.i(E)&x.i(E);return new o(_,this.h&x.h)},t.or=function(x){const y=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<y;E++)_[E]=this.i(E)|x.i(E);return new o(_,this.h|x.h)},t.xor=function(x){const y=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<y;E++)_[E]=this.i(E)^x.i(E);return new o(_,this.h^x.h)};function M(x){const y=x.g.length+1,_=[];for(let E=0;E<y;E++)_[E]=x.i(E)<<1|x.i(E-1)>>>31;return new o(_,x.h)}function O(x,y){const _=y>>5;y%=32;const E=x.g.length-_,T=[];for(let N=0;N<E;N++)T[N]=y>0?x.i(N+_)>>>y|x.i(N+_+1)<<32-y:x.i(N+_);return new o(T,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Gy=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,hr=o}).apply(typeof xp<"u"?xp:typeof self<"u"?self:typeof window<"u"?window:{});var fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qy,Di,Ky,ja,sd,Yy,Xy,Jy;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof fa=="object"&&fa];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var R=a[v];if(!(R in f))break e;f=f[R]}a=a[a.length-1],v=f[a],d=d(v),d!=v&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(d){var f=[],v;for(v in d)Object.prototype.hasOwnProperty.call(d,v)&&f.push([v,d[v]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function u(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function c(a,d,f){return a.call.apply(a.bind,arguments)}function h(a,d,f){return h=c,h.apply(null,arguments)}function m(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function p(a,d){function f(){}f.prototype=d.prototype,a.Z=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(v,R,D){for(var W=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)W[ue-2]=arguments[ue];return d.prototype[R].apply(v,W)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function I(a){const d=a.length;if(d>0){const f=Array(d);for(let v=0;v<d;v++)f[v]=a[v];return f}return[]}function C(a,d){for(let v=1;v<arguments.length;v++){const R=arguments[v];var f=typeof R;if(f=f!="object"?f:R?Array.isArray(R)?"array":f:"null",f=="array"||f=="object"&&typeof R.length=="number"){f=a.length||0;const D=R.length||0;a.length=f+D;for(let W=0;W<D;W++)a[f+W]=R[W]}else a.push(R)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function P(a){o.setTimeout(()=>{throw a},0)}function S(){var a=x;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class w{constructor(){this.h=this.g=null}add(d,f){const v=A.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var A=new j(()=>new V,a=>a.reset());class V{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let M,O=!1,x=new w,y=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(_)}};function _(){for(var a;a=S();){try{a.h.call(a.g)}catch(f){P(f)}var d=A;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}O=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,d),o.removeEventListener("test",f,d)}catch{}return a}();function b(a){return/^[\s\xa0]*$/.test(a)}function Ee(a,d){T.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(Ee,T),Ee.prototype.init=function(a,d){const f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var $e="closure_listenable_"+(Math.random()*1e6|0),F=0;function ie(a,d,f,v,R){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=R,this.key=++F,this.da=this.fa=!1}function $(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function G(a,d,f){for(const v in a)d.call(f,a[v],v,a)}function X(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function ne(a){const d={};for(const f in a)d[f]=a[f];return d}const xe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tt(a,d){let f,v;for(let R=1;R<arguments.length;R++){v=arguments[R];for(f in v)a[f]=v[f];for(let D=0;D<xe.length;D++)f=xe[D],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function We(a){this.src=a,this.g={},this.h=0}We.prototype.add=function(a,d,f,v,R){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const W=k(a,d,v,R);return W>-1?(d=a[W],f||(d.fa=!1)):(d=new ie(d,this.src,D,!!v,R),d.fa=f,a.push(d)),d};function Se(a,d){const f=d.type;if(f in a.g){var v=a.g[f],R=Array.prototype.indexOf.call(v,d,void 0),D;(D=R>=0)&&Array.prototype.splice.call(v,R,1),D&&($(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function k(a,d,f,v){for(let R=0;R<a.length;++R){const D=a[R];if(!D.da&&D.listener==d&&D.capture==!!f&&D.ha==v)return R}return-1}var B="closure_lm_"+(Math.random()*1e6|0),J={};function le(a,d,f,v,R){if(Array.isArray(d)){for(let D=0;D<d.length;D++)le(a,d[D],f,v,R);return null}return f=ft(f),a&&a[$e]?a.J(d,f,u(v)?!!v.capture:!1,R):Pe(a,d,f,!1,v,R)}function Pe(a,d,f,v,R,D){if(!d)throw Error("Invalid event type");const W=u(R)?!!R.capture:!!R;let ue=Z(a);if(ue||(a[B]=ue=new We(a)),f=ue.add(d,f,v,W,D),f.proxy)return f;if(v=Ir(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)N||(R=W),R===void 0&&(R=!1),a.addEventListener(d.toString(),v,R);else if(a.attachEvent)a.attachEvent(z(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Ir(){function a(f){return d.call(a.src,a.listener,f)}const d=ce;return a}function ti(a,d,f,v,R){if(Array.isArray(d))for(var D=0;D<d.length;D++)ti(a,d[D],f,v,R);else v=u(v)?!!v.capture:!!v,f=ft(f),a&&a[$e]?(a=a.i,D=String(d).toString(),D in a.g&&(d=a.g[D],f=k(d,f,v,R),f>-1&&($(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete a.g[D],a.h--)))):a&&(a=Z(a))&&(d=a.g[d.toString()],a=-1,d&&(a=k(d,f,v,R)),(f=a>-1?d[a]:null)&&En(f))}function En(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[$e])Se(d.i,a);else{var f=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(f,v,a.capture):d.detachEvent?d.detachEvent(z(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=Z(d))?(Se(f,a),f.h==0&&(f.src=null,d[B]=null)):$(a)}}}function z(a){return a in J?J[a]:J[a]="on"+a}function ce(a,d){if(a.da)a=!0;else{d=new Ee(d,this);const f=a.listener,v=a.ha||a.src;a.fa&&En(a),a=f.call(v,d)}return a}function Z(a){return a=a[B],a instanceof We?a:null}var _e="__closure_events_fn_"+(Math.random()*1e9>>>0);function ft(a){return typeof a=="function"?a:(a[_e]||(a[_e]=function(d){return a.handleEvent(d)}),a[_e])}function Le(){E.call(this),this.i=new We(this),this.M=this,this.G=null}p(Le,E),Le.prototype[$e]=!0,Le.prototype.removeEventListener=function(a,d,f,v){ti(this,a,d,f,v)};function ot(a,d){var f,v=a.G;if(v)for(f=[];v;v=v.G)f.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new T(d,a);else if(d instanceof T)d.target=d.target||a;else{var R=d;d=new T(v,a),tt(d,R)}R=!0;let D,W;if(f)for(W=f.length-1;W>=0;W--)D=d.g=f[W],R=Ln(D,v,!0,d)&&R;if(D=d.g=a,R=Ln(D,v,!0,d)&&R,R=Ln(D,v,!1,d)&&R,f)for(W=0;W<f.length;W++)D=d.g=f[W],R=Ln(D,v,!1,d)&&R}Le.prototype.N=function(){if(Le.Z.N.call(this),this.i){var a=this.i;for(const d in a.g){const f=a.g[d];for(let v=0;v<f.length;v++)$(f[v]);delete a.g[d],a.h--}}this.G=null},Le.prototype.J=function(a,d,f,v){return this.i.add(String(a),d,!1,f,v)},Le.prototype.K=function(a,d,f,v){return this.i.add(String(a),d,!0,f,v)};function Ln(a,d,f,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let R=!0;for(let D=0;D<d.length;++D){const W=d[D];if(W&&!W.da&&W.capture==f){const ue=W.listener,Xe=W.ha||W.src;W.fa&&Se(a.i,W),R=ue.call(Xe,v)!==!1&&R}}return R&&!v.defaultPrevented}function Ar(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(a,d||0)}function sf(a){a.g=Ar(()=>{a.g=null,a.i&&(a.i=!1,sf(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Dx extends E{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:sf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ni(a){E.call(this),this.h=a,this.g={}}p(ni,E);var of=[];function af(a){G(a.g,function(d,f){this.g.hasOwnProperty(f)&&En(d)},a),a.g={}}ni.prototype.N=function(){ni.Z.N.call(this),af(this)},ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ou=o.JSON.stringify,Vx=o.JSON.parse,Mx=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function lf(){}function uf(){}var ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function au(){T.call(this,"d")}p(au,T);function lu(){T.call(this,"c")}p(lu,T);var Cr={},cf=null;function Fo(){return cf=cf||new Le}Cr.Ia="serverreachability";function df(a){T.call(this,Cr.Ia,a)}p(df,T);function si(a){const d=Fo();ot(d,new df(d))}Cr.STAT_EVENT="statevent";function hf(a,d){T.call(this,Cr.STAT_EVENT,a),this.stat=d}p(hf,T);function wt(a){const d=Fo();ot(d,new hf(d,a))}Cr.Ja="timingevent";function ff(a,d){T.call(this,Cr.Ja,a),this.size=d}p(ff,T);function ii(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},d)}function oi(){this.g=!0}oi.prototype.ua=function(){this.g=!1};function Ox(a,d,f,v,R,D){a.info(function(){if(a.g)if(D){var W="",ue=D.split("&");for(let Te=0;Te<ue.length;Te++){var Xe=ue[Te].split("=");if(Xe.length>1){const nt=Xe[0];Xe=Xe[1];const un=nt.split("_");W=un.length>=2&&un[1]=="type"?W+(nt+"="+Xe+"&"):W+(nt+"=redacted&")}}}else W=null;else W=D;return"XMLHTTP REQ ("+v+") [attempt "+R+"]: "+d+`
`+f+`
`+W})}function Lx(a,d,f,v,R,D,W){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+R+"]: "+d+`
`+f+`
`+D+" "+W})}function ns(a,d,f,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ux(a,f)+(v?" "+v:"")})}function Fx(a,d){a.info(function(){return"TIMEOUT: "+d})}oi.prototype.info=function(){};function Ux(a,d){if(!a.g)return d;if(!d)return null;try{const D=JSON.parse(d);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var f=D[a];if(!(f.length<2)){var v=f[1];if(Array.isArray(v)&&!(v.length<1)){var R=v[0];if(R!="noop"&&R!="stop"&&R!="close")for(let W=1;W<v.length;W++)v[W]=""}}}}return ou(D)}catch{return d}}var Uo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},pf;function uu(){}p(uu,lf),uu.prototype.g=function(){return new XMLHttpRequest},pf=new uu;function ai(a){return encodeURIComponent(String(a))}function zx(a){var d=1;a=a.split(":");const f=[];for(;d>0&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function Fn(a,d,f,v){this.j=a,this.i=d,this.l=f,this.S=v||1,this.V=new ni(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gf}function gf(){this.i=null,this.g="",this.h=!1}var yf={},cu={};function du(a,d,f){a.M=1,a.A=$o(ln(d)),a.u=f,a.R=!0,vf(a,null)}function vf(a,d){a.F=Date.now(),zo(a),a.B=ln(a.A);var f=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),Rf(f.i,"t",v),a.C=0,f=a.j.L,a.h=new gf,a.g=Kf(a.j,f?d:null,!a.u),a.P>0&&(a.O=new Dx(h(a.Y,a,a.g),a.P)),d=a.V,f=a.g,v=a.ba;var R="readystatechange";Array.isArray(R)||(R&&(of[0]=R.toString()),R=of);for(let D=0;D<R.length;D++){const W=le(f,R[D],v||d.handleEvent,!1,d.h||d);if(!W)break;d.g[W.key]=W}d=a.J?ne(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),si(),Ox(a.i,a.v,a.B,a.l,a.S,a.u)}Fn.prototype.ba=function(a){a=a.target;const d=this.O;d&&$n(a)==3?d.j():this.Y(a)},Fn.prototype.Y=function(a){try{if(a==this.g)e:{const ue=$n(this.g),Xe=this.g.ya(),Te=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||Lf(this.g)))){this.K||ue!=4||Xe==7||(Xe==8||Te<=0?si(3):si(2)),hu(this);var d=this.g.ca();this.X=d;var f=$x(this);if(this.o=d==200,Lx(this.i,this.v,this.B,this.l,this.S,ue,d),this.o){if(this.U&&!this.L){t:{if(this.g){var v,R=this.g;if((v=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(v)){var D=v;break t}}D=null}if(a=D)ns(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fu(this,a);else{this.o=!1,this.m=3,wt(12),kr(this),li(this);break e}}if(this.R){a=!0;let nt;for(;!this.K&&this.C<f.length;)if(nt=Bx(this,f),nt==cu){ue==4&&(this.m=4,wt(14),a=!1),ns(this.i,this.l,null,"[Incomplete Response]");break}else if(nt==yf){this.m=4,wt(15),ns(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else ns(this.i,this.l,nt,null),fu(this,nt);if(xf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||f.length!=0||this.h.h||(this.m=1,wt(16),a=!1),this.o=this.o&&a,!a)ns(this.i,this.l,f,"[Invalid Chunked Response]"),kr(this),li(this);else if(f.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),wu(W),W.P=!0,wt(11))}}else ns(this.i,this.l,f,null),fu(this,f);ue==4&&kr(this),this.o&&!this.K&&(ue==4?Hf(this.j,this):(this.o=!1,zo(this)))}else r1(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),kr(this),li(this)}}}catch{}finally{}};function $x(a){if(!xf(a))return a.g.la();const d=Lf(a.g);if(d==="")return"";let f="";const v=d.length,R=$n(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return kr(a),li(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<v;D++)a.h.h=!0,f+=a.h.i.decode(d[D],{stream:!(R&&D==v-1)});return d.length=0,a.h.g+=f,a.C=0,a.h.g}function xf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Bx(a,d){var f=a.C,v=d.indexOf(`
`,f);return v==-1?cu:(f=Number(d.substring(f,v)),isNaN(f)?yf:(v+=1,v+f>d.length?cu:(d=d.slice(v,v+f),a.C=v+f,d)))}Fn.prototype.cancel=function(){this.K=!0,kr(this)};function zo(a){a.T=Date.now()+a.H,_f(a,a.H)}function _f(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ii(h(a.aa,a),d)}function hu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Fn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Fx(this.i,this.B),this.M!=2&&(si(),wt(17)),kr(this),this.m=2,li(this)):_f(this,this.T-a)};function li(a){a.j.I==0||a.K||Hf(a.j,a)}function kr(a){hu(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,af(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function fu(a,d){try{var f=a.j;if(f.I!=0&&(f.g==a||mu(f.h,a))){if(!a.L&&mu(f.h,a)&&f.I==3){try{var v=f.Ba.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var R=v;if(R[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Go(f),Ho(f);else break e;_u(f),wt(18)}}else f.xa=R[1],0<f.xa-f.K&&R[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ii(h(f.Va,f),6e3));bf(f.h)<=1&&f.ta&&(f.ta=void 0)}else jr(f,11)}else if((a.L||f.g==a)&&Go(f),!b(d))for(R=f.Ba.g.parse(d),d=0;d<R.length;d++){let Te=R[d];const nt=Te[0];if(!(nt<=f.K))if(f.K=nt,Te=Te[1],f.I==2)if(Te[0]=="c"){f.M=Te[1],f.ba=Te[2];const un=Te[3];un!=null&&(f.ka=un,f.j.info("VER="+f.ka));const Pr=Te[4];Pr!=null&&(f.za=Pr,f.j.info("SVER="+f.za));const Bn=Te[5];Bn!=null&&typeof Bn=="number"&&Bn>0&&(v=1.5*Bn,f.O=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const qn=a.g;if(qn){const Ko=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ko){var D=v.h;D.g||Ko.indexOf("spdy")==-1&&Ko.indexOf("quic")==-1&&Ko.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(pu(D,D.h),D.h=null))}if(v.G){const Eu=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;Eu&&(v.wa=Eu,Ae(v.J,v.G,Eu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),v=f;var W=a;if(v.na=Qf(v,v.L?v.ba:null,v.W),W.L){Tf(v.h,W);var ue=W,Xe=v.O;Xe&&(ue.H=Xe),ue.D&&(hu(ue),zo(ue)),v.g=W}else Bf(v);f.i.length>0&&Wo(f)}else Te[0]!="stop"&&Te[0]!="close"||jr(f,7);else f.I==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?jr(f,7):xu(f):Te[0]!="noop"&&f.l&&f.l.qa(Te),f.A=0)}}si(4)}catch{}}var qx=class{constructor(a,d){this.g=a,this.map=d}};function wf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ef(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function bf(a){return a.h?1:a.g?a.g.size:0}function mu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function pu(a,d){a.g?a.g.add(d):a.h=d}function Tf(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}wf.prototype.cancel=function(){if(this.i=Sf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Sf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.G);return d}return I(a.i)}var Nf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hx(a,d){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const v=a[f].indexOf("=");let R,D=null;v>=0?(R=a[f].substring(0,v),D=a[f].substring(v+1)):R=a[f],d(R,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Un(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Un?(this.l=a.l,ui(this,a.j),this.o=a.o,this.g=a.g,ci(this,a.u),this.h=a.h,gu(this,jf(a.i)),this.m=a.m):a&&(d=String(a).match(Nf))?(this.l=!1,ui(this,d[1]||"",!0),this.o=di(d[2]||""),this.g=di(d[3]||"",!0),ci(this,d[4]),this.h=di(d[5]||"",!0),gu(this,d[6]||"",!0),this.m=di(d[7]||"")):(this.l=!1,this.i=new fi(null,this.l))}Un.prototype.toString=function(){const a=[];var d=this.j;d&&a.push(hi(d,If,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(hi(d,If,!0),"@"),a.push(ai(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(hi(f,f.charAt(0)=="/"?Qx:Gx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",hi(f,Yx)),a.join("")},Un.prototype.resolve=function(a){const d=ln(this);let f=!!a.j;f?ui(d,a.j):f=!!a.o,f?d.o=a.o:f=!!a.g,f?d.g=a.g:f=a.u!=null;var v=a.h;if(f)ci(d,a.u);else if(f=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var R=d.h.lastIndexOf("/");R!=-1&&(v=d.h.slice(0,R+1)+v)}if(R=v,R==".."||R==".")v="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){v=R.lastIndexOf("/",0)==0,R=R.split("/");const D=[];for(let W=0;W<R.length;){const ue=R[W++];ue=="."?v&&W==R.length&&D.push(""):ue==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),v&&W==R.length&&D.push("")):(D.push(ue),v=!0)}v=D.join("/")}else v=R}return f?d.h=v:f=a.i.toString()!=="",f?gu(d,jf(a.i)):f=!!a.m,f&&(d.m=a.m),d};function ln(a){return new Un(a)}function ui(a,d,f){a.j=f?di(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function ci(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function gu(a,d,f){d instanceof fi?(a.i=d,Xx(a.i,a.l)):(f||(d=hi(d,Kx)),a.i=new fi(d,a.l))}function Ae(a,d,f){a.i.set(d,f)}function $o(a){return Ae(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function di(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function hi(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Wx),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Wx(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var If=/[#\/\?@]/g,Gx=/[#\?:]/g,Qx=/[#\?]/g,Kx=/[#\?@]/g,Yx=/#/g;function fi(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Rr(a){a.g||(a.g=new Map,a.h=0,a.i&&Hx(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=fi.prototype,t.add=function(a,d){Rr(this),this.i=null,a=rs(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Af(a,d){Rr(a),d=rs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Cf(a,d){return Rr(a),d=rs(a,d),a.g.has(d)}t.forEach=function(a,d){Rr(this),this.g.forEach(function(f,v){f.forEach(function(R){a.call(d,R,v,this)},this)},this)};function kf(a,d){Rr(a);let f=[];if(typeof d=="string")Cf(a,d)&&(f=f.concat(a.g.get(rs(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)f=f.concat(a[d]);return f}t.set=function(a,d){return Rr(this),this.i=null,a=rs(this,a),Cf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=kf(this,a),a.length>0?String(a[0]):d):d};function Rf(a,d,f){Af(a,d),f.length>0&&(a.i=null,a.g.set(rs(a,d),I(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(let v=0;v<d.length;v++){var f=d[v];const R=ai(f);f=kf(this,f);for(let D=0;D<f.length;D++){let W=R;f[D]!==""&&(W+="="+ai(f[D])),a.push(W)}}return this.i=a.join("&")};function jf(a){const d=new fi;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function rs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function Xx(a,d){d&&!a.j&&(Rr(a),a.i=null,a.g.forEach(function(f,v){const R=v.toLowerCase();v!=R&&(Af(this,v),Rf(this,R,f))},a)),a.j=d}function Jx(a,d){const f=new oi;if(o.Image){const v=new Image;v.onload=m(zn,f,"TestLoadImage: loaded",!0,d,v),v.onerror=m(zn,f,"TestLoadImage: error",!1,d,v),v.onabort=m(zn,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=m(zn,f,"TestLoadImage: timeout",!1,d,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function Zx(a,d){const f=new oi,v=new AbortController,R=setTimeout(()=>{v.abort(),zn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(D=>{clearTimeout(R),D.ok?zn(f,"TestPingServer: ok",!0,d):zn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(R),zn(f,"TestPingServer: error",!1,d)})}function zn(a,d,f,v,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),v(f)}catch{}}function e1(){this.g=new Mx}function yu(a){this.i=a.Sb||null,this.h=a.ab||!1}p(yu,lf),yu.prototype.g=function(){return new Bo(this.i,this.h)};function Bo(a,d){Le.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Bo,Le),t=Bo.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,pi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,mi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Pf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Pf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?mi(this):pi(this),this.readyState==3&&Pf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,mi(this))},t.Na=function(a){this.g&&(this.response=a,mi(this))},t.ga=function(){this.g&&mi(this)};function mi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,pi(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function pi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Df(a){let d="";return G(a,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function vu(a,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Df(f),typeof a=="string"?f!=null&&ai(f):Ae(a,d,f))}function Fe(a){Le.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Fe,Le);var t1=/^https?$/i,n1=["POST","PUT"];t=Fe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():pf.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(D){Vf(this,D);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var R in v)f.set(R,v[R]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const D of v.keys())f.set(D,v.get(D));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),R=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(n1,d,void 0)>=0)||v||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,W]of f)this.g.setRequestHeader(D,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){Vf(this,D)}};function Vf(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,Mf(a),qo(a)}function Mf(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ot(this,"complete"),ot(this,"abort"),qo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qo(this,!0)),Fe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Of(this):this.Xa())},t.Xa=function(){Of(this)};function Of(a){if(a.h&&typeof i<"u"){if(a.v&&$n(a)==4)setTimeout(a.Ca.bind(a),0);else if(ot(a,"readystatechange"),$n(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=D===0){let W=String(a.D).match(Nf)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),v=!t1.test(W?W.toLowerCase():"")}f=v}if(f)ot(a,"complete"),ot(a,"success");else{a.o=6;try{var R=$n(a)>2?a.g.statusText:""}catch{R=""}a.l=R+" ["+a.ca()+"]",Mf(a)}}finally{qo(a)}}}}function qo(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,d||ot(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function $n(a){return a.g?a.g.readyState:0}t.ca=function(){try{return $n(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Vx(d)}};function Lf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function r1(a){const d={};a=(a.g&&$n(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(b(a[v]))continue;var f=zx(a[v]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=d[R]||[];d[R]=D,D.push(f)}X(d,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gi(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Ff(a){this.za=0,this.i=[],this.j=new oi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gi("baseRetryDelayMs",5e3,a),this.Za=gi("retryDelaySeedMs",1e4,a),this.Ta=gi("forwardChannelMaxRetries",2,a),this.va=gi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new wf(a&&a.concurrentRequestLimit),this.Ba=new e1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ff.prototype,t.ka=8,t.I=1,t.connect=function(a,d,f,v){wt(0),this.W=a,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.J=Qf(this,null,this.W),Wo(this)};function xu(a){if(Uf(a),a.I==3){var d=a.V++,f=ln(a.J);if(Ae(f,"SID",a.M),Ae(f,"RID",d),Ae(f,"TYPE","terminate"),yi(a,f),d=new Fn(a,a.j,d),d.M=2,d.A=$o(ln(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=d.A,f=!0),f||(d.g=Kf(d.j,null),d.g.ea(d.A)),d.F=Date.now(),zo(d)}Gf(a)}function Ho(a){a.g&&(wu(a),a.g.cancel(),a.g=null)}function Uf(a){Ho(a),a.v&&(o.clearTimeout(a.v),a.v=null),Go(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Wo(a){if(!Ef(a.h)&&!a.m){a.m=!0;var d=a.Ea;M||y(),O||(M(),O=!0),x.add(d,a),a.D=0}}function s1(a,d){return bf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ii(h(a.Ea,a,d),Wf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const R=new Fn(this,this.j,a);let D=this.o;if(this.U&&(D?(D=ne(D),tt(D,this.U)):D=this.U),this.u!==null||this.R||(R.J=D,D=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=$f(this,R,d),f=ln(this.J),Ae(f,"RID",a),Ae(f,"CVER",22),this.G&&Ae(f,"X-HTTP-Session-Id",this.G),yi(this,f),D&&(this.R?d="headers="+ai(Df(D))+"&"+d:this.u&&vu(f,this.u,D)),pu(this.h,R),this.Ra&&Ae(f,"TYPE","init"),this.S?(Ae(f,"$req",d),Ae(f,"SID","null"),R.U=!0,du(R,f,null)):du(R,f,d),this.I=2}}else this.I==3&&(a?zf(this,a):this.i.length==0||Ef(this.h)||zf(this))};function zf(a,d){var f;d?f=d.l:f=a.V++;const v=ln(a.J);Ae(v,"SID",a.M),Ae(v,"RID",f),Ae(v,"AID",a.K),yi(a,v),a.u&&a.o&&vu(v,a.u,a.o),f=new Fn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),d&&(a.i=d.G.concat(a.i)),d=$f(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),pu(a.h,f),du(f,v,d)}function yi(a,d){a.H&&G(a.H,function(f,v){Ae(d,v,f)}),a.l&&G({},function(f,v){Ae(d,v,f)})}function $f(a,d,f){f=Math.min(a.i.length,f);const v=a.l?h(a.l.Ka,a.l,a):null;e:{var R=a.i;let ue=-1;for(;;){const Xe=["count="+f];ue==-1?f>0?(ue=R[0].g,Xe.push("ofs="+ue)):ue=0:Xe.push("ofs="+ue);let Te=!0;for(let nt=0;nt<f;nt++){var D=R[nt].g;const un=R[nt].map;if(D-=ue,D<0)ue=Math.max(0,R[nt].g-100),Te=!1;else try{D="req"+D+"_"||"";try{var W=un instanceof Map?un:Object.entries(un);for(const[Pr,Bn]of W){let qn=Bn;u(Bn)&&(qn=ou(Bn)),Xe.push(D+Pr+"="+encodeURIComponent(qn))}}catch(Pr){throw Xe.push(D+"type="+encodeURIComponent("_badmap")),Pr}}catch{v&&v(un)}}if(Te){W=Xe.join("&");break e}}W=void 0}return a=a.i.splice(0,f),d.G=a,W}function Bf(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;M||y(),O||(M(),O=!0),x.add(d,a),a.A=0}}function _u(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ii(h(a.Da,a),Wf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,qf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ii(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),Ho(this),qf(this))};function wu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function qf(a){a.g=new Fn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=ln(a.na);Ae(d,"RID","rpc"),Ae(d,"SID",a.M),Ae(d,"AID",a.K),Ae(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ae(d,"TO",a.ia),Ae(d,"TYPE","xmlhttp"),yi(a,d),a.u&&a.o&&vu(d,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=$o(ln(d)),f.u=null,f.R=!0,vf(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Ho(this),_u(this),wt(19))};function Go(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Hf(a,d){var f=null;if(a.g==d){Go(a),wu(a),a.g=null;var v=2}else if(mu(a.h,d))f=d.G,Tf(a.h,d),v=1;else return;if(a.I!=0){if(d.o)if(v==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var R=a.D;v=Fo(),ot(v,new ff(v,f)),Wo(a)}else Bf(a);else if(R=d.m,R==3||R==0&&d.X>0||!(v==1&&s1(a,d)||v==2&&_u(a)))switch(f&&f.length>0&&(d=a.h,d.i=d.i.concat(f)),R){case 1:jr(a,5);break;case 4:jr(a,10);break;case 3:jr(a,6);break;default:jr(a,2)}}}function Wf(a,d){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*d}function jr(a,d){if(a.j.info("Error code "+d),d==2){var f=h(a.bb,a),v=a.Ua;const R=!v;v=new Un(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ui(v,"https"),$o(v),R?Jx(v.toString(),f):Zx(v.toString(),f)}else wt(2);a.I=0,a.l&&a.l.pa(d),Gf(a),Uf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Gf(a){if(a.I=0,a.ja=[],a.l){const d=Sf(a.h);(d.length!=0||a.i.length!=0)&&(C(a.ja,d),C(a.ja,a.i),a.h.i.length=0,I(a.i),a.i.length=0),a.l.oa()}}function Qf(a,d,f){var v=f instanceof Un?ln(f):new Un(f);if(v.g!="")d&&(v.g=d+"."+v.g),ci(v,v.u);else{var R=o.location;v=R.protocol,d=d?d+"."+R.hostname:R.hostname,R=+R.port;const D=new Un(null);v&&ui(D,v),d&&(D.g=d),R&&ci(D,R),f&&(D.h=f),v=D}return f=a.G,d=a.wa,f&&d&&Ae(v,f,d),Ae(v,"VER",a.ka),yi(a,v),v}function Kf(a,d,f){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new Fe(new yu({ab:f})):new Fe(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yf(){}t=Yf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Qo(){}Qo.prototype.g=function(a,d){return new Dt(a,d)};function Dt(a,d){Le.call(this),this.g=new Ff(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!b(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!b(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ss(this)}p(Dt,Le),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){xu(this.g)},Dt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=ou(a),a=f);d.i.push(new qx(d.Ya++,a)),d.I==3&&Wo(d)},Dt.prototype.N=function(){this.g.l=null,delete this.j,xu(this.g),delete this.g,Dt.Z.N.call(this)};function Xf(a){au.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(Xf,au);function Jf(){lu.call(this),this.status=1}p(Jf,lu);function ss(a){this.g=a}p(ss,Yf),ss.prototype.ra=function(){ot(this.g,"a")},ss.prototype.qa=function(a){ot(this.g,new Xf(a))},ss.prototype.pa=function(a){ot(this.g,new Jf)},ss.prototype.oa=function(){ot(this.g,"b")},Qo.prototype.createWebChannel=Qo.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,Jy=function(){return new Qo},Xy=function(){return Fo()},Yy=Cr,sd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Uo.NO_ERROR=0,Uo.TIMEOUT=8,Uo.HTTP_ERROR=6,ja=Uo,mf.COMPLETE="complete",Ky=mf,uf.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",Le.prototype.listen=Le.prototype.J,Di=uf,Fe.prototype.listenOnce=Fe.prototype.K,Fe.prototype.getLastError=Fe.prototype.Ha,Fe.prototype.getLastErrorCode=Fe.prototype.ya,Fe.prototype.getStatus=Fe.prototype.ca,Fe.prototype.getResponseJson=Fe.prototype.La,Fe.prototype.getResponseText=Fe.prototype.la,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Fa,Qy=Fe}).apply(typeof fa<"u"?fa:typeof self<"u"?self:typeof window<"u"?window:{});const _p="@firebase/firestore",wp="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qs="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new zy("@firebase/firestore");function os(){return Kr.logLevel}function K(t,...e){if(Kr.logLevel<=ge.DEBUG){const n=e.map(Eh);Kr.debug(`Firestore (${Qs}): ${t}`,...n)}}function Vn(t,...e){if(Kr.logLevel<=ge.ERROR){const n=e.map(Eh);Kr.error(`Firestore (${Qs}): ${t}`,...n)}}function Ls(t,...e){if(Kr.logLevel<=ge.WARN){const n=e.map(Eh);Kr.warn(`Firestore (${Qs}): ${t}`,...n)}}function Eh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Zy(t,r,n)}function Zy(t,e,n){let r=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Vn(r),new Error(r)}function ve(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Zy(e,s,r)}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Gs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class v2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class x2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _2{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new An;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new An,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new An)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new ev(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new yt(e)}}class w2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new w2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ep{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,t2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ep(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ep(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=T2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function id(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Zu(s)===Zu(i)?fe(s,i):Zu(s)?1:-1}return fe(t.length,e.length)}const S2=55296,N2=57343;function Zu(t){const e=t.charCodeAt(0);return e>=S2&&e<=N2}function Fs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="__name__";class hn{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return hn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=hn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return fe(e.length,n.length)}static compareSegments(e,n){const r=hn.isNumericId(e),s=hn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?hn.extractNumericId(e).compare(hn.extractNumericId(n)):id(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hr.fromString(e.substring(4,e.length-2))}}class Ne extends hn{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const I2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends hn{construct(e,n,r){return new ut(e,n,r)}static isValidIdentifier(e){return I2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bp}static keyField(){return new ut([bp])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new Q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(n)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Ne.fromString(e))}static fromName(e){return new te(Ne.fromString(e).popFirst(5))}static empty(){return new te(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ne(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e,n){if(!n)throw new Q(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function A2(t,e,n,r){if(e===!0&&r===!0)throw new Q(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Tp(t){if(!te.isDocumentKey(t))throw new Q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sp(t){if(te.isDocumentKey(t))throw new Q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $l(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re(12329,{type:typeof t})}function _n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$l(t);throw new Q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t,e){const n={typeString:t};return e&&(n.value=e),n}function jo(t,e){if(!nv(t))throw new Q(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=-62135596800,Ip=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ip);return new ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Np)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ip}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jo(e,ke._jsonSchema))return new ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Np;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:Ye("string",ke._jsonSchemaVersion),seconds:Ye("number"),nanoseconds:Ye("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new ke(0,0))}static max(){return new oe(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=-1;function C2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new gr(s,te.empty(),e)}function k2(t){return new gr(t.readTime,t.key,vo)}class gr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gr(oe.min(),te.empty(),vo)}static max(){return new gr(oe.max(),te.empty(),vo)}}function R2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class P2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==j2)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(m=>{o[h]=m,++u,u===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function D2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ys(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=-1;function ql(t){return t==null}function fl(t){return t===0&&1/t==-1/0}function V2(t){return typeof t=="number"&&Number.isInteger(t)&&!fl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="";function M2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ap(e)),e=O2(t.get(n),e);return Ap(e)}function O2(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case rv:n+="";break;default:n+=i}}return n}function Ap(t){return t+rv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Sr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||lt.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lt.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ma(this.root,e,this.comparator,!0)}}class ma{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class lt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??lt.RED,this.left=s??lt.EMPTY,this.right=i??lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new lt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return lt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw re(27949);return e+(this.isRed()?0:1)}}lt.EMPTY=null,lt.RED=!0,lt.BLACK=!1;lt.EMPTY=new class{constructor(){this.size=0}get key(){throw re(57766)}get value(){throw re(16141)}get color(){throw re(16727)}get left(){throw re(29726)}get right(){throw re(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kp(this.data.getIterator())}getIteratorFrom(e){return new kp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class kp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new et(ut.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new iv("Invalid base64 string: "+i):i}}(e);return new ht(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const L2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yr(t){if(ve(!!t,39018),typeof t=="string"){let e=0;const n=L2.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vr(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="server_timestamp",av="__type__",lv="__previous_value__",uv="__local_write_time__";function Sh(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[av])==null?void 0:r.stringValue)===ov}function Hl(t){const e=t.mapValue.fields[lv];return Sh(e)?Hl(e):e}function xo(t){const e=yr(t.mapValue.fields[uv].timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n,r,s,i,o,u,c,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=m}}const ml="(default)";class _o{constructor(e,n){this.projectId=e,this.database=n||ml}static empty(){return new _o("","")}get isDefaultDatabase(){return this.database===ml}isEqual(e){return e instanceof _o&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="__type__",U2="__max__",pa={mapValue:{}},dv="__vector__",pl="value";function xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sh(t)?4:$2(t)?9007199254740991:z2(t)?10:11:re(28295,{value:t})}function wn(t,e){if(t===e)return!0;const n=xr(t);if(n!==xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xo(t).isEqual(xo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=yr(s.timestampValue),u=yr(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return vr(s.bytesValue).isEqual(vr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Be(s.geoPointValue.latitude)===Be(i.geoPointValue.latitude)&&Be(s.geoPointValue.longitude)===Be(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Be(s.integerValue)===Be(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Be(s.doubleValue),u=Be(i.doubleValue);return o===u?fl(o)===fl(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Fs(t.arrayValue.values||[],e.arrayValue.values||[],wn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Cp(o)!==Cp(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!wn(o[c],u[c])))return!1;return!0}(t,e);default:return re(52216,{left:t})}}function wo(t,e){return(t.values||[]).find(n=>wn(n,e))!==void 0}function Us(t,e){if(t===e)return 0;const n=xr(t),r=xr(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Be(i.integerValue||i.doubleValue),c=Be(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return Rp(t.timestampValue,e.timestampValue);case 4:return Rp(xo(t),xo(e));case 5:return id(t.stringValue,e.stringValue);case 6:return function(i,o){const u=vr(i),c=vr(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const m=fe(u[h],c[h]);if(m!==0)return m}return fe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=fe(Be(i.latitude),Be(o.latitude));return u!==0?u:fe(Be(i.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jp(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,I,C,j;const u=i.fields||{},c=o.fields||{},h=(g=u[pl])==null?void 0:g.arrayValue,m=(I=c[pl])==null?void 0:I.arrayValue,p=fe(((C=h==null?void 0:h.values)==null?void 0:C.length)||0,((j=m==null?void 0:m.values)==null?void 0:j.length)||0);return p!==0?p:jp(h,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===pa.mapValue&&o===pa.mapValue)return 0;if(i===pa.mapValue)return 1;if(o===pa.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),h=o.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let p=0;p<c.length&&p<m.length;++p){const g=id(c[p],m[p]);if(g!==0)return g;const I=Us(u[c[p]],h[m[p]]);if(I!==0)return I}return fe(c.length,m.length)}(t.mapValue,e.mapValue);default:throw re(23264,{he:n})}}function Rp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=yr(t),r=yr(e),s=fe(n.seconds,r.seconds);return s!==0?s:fe(n.nanos,r.nanos)}function jp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Us(n[s],r[s]);if(i)return i}return fe(n.length,r.length)}function zs(t){return od(t)}function od(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=od(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${od(n.fields[o])}`;return s+"}"}(t.mapValue):re(61005,{value:t})}function Pa(t){switch(xr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hl(t);return e?16+Pa(e):16;case 5:return 2*t.stringValue.length;case 6:return vr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Pa(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Sr(r.fields,(i,o)=>{s+=i.length+Pa(o)}),s}(t.mapValue);default:throw re(13486,{value:t})}}function Pp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ad(t){return!!t&&"integerValue"in t}function Nh(t){return!!t&&"arrayValue"in t}function Dp(t){return!!t&&"nullValue"in t}function Vp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Da(t){return!!t&&"mapValue"in t}function z2(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[cv])==null?void 0:r.stringValue)===dv}function Qi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Sr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qi(t.arrayValue.values[n]);return e}return{...t}}function $2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===U2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Da(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qi(n)}setAll(e){let n=ut.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=Qi(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Da(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Da(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Sr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ct(Qi(this.value))}}function hv(t){const e=[];return Sr(t.fields,(n,r)=>{const s=new ut([n]);if(Da(r)){const i=hv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new xt(e,0,oe.min(),oe.min(),oe.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,s){return new xt(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new xt(e,2,n,oe.min(),oe.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,oe.min(),oe.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n){this.position=e,this.inclusive=n}}function Mp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Us(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Op(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n="asc"){this.field=e,this.dir=n}}function B2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fv=class{};class Ke extends fv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new H2(e,n,r):n==="array-contains"?new Q2(e,r):n==="in"?new K2(e,r):n==="not-in"?new Y2(e,r):n==="array-contains-any"?new X2(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new W2(e,r):new G2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Us(n,this.value)):n!==null&&xr(this.value)===xr(n)&&this.matchesComparison(Us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends fv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new an(e,n)}matches(e){return mv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mv(t){return t.op==="and"}function pv(t){return q2(t)&&mv(t)}function q2(t){for(const e of t.filters)if(e instanceof an)return!1;return!0}function ld(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+zs(t.value);if(pv(t))return t.filters.map(e=>ld(e)).join(",");{const e=t.filters.map(n=>ld(n)).join(",");return`${t.op}(${e})`}}function gv(t,e){return t instanceof Ke?function(r,s){return s instanceof Ke&&r.op===s.op&&r.field.isEqual(s.field)&&wn(r.value,s.value)}(t,e):t instanceof an?function(r,s){return s instanceof an&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&gv(o,s.filters[u]),!0):!1}(t,e):void re(19439)}function yv(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${zs(n.value)}`}(t):t instanceof an?function(n){return n.op.toString()+" {"+n.getFilters().map(yv).join(" ,")+"}"}(t):"Filter"}class H2 extends Ke{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class W2 extends Ke{constructor(e,n){super(e,"in",n),this.keys=vv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class G2 extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=vv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class Q2 extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nh(n)&&wo(n.arrayValue,this.value)}}class K2 extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wo(this.value.arrayValue,n)}}class Y2 extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(wo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!wo(this.value.arrayValue,n)}}class X2 extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.Te=null}}function Lp(t,e=null,n=[],r=[],s=null,i=null,o=null){return new J2(t,e,n,r,s,i,o)}function Ih(t){const e=ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ld(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ql(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zs(r)).join(",")),e.Te=n}return e.Te}function Ah(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!B2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Op(t.startAt,e.startAt)&&Op(t.endAt,e.endAt)}function ud(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Z2(t,e,n,r,s,i,o,u){return new Xs(t,e,n,r,s,i,o,u)}function Ch(t){return new Xs(t)}function Fp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xv(t){return t.collectionGroup!==null}function Ki(t){const e=ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new et(ut.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Eo(i,r))}),n.has(ut.keyField().canonicalString())||e.Ie.push(new Eo(ut.keyField(),r))}return e.Ie}function gn(t){const e=ae(t);return e.Ee||(e.Ee=eb(e,Ki(t))),e.Ee}function eb(t,e){if(t.limitType==="F")return Lp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Eo(s.field,i)});const n=t.endAt?new gl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gl(t.startAt.position,t.startAt.inclusive):null;return Lp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cd(t,e){const n=t.filters.concat([e]);return new Xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dd(t,e,n){return new Xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wl(t,e){return Ah(gn(t),gn(e))&&t.limitType===e.limitType}function _v(t){return`${Ih(gn(t))}|lt:${t.limitType}`}function as(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>yv(s)).join(", ")}]`),ql(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>zs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>zs(s)).join(",")),`Target(${r})`}(gn(t))}; limitType=${t.limitType})`}function Gl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ki(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const h=Mp(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,Ki(r),s)||r.endAt&&!function(o,u,c){const h=Mp(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,Ki(r),s))}(t,e)}function tb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wv(t){return(e,n)=>{let r=!1;for(const s of Ki(t)){const i=nb(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function nb(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),h=u.data.field(i);return c!==null&&h!==null?Us(c,h):re(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Sr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return sv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=new Oe(te.comparator);function Mn(){return rb}const Ev=new Oe(te.comparator);function Vi(...t){let e=Ev;for(const n of t)e=e.insert(n.key,n);return e}function bv(t){let e=Ev;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ur(){return Yi()}function Tv(){return Yi()}function Yi(){return new Zr(t=>t.toString(),(t,e)=>t.isEqual(e))}const sb=new Oe(te.comparator),ib=new et(te.comparator);function me(...t){let e=ib;for(const n of t)e=e.add(n);return e}const ob=new et(fe);function ab(){return ob}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fl(e)?"-0":e}}function Sv(t){return{integerValue:""+t}}function lb(t,e){return V2(e)?Sv(e):kh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(){this._=void 0}}function ub(t,e,n){return t instanceof yl?function(s,i){const o={fields:{[av]:{stringValue:ov},[uv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Sh(i)&&(i=Hl(i)),i&&(o.fields[lv]=i),{mapValue:o}}(n,e):t instanceof bo?Iv(t,e):t instanceof To?Av(t,e):function(s,i){const o=Nv(s,i),u=Up(o)+Up(s.Ae);return ad(o)&&ad(s.Ae)?Sv(u):kh(s.serializer,u)}(t,e)}function cb(t,e,n){return t instanceof bo?Iv(t,e):t instanceof To?Av(t,e):n}function Nv(t,e){return t instanceof vl?function(r){return ad(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class yl extends Ql{}class bo extends Ql{constructor(e){super(),this.elements=e}}function Iv(t,e){const n=Cv(e);for(const r of t.elements)n.some(s=>wn(s,r))||n.push(r);return{arrayValue:{values:n}}}class To extends Ql{constructor(e){super(),this.elements=e}}function Av(t,e){let n=Cv(e);for(const r of t.elements)n=n.filter(s=>!wn(s,r));return{arrayValue:{values:n}}}class vl extends Ql{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Up(t){return Be(t.integerValue||t.doubleValue)}function Cv(t){return Nh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function db(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof bo&&s instanceof bo||r instanceof To&&s instanceof To?Fs(r.elements,s.elements,wn):r instanceof vl&&s instanceof vl?wn(r.Ae,s.Ae):r instanceof yl&&s instanceof yl}(t.transform,e.transform)}class hb{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Va(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Kl{}function kv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rh(t.key,sn.none()):new Po(t.key,t.data,sn.none());{const n=t.data,r=Ct.empty();let s=new et(ut.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Nr(t.key,r,new Ft(s.toArray()),sn.none())}}function fb(t,e,n){t instanceof Po?function(s,i,o){const u=s.value.clone(),c=$p(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Nr?function(s,i,o){if(!Va(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=$p(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Rv(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Xi(t,e,n,r){return t instanceof Po?function(i,o,u,c){if(!Va(i.precondition,o))return u;const h=i.value.clone(),m=Bp(i.fieldTransforms,c,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Nr?function(i,o,u,c){if(!Va(i.precondition,o))return u;const h=Bp(i.fieldTransforms,c,o),m=o.data;return m.setAll(Rv(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,u){return Va(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function mb(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Nv(r.transform,s||null);i!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,i))}return n||null}function zp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Fs(r,s,(i,o)=>db(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Po extends Kl{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Nr extends Kl{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Rv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $p(t,e,n){const r=new Map;ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,cb(o,u,n[s]))}return r}function Bp(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,ub(i,o,e))}return r}class Rh extends Kl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pb extends Kl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&fb(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Xi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Xi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Tv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=kv(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Fs(this.mutations,e.mutations,(n,r)=>zp(n,r))&&Fs(this.baseMutations,e.baseMutations,(n,r)=>zp(n,r))}}class jh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return sb}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new jh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge,pe;function xb(t){switch(t){case L.OK:return re(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return re(15467,{code:t})}}function jv(t){if(t===void 0)return Vn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Ge.OK:return L.OK;case Ge.CANCELLED:return L.CANCELLED;case Ge.UNKNOWN:return L.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return L.INTERNAL;case Ge.UNAVAILABLE:return L.UNAVAILABLE;case Ge.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ge.NOT_FOUND:return L.NOT_FOUND;case Ge.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ge.ABORTED:return L.ABORTED;case Ge.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ge.DATA_LOSS:return L.DATA_LOSS;default:return re(39323,{code:t})}}(pe=Ge||(Ge={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=new hr([4294967295,4294967295],0);function qp(t){const e=_b().encode(t),n=new Gy;return n.update(e),new Uint8Array(n.digest())}function Hp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new hr([n,r],0),new hr([s,i],0)]}class Ph{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mi(`Invalid padding: ${n}`);if(r<0)throw new Mi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(hr.fromNumber(r)));return s.compare(wb)===1&&(s=new hr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=qp(e),[r,s]=Hp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Ph(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.ge===0)return;const n=qp(e),[r,s]=Hp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Mi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Do.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yl(oe.min(),s,new Oe(fe),Mn(),me())}}class Do{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Do(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Pv{constructor(e,n){this.targetId=e,this.Ce=n}}class Dv{constructor(e,n,r=ht.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Wp{constructor(){this.ve=0,this.Fe=Gp(),this.Me=ht.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=me(),n=me(),r=me();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:re(38017,{changeType:i})}}),new Do(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Gp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Eb{constructor(e){this.Ge=e,this.ze=new Map,this.je=Mn(),this.Je=ga(),this.He=ga(),this.Ye=new Oe(fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ud(i))if(r===0){const o=new te(i.path);this.et(n,o,xt.newNoDocument(o,oe.min()))}else ve(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const u=this.ut(e),c=u?this.ct(u,e,o):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=vr(r).toUint8Array()}catch(c){if(c instanceof iv)return Ls("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Ph(o,s,i)}catch(c){return Ls(c instanceof Mi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const u=this.ot(o);if(u){if(i.current&&ud(u.target)){const c=new te(u.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,xt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=me();this.He.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Yl(e,n,this.Ye,this.je,r);return this.je=Mn(),this.Je=ga(),this.He=ga(),this.Ye=new Oe(fe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Wp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new et(fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new et(fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wp),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ga(){return new Oe(te.comparator)}function Gp(){return new Oe(te.comparator)}const bb={asc:"ASCENDING",desc:"DESCENDING"},Tb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sb={and:"AND",or:"OR"};class Nb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hd(t,e){return t.useProto3Json||ql(e)?e:{value:e}}function xl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ib(t,e){return xl(t,e.toTimestamp())}function yn(t){return ve(!!t,49232),oe.fromTimestamp(function(n){const r=yr(n);return new ke(r.seconds,r.nanos)}(t))}function Dh(t,e){return fd(t,e).canonicalString()}function fd(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Mv(t){const e=Ne.fromString(t);return ve(zv(e),10190,{key:e.toString()}),e}function md(t,e){return Dh(t.databaseId,e.path)}function ec(t,e){const n=Mv(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(Lv(n))}function Ov(t,e){return Dh(t.databaseId,e)}function Ab(t){const e=Mv(t);return e.length===4?Ne.emptyPath():Lv(e)}function pd(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Lv(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Qp(t,e,n){return{name:md(t,e),fields:n.value.mapValue.fields}}function Cb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:re(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,m){return h.useProto3Json?(ve(m===void 0||typeof m=="string",58123),ht.fromBase64String(m||"")):(ve(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),ht.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const m=h.code===void 0?L.UNKNOWN:jv(h.code);return new Q(m,h.message||"")}(o);n=new Dv(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ec(t,r.document.name),i=yn(r.document.updateTime),o=r.document.createTime?yn(r.document.createTime):oe.min(),u=new Ct({mapValue:{fields:r.document.fields}}),c=xt.newFoundDocument(s,i,o,u),h=r.targetIds||[],m=r.removedTargetIds||[];n=new Ma(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ec(t,r.document),i=r.readTime?yn(r.readTime):oe.min(),o=xt.newNoDocument(s,i),u=r.removedTargetIds||[];n=new Ma([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ec(t,r.document),i=r.removedTargetIds||[];n=new Ma([],i,s,null)}else{if(!("filter"in e))return re(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new vb(s,i),u=r.targetId;n=new Pv(u,o)}}return n}function kb(t,e){let n;if(e instanceof Po)n={update:Qp(t,e.key,e.value)};else if(e instanceof Rh)n={delete:md(t,e.key)};else if(e instanceof Nr)n={update:Qp(t,e.key,e.data),updateMask:Fb(e.fieldMask)};else{if(!(e instanceof pb))return re(16599,{Vt:e.type});n={verify:md(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof yl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof bo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof To)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof vl)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw re(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Ib(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:re(27497)}(t,e.precondition)),n}function Rb(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?yn(s.updateTime):yn(i);return o.isEqual(oe.min())&&(o=yn(i)),new hb(o,s.transformResults||[])}(n,e))):[]}function jb(t,e){return{documents:[Ov(t,e.path)]}}function Pb(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ov(t,s);const i=function(h){if(h.length!==0)return Uv(an.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(m=>function(g){return{field:ls(g.field),direction:Mb(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=hd(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function Db(t){let e=Ab(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=Fv(p);return g instanceof an&&pv(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(C){return new Eo(us(C.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(p){let g;return g=typeof p=="object"?p.value:p,ql(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,I=p.values||[];return new gl(I,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,I=p.values||[];return new gl(I,g)}(n.endAt)),Z2(e,s,o,i,u,"F",c,h)}function Vb(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Fv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=us(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=us(n.unaryFilter.field);return Ke.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=us(n.unaryFilter.field);return Ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=us(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return re(61313);default:return re(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(us(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return re(58110);default:return re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return an.create(n.compositeFilter.filters.map(r=>Fv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return re(1026)}}(n.compositeFilter.op))}(t):re(30097,{filter:t})}function Mb(t){return bb[t]}function Ob(t){return Tb[t]}function Lb(t){return Sb[t]}function ls(t){return{fieldPath:t.canonicalString()}}function us(t){return ut.fromServerFormat(t.fieldPath)}function Uv(t){return t instanceof Ke?function(n){if(n.op==="=="){if(Vp(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NAN"}};if(Dp(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vp(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NOT_NAN"}};if(Dp(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ls(n.field),op:Ob(n.op),value:n.value}}}(t):t instanceof an?function(n){const r=n.getFilters().map(s=>Uv(s));return r.length===1?r[0]:{compositeFilter:{op:Lb(n.op),filters:r}}}(t):re(54877,{filter:t})}function Fb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n,r,s,i=oe.min(),o=oe.min(),u=ht.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.yt=e}}function zb(t){const e=Db({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(){this.Cn=new Bb}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(gr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(gr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Bb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(Ne.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$v=41943040;class It{static withCacheSize(e){return new It(e,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */It.DEFAULT_COLLECTION_PERCENTILE=10,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,It.DEFAULT=new It($v,It.DEFAULT_COLLECTION_PERCENTILE,It.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),It.DISABLED=new It(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $s(0)}static cr(){return new $s(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="LruGarbageCollector",qb=1048576;function Xp([t,e],[n,r]){const s=fe(t,n);return s===0?fe(e,r):s}class Hb{constructor(e){this.Ir=e,this.buffer=new et(Xp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Xp(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Wb{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(Yp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ys(n)?K(Yp,"Ignoring IndexedDB error during garbage collection: ",n):await Ks(n)}await this.Vr(3e5)})}}class Gb{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Bl.ce);const r=new Hb(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Kp)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kp):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,u,c,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,u=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),os()<=ge.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${i} targets in `+(c-u)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-m}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Qb(t,e){return new Gb(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(){this.changes=new Zr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Xi(r.mutation,s,Ft.empty(),ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const s=Ur();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Vi();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ur();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Mn();const o=Yi(),u=function(){return Yi()}();return n.forEach((c,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof Nr)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),Xi(m.mutation,h,m.mutation.getFieldMask(),ke.now())):o.set(h.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>u.set(h,new Yb(m,o.get(h)??null))),u))}recalculateAndSaveOverlays(e,n){const r=Yi();let s=new Oe((o,u)=>o-u),i=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let m=r.get(c)||Ft.empty();m=u.applyToLocalView(h,m),r.set(c,m);const p=(s.get(u.batchId)||me()).add(c);s=s.insert(u.batchId,p)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,m=c.value,p=Tv();m.forEach(g=>{if(!i.has(g)){const I=kv(n.get(g),r.get(g));I!==null&&p.set(g,I),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Ur());let u=vo,c=i;return o.next(h=>U.forEach(h,(m,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),i.get(m)?U.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,me())).next(m=>({batchId:u,changes:bv(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Vi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Vi();return this.indexManager.getCollectionParents(e,i).next(u=>U.forEach(u,c=>{const h=function(p,g){return new Xs(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,xt.newInvalidDocument(m)))});let u=Vi();return o.forEach((c,h)=>{const m=i.get(c);m!==void 0&&Xi(m.mutation,h,Ft.empty(),ke.now()),Gl(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:yn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:zb(s.bundledQuery),readTime:yn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(){this.overlays=new Oe(te.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ur();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Ur(),i=n.length+1,o=new te(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Oe((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=i.get(h.largestBatchId);m===null&&(m=Ur(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=Ur(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>u.set(h,m)),!(u.size()>=s)););return U.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yb(n,r));let i=this.qr.get(n);i===void 0&&(i=me(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(){this.Qr=new et(rt.$r),this.Ur=new et(rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new rt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new te(new Ne([])),r=new rt(n,e),s=new rt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new te(new Ne([])),r=new rt(n,e),s=new rt(n,e+1);let i=me();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return te.comparator(e.key,n.key)||fe(e.Yr,n.Yr)}static Kr(e,n){return fe(e.Yr,n.Yr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new et(rt.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gb(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.Zr=this.Zr.add(new rt(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Th:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),s=new rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const u=this.Xr(o.Yr);i.push(u)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(fe);return n.forEach(s=>{const i=new rt(s,0),o=new rt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],u=>{r=r.add(u.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new rt(new te(i),0);let u=new et(fe);return this.Zr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.Yr)),!0)},o),U.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,s=>{const i=new rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new rt(n,0),s=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.ri=e,this.docs=function(){return new Oe(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=Mn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():xt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Mn();const o=n.path,u=new te(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||R2(k2(m),r)<=0||(s.has(m.key)||Gl(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){re(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new rT(this)}getSize(e){return U.resolve(this.size)}}class rT extends Kb{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.persistence=e,this.si=new Zr(n=>Ih(n),Ah),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.oi=0,this._i=new Vh,this.targetCount=0,this.ai=$s.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new $s(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n){this.ui={},this.overlays={},this.ci=new Bl(0),this.li=!1,this.li=!0,this.hi=new eT,this.referenceDelegate=e(this),this.Pi=new sT(this),this.indexManager=new $b,this.remoteDocumentCache=function(s){return new nT(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Ub(n),this.Ii=new Jb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Zb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new tT(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new iT(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class iT extends P2{constructor(e){super(),this.currentSequenceNumber=e}}class Mh{constructor(e){this.persistence=e,this.Ri=new Vh,this.Vi=null}static mi(e){return new Mh(e)}get fi(){if(this.Vi)return this.Vi;throw re(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{const s=te.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _l{constructor(e,n){this.persistence=e,this.pi=new Zr(r=>M2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Qb(this,n)}static mi(e,n){return new _l(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(u=>{u||(r++,i.removeEntry(o,oe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Pa(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=me(),s=me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Oh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Jw()?8:D2(Yw())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new oT;return this.Ss(e,n,o).next(u=>{if(i.result=u,this.Vs)return this.bs(e,n,o,u.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(os()<=ge.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",as(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(os()<=ge.DEBUG&&K("QueryEngine","Query:",as(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(os()<=ge.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",as(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):U.resolve())}ys(e,n){if(Fp(n))return U.resolve(null);let r=gn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=dd(n,null,"F"),r=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=me(...i);return this.ps.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.Ds(n,u);return this.Cs(n,h,o,c.readTime)?this.ys(e,dd(n,null,"F")):this.vs(e,h,n,c)}))})))}ws(e,n,r,s){return Fp(n)||s.isEqual(oe.min())?U.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?U.resolve(null):(os()<=ge.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),as(n)),this.vs(e,o,n,C2(s,vo)).next(u=>u))})}Ds(e,n){let r=new et(wv(e));return n.forEach((s,i)=>{Gl(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return os()<=ge.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",as(n)),this.ps.getDocumentsMatchingQuery(e,n,gr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="LocalStore",lT=3e8;class uT{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Oe(fe),this.xs=new Zr(i=>Ih(i),Ah),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function cT(t,e,n,r){return new uT(t,e,n,r)}async function qv(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=me();for(const h of s){o.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of i){u.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:u}))})})}function dT(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,c,h,m){const p=h.batch,g=p.keys();let I=U.resolve();return g.forEach(C=>{I=I.next(()=>m.getEntry(c,C)).next(j=>{const P=h.docVersions.get(C);ve(P!==null,48541),j.version.compareTo(P)<0&&(p.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),m.addEntry(j)))})}),I.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=me();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Hv(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function hT(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;u.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let I=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(ht.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,r)),s=s.insert(p,I),function(j,P,S){return j.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=lT?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,I,m)&&u.push(n.Pi.updateTargetData(i,I))});let c=Mn(),h=me();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),u.push(fT(i,o,e.documentUpdates).next(m=>{c=m.ks,h=m.qs})),!r.isEqual(oe.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(m)}return U.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.Ms=s,i))}function fT(t,e,n){let r=me(),s=me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Mn();return n.forEach((u,c)=>{const h=i.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):K(Lh,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{ks:o,qs:s}})}function mT(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Th),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pT(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new tr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function gd(t,e,n){const r=ae(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ys(o))throw o;K(Lh,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Jp(t,e,n){const r=ae(t);let s=oe.min(),i=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,m){const p=ae(c),g=p.xs.get(m);return g!==void 0?U.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,m)}(r,o,gn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:me())).next(u=>(gT(r,tb(e),u),{documents:u,Qs:i})))}function gT(t,e,n){let r=t.Os.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Zp{constructor(){this.activeTargetIds=ab()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yT{constructor(){this.Mo=new Zp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Zp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="ConnectivityMonitor";class tg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(eg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){K(eg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya=null;function yd(){return ya===null?ya=function(){return 268435456+Math.round(2147483648*Math.random())}():ya++,"0x"+ya.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="RestConnection",xT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _T{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===ml?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=yd(),u=this.zo(e,n.toUriEncodedString());K(tc,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:h}=new URL(u),m=_h(h);return this.Jo(e,u,c,r,m).then(p=>(K(tc,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ls(tc,`RPC '${e}' ${o} failed with error: `,p,"url: ",u,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=xT[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class ET extends _T{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=yd();return new Promise((u,c)=>{const h=new Qy;h.setWithCredentials(!0),h.listenOnce(Ky.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case ja.NO_ERROR:const p=h.getResponseJson();K(gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),u(p);break;case ja.TIMEOUT:K(gt,`RPC '${e}' ${o} timed out`),c(new Q(L.DEADLINE_EXCEEDED,"Request time out"));break;case ja.HTTP_ERROR:const g=h.getStatus();if(K(gt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const C=I==null?void 0:I.error;if(C&&C.status&&C.message){const j=function(S){const w=S.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(w)>=0?w:L.UNKNOWN}(C.status);c(new Q(j,C.message))}else c(new Q(L.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Q(L.UNAVAILABLE,"Connection failed."));break;default:re(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{K(gt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);K(gt,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",m,r,15)})}T_(e,n,r){const s=yd(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Jy(),u=Xy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");K(gt,`Creating RPC '${e}' stream ${s}: ${m}`,c);const p=o.createWebChannel(m,c);this.I_(p);let g=!1,I=!1;const C=new wT({Yo:P=>{I?K(gt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(K(gt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),K(gt,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},Zo:()=>p.close()}),j=(P,S,w)=>{P.listen(S,A=>{try{w(A)}catch(V){setTimeout(()=>{throw V},0)}})};return j(p,Di.EventType.OPEN,()=>{I||(K(gt,`RPC '${e}' stream ${s} transport opened.`),C.o_())}),j(p,Di.EventType.CLOSE,()=>{I||(I=!0,K(gt,`RPC '${e}' stream ${s} transport closed`),C.a_(),this.E_(p))}),j(p,Di.EventType.ERROR,P=>{I||(I=!0,Ls(gt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),C.a_(new Q(L.UNAVAILABLE,"The operation could not be completed")))}),j(p,Di.EventType.MESSAGE,P=>{var S;if(!I){const w=P.data[0];ve(!!w,16349);const A=w,V=(A==null?void 0:A.error)||((S=A[0])==null?void 0:S.error);if(V){K(gt,`RPC '${e}' stream ${s} received error:`,V);const M=V.status;let O=function(_){const E=Ge[_];if(E!==void 0)return jv(E)}(M),x=V.message;O===void 0&&(O=L.INTERNAL,x="Unknown error status: "+M+" with message "+V.message),I=!0,C.a_(new Q(O,x)),p.close()}else K(gt,`RPC '${e}' stream ${s} received:`,w),C.u_(w)}}),j(u,Yy.STAT_EVENT,P=>{P.stat===sd.PROXY?K(gt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===sd.NOPROXY&&K(gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function nc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){return new Nb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="PersistentStream";class Gv{constructor(e,n,r,s,i,o,u,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Vn(n.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Q(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(ng,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(K(ng,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bT extends Gv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Cb(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?yn(o.readTime):oe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=pd(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=ud(c)?{documents:jb(i,c)}:{query:Pb(i,c).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=Vv(i,o.resumeToken);const h=hd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(oe.min())>0){u.readTime=xl(i,o.snapshotVersion.toTimestamp());const h=hd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=Vb(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=pd(this.serializer),n.removeTarget=e,this.q_(n)}}class TT extends Gv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Rb(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=pd(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kb(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{}class NT extends ST{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,fd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(L.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Ho(e,fd(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class IT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vn(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="RemoteStore";class AT{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{es(this)&&(K(Yr,"Restarting streams for network reachability change."),await async function(c){const h=ae(c);h.Ea.add(4),await Vo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Jl(h)}(this))})}),this.Ra=new IT(r,s)}}async function Jl(t){if(es(t))for(const e of t.da)await e(!0)}async function Vo(t){for(const e of t.da)await e(!1)}function Qv(t,e){const n=ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$h(n)?zh(n):Js(n).O_()&&Uh(n,e))}function Fh(t,e){const n=ae(t),r=Js(n);n.Ia.delete(e),r.O_()&&Kv(n,e),n.Ia.size===0&&(r.O_()?r.L_():es(n)&&n.Ra.set("Unknown"))}function Uh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Js(t).Y_(e)}function Kv(t,e){t.Va.Ue(e),Js(t).Z_(e)}function zh(t){t.Va=new Eb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Js(t).start(),t.Ra.ua()}function $h(t){return es(t)&&!Js(t).x_()&&t.Ia.size>0}function es(t){return ae(t).Ea.size===0}function Yv(t){t.Va=void 0}async function CT(t){t.Ra.set("Online")}async function kT(t){t.Ia.forEach((e,n)=>{Uh(t,e)})}async function RT(t,e){Yv(t),$h(t)?(t.Ra.ha(e),zh(t)):t.Ra.set("Unknown")}async function jT(t,e,n){if(t.Ra.set("Online"),e instanceof Dv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.Va.removeTarget(u))}(t,e)}catch(r){K(Yr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wl(t,r)}else if(e instanceof Ma?t.Va.Ze(e):e instanceof Pv?t.Va.st(e):t.Va.tt(e),!n.isEqual(oe.min()))try{const r=await Hv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Va.Tt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.Ia.get(h);m&&i.Ia.set(h,m.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const m=i.Ia.get(c);if(!m)return;i.Ia.set(c,m.withResumeToken(ht.EMPTY_BYTE_STRING,m.snapshotVersion)),Kv(i,c);const p=new tr(m.target,c,h,m.sequenceNumber);Uh(i,p)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){K(Yr,"Failed to raise snapshot:",r),await wl(t,r)}}async function wl(t,e,n){if(!Ys(e))throw e;t.Ea.add(1),await Vo(t),t.Ra.set("Offline"),n||(n=()=>Hv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(Yr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Jl(t)})}function Xv(t,e){return e().catch(n=>wl(t,n,e))}async function Zl(t){const e=ae(t),n=_r(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Th;for(;PT(e);)try{const s=await mT(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,DT(e,s)}catch(s){await wl(e,s)}Jv(e)&&Zv(e)}function PT(t){return es(t)&&t.Ta.length<10}function DT(t,e){t.Ta.push(e);const n=_r(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Jv(t){return es(t)&&!_r(t).x_()&&t.Ta.length>0}function Zv(t){_r(t).start()}async function VT(t){_r(t).ra()}async function MT(t){const e=_r(t);for(const n of t.Ta)e.ea(n.mutations)}async function OT(t,e,n){const r=t.Ta.shift(),s=jh.from(r,e,n);await Xv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zl(t)}async function LT(t,e){e&&_r(t).X_&&await async function(r,s){if(function(o){return xb(o)&&o!==L.ABORTED}(s.code)){const i=r.Ta.shift();_r(r).B_(),await Xv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Zl(r)}}(t,e),Jv(t)&&Zv(t)}async function rg(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),K(Yr,"RemoteStore received new credentials");const r=es(n);n.Ea.add(3),await Vo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Jl(n)}async function FT(t,e){const n=ae(t);e?(n.Ea.delete(2),await Jl(n)):e||(n.Ea.add(2),await Vo(n),n.Ra.set("Unknown"))}function Js(t){return t.ma||(t.ma=function(n,r,s){const i=ae(n);return i.sa(),new bT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:CT.bind(null,t),t_:kT.bind(null,t),r_:RT.bind(null,t),H_:jT.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),$h(t)?zh(t):t.Ra.set("Unknown")):(await t.ma.stop(),Yv(t))})),t.ma}function _r(t){return t.fa||(t.fa=function(n,r,s){const i=ae(n);return i.sa(),new TT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:VT.bind(null,t),r_:LT.bind(null,t),ta:MT.bind(null,t),na:OT.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Zl(t)):(await t.fa.stop(),t.Ta.length>0&&(K(Yr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new Bh(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qh(t,e){if(Vn("AsyncQueue",`${e}: ${t}`),Ys(t))return new Q(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{static emptySet(e){return new Cs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Vi(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Cs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Cs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this.ga=new Oe(te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):re(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Bs{constructor(e,n,r,s,i,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Bs(e,n,Cs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class zT{constructor(){this.queries=ig(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=ig(),i.forEach((o,u)=>{for(const c of u.Sa)c.onError(r)})})(this,new Q(L.ABORTED,"Firestore shutting down"))}}function ig(){return new Zr(t=>_v(t),Wl)}async function ex(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new UT,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=qh(o,`Initialization of query '${as(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Hh(n)}async function tx(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function $T(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.Sa)u.Fa(s)&&(r=!0);o.wa=s}}r&&Hh(n)}function BT(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Hh(t){t.Ca.forEach(e=>{e.next()})}var vd,og;(og=vd||(vd={})).Ma="default",og.Cache="cache";class nx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.key=e}}class sx{constructor(e){this.key=e}}class qT{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=me(),this.mutatedKeys=me(),this.eu=wv(e),this.tu=new Cs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new sg,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),I=Gl(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),j=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let P=!1;g&&I?g.data.isEqual(I.data)?C!==j&&(r.track({type:3,doc:I}),P=!0):this.su(g,I)||(r.track({type:2,doc:I}),P=!0,(c&&this.eu(I,c)>0||h&&this.eu(I,h)<0)&&(u=!0)):!g&&I?(r.track({type:0,doc:I}),P=!0):g&&!I&&(r.track({type:1,doc:g}),P=!0,(c||h)&&(u=!0)),P&&(I?(o=o.add(I),i=j?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:u,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(I,C){const j=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re(20277,{Rt:P})}};return j(I)-j(C)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new Bs(this.query,e.tu,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=me(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new sx(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new rx(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Bs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wh="SyncEngine";class HT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class WT{constructor(e){this.key=e,this.hu=!1}}class GT{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Zr(u=>_v(u),Wl),this.Iu=new Map,this.Eu=new Set,this.du=new Oe(te.comparator),this.Au=new Map,this.Ru=new Vh,this.Vu={},this.mu=new Map,this.fu=$s.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QT(t,e,n=!0){const r=cx(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await ix(r,e,n,!0),s}async function KT(t,e){const n=cx(t);await ix(n,e,!0,!1)}async function ix(t,e,n,r){const s=await pT(t.localStore,gn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await YT(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Qv(t.remoteStore,s),u}async function YT(t,e,n,r,s){t.pu=(p,g,I)=>async function(j,P,S,w){let A=P.view.ru(S);A.Cs&&(A=await Jp(j.localStore,P.query,!1).then(({documents:x})=>P.view.ru(x,A)));const V=w&&w.targetChanges.get(P.targetId),M=w&&w.targetMismatches.get(P.targetId)!=null,O=P.view.applyChanges(A,j.isPrimaryClient,V,M);return lg(j,P.targetId,O.au),O.snapshot}(t,p,g,I);const i=await Jp(t.localStore,e,!0),o=new qT(e,i.Qs),u=o.ru(i.documents),c=Do.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(u,t.isPrimaryClient,c);lg(t,n,h.au);const m=new HT(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function XT(t,e,n){const r=ae(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Wl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await gd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Fh(r.remoteStore,s.targetId),xd(r,s.targetId)}).catch(Ks)):(xd(r,s.targetId),await gd(r.localStore,s.targetId,!0))}async function JT(t,e){const n=ae(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fh(n.remoteStore,r.targetId))}async function ZT(t,e,n){const r=oS(t);try{const s=await function(o,u){const c=ae(o),h=ke.now(),m=u.reduce((I,C)=>I.add(C.key),me());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let C=Mn(),j=me();return c.Ns.getEntries(I,m).next(P=>{C=P,C.forEach((S,w)=>{w.isValidDocument()||(j=j.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,C)).next(P=>{p=P;const S=[];for(const w of u){const A=mb(w,p.get(w.key).overlayedDocument);A!=null&&S.push(new Nr(w.key,A,hv(A.value.mapValue),sn.exists(!0)))}return c.mutationQueue.addMutationBatch(I,h,S,u)}).next(P=>{g=P;const S=P.applyToLocalDocumentSet(p,j);return c.documentOverlayCache.saveOverlays(I,P.batchId,S)})}).then(()=>({batchId:g.batchId,changes:bv(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Oe(fe)),h=h.insert(u,c),o.Vu[o.currentUser.toKey()]=h}(r,s.batchId,n),await Mo(r,s.changes),await Zl(r.remoteStore)}catch(s){const i=qh(s,"Failed to persist write");n.reject(i)}}async function ox(t,e){const n=ae(t);try{const r=await hT(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ve(o.hu,14607):s.removedDocuments.size>0&&(ve(o.hu,42227),o.hu=!1))}),await Mo(n,r,e)}catch(r){await Ks(r)}}function ag(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=ae(o);c.onlineState=u;let h=!1;c.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(u)&&(h=!0)}),h&&Hh(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function eS(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Oe(te.comparator);o=o.insert(i,xt.newNoDocument(i,oe.min()));const u=me().add(i),c=new Yl(oe.min(),new Map,new Oe(fe),o,u);await ox(r,c),r.du=r.du.remove(i),r.Au.delete(e),Gh(r)}else await gd(r.localStore,e,!1).then(()=>xd(r,e,n)).catch(Ks)}async function tS(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await dT(n.localStore,e);lx(n,r,null),ax(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mo(n,s)}catch(s){await Ks(s)}}async function nS(t,e,n){const r=ae(t);try{const s=await function(o,u){const c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return c.mutationQueue.lookupMutationBatch(h,u).next(p=>(ve(p!==null,37113),m=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>c.localDocuments.getDocuments(h,m))})}(r.localStore,e);lx(r,e,n),ax(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mo(r,s)}catch(s){await Ks(s)}}function ax(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function lx(t,e,n){const r=ae(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function xd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||ux(t,r)})}function ux(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Fh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Gh(t))}function lg(t,e,n){for(const r of n)r instanceof rx?(t.Ru.addReference(r.key,e),rS(t,r)):r instanceof sx?(K(Wh,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ux(t,r.key)):re(19791,{wu:r})}function rS(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(K(Wh,"New document in limbo: "+n),t.Eu.add(r),Gh(t))}function Gh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(Ne.fromString(e)),r=t.fu.next();t.Au.set(r,new WT(n)),t.du=t.du.insert(n,r),Qv(t.remoteStore,new tr(gn(Ch(n.path)),r,"TargetPurposeLimboResolution",Bl.ce))}}async function Mo(t,e,n){const r=ae(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((u,c)=>{o.push(r.pu(c,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Oh.As(c.targetId,h);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,h){const m=ae(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(h,g=>U.forEach(g.Es,I=>m.persistence.referenceDelegate.addReference(p,g.targetId,I)).next(()=>U.forEach(g.ds,I=>m.persistence.referenceDelegate.removeReference(p,g.targetId,I)))))}catch(p){if(!Ys(p))throw p;K(Lh,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const I=m.Ms.get(g),C=I.snapshotVersion,j=I.withLastLimboFreeSnapshotVersion(C);m.Ms=m.Ms.insert(g,j)}}}(r.localStore,i))}async function sS(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){K(Wh,"User change. New user:",e.toKey());const r=await qv(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(u=>{u.forEach(c=>{c.reject(new Q(L.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mo(n,r.Ls)}}function iS(t,e){const n=ae(t),r=n.Au.get(e);if(r&&r.hu)return me().add(r.key);{let s=me();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const u=n.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}function cx(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ox.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eS.bind(null,e),e.Pu.H_=$T.bind(null,e.eventManager),e.Pu.yu=BT.bind(null,e.eventManager),e}function oS(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nS.bind(null,e),e}class El{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return cT(this.persistence,new aT,e.initialUser,this.serializer)}Cu(e){return new Bv(Mh.mi,this.serializer)}Du(e){return new yT}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}El.provider={build:()=>new El};class aS extends El{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ve(this.persistence.referenceDelegate instanceof _l,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Wb(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?It.withCacheSize(this.cacheSizeBytes):It.DEFAULT;return new Bv(r=>_l.mi(r,n),this.serializer)}}class _d{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ag(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sS.bind(null,this.syncEngine),await FT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zT}()}createDatastore(e){const n=Xl(e.databaseInfo.databaseId),r=function(i){return new ET(i)}(e.databaseInfo);return function(i,o,u,c){return new NT(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new AT(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>ag(this.syncEngine,n,0),function(){return tg.v()?new tg:new vT}())}createSyncEngine(e,n){return function(s,i,o,u,c,h,m){const p=new GT(s,i,o,u,c,h);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);K(Yr,"RemoteStore shutting down."),i.Ea.add(5),await Vo(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}_d.provider={build:()=>new _d};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr="FirestoreClient";class lS{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=bh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K(wr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(wr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=qh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rc(t,e){t.asyncQueue.verifyOperationInProgress(),K(wr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await qv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ug(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uS(t);K(wr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>rg(e.remoteStore,s)),t._onlineComponents=e}async function uS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(wr,"Using user provided OfflineComponentProvider");try{await rc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ls("Error using user provided cache. Falling back to memory cache: "+n),await rc(t,new El)}}else K(wr,"Using default OfflineComponentProvider"),await rc(t,new aS(void 0));return t._offlineComponents}async function hx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(wr,"Using user provided OnlineComponentProvider"),await ug(t,t._uninitializedComponentsProvider._online)):(K(wr,"Using default OnlineComponentProvider"),await ug(t,new _d))),t._onlineComponents}function cS(t){return hx(t).then(e=>e.syncEngine)}async function fx(t){const e=await hx(t),n=e.eventManager;return n.onListen=QT.bind(null,e.syncEngine),n.onUnlisten=XT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JT.bind(null,e.syncEngine),n}function dS(t,e,n={}){const r=new An;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const m=new dx({next:g=>{m.Nu(),o.enqueueAndForget(()=>tx(i,p));const I=g.docs.has(u);!I&&g.fromCache?h.reject(new Q(L.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&g.fromCache&&c&&c.source==="server"?h.reject(new Q(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new nx(Ch(u.path),m,{includeMetadataChanges:!0,qa:!0});return ex(i,p)}(await fx(t),t.asyncQueue,e,n,r)),r.promise}function hS(t,e,n={}){const r=new An;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const m=new dx({next:g=>{m.Nu(),o.enqueueAndForget(()=>tx(i,p)),g.fromCache&&c.source==="server"?h.reject(new Q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new nx(u,m,{includeMetadataChanges:!0,qa:!0});return ex(i,p)}(await fx(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="firestore.googleapis.com",dg=!0;class hg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=px,this.ssl=dg}else this.host=e.host,this.ssl=e.ssl??dg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$v;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qb)throw new Q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mx(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new v2;switch(r.type){case"firstParty":return new E2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cg.get(n);r&&(K("ComponentProvider","Removing Datastore"),cg.delete(n),r.terminate())}(this),Promise.resolve()}}function fS(t,e,n,r={}){var h;t=_n(t,eu);const s=_h(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(Hw(`https://${u}`),Kw("Firestore",!0)),i.host!==px&&i.host!==u&&Ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:u,ssl:s,emulatorOptions:r};if(!cl(c,o)&&(t._setSettings(c),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=yt.MOCK_USER;else{m=Ww(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new yt(g)}t._authCredentials=new x2(new ev(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class He{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new He(this.firestore,e,this._key)}toJSON(){return{type:He._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(jo(n,He._jsonSchema))return new He(e,r||null,new te(Ne.fromString(n.referencePath)))}}He._jsonSchemaVersion="firestore/documentReference/1.0",He._jsonSchema={type:Ye("string",He._jsonSchemaVersion),referencePath:Ye("string")};class fr extends ts{constructor(e,n,r){super(e,n,Ch(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new He(this.firestore,null,new te(e))}withConverter(e){return new fr(this.firestore,e,this._path)}}function Vt(t,e,...n){if(t=Pn(t),tv("collection","path",e),t instanceof eu){const r=Ne.fromString(e,...n);return Sp(r),new fr(t,null,r)}{if(!(t instanceof He||t instanceof fr))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Sp(r),new fr(t.firestore,null,r)}}function Ue(t,e,...n){if(t=Pn(t),arguments.length===1&&(e=bh.newId()),tv("doc","path",e),t instanceof eu){const r=Ne.fromString(e,...n);return Tp(r),new He(t,null,new te(r))}{if(!(t instanceof He||t instanceof fr))throw new Q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return Tp(r),new He(t.firestore,t instanceof fr?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="AsyncQueue";class mg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wv(this,"async_queue_retry"),this._c=()=>{const r=nc();r&&K(fg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=nc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=nc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new An;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ys(e))throw e;K(fg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Vn("INTERNAL UNHANDLED ERROR: ",pg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Bh.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&re(47125,{Pc:pg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function pg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Zs extends eu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new mg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mg(e),this._firestoreClient=void 0,await e}}}function mS(t,e){const n=typeof t=="object"?t:i2(),r=typeof t=="string"?t:ml,s=e2(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Bw("firestore");i&&fS(s,...i)}return s}function Qh(t){if(t._terminated)throw new Q(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pS(t),t._firestoreClient}function pS(t){var r,s,i;const e=t._freezeSettings(),n=function(u,c,h,m){return new F2(u,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,mx(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new lS(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gt(ht.fromBase64String(e))}catch(n){throw new Q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gt(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jo(e,Gt._jsonSchema))return Gt.fromBase64String(e.bytes)}}Gt._jsonSchemaVersion="firestore/bytes/1.0",Gt._jsonSchema={type:Ye("string",Gt._jsonSchemaVersion),bytes:Ye("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vn._jsonSchemaVersion}}static fromJSON(e){if(jo(e,vn._jsonSchema))return new vn(e.latitude,e.longitude)}}vn._jsonSchemaVersion="firestore/geoPoint/1.0",vn._jsonSchema={type:Ye("string",vn._jsonSchemaVersion),latitude:Ye("number"),longitude:Ye("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:xn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jo(e,xn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new xn(e.vectorValues);throw new Q(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xn._jsonSchemaVersion="firestore/vectorValue/1.0",xn._jsonSchema={type:Ye("string",xn._jsonSchemaVersion),vectorValues:Ye("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=/^__.*__$/;class yS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Po(e,this.data,n,this.fieldTransforms)}}class gx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Nr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re(40011,{Ac:t})}}class Yh{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Yh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return bl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yx(this.Ac)&&gS.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xl(e)}Cc(e,n,r,s=!1){return new Yh({Ac:e,methodName:n,Dc:r,path:ut.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xh(t){const e=t._freezeSettings(),n=Xl(t._databaseId);return new vS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xS(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Jh("Data must be an object, but it was:",o,r);const u=vx(r,o);let c,h;if(i.merge)c=new Ft(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=wd(e,p,n);if(!o.contains(g))throw new Q(L.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);_x(m,g)||m.push(g)}c=new Ft(m),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new yS(new Ct(u),c,h)}class nu extends Kh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nu}}function _S(t,e,n,r){const s=t.Cc(1,e,n);Jh("Data must be an object, but it was:",s,r);const i=[],o=Ct.empty();Sr(r,(c,h)=>{const m=Zh(e,c,n);h=Pn(h);const p=s.yc(m);if(h instanceof nu)i.push(m);else{const g=Oo(h,p);g!=null&&(i.push(m),o.set(m,g))}});const u=new Ft(i);return new gx(o,u,s.fieldTransforms)}function wS(t,e,n,r,s,i){const o=t.Cc(1,e,n),u=[wd(e,r,n)],c=[s];if(i.length%2!=0)throw new Q(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)u.push(wd(e,i[g])),c.push(i[g+1]);const h=[],m=Ct.empty();for(let g=u.length-1;g>=0;--g)if(!_x(h,u[g])){const I=u[g];let C=c[g];C=Pn(C);const j=o.yc(I);if(C instanceof nu)h.push(I);else{const P=Oo(C,j);P!=null&&(h.push(I),m.set(I,P))}}const p=new Ft(h);return new gx(m,p,o.fieldTransforms)}function ES(t,e,n,r=!1){return Oo(n,t.Cc(r?4:3,e))}function Oo(t,e){if(xx(t=Pn(t)))return Jh("Unsupported field value:",e,t),vx(t,e);if(t instanceof Kh)return function(r,s){if(!yx(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=Oo(u,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Pn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ke.fromDate(r);return{timestampValue:xl(s.serializer,i)}}if(r instanceof ke){const i=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xl(s.serializer,i)}}if(r instanceof vn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gt)return{bytesValue:Vv(s.serializer,r._byteString)};if(r instanceof He){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Dh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof xn)return function(o,u){return{mapValue:{fields:{[cv]:{stringValue:dv},[pl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return kh(u.serializer,h)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${$l(r)}`)}(t,e)}function vx(t,e){const n={};return sv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sr(t,(r,s)=>{const i=Oo(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function xx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof vn||t instanceof Gt||t instanceof He||t instanceof Kh||t instanceof xn)}function Jh(t,e,n){if(!xx(n)||!nv(n)){const r=$l(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function wd(t,e,n){if((e=Pn(e))instanceof tu)return e._internalPath;if(typeof e=="string")return Zh(t,e);throw bl("Field path arguments must be of type string or ",t,!1,void 0,n)}const bS=new RegExp("[~\\*/\\[\\]]");function Zh(t,e,n){if(e.search(bS)>=0)throw bl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tu(...e.split("."))._internalPath}catch{throw bl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Q(L.INVALID_ARGUMENT,u+t+c)}function _x(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ru("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TS extends wx{data(){return super.data()}}function ru(t,e){return typeof e=="string"?Zh(t,e):e instanceof tu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ef{}class Ex extends ef{}function Wn(t,e,...n){let r=[];e instanceof ef&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof tf).length,u=i.filter(c=>c instanceof su).length;if(o>1||o>0&&u>0)throw new Q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class su extends Ex{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new su(e,n,r)}_apply(e){const n=this._parse(e);return bx(e._query,n),new ts(e.firestore,e.converter,cd(e._query,n))}_parse(e){const n=Xh(e.firestore);return function(i,o,u,c,h,m,p){let g;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){vg(p,m);const C=[];for(const j of p)C.push(yg(c,i,j));g={arrayValue:{values:C}}}else g=yg(c,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||vg(p,m),g=ES(u,o,p,m==="in"||m==="not-in");return Ke.create(h,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ni(t,e,n){const r=e,s=ru("where",t);return su._create(s,r,n)}class tf extends ef{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:an.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)bx(o,c),o=cd(o,c)}(e._query,n),new ts(e.firestore,e.converter,cd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nf extends Ex{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new nf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Eo(i,o)}(e._query,this._field,this._direction);return new ts(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Xs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function gg(t,e="asc"){const n=e,r=ru("orderBy",t);return nf._create(r,n)}function yg(t,e,n){if(typeof(n=Pn(n))=="string"){if(n==="")throw new Q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xv(e)&&n.indexOf("/")!==-1)throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!te.isDocumentKey(r))throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pp(t,new te(r))}if(n instanceof He)return Pp(t,n._key);throw new Q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$l(n)}.`)}function vg(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bx(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class NS{convertValue(e,n="none"){switch(xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Sr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[pl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Be(o.doubleValue));return new xn(n)}convertGeoPoint(e){return new vn(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Hl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xo(e));default:return null}}convertTimestamp(e){const n=yr(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);ve(zv(r),9688,{name:e});const s=new _o(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||Vn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Oi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Br extends wx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Oa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ru("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Br._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Br._jsonSchemaVersion="firestore/documentSnapshot/1.0",Br._jsonSchema={type:Ye("string",Br._jsonSchemaVersion),bundleSource:Ye("string","DocumentSnapshot"),bundleName:Ye("string"),bundle:Ye("string")};class Oa extends Br{data(e={}){return super.data(e)}}class ks{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Oi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Oa(this._firestore,this._userDataWriter,r.key,r,new Oi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new Oa(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Oi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new Oa(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Oi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),m=o.indexOf(u.doc.key)),{type:AS(u.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ks._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function AS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){t=_n(t,He);const e=_n(t.firestore,Zs);return dS(Qh(e),t._key).then(n=>CS(e,t,n))}ks._jsonSchemaVersion="firestore/querySnapshot/1.0",ks._jsonSchema={type:Ye("string",ks._jsonSchemaVersion),bundleSource:Ye("string","QuerySnapshot"),bundleName:Ye("string"),bundle:Ye("string")};class Tx extends NS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,n)}}function Nt(t){t=_n(t,ts);const e=_n(t.firestore,Zs),n=Qh(e),r=new Tx(e);return SS(t._query),hS(n,t._query).then(s=>new ks(e,r,t,s))}function Gn(t,e,n){t=_n(t,He);const r=_n(t.firestore,Zs),s=IS(t.converter,e,n);return rf(r,[xS(Xh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,sn.none())])}function Ii(t,e,n,...r){t=_n(t,He);const s=_n(t.firestore,Zs),i=Xh(s);let o;return o=typeof(e=Pn(e))=="string"||e instanceof tu?wS(i,"updateDoc",t._key,e,n,r):_S(i,"updateDoc",t._key,e),rf(s,[o.toMutation(t._key,sn.exists(!0))])}function Qn(t){return rf(_n(t.firestore,Zs),[new Rh(t._key,sn.none())])}function rf(t,e){return function(r,s){const i=new An;return r.asyncQueue.enqueueAndForget(async()=>ZT(await cS(r),s,i)),i.promise}(Qh(t),e)}function CS(t,e,n){const r=n.docs.get(e._key),s=new Tx(t);return new Br(t,s,e._key,r,new Oi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Qs=s})(s2),hl(new go("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new Zs(new _2(r.getProvider("auth-internal")),new b2(o,r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _o(h.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),As(_p,wp,e),As(_p,wp,"esm2020")})();const Ed={apiKey:"AIzaSyAO32W5Qdmdbt9mtp_ScyQE2fO5bEYC3LU",authDomain:"yj-order.firebaseapp.com",projectId:"yj-order",storageBucket:"yj-order.firebasestorage.app",messagingSenderId:"399409684502",appId:"1:399409684502:web:33a5660e855671d3211537"},kS=qy(Ed),de=mS(kS),RS=!!Ed.apiKey&&!!Ed.projectId,be={ORDERS:"cofoodie_orders",MENU_CATEGORIES:"cofoodie_menus_v3",EMPLOYEES:"cofoodie_employees_v2",ANNOUNCEMENTS:"cofoodie_announcements",ADMIN_SETTINGS:"cofoodie_admin_settings",ADMIN_ACCOUNTS:"cofoodie_admin_accounts",SESSION:"cofoodie_session",SESSION_USER_ID:"cofoodie_session_user_id",FRONTEND_PASSWORD:"cofoodie_frontend_password"},jS=[],PS=[],DS=[],Ai=[{id:"default_admin",name:"",username:"admin",password:"password",isSuperAdmin:!0}],va="24664941";class VS{get useCloud(){return RS}async getOrders(){if(this.useCloud)try{const n=Wn(Vt(de,"orders"),gg("timestamp","desc"));return(await Nt(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){return console.error("Fetch Orders Error:",n),[]}const e=localStorage.getItem(be.ORDERS);return e?JSON.parse(e):[]}async saveOrder(e){if(this.useCloud){const{id:r,...s}=e;await Gn(Ue(de,"orders",r),s);return}const n=await this.getOrders();n.push(e),localStorage.setItem(be.ORDERS,JSON.stringify(n))}async updateOrderStatus(e,n){if(this.useCloud){const i=Ue(de,"orders",e);await Ii(i,{status:n});return}const r=await this.getOrders(),s=r.findIndex(i=>i.id===e);s!==-1&&(r[s].status=n,localStorage.setItem(be.ORDERS,JSON.stringify(r)))}async toggleOrderPayment(e){if(this.useCloud){const s=Ue(de,"orders",e),i=await xg(s);if(i.exists()){const o=i.data().isPaid;await Ii(s,{isPaid:!o})}else console.error(`Order with ID ${e} not found for payment toggle.`);return}const n=await this.getOrders(),r=n.findIndex(s=>s.id===e);r!==-1&&(n[r].isPaid=!n[r].isPaid,localStorage.setItem(be.ORDERS,JSON.stringify(n)))}async deleteOrdersByContext(e,n){if(this.useCloud){try{const s=Wn(Vt(de,"orders"),Ni("dateStr","==",e),Ni("categoryLabel","==",n)),o=(await Nt(s)).docs.map(u=>Qn(Ue(de,"orders",u.id)));await Promise.all(o)}catch(s){console.error("Delete Orders Error:",s)}return}let r=await this.getOrders();r=r.filter(s=>!(s.dateStr===e&&s.categoryLabel===n)),localStorage.setItem(be.ORDERS,JSON.stringify(r))}async getMenuCategories(){if(this.useCloud){const n=Wn(Vt(de,"menus"));return(await Nt(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(be.MENU_CATEGORIES);return e?JSON.parse(e):jS}async saveMenuCategories(e){this.useCloud||localStorage.setItem(be.MENU_CATEGORIES,JSON.stringify(e))}async addMenuCategory(e,n){if(this.useCloud){const i="MENU_"+Date.now();await Gn(Ue(de,"menus",i),{label:e,config:n});return}const r=await this.getMenuCategories(),s="MENU_"+Date.now();r.push({id:s,label:e,config:n}),await this.saveMenuCategories(r)}async updateMenuCategory(e,n,r){if(this.useCloud){await Ii(Ue(de,"menus",e),{label:n,config:r});return}const s=await this.getMenuCategories(),i=s.findIndex(o=>o.id===e);i!==-1&&(s[i].label=n,s[i].config=r,await this.saveMenuCategories(s))}async deleteMenuCategory(e){if(this.useCloud){await Qn(Ue(de,"menus",e));return}let n=await this.getMenuCategories();n=n.filter(r=>r.id!==e),await this.saveMenuCategories(n)}async getEmployees(){if(this.useCloud){const n=Wn(Vt(de,"employees"),gg("name"));return(await Nt(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(be.EMPLOYEES);return e?JSON.parse(e):PS}async saveEmployees(e){this.useCloud||localStorage.setItem(be.EMPLOYEES,JSON.stringify(e))}async addEmployee(e){if(this.useCloud){const{id:r,...s}=e;await Gn(Ue(de,"employees",r),s);return}const n=await this.getEmployees();n.push(e),await this.saveEmployees(n)}async updateEmployee(e){if(this.useCloud){await Ii(Ue(de,"employees",e.id),{name:e.name});return}const r=(await this.getEmployees()).map(s=>s.id===e.id?e:s);await this.saveEmployees(r)}async deleteEmployee(e){if(this.useCloud){await Qn(Ue(de,"employees",e));return}const r=(await this.getEmployees()).filter(s=>s.id!==e);await this.saveEmployees(r)}async getAnnouncements(){if(this.useCloud){const n=Wn(Vt(de,"announcements"));return(await Nt(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(be.ANNOUNCEMENTS);return e?JSON.parse(e):DS}async saveAnnouncements(e){if(this.useCloud){for(const n of e)await Gn(Ue(de,"announcements",n.id),{content:n.content,isActive:n.isActive},{merge:!0});return}localStorage.setItem(be.ANNOUNCEMENTS,JSON.stringify(e))}async getAdminSettings(){if(this.useCloud)return{isGoogleBound:!0,googleAccountName:"Firebase Mode",googleAccountType:"WORKSPACE"};const e=localStorage.getItem(be.ADMIN_SETTINGS);return e?JSON.parse(e):{isGoogleBound:!1,googleAccountName:"",googleAccountType:"PERSONAL"}}async setGoogleBound(e,n="",r="PERSONAL"){const s={isGoogleBound:e,googleAccountName:n,googleAccountType:r};localStorage.setItem(be.ADMIN_SETTINGS,JSON.stringify(s))}async checkDatabaseConnection(){if(this.useCloud)try{return await Nt(Vt(de,"admins")),!0}catch{return!1}return new Promise(e=>{setTimeout(()=>{e(!0)},1e3)})}async getAdminAccounts(){if(this.useCloud){const n=Wn(Vt(de,"admins")),s=(await Nt(n)).docs.map(i=>({id:i.id,...i.data()}));if(s.length===0){for(const i of Ai)await Gn(Ue(de,"admins",i.id),{...i});return Ai}return s}const e=localStorage.getItem(be.ADMIN_ACCOUNTS);return e?JSON.parse(e):(localStorage.setItem(be.ADMIN_ACCOUNTS,JSON.stringify(Ai)),Ai)}async saveAdminAccounts(e){this.useCloud||localStorage.setItem(be.ADMIN_ACCOUNTS,JSON.stringify(e))}async verifyAdmin(e,n){if(this.useCloud){if(!de)return null;const i=Vt(de,"admins");if((await Nt(i)).empty){console.log("No admins found in DB, seeding default admins...");for(const m of Ai)await Gn(Ue(de,"admins",m.id),{...m})}const u=Wn(i,Ni("username","==",e),Ni("password","==",n)),c=await Nt(u);if(c.empty)return null;const h=c.docs[0];return{id:h.id,...h.data()}}return(await this.getAdminAccounts()).find(i=>i.username===e&&i.password===n)||null}async getAdminById(e){return(await this.getAdminAccounts()).find(r=>r.id===e)}async addAdminAccount(e){if(this.useCloud){const r=Wn(Vt(de,"admins"),Ni("username","==",e.username));if(!(await Nt(r)).empty)throw new Error("");const{id:i,...o}=e;await Gn(Ue(de,"admins",i),o);return}const n=await this.getAdminAccounts();if(n.some(r=>r.username===e.username))throw new Error("");n.push(e),await this.saveAdminAccounts(n)}async updateAdminAccount(e){if(this.useCloud){const{id:s,...i}=e;await Ii(Ue(de,"admins",s),i);return}const n=await this.getAdminAccounts(),r=n.findIndex(s=>s.id===e.id);r!==-1&&(n[r]=e,await this.saveAdminAccounts(n))}async deleteAdminAccount(e){if(this.useCloud){await Qn(Ue(de,"admins",e));return}let n=await this.getAdminAccounts();n=n.filter(r=>r.id!==e),await this.saveAdminAccounts(n)}async getFrontendPassword(){if(this.useCloud){if(!de)return va;try{const n=Ue(de,"settings","global"),r=await xg(n);return r.exists()&&r.data().frontendPassword?r.data().frontendPassword:va}catch(n){return console.error("Error fetching frontend password:",n),va}}return localStorage.getItem(be.FRONTEND_PASSWORD)||va}async setFrontendPassword(e){if(this.useCloud){await Gn(Ue(de,"settings","global"),{frontendPassword:e},{merge:!0});return}localStorage.setItem(be.FRONTEND_PASSWORD,e)}async clearAllData(){if(this.useCloud){const e=await Nt(Vt(de,"orders"));for(const i of e.docs)await Qn(Ue(de,"orders",i.id));const n=await Nt(Vt(de,"menus"));for(const i of n.docs)await Qn(Ue(de,"menus",i.id));const r=await Nt(Vt(de,"employees"));for(const i of r.docs)await Qn(Ue(de,"employees",i.id));const s=await Nt(Vt(de,"announcements"));for(const i of s.docs)await Qn(Ue(de,"announcements",i.id));return}localStorage.removeItem(be.ORDERS),localStorage.removeItem(be.MENU_CATEGORIES),localStorage.removeItem(be.EMPLOYEES),localStorage.removeItem(be.ANNOUNCEMENTS)}setSession(e,n){localStorage.setItem(be.SESSION,e),n&&localStorage.setItem(be.SESSION_USER_ID,n)}getSession(){const e=localStorage.getItem(be.SESSION),n=localStorage.getItem(be.SESSION_USER_ID);return{role:e,userId:n}}clearSession(){localStorage.removeItem(be.SESSION),localStorage.removeItem(be.SESSION_USER_ID)}}const MS=new VS,ee=MS;var Sx=(t=>(t.PENDING="PENDING",t.CONFIRMED="CONFIRMED",t.COMPLETED="COMPLETED",t.CANCELLED="CANCELLED",t))(Sx||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),se=(t,e)=>{const n=H.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...h},m)=>H.createElement("svg",{ref:m,...OS,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${LS(t)}`,u].join(" "),...h},[...e.map(([p,g])=>H.createElement(p,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=se("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const US=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=se("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $S=se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=se("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eg=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=se("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BS=se("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qS=se("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HS=se("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=se("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=se("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WS=se("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GS=se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KS=se("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=se("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=se("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=se("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=se("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=se("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=se("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=se("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=se("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=se("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=se("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=se("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=se("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=se("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),dN=({onLogout:t,onGoToAdmin:e})=>{const[n,r]=H.useState([]),[s,i]=H.useState(""),[o,u]=H.useState("CARD"),[c,h]=H.useState(null),[m,p]=H.useState(null),[g,I]=H.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[C,j]=H.useState([]),[P,S]=H.useState(""),[w,A]=H.useState(""),[V,M]=H.useState(""),[O,x]=H.useState(""),[y,_]=H.useState("ALL"),[E,T]=H.useState([]),[N,b]=H.useState([]),[Ee,$e]=H.useState([]),[F,ie]=H.useState(new Date),$=z=>{const ce=new Date(z),Z=ce.getDay(),_e=ce.getDate()-Z+(Z===0?-6:1);return new Date(ce.setDate(_e))},G=new Date().toISOString().split("T")[0];H.useEffect(()=>{const z=setInterval(()=>ie(new Date),1e3);(async()=>{const[_e,ft,Le,ot]=await Promise.all([ee.getMenuCategories(),ee.getEmployees(),ee.getAnnouncements(),ee.getOrders()]);r(_e);const Ln=Array.from(new Set(_e.map(Ar=>Ar.label)));if(Ln.length>0&&!s){const Ar=Ln.includes("")?"":Ln[0];i(Ar)}T(ft),b(Le.filter(Ar=>Ar.isActive)),$e(ot)})();const Z=()=>{window.innerWidth>=1024&&I(!0)};return window.addEventListener("resize",Z),()=>{clearInterval(z),window.removeEventListener("resize",Z)}},[]),H.useEffect(()=>{if(!s)return;const z=n.filter(Z=>Z.label===s),ce=z.find(Z=>Z.config.date===G);if(ce)h(ce);else if(z.length>0){const Z=[...z].sort((_e,ft)=>ft.config.date.localeCompare(_e.config.date));h(Z[0])}else h(null)},[s,n]);const X=Array.from(new Set(n.map(z=>z.label))),ne=n.filter(z=>z.label===s),xe=$(new Date),tt=Array.from({length:5}).map((z,ce)=>{const Z=new Date(xe);return Z.setDate(xe.getDate()+ce),Z.toISOString().split("T")[0]}),We=["","","","",""],Se=[{active:"bg-blue-50 text-blue-800 border-blue-600",hover:"hover:bg-blue-50 hover:text-blue-600",border:"border-blue-600",badge:"bg-blue-100 text-blue-700"},{active:"bg-emerald-50 text-emerald-800 border-emerald-600",hover:"hover:bg-emerald-50 hover:text-emerald-600",border:"border-emerald-600",badge:"bg-emerald-100 text-emerald-700"},{active:"bg-amber-50 text-amber-800 border-amber-600",hover:"hover:bg-amber-50 hover:text-amber-600",border:"border-amber-600",badge:"bg-amber-100 text-amber-700"},{active:"bg-rose-50 text-rose-800 border-rose-600",hover:"hover:bg-rose-50 hover:text-rose-600",border:"border-rose-600",badge:"bg-rose-100 text-rose-700"},{active:"bg-violet-50 text-violet-800 border-violet-600",hover:"hover:bg-violet-50 hover:text-violet-600",border:"border-violet-600",badge:"bg-violet-100 text-violet-700"}],k=z=>{if(!z)return"bg-slate-100 text-slate-500";const ce=X.indexOf(z);if(ce!==-1)return Se[ce%Se.length].badge;const Z=z.split("").reduce((_e,ft)=>_e+ft.charCodeAt(0),0);return Se[Z%Se.length].badge},B=c?c.config.date<G:!1,J=()=>{if(!P){alert("");return}if(!w){alert("");return}if(!O){alert("");return}const z={id:Date.now().toString(),name:w,note:V,price:Number(O)};j([...C,z]),A(""),M(""),x("")},le=async()=>{if(!P||C.length===0){alert("");return}const z=E.find(_e=>_e.id===P),ce={id:Date.now().toString(),employeeName:z?z.name:"Unknown",items:C,totalAmount:C.reduce((_e,ft)=>_e+ft.price,0),timestamp:Date.now(),status:Sx.PENDING,dateStr:G,categoryLabel:s};await ee.saveOrder(ce),alert(""),j([]),S("");const Z=await ee.getOrders();$e(Z)},Pe=Ee.filter(z=>z.dateStr===G).sort((z,ce)=>ce.timestamp-z.timestamp),Ir=Array.from(new Set(Pe.map(z=>z.categoryLabel||""))),ti=Pe.filter(z=>y==="ALL"||(z.categoryLabel||"")===y),En=s===""||s===""||s===""||s==="";return l.jsxs("div",{className:"min-h-screen bg-slate-50 pb-32",children:[l.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:[l.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 flex justify-between items-center text-sm",children:[l.jsxs("div",{className:"font-mono flex items-center gap-2",children:[l.jsx(sc,{size:14}),F.toLocaleDateString("zh-TW")," ",F.toLocaleTimeString("zh-TW",{hour12:!1})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:e,className:"flex items-center gap-1 text-slate-300 hover:text-white text-xs transition-colors",children:[l.jsx(HS,{size:14})," "]}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white text-xs",children:"Exit"})]})]}),l.jsx("div",{className:"bg-gradient-to-r from-amber-400 via-orange-500 to-amber-400 text-white font-bold overflow-hidden whitespace-nowrap py-2 shadow-inner",children:l.jsx("div",{className:"inline-block animate-marquee pl-full",children:N.map((z,ce)=>l.jsxs("span",{className:"mx-8 drop-shadow-sm",children:[" ",z.content]},ce))})}),l.jsx("div",{className:"text-center py-4 bg-white border-b border-slate-100",children:l.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:""})}),l.jsx("div",{className:"flex justify-center border-b border-slate-200 overflow-x-auto px-4 bg-white",children:X.length===0?l.jsxs("div",{className:"p-4 text-slate-400 text-sm flex items-center gap-2",children:[l.jsx(BS,{size:16})," "]}):X.map((z,ce)=>{const Z=Se[ce%Se.length],_e=s===z;return l.jsx("button",{onClick:()=>{i(z),u("CARD")},className:`px-6 md:px-8 py-3 text-lg font-bold rounded-t-lg transition-all whitespace-nowrap border-b-4 mx-1 ${_e?Z.active:`border-transparent text-slate-500 bg-transparent ${Z.hover}`}`,children:z},z)})})]}),l.jsxs("main",{className:"container mx-auto p-4 md:p-6 space-y-8",children:[l.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg shadow-sm border border-slate-200 cursor-pointer lg:cursor-auto select-none",onClick:()=>window.innerWidth<1024&&I(!g),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(Td,{className:"text-primary"}),s," - ",En?"":""]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"lg:hidden text-slate-400 flex items-center gap-1 text-xs",children:g?l.jsxs(l.Fragment,{children:[" ",l.jsx(zS,{size:20})]}):l.jsxs(l.Fragment,{children:[" ",l.jsx(US,{size:20})]})}),l.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1 shadow-inner",onClick:z=>z.stopPropagation(),children:[l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded flex items-center gap-2 transition-colors ${o==="CARD"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,title:"",children:l.jsx(ei,{size:18})}),l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded flex items-center gap-2 transition-colors ${o==="LIST"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,title:"",children:l.jsx(GS,{size:18})})]})]})]}),g&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 duration-300",children:[En&&o==="CARD"&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:tt.map((z,ce)=>{const Z=ne.find(Le=>Le.config.date===z),_e=z===G,ft=(c==null?void 0:c.id)===(Z==null?void 0:Z.id);return l.jsxs("div",{onClick:()=>Z&&h(Z),className:`relative flex flex-col rounded-xl overflow-hidden transition-all cursor-pointer border-2 ${_e?"border-amber-400 shadow-lg ring-2 ring-amber-100 scale-[1.02] z-10":"border-slate-200 hover:border-blue-300"} ${ft?"ring-2 ring-primary":""} bg-white`,children:[l.jsxs("div",{className:`p-2 text-center font-bold text-sm ${_e?"bg-amber-400 text-white":"bg-slate-100 text-slate-600"}`,children:[We[ce]," ",l.jsx("span",{className:"text-xs font-normal opacity-90 block",children:z.slice(5)})]}),l.jsx("div",{className:"flex-1 min-h-[140px] flex items-center justify-center bg-slate-50 relative group flex-col",children:Z?l.jsxs(l.Fragment,{children:[Z.config.imageUrl?l.jsx("img",{src:Z.config.imageUrl,alt:"Menu",className:"w-full h-full object-cover absolute inset-0"}):l.jsxs("div",{className:"text-xs text-slate-400 flex flex-col items-center z-10",children:[l.jsx(So,{size:24})," ",l.jsx("span",{children:""})]}),l.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-2 z-10",children:[l.jsx("div",{className:"text-white text-xs font-bold truncate",children:Z.config.shopName}),Z.config.cutoffTime&&l.jsxs("div",{className:"text-red-500 text-xs font-bold bg-white/90 px-1 rounded backdrop-blur-sm mt-1 inline-block",children:[": ",Z.config.cutoffTime]})]})]}):l.jsx("div",{className:"text-slate-300 text-xs",children:""})}),_e&&l.jsx("div",{className:"absolute top-1 right-1 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-full shadow animate-pulse z-20",children:"Today"})]},z)})}),En&&o==="LIST"&&l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsx("div",{className:"grid grid-cols-1 divide-y divide-slate-100",children:tt.map((z,ce)=>{const Z=ne.find(Le=>Le.config.date===z),_e=z===G,ft=(c==null?void 0:c.id)===(Z==null?void 0:Z.id);return l.jsxs("div",{onClick:()=>Z&&h(Z),className:`p-4 flex flex-col sm:flex-row sm:items-center gap-4 transition-all cursor-pointer relative ${_e?"bg-amber-50/60 hover:bg-amber-100/50":"hover:bg-slate-50"} ${ft?"bg-blue-50/40 ring-1 ring-inset ring-primary":""}`,children:[_e&&l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 bg-amber-400"}),l.jsxs("div",{className:"sm:w-40 flex-shrink-0 flex items-center gap-2 pl-2",children:[l.jsx("div",{className:`font-bold text-lg ${_e?"text-amber-700":"text-slate-600"}`,children:We[ce]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs text-slate-400 font-mono",children:z}),_e&&l.jsx("span",{className:"inline-block px-1.5 py-0.5 rounded-full bg-red-500 text-white text-[10px] font-bold w-fit mt-0.5",children:"Today"})]})]}),l.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[l.jsxs("div",{className:"w-20 h-14 bg-slate-100 rounded overflow-hidden flex-shrink-0 border border-slate-200 shadow-sm relative",children:[Z!=null&&Z.config.imageUrl?l.jsx("img",{src:Z.config.imageUrl,className:"w-full h-full object-cover",alt:"thumb"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(So,{size:16})}),!Z&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-50 text-[10px] text-slate-400",children:""})]}),l.jsx("div",{className:"flex-1 min-w-0",children:Z?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"font-bold text-slate-800 text-base truncate",children:Z.config.shopName}),Z.config.cutoffTime?l.jsxs("div",{className:"text-xs font-bold text-red-600 flex items-center gap-1 mt-1",children:[l.jsx(sc,{size:12})," : ",Z.config.cutoffTime]}):l.jsx("div",{className:"text-xs text-slate-400 mt-1",children:""})]}):l.jsx("span",{className:"text-slate-400 italic text-sm",children:"--  --"})})]}),l.jsx("div",{className:"text-right flex-shrink-0",children:Z?l.jsx("button",{className:`px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition-all border ${ft?"bg-primary text-white border-primary shadow-md":"bg-white border-slate-300 text-slate-600 hover:border-primary hover:text-primary"}`,children:ft?"":""}):l.jsx("button",{disabled:!0,className:"px-4 py-2 rounded-lg text-sm text-slate-300 border border-slate-100 bg-slate-50 cursor-not-allowed",children:""})})]},z)})})}),!En&&o==="CARD"&&l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[ne.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-8",children:""}),ne.map(z=>{const ce=(c==null?void 0:c.id)===z.id;return l.jsxs("div",{onClick:()=>h(z),className:`bg-white rounded-xl shadow-sm border transition-all cursor-pointer overflow-hidden group hover:shadow-md ${ce?"border-primary ring-2 ring-primary/20":"border-slate-200 hover:border-blue-300"}`,children:[l.jsxs("div",{className:"aspect-video bg-slate-100 relative",children:[z.config.imageUrl?l.jsx("img",{src:z.config.imageUrl,alt:"item",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(Td,{size:32})}),l.jsx("div",{className:"absolute top-2 right-2 bg-white/90 backdrop-blur px-2 py-1 rounded text-xs font-bold shadow text-slate-700",children:z.config.date})]}),l.jsxs("div",{className:"p-3",children:[l.jsx("h3",{className:"font-bold text-slate-800 truncate",children:z.config.shopName}),z.config.cutoffTime&&l.jsxs("div",{className:"text-sm font-bold text-red-600 mt-1",children:[": ",z.config.date," ",z.config.cutoffTime]}),l.jsx("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:""})]})]},z.id)})]}),!En&&o==="LIST"&&l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 text-slate-600 font-semibold w-32",children:""}),l.jsx("th",{className:"p-4 text-slate-600 font-semibold",children:" / "}),l.jsx("th",{className:"p-4 text-slate-600 font-semibold text-right",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[ne.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-8 text-center text-slate-400",children:""})}),ne.sort((z,ce)=>ce.config.date.localeCompare(z.config.date)).map(z=>l.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${(c==null?void 0:c.id)===z.id?"bg-blue-50/50":""}`,children:[l.jsx("td",{className:"p-4 text-slate-600 font-mono text-sm",children:z.config.date}),l.jsxs("td",{className:"p-4",children:[l.jsx("div",{className:"font-bold text-slate-800",children:z.config.shopName}),z.config.cutoffTime&&l.jsxs("div",{className:"text-red-600 text-sm font-bold mt-1",children:[": ",z.config.date," ",z.config.cutoffTime]})]}),l.jsx("td",{className:"p-4 text-right",children:l.jsx("button",{onClick:()=>h(z),className:"px-4 py-2 bg-white border border-slate-300 rounded text-sm font-medium hover:bg-primary hover:text-white hover:border-primary transition-colors shadow-sm",children:""})})]},z.id))]})]})})]}),c&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 pt-4",children:[l.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(sN,{className:"text-amber-400 fill-amber-400"})," ",c.config.shopName]}),c.config.cutoffTime&&l.jsxs("div",{className:"text-red-600 font-bold mt-1 flex items-center gap-1 animate-pulse",children:[l.jsx(sc,{size:16})," : ",c.config.date," ",c.config.cutoffTime]})]}),l.jsx("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded",children:c.config.date})]}),l.jsx("div",{className:"w-full bg-white rounded-xl shadow border border-slate-200 overflow-hidden cursor-zoom-in group relative",onClick:()=>c.config.imageUrl&&p(c.config.imageUrl),children:c.config.imageUrl?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:c.config.imageUrl,alt:"Menu Detail",className:"w-full h-auto max-h-[500px] object-contain"}),l.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all flex items-center justify-center",children:l.jsxs("div",{className:"opacity-0 group-hover:opacity-100 bg-white px-4 py-2 rounded-full shadow-lg font-bold flex items-center gap-2 transform translate-y-2 group-hover:translate-y-0 transition-all",children:[l.jsx(jx,{size:18})," "]})})]}):l.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:""})})]}),l.jsxs("div",{className:"lg:col-span-7 bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden flex flex-col relative",children:[B&&l.jsx("div",{className:"absolute inset-0 bg-slate-100/60 z-20 flex items-center justify-center backdrop-blur-[2px]",children:l.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl text-center border-2 border-red-100 max-w-sm",children:[l.jsx("div",{className:"bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:l.jsx(Sl,{size:32})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:""}),l.jsx("p",{className:"text-slate-500",children:""})]})}),l.jsx("div",{className:`${B?"bg-slate-400":"bg-slate-800"} text-white p-4 transition-colors`,children:l.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(rN,{size:20})," "]})}),l.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"1. "}),l.jsxs("select",{disabled:B,value:P,onChange:z=>S(z.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none disabled:bg-slate-100 disabled:text-slate-400",children:[l.jsx("option",{value:"",children:"--  --"}),E.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]})]}),l.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-100 space-y-3",children:[l.jsx("div",{className:"text-sm font-bold text-slate-700 border-b pb-2 mb-2",children:"2. "}),l.jsx("input",{disabled:B,placeholder:" (: )",value:w,onChange:z=>A(z.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsx("input",{disabled:B,type:"number",placeholder:"",value:O,onChange:z=>x(z.target.value===""?"":Number(z.target.value)),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsx("input",{disabled:B,placeholder:" (: )",value:V,onChange:z=>M(z.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsxs("button",{disabled:B,onClick:J,className:"w-full py-2 bg-secondary text-white rounded hover:bg-slate-700 text-sm font-bold flex items-center justify-center gap-2 disabled:bg-slate-400 disabled:cursor-not-allowed",children:[l.jsx(ZS,{size:16})," "]})]})]}),l.jsxs("div",{className:"flex flex-col bg-amber-50 rounded-lg border border-amber-100 p-4",children:[l.jsx("h3",{className:"text-sm font-bold text-amber-800 mb-3",children:""}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-[200px] space-y-2 mb-3 pr-1 custom-scrollbar",children:C.length===0?l.jsx("p",{className:"text-xs text-amber-600/60 text-center py-4",children:""}):C.map((z,ce)=>l.jsxs("div",{className:"bg-white p-2 rounded shadow-sm flex justify-between items-start text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800",children:z.name}),z.note&&l.jsx("div",{className:"text-xs text-slate-500",children:z.note})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"font-medium",children:["$",z.price]}),l.jsx("button",{disabled:B,onClick:()=>j(C.filter((Z,_e)=>_e!==ce)),className:"text-red-400 hover:text-red-600 disabled:text-slate-300",children:l.jsx(No,{size:14})})]})]},ce))}),l.jsxs("div",{className:"pt-3 border-t border-amber-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),l.jsxs("span",{className:"text-xl font-bold text-primary",children:["$",C.reduce((z,ce)=>z+ce.price,0)]})]}),l.jsx("button",{onClick:le,disabled:C.length===0||B,className:`w-full py-3 rounded font-bold transition-all ${C.length>0&&!B?"bg-primary text-white hover:bg-blue-700 shadow":"bg-slate-300 text-slate-500 cursor-not-allowed"}`,children:""}),l.jsx("p",{className:"text-xs text-red-500 font-bold mt-2 text-center",children:""})]})]})]})]})]}),l.jsxs("section",{className:"bg-white rounded-xl shadow border border-slate-200 overflow-hidden",children:[l.jsx("div",{className:"bg-slate-100 p-4 border-b border-slate-200",children:l.jsxs("h2",{className:"font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(WS,{size:20,className:"text-primary"})," "]})}),l.jsxs("div",{className:"p-3 border-b border-slate-100 flex gap-2 overflow-x-auto",children:[l.jsx("button",{onClick:()=>_("ALL"),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${y==="ALL"?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),Ir.map(z=>{const ce=y===z;return l.jsx("button",{onClick:()=>_(z),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors border ${ce?"bg-slate-800 text-white":"bg-white border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:z},z)})]}),l.jsx("div",{className:"p-0 divide-y divide-slate-100",children:ti.length===0?l.jsx("div",{className:"p-8 text-center text-slate-400",children:""}):ti.map(z=>{const ce=k(z.categoryLabel);return l.jsxs("div",{className:"p-4 flex items-center gap-4 hover:bg-slate-50",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 flex-shrink-0",children:l.jsx(Rx,{size:16})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-slate-800",children:z.employeeName}),z.categoryLabel&&l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${ce}`,children:z.categoryLabel})]}),l.jsx("span",{className:"text-xs text-slate-400 flex-shrink-0",children:new Date(z.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})})]}),l.jsx("div",{className:"text-sm text-slate-600 truncate",children:z.items.map(Z=>`${Z.name}${Z.note?`(${Z.note})`:""}`).join(", ")})]})]},z.id)})})]})]}),m&&l.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4 cursor-zoom-out backdrop-blur-sm",onClick:()=>p(null),children:[l.jsx("img",{src:m,alt:"Zoom",className:"max-w-full max-h-[90vh] rounded shadow-2xl animate-in fade-in zoom-in duration-200"}),l.jsx("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white",children:l.jsx(No,{size:32})})]}),l.jsx("style",{children:"@keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } } .animate-marquee { animation: marquee 20s linear infinite; } .pl-full { padding-left: 100%; } .custom-scrollbar::-webkit-scrollbar { width: 4px; } .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }"})]})},hN=()=>{const t=new Date,e=t.getDay(),n=new Date(t),r=e===0?6:e-1;n.setDate(t.getDate()-r);const s=[];for(let i=0;i<5;i++){const o=new Date(n);o.setDate(n.getDate()+i),s.push(o.toISOString().split("T")[0])}return s},Ot=hN(),fN=[{id:"MENU_LUNCH_MON",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&auto=format&fit=crop&q=60",shopName:"",date:Ot[0],cutoffTime:"10:30",options:[{id:"opt_1",label:"",price:100},{id:"opt_2",label:"",price:110},{id:"opt_3",label:"",price:120},{id:"opt_4",label:"",price:130},{id:"opt_5",label:"",price:90}]}},{id:"MENU_LUNCH_TUE",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=800&auto=format&fit=crop&q=60",shopName:"",date:Ot[1],cutoffTime:"11:00",options:[{id:"opt_6",label:" (10)",price:60},{id:"opt_7",label:" (10)",price:70},{id:"opt_8",label:" (10)",price:65},{id:"opt_9",label:" (10)",price:65},{id:"opt_10",label:"",price:35}]}},{id:"MENU_LUNCH_WED",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&auto=format&fit=crop&q=60",shopName:"",date:Ot[2],cutoffTime:"10:00",options:[{id:"opt_11",label:"",price:139},{id:"opt_12",label:"",price:109},{id:"opt_13",label:"",price:129},{id:"opt_14",label:" (10)",price:119},{id:"opt_15",label:"",price:149}]}},{id:"MENU_LUNCH_THU",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1585032226651-759b368d7246?w=800&auto=format&fit=crop&q=60",shopName:"",date:Ot[3],cutoffTime:"11:30",options:[{id:"opt_16",label:" ()",price:199},{id:"opt_17",label:" ()",price:229},{id:"opt_18",label:" ()",price:179},{id:"opt_19",label:" ()",price:209},{id:"opt_20",label:" ()",price:219}]}},{id:"MENU_LUNCH_FRI",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=800&auto=format&fit=crop&q=60",shopName:"",date:Ot[4],cutoffTime:"10:30",options:[{id:"opt_21",label:"",price:150},{id:"opt_22",label:"",price:180},{id:"opt_23",label:"",price:160},{id:"opt_24",label:"",price:140},{id:"opt_25",label:"",price:170}]}}],mN=[{id:"MENU_DRINK_MON",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?w=800&auto=format&fit=crop&q=60",shopName:"50",date:Ot[0],cutoffTime:"14:00",options:[{id:"drink_1",label:" (L)",price:35},{id:"drink_2",label:" (L)",price:55},{id:"drink_3",label:" (M)",price:60},{id:"drink_4",label:" (L)",price:35},{id:"drink_5",label:" (L)",price:50},{id:"drink_6",label:" (L)",price:65}]}},{id:"MENU_DRINK_TUE",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1544145945-f90425340c7e?w=800&auto=format&fit=crop&q=60",shopName:"",date:Ot[1],cutoffTime:"14:30",options:[{id:"drink_7",label:" (L)",price:50},{id:"drink_8",label:" (L)",price:45},{id:"drink_9",label:" (L)",price:55},{id:"drink_10",label:" (L)",price:50},{id:"drink_11",label:" (M)",price:70},{id:"drink_12",label:" (L)",price:60}]}},{id:"MENU_DRINK_WED",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=800&auto=format&fit=crop&q=60",shopName:"CoCo",date:Ot[2],cutoffTime:"15:00",options:[{id:"drink_13",label:" (L)",price:60},{id:"drink_14",label:" (L)",price:50},{id:"drink_15",label:" (L)",price:65},{id:"drink_16",label:" (L)",price:55},{id:"drink_17",label:"QQ (M)",price:70},{id:"drink_18",label:" (L)",price:50}]}},{id:"MENU_DRINK_THU",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?w=800&auto=format&fit=crop&q=60",shopName:"",date:Ot[3],cutoffTime:"14:00",options:[{id:"drink_19",label:" (L)",price:65},{id:"drink_20",label:" (L)",price:60},{id:"drink_21",label:" (M)",price:75},{id:"drink_22",label:" (L)",price:55},{id:"drink_23",label:" (L)",price:60},{id:"drink_24",label:" (L)",price:65}]}},{id:"MENU_DRINK_FRI",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=800&auto=format&fit=crop&q=60",shopName:"",date:Ot[4],cutoffTime:"15:30",options:[{id:"drink_25",label:" (L)",price:60},{id:"drink_26",label:" (L)",price:55},{id:"drink_27",label:" (L)",price:50},{id:"drink_28",label:" (L)",price:55},{id:"drink_29",label:" (M)",price:75},{id:"drink_30",label:" (L)",price:65}]}}],pN=[{id:"MENU_GROUP_1",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1511920170033-f8396924c348?w=800&auto=format&fit=crop&q=60",shopName:"",date:Ot[0],cutoffTime:"15:00",options:[{id:"group_1",label:" ()",price:110},{id:"group_2",label:" ()",price:135},{id:"group_3",label:" ()",price:155},{id:"group_4",label:" ()",price:145},{id:"group_5",label:" ()",price:125}]}},{id:"MENU_GROUP_2",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1558961363-fa8fdf82db35?w=800&auto=format&fit=crop&q=60",shopName:"Mister Donut",date:Ot[2],cutoffTime:"16:00",options:[{id:"group_6",label:"",price:30},{id:"group_7",label:" (6)",price:60},{id:"group_8",label:"",price:35},{id:"group_9",label:"",price:35},{id:"group_10",label:"",price:40}]}},{id:"MENU_GROUP_3",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1587241321921-91a834d82ffc?w=800&auto=format&fit=crop&q=60",shopName:"",date:Ot[4],cutoffTime:"16:30",options:[{id:"group_11",label:"",price:65},{id:"group_12",label:"",price:60},{id:"group_13",label:"",price:50},{id:"group_14",label:"",price:35},{id:"group_15",label:"",price:40}]}}],gN=[...fN,...mN,...pN],yN=[{id:"EMP_001",name:""},{id:"EMP_002",name:""},{id:"EMP_003",name:""},{id:"EMP_004",name:""},{id:"EMP_005",name:""},{id:"EMP_006",name:""},{id:"EMP_007",name:""},{id:"EMP_008",name:""},{id:"EMP_009",name:""},{id:"EMP_010",name:""}],vN=[{id:"ANN_001",content:" ",isActive:!0},{id:"ANN_002",content:" ",isActive:!0},{id:"ANN_003",content:" ",isActive:!0}],xN=async()=>{console.log("Starting full database seed...");let t=0;try{if((await ee.getMenuCategories()).length===0){console.log("Seeding menus...");for(const s of gN)await ee.addMenuCategory(s.label,s.config);t++}else console.log("Menus already exist.");if((await ee.getEmployees()).length===0){console.log("Seeding employees...");for(const s of yN)await ee.addEmployee(s);t++}else console.log("Employees already exist.");(await ee.getAnnouncements()).length===0?(console.log("Seeding announcements..."),await ee.saveAnnouncements(vN),t++):console.log("Announcements already exist."),t>0?(console.log("Database seed completed!"),alert(`


 10
 13 5 5 3
 3`),window.location.reload()):alert(`
`)}catch(e){console.error("Seeding failed:",e),alert(" Console")}},ic=[{label:"",badge:"bg-blue-100 text-blue-700",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200",tab:"data-[state=active]:bg-blue-600"},{label:"",badge:"bg-emerald-100 text-emerald-700",bg:"bg-emerald-100",text:"text-emerald-700",border:"border-emerald-200",tab:"data-[state=active]:bg-emerald-600"},{label:"",badge:"bg-amber-100 text-amber-700",bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-200",tab:"data-[state=active]:bg-amber-600"},{label:"",badge:"bg-rose-100 text-rose-700",bg:"bg-rose-100",text:"text-rose-700",border:"border-rose-200",tab:"data-[state=active]:bg-rose-600"},{label:"",badge:"bg-violet-100 text-violet-700",bg:"bg-violet-100",text:"text-violet-700",border:"border-violet-200",tab:"data-[state=active]:bg-violet-600"}],qt=t=>{if(!t)return{badge:"bg-slate-100 text-slate-500",bg:"bg-slate-100",text:"text-slate-500",border:"border-slate-200",tab:""};const e=ic.find(r=>r.label===t);if(e)return e;const n=t.split("").reduce((r,s)=>r+s.charCodeAt(0),0)%ic.length;return ic[n]},_N=({onLogout:t,onGoToFrontend:e,currentUser:n})=>{const[r,s]=H.useState("ORDERS"),[i,o]=H.useState({}),[u,c]=H.useState(!1);H.useEffect(()=>{ee.getAdminSettings().then(o)},[]);const h=async(g,I)=>{await ee.setGoogleBound(!0,g,I);const C=await ee.getAdminSettings();o(C)},m=()=>{switch(r){case"ORDERS":return l.jsx(Tg,{});case"MENU":return l.jsx(wN,{});case"EMPLOYEES":return l.jsx(EN,{});case"ANNOUNCEMENTS":return l.jsx(bN,{});case"SYSTEM":return l.jsx(TN,{settings:i,onBind:h,currentUser:n});default:return l.jsx(Tg,{})}},p=()=>{switch(r){case"ORDERS":return"";case"MENU":return"";case"EMPLOYEES":return"";case"ANNOUNCEMENTS":return"";case"SYSTEM":return"";default:return""}};return l.jsxs("div",{className:"flex h-screen bg-slate-100 relative overflow-hidden",children:[u&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>c(!1)}),l.jsxs("aside",{className:`fixed md:relative z-50 w-64 h-full bg-slate-900 text-white flex flex-col shadow-lg transition-transform duration-300 ease-in-out ${u?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:[l.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-xl font-bold tracking-wide",children:["",l.jsx("br",{}),""]}),l.jsx("p",{className:"text-xs text-slate-400 mt-2",children:""})]}),l.jsx("button",{onClick:()=>c(!1),className:"md:hidden text-slate-400 hover:text-white",children:l.jsx(No,{size:24})})]}),l.jsxs("div",{className:"px-6 py-4 flex items-center gap-3 bg-slate-800/50 border-b border-slate-800",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-slate-300 font-bold",children:n.name.charAt(0)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-bold text-white truncate",children:n.name}),l.jsxs("div",{className:"text-xs text-emerald-400 flex items-center gap-1",children:[l.jsx(Cx,{size:10})," ",n.isSuperAdmin?"":""]})]})]}),l.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[l.jsx(Ci,{icon:l.jsx(nN,{size:20}),label:"",active:r==="ORDERS",onClick:()=>{s("ORDERS"),c(!1)}}),l.jsx(Ci,{icon:l.jsx(lN,{size:20}),label:"",active:r==="MENU",onClick:()=>{s("MENU"),c(!1)}}),l.jsx(Ci,{icon:l.jsx(aN,{size:20}),label:"",active:r==="EMPLOYEES",onClick:()=>{s("EMPLOYEES"),c(!1)}}),l.jsx(Ci,{icon:l.jsx(KS,{size:20}),label:"",active:r==="ANNOUNCEMENTS",onClick:()=>{s("ANNOUNCEMENTS"),c(!1)}}),l.jsx(Ci,{icon:l.jsx(eN,{size:20}),label:"",active:r==="SYSTEM",onClick:()=>{s("SYSTEM"),c(!1)}})]}),l.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-2",children:[l.jsxs("button",{onClick:e,className:"flex items-center gap-3 w-full px-4 py-2 text-slate-300 hover:text-white hover:bg-slate-800 rounded transition-colors",children:[l.jsx(Td,{size:20}),l.jsx("span",{children:""})]}),l.jsxs("button",{onClick:t,className:"flex items-center gap-3 w-full px-4 py-2 text-red-400 hover:bg-slate-800 rounded transition-colors",children:[l.jsx(QS,{size:20}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:[l.jsxs("header",{className:"md:hidden bg-slate-900 text-white p-4 flex items-center justify-between shadow-md shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>c(!0),className:"text-white hover:text-slate-300",children:l.jsx(YS,{size:24})}),l.jsx("h2",{className:"font-bold text-lg",children:p()})]}),l.jsx("div",{className:"text-xs text-slate-400",children:n.username})]}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 w-full bg-slate-100",children:m()})]})]})},Ci=({icon:t,label:e,active:n,onClick:r})=>l.jsxs("button",{onClick:r,className:`flex items-center gap-3 w-full px-4 py-3 rounded transition-colors ${n?"bg-primary text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[t,l.jsx("span",{className:"font-medium",children:e})]}),Tg=()=>{const[t,e]=H.useState([]),[n,r]=H.useState([]),[s,i]=H.useState("TODAY"),[o,u]=H.useState("CARD"),[c,h]=H.useState(""),[m,p]=H.useState("WEEK"),[g,I]=H.useState(new Date),[C,j]=H.useState({start:"",end:""}),[P,S]=H.useState(null),w=H.useRef(null),A=H.useRef(null),[V,M]=H.useState([]),[O,x]=H.useState(null);H.useEffect(()=>{(async()=>{const[B,J]=await Promise.all([ee.getOrders(),ee.getMenuCategories()]);e(B),r(J);const le=Array.from(new Set(J.map(Pe=>Pe.label)));M(le)})()},[]);const y=new Date().toISOString().split("T")[0],_=k=>{const B=new Date(k),J=B.getDay(),le=B.getDate()-J+(J===0?-6:1);return new Date(B.setDate(le))},E=k=>{const B=_(k);return Array.from({length:5}).map((J,le)=>{const Pe=new Date(B);return Pe.setDate(B.getDate()+le),Pe.toISOString().split("T")[0]})},T=k=>{const B=k.getFullYear(),J=k.getMonth(),le=new Date(B,J,1),Pe=[];for(;le.getMonth()===J;)Pe.push(new Date(le).toISOString().split("T")[0]),le.setDate(le.getDate()+1);return Pe},N=k=>{const B=new Date(g);m==="WEEK"?B.setDate(B.getDate()+k*7):m==="MONTH"&&B.setMonth(B.getMonth()+k),I(B)},b=k=>c===""?!0:k.categoryLabel===c,Ee=t.filter(k=>k.dateStr===y).filter(b).sort((k,B)=>B.timestamp-k.timestamp),$e=t.filter(k=>k.dateStr===y),F=$e.reduce((k,B)=>{const J=B.categoryLabel||"";return k[J]||(k[J]={amount:0,count:0}),k[J].amount+=B.totalAmount,k[J].count+=1,k},{}),ie=$e.reduce((k,B)=>k+B.totalAmount,0),$=$e.length,X=(()=>{let k=[];return m==="WEEK"?k=t.filter(B=>B.dateStr<y):m==="MONTH"?k=t.filter(B=>B.dateStr.startsWith(g.toISOString().slice(0,7))):k=C.start&&C.end?t.filter(B=>B.dateStr>=C.start&&B.dateStr<=C.end):[],k.filter(b)})(),ne=P?t.filter(k=>k.dateStr===P).filter(b):[],xe=ne.reduce((k,B)=>k+B.totalAmount,0),tt=k=>{var B,J,le;try{(B=k.current)==null||B.showPicker()}catch{(J=k.current)==null||J.focus(),(le=k.current)==null||le.click()}},We=(k,B)=>{if(!B)return;const J=n.find(le=>le.config.date===k&&le.label===B);return J==null?void 0:J.config.imageUrl},Se=async k=>{await ee.toggleOrderPayment(k),e(await ee.getOrders())};return l.jsxs("div",{className:"space-y-6 relative",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>i("TODAY"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${s==="TODAY"?"bg-primary text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:""}),l.jsx("button",{onClick:()=>i("HISTORY"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${s==="HISTORY"?"bg-primary text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:""})]})]}),s==="TODAY"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-2",children:[l.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-white shadow-md flex flex-col justify-between relative overflow-hidden",children:[l.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10",children:l.jsx($S,{size:48})}),l.jsx("div",{className:"text-sm text-slate-400 font-bold mb-1",children:""}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-2xl font-bold tracking-tight",children:["$",ie.toLocaleString()]}),l.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[$," "]})]})]}),V.map(k=>{const B=qt(k),J=F[k]||{amount:0,count:0};return l.jsxs("div",{className:`rounded-xl p-4 shadow-sm border flex flex-col justify-between ${B.bg} ${B.border}`,children:[l.jsxs("div",{className:"text-xs font-bold opacity-70 mb-1 flex items-center gap-1",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${B.tab.replace("data-[state=active]:","")}`}),k]}),l.jsxs("div",{children:[l.jsxs("div",{className:`text-xl font-bold ${B.text}`,children:["$",J.amount.toLocaleString()]}),l.jsxs("div",{className:"text-xs opacity-60 font-bold",children:[J.count," "]})]})]},k)})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-500 mr-2 flex items-center gap-1",children:[l.jsx(Eg,{size:14})," :"]}),l.jsx("button",{onClick:()=>h(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${c===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),V.map(k=>{const B=c===k,J=qt(k);return l.jsx("button",{onClick:()=>h(k),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${B?`${J.bg} ${J.text} ${J.border}`:`bg-white ${J.border} text-slate-500 hover:${J.bg}`}`,children:k},k)})]}),l.jsx("div",{className:"flex justify-end md:justify-start",children:l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded ${o==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(ei,{size:18})}),l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded ${o==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(Lo,{size:18})})]})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[l.jsx("div",{className:`${o==="LIST"?"md:hidden":""}`,children:l.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[Ee.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-8",children:""}),Ee.map(k=>{const B=qt(k.categoryLabel),J=We(k.dateStr,k.categoryLabel);return l.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-bold text-lg",children:k.employeeName.charAt(0)}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-slate-700 leading-none text-base",children:k.employeeName}),k.categoryLabel&&l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${B.badge} w-fit mt-0.5`,children:k.categoryLabel})]})]}),l.jsx("span",{className:"text-xs text-slate-400 font-mono",children:new Date(k.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})})]}),l.jsxs("div",{className:"flex gap-3 mb-3",children:[J&&l.jsxs("div",{className:"w-16 h-16 rounded-md bg-slate-100 overflow-hidden border border-slate-200 flex-shrink-0 cursor-zoom-in relative group",onClick:()=>x(J),children:[l.jsx("img",{src:J,alt:"Menu",className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all flex items-center justify-center",children:l.jsx(jx,{size:14,className:"text-white opacity-0 group-hover:opacity-100"})})]}),l.jsx("div",{className:"flex-1 space-y-1",children:k.items.map((le,Pe)=>l.jsxs("div",{className:"text-sm text-slate-600 flex justify-between items-start",children:[l.jsxs("span",{children:[le.name," ",le.note&&l.jsxs("span",{className:"text-xs text-slate-400",children:["(",le.note,")"]})]}),l.jsxs("span",{className:"font-mono font-medium",children:["$",le.price]})]},Pe))})]}),l.jsxs("div",{className:"pt-3 border-t border-slate-100 flex justify-between items-center",children:[l.jsx("div",{className:"flex flex-col",children:l.jsxs("span",{className:"font-bold text-primary text-xl",children:["$",k.totalAmount]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>Se(k.id),className:`px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-1 transition-all ${k.isPaid?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[k.isPaid?l.jsx(bd,{size:14}):l.jsx(wg,{size:14}),k.isPaid?"":""]}),l.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 text-xs rounded-full font-bold",children:k.status})]})]})]},k.id)})]})}),l.jsx("div",{className:`hidden ${o==="LIST"?"md:block":""}`,children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-semibold text-slate-600 w-24",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-right",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-center",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-center",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[Ee.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400",children:""})}),Ee.map(k=>{const B=qt(k.categoryLabel),J=We(k.dateStr,k.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 text-slate-500 text-sm font-mono",children:new Date(k.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}),l.jsx("td",{className:"p-4",children:J?l.jsx("div",{className:"w-10 h-10 rounded bg-slate-100 border border-slate-200 overflow-hidden cursor-zoom-in",onClick:()=>x(J),children:l.jsx("img",{src:J,alt:"Menu",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-10 h-10 rounded bg-slate-50 border border-slate-100 flex items-center justify-center text-slate-300",children:l.jsx(So,{size:16})})}),l.jsx("td",{className:"p-4 font-bold text-slate-700",children:k.employeeName}),l.jsx("td",{className:"p-4",children:k.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${B.badge}`,children:k.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsx("td",{className:"p-4 text-sm text-slate-600",children:k.items.map(le=>`${le.name}${le.note?`(${le.note})`:""}`).join(", ")}),l.jsxs("td",{className:"p-4 font-bold text-primary text-right",children:["$",k.totalAmount]}),l.jsx("td",{className:"p-4 text-center",children:l.jsxs("button",{onClick:()=>Se(k.id),className:`mx-auto px-3 py-1 rounded-full text-xs font-bold flex items-center justify-center gap-1 transition-all ${k.isPaid?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[k.isPaid?l.jsx(bd,{size:12}):l.jsx(wg,{size:12}),k.isPaid?"":""]})}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-yellow-100 text-yellow-800",children:k.status})})]},k.id)})]})]})})]})]}),s==="HISTORY"&&l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-500 mr-2 flex items-center gap-1",children:[l.jsx(Eg,{size:14})," :"]}),l.jsx("button",{onClick:()=>h(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${c===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),V.map(k=>{const B=c===k,J=qt(k);return l.jsx("button",{onClick:()=>h(k),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${B?`${J.bg} ${J.text} ${J.border}`:`bg-white ${J.border} text-slate-500 hover:${J.bg}`}`,children:k},k)})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[l.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1 self-start",children:[l.jsx("button",{onClick:()=>p("WEEK"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="WEEK"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""}),l.jsx("button",{onClick:()=>p("MONTH"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="MONTH"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""}),l.jsx("button",{onClick:()=>p("CUSTOM"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="CUSTOM"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""})]}),m!=="CUSTOM"?l.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>N(-1),className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Nx,{size:18})}),l.jsx("span",{className:"font-mono font-bold text-slate-700",children:m==="WEEK"?`${_(g).toLocaleDateString()} - ${(()=>{const k=_(g);return k.setDate(k.getDate()+4),k.toLocaleDateString()})()}`:g.toLocaleDateString("zh-TW",{year:"numeric",month:"long"})}),l.jsx("button",{onClick:()=>N(1),className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Ix,{size:18})})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"relative group",onClick:()=>tt(w),children:[l.jsx(La,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-primary transition-colors cursor-pointer",size:16}),l.jsx("input",{ref:w,type:"date",value:C.start,onClick:()=>tt(w),onChange:k=>j(B=>({...B,start:k.target.value})),className:"pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary outline-none shadow-sm cursor-pointer hover:border-primary transition-colors w-40"})]}),l.jsx("span",{className:"text-slate-400 font-bold",children:"-"}),l.jsxs("div",{className:"relative group",onClick:()=>tt(A),children:[l.jsx(La,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-primary transition-colors cursor-pointer",size:16}),l.jsx("input",{ref:A,type:"date",value:C.end,onClick:()=>tt(A),onChange:k=>j(B=>({...B,end:k.target.value})),className:"pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary outline-none shadow-sm cursor-pointer hover:border-primary transition-colors w-40"})]})]})]}),m==="WEEK"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:E(g).map((k,B)=>{const J=t.filter(Pe=>Pe.dateStr===k).filter(b),le=J.reduce((Pe,Ir)=>Pe+Ir.totalAmount,0);return l.jsxs("div",{className:`border rounded-lg p-3 ${k===y?"border-amber-400 bg-amber-50":"border-slate-200 bg-slate-50"}`,children:[l.jsxs("div",{className:"font-bold text-slate-700 mb-2 border-b border-slate-200 pb-1 flex justify-between",children:[l.jsx("span",{children:["","","","",""][B]}),l.jsx("span",{className:"text-xs font-normal text-slate-500",children:k.slice(5)})]}),J.length===0?l.jsx("div",{className:"text-xs text-slate-400 text-center py-4",children:""}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-xs text-slate-500",children:[": ",J.length]}),l.jsxs("div",{className:"text-sm font-bold text-primary",children:[": $",le]}),l.jsx("button",{onClick:()=>S(k),className:"w-full text-xs bg-white border border-slate-300 py-1 rounded hover:bg-slate-100 font-bold text-slate-600",children:""})]})]},k)})}),m==="MONTH"&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:T(g).map(k=>{const B=t.filter(Pe=>Pe.dateStr===k).filter(b),J=B.reduce((Pe,Ir)=>Pe+Ir.totalAmount,0),le=B.length>0;return l.jsxs("div",{onClick:()=>le&&S(k),className:`border rounded p-2 min-h-[80px] flex flex-col justify-between cursor-pointer transition-colors ${le?"bg-white border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-100 text-slate-300"}`,children:[l.jsx("div",{className:"text-xs font-mono text-right",children:k.slice(8)}),le&&l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-bold text-slate-700",children:[B.length," "]}),l.jsxs("div",{className:"text-xs text-primary",children:["$",J]})]})]},k)})}),m==="CUSTOM"&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600 text-center",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:X.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-400",children:""})}):X.map(k=>{const B=qt(k.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-3 text-sm text-slate-500 font-mono",children:k.dateStr}),l.jsx("td",{className:"p-3 text-sm font-bold text-slate-700",children:k.employeeName}),l.jsx("td",{className:"p-3",children:k.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${B.badge}`,children:k.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsxs("td",{className:"p-3 text-sm text-slate-600",children:[k.items[0].name,"..."]}),l.jsxs("td",{className:"p-3 text-sm font-bold text-primary",children:["$",k.totalAmount]}),l.jsx("td",{className:"p-3 text-center",children:l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${k.isPaid?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:k.isPaid?"":""})})]},k.id)})})]})})]}),P&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[80vh] flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"bg-slate-900 text-white p-4 flex justify-between items-center",children:[l.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(La,{size:18})," ",P,"  ",c!==""&&l.jsxs("span",{className:"text-xs bg-slate-700 px-2 py-0.5 rounded ml-2",children:[": ",c]})]}),l.jsx("button",{onClick:()=>S(null),className:"text-slate-400 hover:text-white",children:l.jsx(No,{size:24})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-0",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-right",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-center",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:ne.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-400",children:""})}):ne.map(k=>{const B=qt(k.categoryLabel),J=We(k.dateStr,k.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 text-xs font-mono text-slate-500",children:new Date(k.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}),l.jsx("td",{className:"p-4",children:J?l.jsx("div",{className:"w-8 h-8 rounded bg-slate-100 border border-slate-200 overflow-hidden cursor-zoom-in",onClick:()=>x(J),children:l.jsx("img",{src:J,alt:"Menu",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-8 h-8 rounded bg-slate-50 border border-slate-100 flex items-center justify-center text-slate-300",children:l.jsx(So,{size:14})})}),l.jsx("td",{className:"p-4 font-bold text-slate-800",children:k.employeeName}),l.jsx("td",{className:"p-4",children:k.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${B.badge}`,children:k.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsx("td",{className:"p-4 text-sm text-slate-600",children:k.items.map(le=>l.jsxs("div",{className:"flex gap-1",children:[l.jsx("span",{children:le.name}),le.note&&l.jsxs("span",{className:"text-xs text-slate-400",children:["(",le.note,")"]})]},le.name))}),l.jsxs("td",{className:"p-4 font-bold text-primary text-right",children:["$",k.totalAmount]}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("button",{onClick:()=>Se(k.id),className:`mx-auto px-2 py-0.5 rounded-full text-[10px] font-bold transition-all border ${k.isPaid?"bg-emerald-100 text-emerald-700 border-emerald-200 hover:bg-emerald-200":"bg-slate-100 text-slate-500 border-slate-200 hover:bg-slate-200"}`,children:k.isPaid?"":""})})]},k.id)})})]})}),l.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-between items-center",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("span",{className:"text-sm text-slate-500",children:[" ",ne.length," "]}),l.jsxs("span",{className:"text-sm text-emerald-600 font-bold",children:[": $",ne.filter(k=>k.isPaid).reduce((k,B)=>k+B.totalAmount,0)]}),l.jsxs("span",{className:"text-sm text-slate-400",children:[": $",ne.filter(k=>!k.isPaid).reduce((k,B)=>k+B.totalAmount,0)]})]}),l.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[": ",l.jsxs("span",{className:"text-primary",children:["$",xe]})]})]})]})}),O&&l.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4 cursor-zoom-out backdrop-blur-sm",onClick:()=>x(null),children:[l.jsx("img",{src:O,alt:"Zoom",className:"max-w-full max-h-[90vh] rounded shadow-2xl animate-in fade-in zoom-in duration-200"}),l.jsx("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white",children:l.jsx(No,{size:32})})]})]})},wN=()=>{const[t,e]=H.useState([]),[n,r]=H.useState("ACTIVE"),[s,i]=H.useState(""),[o,u]=H.useState("CARD"),[c,h]=H.useState(!1),[m,p]=H.useState(null),[g,I]=H.useState(new Date),[C,j]=H.useState(""),[P,S]=H.useState({categoryLabel:"",shopName:"",date:new Date().toISOString().split("T")[0],cutoffTime:"",imageFile:null,imageUrl:""}),w=new Date().toISOString().split("T")[0];H.useEffect(()=>{ee.getMenuCategories().then(e)},[]);const A=async()=>{try{if(!P.shopName){alert("");return}let F=P.imageUrl;if(P.imageFile)try{F=await M(P.imageFile)}catch{alert("");return}if(F&&F.length>5e4){alert(" ( 50,000 )");return}const ie={imageUrl:F,shopName:P.shopName,date:P.date,cutoffTime:P.cutoffTime};await V(ie)}catch(F){console.error(F),alert(`
: `+F.message)}},V=async F=>{m?await ee.updateMenuCategory(m,P.categoryLabel,F):await ee.addMenuCategory(P.categoryLabel,F),e(await ee.getMenuCategories()),h(!1),y()},M=F=>new Promise((ie,$)=>{const G=new FileReader;G.readAsDataURL(F),G.onload=X=>{var xe;const ne=new Image;ne.src=(xe=X.target)==null?void 0:xe.result,ne.onload=()=>{let Se=ne.width,k=ne.height;Se>k?Se>400&&(k*=400/Se,Se=400):k>400&&(Se*=400/k,k=400);const B=document.createElement("canvas");B.width=Se,B.height=k;const J=B.getContext("2d");if(!J){$(new Error("Canvas context not supported"));return}J.drawImage(ne,0,0,Se,k);const le=B.toDataURL("image/jpeg",.5);ie(le)},ne.onerror=tt=>$(tt)},G.onerror=X=>$(X)}),O=async F=>{const ie=t.find(X=>X.id===F);if(!ie)return;const G=(await ee.getOrders()).filter(X=>X.dateStr===ie.config.date&&X.categoryLabel===ie.label);if(G.length>0){const X=` ${ie.config.date}${ie.label} ${G.length} 



`;confirm(X)&&(await ee.deleteOrdersByContext(ie.config.date,ie.label),await ee.deleteMenuCategory(F),e(await ee.getMenuCategories()),alert(""))}else confirm("")&&(await ee.deleteMenuCategory(F),e(await ee.getMenuCategories()))},x=F=>{h(!0),p(F.id),S({categoryLabel:F.label,shopName:F.config.shopName,date:F.config.date,cutoffTime:F.config.cutoffTime||"",imageUrl:F.config.imageUrl,imageFile:null})},y=()=>{p(null),S({categoryLabel:"",shopName:"",date:w,cutoffTime:"",imageFile:null,imageUrl:""})},_=F=>{const ie=new Date(F),$=ie.getDay(),G=ie.getDate()-$+($===0?-6:1);return new Date(ie.setDate(G))},E=F=>{const ie=_(F);return Array.from({length:5}).map(($,G)=>{const X=new Date(ie);return X.setDate(ie.getDate()+G),X.toISOString().split("T")[0]})},T=Array.from(new Set(t.map(F=>F.label))),N=t.filter(F=>F.config.date>=w).filter(F=>s===""?!0:F.label===s),b=t.filter(F=>F.config.date<w),Ee=E(g),$e=b.filter(F=>Ee.includes(F.config.date));return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""})}),l.jsxs("div",{className:"flex border-b border-slate-200",children:[l.jsx("button",{onClick:()=>r("ACTIVE"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${n==="ACTIVE"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700"}`,children:" ()"}),l.jsx("button",{onClick:()=>r("HISTORY"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${n==="HISTORY"?"border-slate-500 text-slate-700":"border-transparent text-slate-500 hover:text-slate-700"}`,children:" ()"})]}),c?l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-2xl mx-auto",children:[l.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[l.jsx(bg,{className:"text-primary"})," ",m?"":""]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"1.  (Tab)"}),l.jsxs("select",{value:P.categoryLabel,onChange:F=>S({...P,categoryLabel:F.target.value}),className:"w-full p-2.5 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",children:[T.length===0&&l.jsx("option",{value:"",children:" ()"}),T.map(F=>l.jsx("option",{value:F,children:F},F))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"2. "}),l.jsx("input",{value:P.shopName,onChange:F=>S({...P,shopName:F.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",placeholder:": "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"3. "}),l.jsx("input",{type:"date",value:P.date,onChange:F=>S({...P,date:F.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"4.  ()"}),l.jsxs("select",{value:P.cutoffTime,onChange:F=>S({...P,cutoffTime:F.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"",children:""}),Array.from({length:21}).map((F,ie)=>{const $=480+ie*30,G=Math.floor($/60),X=$%60,ne=`${G.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`;return l.jsx("option",{value:ne,children:ne},ne)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"5. "}),l.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:bg-slate-50 transition-colors relative",children:[l.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/gif, image/bmp",onChange:F=>{var $;const ie=($=F.target.files)==null?void 0:$[0];if(ie){if(ie.size>2*1024*1024){alert(" 2MB");return}const G=new FileReader;G.onloadend=()=>{S({...P,imageFile:ie,imageUrl:G.result})},G.readAsDataURL(ie)}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),P.imageFile||P.imageUrl?l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("img",{src:P.imageUrl,alt:"Preview",className:"h-32 object-contain mb-2 rounded shadow-sm"}),l.jsx("div",{className:"text-sm text-slate-600 font-bold",children:P.imageFile?`: ${P.imageFile.name}`:""}),l.jsx("span",{className:"text-xs text-slate-500 mt-1",children:""})]}):l.jsxs("div",{className:"text-slate-400 flex flex-col items-center",children:[l.jsx(iN,{size:32,className:"mb-2"}),"   ",l.jsx("span",{className:"text-xs mt-1",children:"JPG, PNG, GIF, BMP (Max 2MB)"})]})]})]}),l.jsxs("div",{className:"flex gap-4 pt-4",children:[l.jsx("button",{onClick:A,className:"flex-1 bg-primary text-white py-2 rounded-lg font-bold hover:bg-blue-700 transition-colors shadow-sm",children:m?"":""}),l.jsx("button",{onClick:()=>{h(!1),y()},className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded-lg font-bold hover:bg-slate-50 transition-colors",children:""})]})]})]}):l.jsxs(l.Fragment,{children:[n==="ACTIVE"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>i(""),className:`px-4 py-1.5 rounded-full text-sm font-bold transition-all ${s===""?"bg-slate-800 text-white":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:""}),T.map(F=>{const ie=s===F,$=qt(F);return l.jsx("button",{onClick:()=>i(F),className:`px-4 py-1.5 rounded-full text-sm font-bold transition-all border-2 ${ie?`${$.bg} ${$.text} ${$.border}`:`bg-white ${$.border} text-slate-500 hover:${$.bg}`}`,children:F},F)})]}),l.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[l.jsxs("button",{onClick:()=>{y(),h(!0)},className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors shadow-sm font-bold",children:[l.jsx(iu,{size:18})," "]}),l.jsxs("div",{className:"hidden md:flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded ${o==="LIST"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(Lo,{size:18})}),l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded ${o==="CARD"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(ei,{size:18})})]})]})]}),l.jsx("div",{className:`${o==="LIST"?"md:hidden":""}`,children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[N.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-12",children:""}),N.map(F=>{const ie=qt(F.label);return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden group hover:shadow-md transition-all",children:[l.jsxs("div",{className:`px-4 py-2 border-b flex justify-between items-center ${ie.bg} ${ie.border}`,children:[l.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${ie.badge}`,children:F.label}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>x(F),className:"p-1.5 bg-white rounded-full text-slate-500 hover:text-primary shadow-sm",children:l.jsx(bg,{size:14})}),l.jsx("button",{onClick:()=>O(F.id),className:"p-1.5 bg-white rounded-full text-slate-500 hover:text-red-500 shadow-sm",children:l.jsx(kx,{size:14})})]})]}),l.jsxs("div",{className:"aspect-video bg-slate-100 relative",children:[F.config.imageUrl?l.jsx("img",{src:F.config.imageUrl,alt:"Menu",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(So,{size:32})}),l.jsxs("div",{className:"absolute bottom-0 inset-x-0 bg-gradient-to-t from-black/70 to-transparent p-3 text-white",children:[l.jsx("h4",{className:"font-bold truncate",children:F.config.shopName}),l.jsxs("div",{className:"text-xs opacity-90",children:[F.config.date," ",F.config.cutoffTime&&` ${F.config.cutoffTime} `]})]})]})]},F.id)})]})}),l.jsx("div",{className:`hidden ${o==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:" / "}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 w-32",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-right",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[N.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-400",children:""})}),N.map(F=>{const ie=qt(F.label);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4",children:l.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${ie.badge}`,children:F.label})}),l.jsxs("td",{className:"p-4",children:[l.jsx("div",{className:"font-bold text-slate-800",children:F.config.shopName}),l.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(La,{size:14})," ",F.config.date,F.config.cutoffTime&&l.jsxs("span",{className:"text-red-500 font-bold ml-2",children:["(",F.config.cutoffTime," )"]})]})]}),l.jsx("td",{className:"p-4",children:l.jsx("div",{className:"w-16 h-10 bg-slate-100 rounded overflow-hidden border border-slate-200",children:F.config.imageUrl?l.jsx("img",{src:F.config.imageUrl,className:"w-full h-full object-cover"}):null})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>x(F),className:"px-3 py-1.5 border border-slate-300 rounded text-sm hover:bg-primary hover:text-white hover:border-primary transition-colors",children:""}),l.jsx("button",{onClick:()=>O(F.id),className:"px-3 py-1.5 border border-slate-300 rounded text-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-colors",children:""})]})]},F.id)})]})]})})})]}),n==="HISTORY"&&l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 border-b border-slate-100 pb-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-500 flex items-center mr-2",children:":"}),l.jsx("button",{onClick:()=>j(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${C===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),T.map(F=>{const ie=C===F,$=qt(F);return l.jsx("button",{onClick:()=>j(F),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${ie?`${$.bg} ${$.text} ${$.border}`:`bg-white ${$.border} text-slate-500 hover:${$.bg}`}`,children:F},F)})]}),l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(qS,{size:18})," "]}),l.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>{const F=new Date(g);F.setDate(F.getDate()-7),I(F)},className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Nx,{size:18})}),l.jsxs("span",{className:"font-mono text-sm font-bold text-slate-700",children:[_(g).toLocaleDateString()," - ",(()=>{const F=_(g);return F.setDate(F.getDate()+4),F.toLocaleDateString()})()]}),l.jsx("button",{onClick:()=>{const F=new Date(g);F.setDate(F.getDate()+7),I(F)},className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Ix,{size:18})})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:E(g).map((F,ie)=>{const $=$e.filter(G=>G.config.date===F&&(C===""||G.label===C));return l.jsxs("div",{className:"border border-slate-200 rounded-lg bg-slate-50 min-h-[150px] flex flex-col",children:[l.jsxs("div",{className:"p-2 border-b border-slate-200 bg-white rounded-t-lg text-center",children:[l.jsx("div",{className:"text-sm font-bold text-slate-700",children:["","","","",""][ie]}),l.jsx("div",{className:"text-xs text-slate-400",children:F})]}),l.jsx("div",{className:"p-2 space-y-2 flex-1",children:$.length===0?l.jsx("div",{className:"text-center text-xs text-slate-300 py-4",children:""}):$.map(G=>{const X=qt(G.label);return l.jsxs("div",{className:"bg-white border border-slate-200 rounded p-2 shadow-sm text-xs cursor-pointer hover:border-primary group",onClick:()=>x(G),children:[l.jsx("div",{className:`inline-block px-1.5 py-0.5 rounded-full text-[10px] font-bold mb-1 ${X.badge}`,children:G.label}),l.jsx("div",{className:"font-bold text-slate-700 truncate",children:G.config.shopName}),l.jsx("div",{className:"hidden group-hover:block text-[10px] text-primary mt-1 text-center font-bold",children:"/"})]},G.id)})})]},F)})})]})]})]})},EN=()=>{const[t,e]=H.useState([]),[n,r]=H.useState({}),[s,i]=H.useState("CARD"),[o,u]=H.useState(!1),[c,h]=H.useState(null),[m,p]=H.useState(""),[g,I]=H.useState(null),[C,j]=H.useState(!1);H.useEffect(()=>{P()},[]);const P=async()=>{const _=await ee.getEmployees();e(_);const E=await ee.getOrders(),T=new Date().toISOString().slice(0,7),N={};_.forEach(b=>{const Ee=E.filter($e=>$e.employeeName===b.name&&$e.dateStr.startsWith(T)).length;N[b.id]=Ee}),r(N),j(!1)},S=async()=>{if(!m.trim()){alert("");return}c?await ee.updateEmployee({id:c,name:m}):await ee.addEmployee({id:Date.now().toString(),name:m}),P(),u(!1),p(""),h(null)},w=async _=>{confirm("")&&(await ee.deleteEmployee(_),P())},A=_=>{u(!0),h(_.id),p(_.name)},V=()=>{const _=[...t].sort((E,T)=>E.name.localeCompare(T.name,"zh-TW"));e(_),j(!0)},M=(_,E)=>{I(E),_.dataTransfer.effectAllowed="move"},O=(_,E)=>{if(_.preventDefault(),g===null||g===E)return;const T=[...t],N=T[g];T.splice(g,1),T.splice(E,0,N),e(T),I(E),j(!0)},x=()=>{I(null)},y=async()=>{await ee.saveEmployees(t),j(!1),alert("")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>i("CARD"),className:`p-2 rounded ${s==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(ei,{size:18})}),l.jsx("button",{onClick:()=>i("LIST"),className:`p-2 rounded ${s==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(Lo,{size:18})})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-wrap gap-4 items-center justify-between",children:[C&&l.jsxs("button",{onClick:y,className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg font-bold shadow animate-pulse",children:[l.jsx(Ax,{size:18})," "]}),l.jsxs("div",{className:"flex gap-2 ml-auto",children:[l.jsxs("button",{onClick:V,className:"flex items-center gap-2 bg-white border border-slate-300 px-4 py-2 rounded-lg hover:bg-slate-50 text-slate-700 font-medium",children:[l.jsx(FS,{size:16})," "]}),l.jsxs("button",{onClick:()=>{u(!0),h(null),p("")},className:"flex items-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 font-bold shadow-sm",children:[l.jsx(iu,{size:18})," "]})]})]}),o&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-md mx-auto",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:c?"":""}),l.jsx("input",{value:m,onChange:_=>p(_.target.value),className:"w-full p-2 border border-slate-300 rounded mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:S,className:"flex-1 bg-primary text-white py-2 rounded font-bold",children:""}),l.jsx("button",{onClick:()=>u(!1),className:"flex-1 border border-slate-300 py-2 rounded font-bold",children:""})]})]}),l.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[l.jsx(cN,{size:12})," "]}),l.jsx("div",{className:`${s==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((_,E)=>l.jsxs("div",{draggable:!o,onDragStart:T=>M(T,E),onDragOver:T=>O(T,E),onDragEnd:x,className:`relative p-4 rounded-xl border cursor-move transition-all flex flex-col items-center text-center ${E%2===0?"bg-white border-slate-200":"bg-blue-50 border-blue-200"} hover:shadow-md hover:scale-[1.02]`,children:[l.jsx("div",{className:"absolute top-2 right-2 text-slate-300",children:l.jsx(Tl,{size:16})}),l.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-bold text-lg mb-2",children:_.name.charAt(0)}),l.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:_.name}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[l.jsx(_g,{size:12})," : ",l.jsx("span",{className:"font-bold text-primary",children:n[_.id]||0})]}),l.jsxs("div",{className:"flex gap-2 mt-4 w-full",children:[l.jsx("button",{onClick:()=>A(_),className:"flex-1 py-1 text-xs border border-slate-300 rounded hover:bg-white text-slate-600",children:""}),l.jsx("button",{onClick:()=>w(_.id),className:"flex-1 py-1 text-xs border border-red-200 text-red-500 rounded hover:bg-red-50",children:""})]})]},_.id))})}),l.jsx("div",{className:`hidden ${s==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-16",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 text-right",children:""})]})}),l.jsx("tbody",{children:t.map((_,E)=>l.jsxs("tr",{draggable:!o,onDragStart:T=>M(T,E),onDragOver:T=>O(T,E),onDragEnd:x,className:`cursor-move transition-colors ${E%2===0?"bg-white":"bg-slate-50"} hover:bg-blue-50/50`,children:[l.jsx("td",{className:"p-4 text-slate-300",children:l.jsx(Tl,{size:20})}),l.jsx("td",{className:"p-4 font-bold text-slate-700 text-lg",children:_.name}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_g,{size:16,className:"text-slate-400"}),l.jsx("span",{className:"font-bold text-primary",children:n[_.id]||0})]})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>A(_),className:"text-sm font-bold text-blue-600 hover:underline",children:""}),l.jsx("button",{onClick:()=>w(_.id),className:"text-sm font-bold text-red-500 hover:underline",children:""})]})]},_.id))})]})})})]})},bN=()=>{const[t,e]=H.useState([]),[n,r]=H.useState(!1),[s,i]=H.useState(null),[o,u]=H.useState(""),[c,h]=H.useState("CARD"),[m,p]=H.useState(null),[g,I]=H.useState(!1);H.useEffect(()=>{ee.getAnnouncements().then(e)},[]);const C=async()=>{if(!o.trim()){alert("");return}const M=[...t];if(s){const O=M.findIndex(x=>x.id===s);O!==-1&&(M[O].content=o)}else M.push({id:Date.now().toString(),content:o,isActive:!0});await ee.saveAnnouncements(M),e(M),r(!1),u(""),i(null)},j=async M=>{if(confirm("")){const O=t.filter(x=>x.id!==M);await ee.saveAnnouncements(O),e(O)}},P=async M=>{const O=t.map(x=>x.id===M?{...x,isActive:!x.isActive}:x);await ee.saveAnnouncements(O),e(O)},S=M=>{r(!0),i(M.id),u(M.content)},w=(M,O)=>{p(O),M.dataTransfer.effectAllowed="move"},A=(M,O)=>{if(M.preventDefault(),m===null||m===O)return;const x=[...t],y=x[m];x.splice(m,1),x.splice(O,0,y),e(x),p(O),I(!0)},V=async()=>{await ee.saveAnnouncements(t),I(!1),alert("")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>h("CARD"),className:`p-2 rounded ${c==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(ei,{size:18})}),l.jsx("button",{onClick:()=>h("LIST"),className:`p-2 rounded ${c==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(Lo,{size:18})})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex justify-between items-center",children:[g?l.jsxs("button",{onClick:V,className:"bg-primary text-white px-4 py-2 rounded-lg font-bold shadow animate-pulse flex items-center gap-2",children:[l.jsx(Ax,{size:18})," "]}):l.jsx("div",{}),l.jsxs("button",{onClick:()=>{r(!0),i(null),u("")},className:"bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold hover:bg-emerald-600 flex items-center gap-2",children:[l.jsx(iu,{size:18})," "]})]}),n&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200",children:[l.jsx("textarea",{value:o,onChange:M=>u(M.target.value),className:"w-full p-4 border border-slate-300 rounded-lg mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:"...",rows:3}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:C,className:"bg-primary text-white px-6 py-2 rounded font-bold",children:""}),l.jsx("button",{onClick:()=>r(!1),className:"border border-slate-300 px-6 py-2 rounded font-bold",children:""})]})]}),l.jsx("div",{className:`${c==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((M,O)=>l.jsxs("div",{draggable:!0,onDragStart:x=>w(x,O),onDragOver:x=>A(x,O),className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 cursor-move hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("div",{className:"p-1 text-slate-300",children:l.jsx(Tl,{size:16})}),l.jsxs("button",{onClick:()=>P(M.id),className:`px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 ${M.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:[M.isActive?l.jsx(JS,{size:12}):l.jsx(XS,{size:12}),M.isActive?"":""]})]}),l.jsx("p",{className:"text-slate-700 font-medium mb-4 min-h-[3rem]",children:M.content}),l.jsxs("div",{className:"flex border-t border-slate-100 pt-3 gap-2",children:[l.jsx("button",{onClick:()=>S(M),className:"flex-1 py-1 text-sm bg-slate-50 text-slate-600 rounded hover:bg-slate-100",children:""}),l.jsx("button",{onClick:()=>j(M.id),className:"flex-1 py-1 text-sm bg-red-50 text-red-500 rounded hover:bg-red-100",children:""})]})]},M.id))})}),l.jsx("div",{className:`hidden ${c==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-12"}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 w-32 text-center",children:""}),l.jsx("th",{className:"p-4 w-32 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:t.map((M,O)=>l.jsxs("tr",{draggable:!0,onDragStart:x=>w(x,O),onDragOver:x=>A(x,O),className:"hover:bg-slate-50 cursor-move",children:[l.jsx("td",{className:"p-4 text-slate-300",children:l.jsx(Tl,{size:20})}),l.jsx("td",{className:"p-4 text-slate-700 font-medium",children:M.content}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("button",{onClick:()=>P(M.id),className:`px-3 py-1 rounded-full text-xs font-bold transition-all ${M.isActive?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:M.isActive?"":""})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>S(M),className:"text-blue-600 font-bold text-sm hover:underline",children:""}),l.jsx("button",{onClick:()=>j(M.id),className:"text-red-500 font-bold text-sm hover:underline",children:""})]})]},M.id))})]})})})]})},TN=({currentUser:t})=>{const[e,n]=H.useState("ACCOUNTS"),[r,s]=H.useState([]),[i,o]=H.useState("CARD"),[u,c]=H.useState(!1),[h,m]=H.useState(null),[p,g]=H.useState("CHECKING"),[I,C]=H.useState({name:"",username:"",password:""}),[j,P]=H.useState(""),[S,w]=H.useState("");H.useEffect(()=>{ee.getAdminAccounts().then(s)},[]),H.useEffect(()=>{y()},[]);const A=async()=>{if(!I.name||!I.username||!I.password){alert("");return}try{if(h){const N=r.find(b=>b.id===h);N&&await ee.updateAdminAccount({...N,name:I.name,username:I.username,password:I.password})}else await ee.addAdminAccount({id:Date.now().toString(),name:I.name,username:I.username,password:I.password,isSuperAdmin:!1});s(await ee.getAdminAccounts()),c(!1),O()}catch(N){alert(N.message||"Error")}},V=async N=>{confirm("")&&(await ee.deleteAdminAccount(N),s(await ee.getAdminAccounts()))},M=N=>{c(!0),m(N.id),C({name:N.name,username:N.username,password:N.password})},O=()=>{m(null),C({name:"",username:"",password:""})},x=async()=>{if(!j||!S){alert("");return}if(j!==S){alert("");return}confirm("")&&(await ee.setFrontendPassword(j),alert(""),P(""),w(""))},y=async()=>{g("CHECKING");const N=await ee.checkDatabaseConnection();g(N?"SUCCESS":"ERROR")},_=N=>!!(t.isSuperAdmin||N.id===t.id),E=N=>N.isSuperAdmin?!1:!!t.isSuperAdmin,T=async N=>{if(!t.isSuperAdmin){alert("");return}const b=prompt("");if(b!==null){if(b!==t.password){alert("");return}await N()}};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""})}),l.jsxs("div",{className:"flex border-b border-slate-200",children:[l.jsx("button",{onClick:()=>n("ACCOUNTS"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${e==="ACCOUNTS"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>n("INFO"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${e==="INFO"?"border-slate-500 text-slate-700":"border-transparent text-slate-500 hover:text-slate-700"}`,children:""})]}),e==="ACCOUNTS"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex justify-between items-center",children:[l.jsxs("div",{className:"text-sm text-slate-500",children:["",l.jsxs("span",{className:"font-bold text-slate-800",children:[t.name," (",t.isSuperAdmin?"":"",")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>{O(),c(!0)},className:"bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold hover:bg-emerald-600 flex items-center gap-2",children:[l.jsx(iu,{size:18})," "]}),l.jsxs("div",{className:"hidden md:flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>o("CARD"),className:`p-2 rounded ${i==="CARD"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(ei,{size:18})}),l.jsx("button",{onClick:()=>o("LIST"),className:`p-2 rounded ${i==="LIST"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(Lo,{size:18})})]})]})]}),u&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-lg mx-auto",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[l.jsx(oN,{className:"text-primary"})," ",h?"":""]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{value:I.name,onChange:N=>C({...I,name:N.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{value:I.username,onChange:N=>C({...I,username:N.target.value}),disabled:!!h&&I.username==="sysop",className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none disabled:bg-slate-100"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{value:I.password,onChange:N=>C({...I,password:N.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none",type:"text",placeholder:""})]}),l.jsxs("div",{className:"flex gap-4 mt-4",children:[l.jsx("button",{onClick:A,className:"flex-1 bg-primary text-white py-2 rounded-lg font-bold hover:bg-blue-700",children:""}),l.jsx("button",{onClick:()=>{c(!1),O()},className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded-lg font-bold hover:bg-slate-50",children:""})]})]})]}),l.jsx("div",{className:`${i==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(N=>l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${N.isSuperAdmin?"bg-indigo-600":"bg-slate-500"}`,children:N.name.charAt(0)}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800",children:N.name}),l.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[l.jsx(Rx,{size:12})," ",N.username]})]})]}),N.isSuperAdmin&&l.jsx(Cx,{className:"text-amber-500",size:20})]}),l.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-100",children:[_(N)?l.jsx("button",{onClick:()=>M(N),className:"flex-1 py-1.5 text-sm bg-blue-50 text-blue-600 rounded hover:bg-blue-100 font-bold",children:"/"}):l.jsx("button",{disabled:!0,className:"flex-1 py-1.5 text-sm bg-slate-50 text-slate-300 rounded cursor-not-allowed",children:""}),E(N)&&l.jsx("button",{onClick:()=>V(N.id),className:"px-3 py-1.5 text-sm bg-red-50 text-red-500 rounded hover:bg-red-100 font-bold",children:""})]})]},N.id))})}),l.jsx("div",{className:`hidden ${i==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(N=>l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-700",children:N.name}),l.jsx("td",{className:"p-4 font-mono text-slate-600",children:N.username}),l.jsx("td",{className:"p-4",children:N.isSuperAdmin?l.jsx("span",{className:"text-xs font-bold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:""}):l.jsx("span",{className:"text-xs font-bold bg-slate-100 text-slate-600 px-2 py-1 rounded-full",children:""})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[_(N)&&l.jsx("button",{onClick:()=>M(N),className:"text-blue-600 font-bold text-sm hover:underline",children:""}),E(N)&&l.jsx("button",{onClick:()=>V(N.id),className:"text-red-500 font-bold text-sm hover:underline",children:""})]})]},N.id))})]})})}),l.jsxs("div",{className:"bg-red-50/50 p-6 rounded-xl shadow-sm border border-red-100 mt-8",children:[l.jsxs("h3",{className:"text-lg font-bold text-red-600 flex items-center gap-2 mb-4",children:[l.jsx(Sl,{size:18})," "]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{type:"password",value:j,onChange:N=>P(N.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-red-500 outline-none",placeholder:""})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{type:"password",value:S,onChange:N=>w(N.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-red-500 outline-none",placeholder:""})]}),l.jsx("div",{children:l.jsx("button",{onClick:x,className:"w-full bg-red-600 text-white py-2 rounded font-bold hover:bg-red-700 transition-colors shadow-sm",children:""})})]}),l.jsx("p",{className:"text-xs text-red-400 mt-2 font-bold",children:""})]})]}),e==="INFO"&&l.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[l.jsx(xa,{className:"text-indigo-600"})," "]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"bg-orange-500 p-1 rounded-full text-white",children:l.jsx(xa,{size:14})}),l.jsx("span",{className:"font-mono font-bold text-slate-800",children:"Firebase Mode"})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),p==="IDLE"&&l.jsx("span",{className:"text-slate-400 font-bold text-sm",children:""}),p==="CHECKING"&&l.jsx("span",{className:"text-blue-500 font-bold text-sm animate-pulse",children:"..."}),p==="SUCCESS"&&l.jsxs("span",{className:"text-emerald-600 font-bold text-sm flex items-center gap-1",children:[l.jsx(bd,{size:14})," "]}),p==="ERROR"&&l.jsxs("span",{className:"text-red-500 font-bold text-sm flex items-center gap-1",children:[l.jsx(uN,{size:14})," "]})]})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[l.jsx(xa,{className:"text-indigo-600"})," "]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-slate-800 mb-1 font-bold",children:""}),l.jsx("p",{className:"text-xs text-slate-400",children:"353"})]}),l.jsxs("button",{onClick:()=>T(()=>xN()),className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-2 rounded-lg font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md flex items-center gap-2 whitespace-nowrap",children:[l.jsx(xa,{size:16})," "]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-red-600 mb-1 font-bold",children:""}),l.jsx("p",{className:"text-xs text-slate-400",children:""})]}),l.jsxs("button",{onClick:()=>T(async()=>{await ee.clearAllData(),alert(""),window.location.reload()}),className:"bg-white border-2 border-red-100 text-red-500 px-6 py-2 rounded-lg font-bold hover:bg-red-50 hover:border-red-200 transition-all flex items-center gap-2 whitespace-nowrap",children:[l.jsx(kx,{size:16})," "]})]})]})]})]})]})},SN=()=>{const[t,e]=H.useState(!1),[n,r]=H.useState(!1),[s,i]=H.useState(void 0),[o,u]=H.useState(!0),[c,h]=H.useState(""),[m,p]=H.useState(""),[g,I]=H.useState(""),[C,j]=H.useState("USER"),[P,S]=H.useState(""),[w,A]=H.useState(!1);H.useEffect(()=>{(async()=>{const{role:y,userId:_}=ee.getSession();if(y==="USER")e(!0);else if(y==="ADMIN"&&_){const E=await ee.getAdminById(_);E?(r(!0),i(E)):ee.clearSession()}u(!1)})()},[]);const V=async x=>{x.preventDefault(),u(!0);const y=await ee.getFrontendPassword();u(!1),c===y?(e(!0),S(""),w&&ee.setSession("USER")):S("")},M=async x=>{x.preventDefault(),u(!0);const y=await ee.verifyAdmin(m,g);u(!1),y?(r(!0),i(y),S(""),w&&ee.setSession("ADMIN",y.id)):S("")},O=()=>{e(!1),r(!1),i(void 0),ee.clearSession(),h(""),I(""),p("")};return o?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:"Loading..."}):n&&s?l.jsx(_N,{currentUser:s,onLogout:O,onGoToFrontend:()=>{r(!1),e(!0)}}):t?l.jsx(dN,{onLogout:O,onGoToAdmin:()=>{O(),j("ADMIN")}}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-800 to-slate-900 p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden w-full max-w-md",children:[l.jsxs("div",{className:"flex text-sm font-bold text-center border-b bg-gray-50",children:[l.jsx("button",{onClick:()=>{j("USER"),S("")},className:`flex-1 py-4 uppercase tracking-wider transition-all border-t-4 ${C==="USER"?"bg-white text-primary border-primary":"bg-gray-100 text-gray-400 border-transparent hover:bg-gray-50"}`,children:""}),l.jsx("button",{onClick:()=>{j("ADMIN"),S("")},className:`flex-1 py-4 uppercase tracking-wider transition-all border-t-4 ${C==="ADMIN"?"bg-white text-slate-800 border-slate-800":"bg-gray-100 text-gray-400 border-transparent hover:bg-gray-50"}`,children:""})]}),l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),l.jsx("p",{className:"text-slate-500 text-sm",children:""})]}),P&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded border border-red-200 text-center",children:P}),C==="USER"?l.jsxs("form",{onSubmit:V,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(Sl,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"password",value:c,onChange:x=>h(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none",placeholder:"",autoComplete:"current-password"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember-user",type:"checkbox",checked:w,onChange:x=>A(x.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary bg-white"}),l.jsx("label",{htmlFor:"remember-user",className:"ml-2 block text-sm text-slate-600 cursor-pointer",children:" (Remember me)"})]}),l.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors",children:""})]}):l.jsxs("form",{onSubmit:M,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(tN,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"text",value:m,onChange:x=>p(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none",placeholder:"",autoComplete:"username"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(Sl,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"password",value:g,onChange:x=>I(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none",placeholder:"",autoComplete:"current-password"})]})]}),l.jsxs("div",{className:"flex items-center pt-2",children:[l.jsx("input",{id:"remember-admin",type:"checkbox",checked:w,onChange:x=>A(x.target.checked),className:"w-4 h-4 text-slate-800 border-gray-300 rounded focus:ring-slate-800 bg-white"}),l.jsx("label",{htmlFor:"remember-admin",className:"ml-2 block text-sm text-slate-600 cursor-pointer",children:" (Remember me)"})]}),l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white py-3 rounded-lg font-bold hover:bg-slate-900 transition-colors mt-2",children:""})]})]})]})})},Px=document.getElementById("root");if(!Px)throw new Error("Could not find root element to mount to");const NN=oc.createRoot(Px);NN.render(l.jsx(w1.StrictMode,{children:l.jsx(SN,{})}));
