(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function u1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jg={exports:{}},Dl={},Rg={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mo=Symbol.for("react.element"),c1=Symbol.for("react.portal"),d1=Symbol.for("react.fragment"),h1=Symbol.for("react.strict_mode"),f1=Symbol.for("react.profiler"),m1=Symbol.for("react.provider"),p1=Symbol.for("react.context"),g1=Symbol.for("react.forward_ref"),y1=Symbol.for("react.suspense"),v1=Symbol.for("react.memo"),x1=Symbol.for("react.lazy"),am=Symbol.iterator;function _1(t){return t===null||typeof t!="object"?null:(t=am&&t[am]||t["@@iterator"],typeof t=="function"?t:null)}var Pg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dg=Object.assign,Vg={};function ni(t,e,n){this.props=t,this.context=e,this.refs=Vg,this.updater=n||Pg}ni.prototype.isReactComponent={};ni.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ni.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mg(){}Mg.prototype=ni.prototype;function Dd(t,e,n){this.props=t,this.context=e,this.refs=Vg,this.updater=n||Pg}var Vd=Dd.prototype=new Mg;Vd.constructor=Dd;Dg(Vd,ni.prototype);Vd.isPureReactComponent=!0;var lm=Array.isArray,Og=Object.prototype.hasOwnProperty,Md={current:null},Lg={key:!0,ref:!0,__self:!0,__source:!0};function Fg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Og.call(e,r)&&!Lg.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Mo,type:t,key:i,ref:o,props:s,_owner:Md.current}}function w1(t,e){return{$$typeof:Mo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Od(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mo}function E1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var um=/\/+/g;function ku(t,e){return typeof t=="object"&&t!==null&&t.key!=null?E1(""+t.key):e.toString(36)}function Ia(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Mo:case c1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ku(o,0):r,lm(s)?(n="",t!=null&&(n=t.replace(um,"$&/")+"/"),Ia(s,e,n,"",function(h){return h})):s!=null&&(Od(s)&&(s=w1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(um,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",lm(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+ku(i,u);o+=Ia(i,e,n,c,s)}else if(c=_1(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+ku(i,u++),o+=Ia(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sa(t,e,n){if(t==null)return t;var r=[],s=0;return Ia(t,r,"","",function(i){return e.call(n,i,s++)}),r}function b1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},Aa={transition:null},S1={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:Aa,ReactCurrentOwner:Md};function Ug(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:sa,forEach:function(t,e,n){sa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sa(t,function(){e++}),e},toArray:function(t){return sa(t,function(e){return e})||[]},only:function(t){if(!Od(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=ni;fe.Fragment=d1;fe.Profiler=f1;fe.PureComponent=Dd;fe.StrictMode=h1;fe.Suspense=y1;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S1;fe.act=Ug;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Dg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Md.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Og.call(e,c)&&!Lg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:Mo,type:t.type,key:s,ref:i,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:p1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:m1,_context:t},t.Consumer=t};fe.createElement=Fg;fe.createFactory=function(t){var e=Fg.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:g1,render:t}};fe.isValidElement=Od;fe.lazy=function(t){return{$$typeof:x1,_payload:{_status:-1,_result:t},_init:b1}};fe.memo=function(t,e){return{$$typeof:v1,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Aa.transition;Aa.transition={};try{t()}finally{Aa.transition=e}};fe.unstable_act=Ug;fe.useCallback=function(t,e){return Et.current.useCallback(t,e)};fe.useContext=function(t){return Et.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};fe.useEffect=function(t,e){return Et.current.useEffect(t,e)};fe.useId=function(){return Et.current.useId()};fe.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return Et.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};fe.useRef=function(t){return Et.current.useRef(t)};fe.useState=function(t){return Et.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return Et.current.useTransition()};fe.version="18.3.1";Rg.exports=fe;var q=Rg.exports;const T1=u1(q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1=q,I1=Symbol.for("react.element"),A1=Symbol.for("react.fragment"),C1=Object.prototype.hasOwnProperty,k1=N1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j1={key:!0,ref:!0,__self:!0,__source:!0};function zg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)C1.call(e,r)&&!j1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:I1,type:t,key:i,ref:o,props:s,_owner:k1.current}}Dl.Fragment=A1;Dl.jsx=zg;Dl.jsxs=zg;jg.exports=Dl;var l=jg.exports,pc={},$g={exports:{}},$t={},Bg={exports:{}},qg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,W){var Y=U.length;U.push(W);e:for(;0<Y;){var ee=Y-1>>>1,ue=U[ee];if(0<s(ue,W))U[ee]=W,U[Y]=ue,Y=ee;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var W=U[0],Y=U.pop();if(Y!==W){U[0]=Y;e:for(var ee=0,ue=U.length,G=ue>>>1;ee<G;){var xe=2*(ee+1)-1,Me=U[xe],be=xe+1,ce=U[be];if(0>s(Me,Y))be<ue&&0>s(ce,Me)?(U[ee]=ce,U[be]=Y,ee=be):(U[ee]=Me,U[xe]=Y,ee=xe);else if(be<ue&&0>s(ce,Y))U[ee]=ce,U[be]=Y,ee=be;else break e}}return W}function s(U,W){var Y=U.sortIndex-W.sortIndex;return Y!==0?Y:U.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],m=1,p=null,g=3,A=!1,k=!1,R=!1,P=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(U){for(var W=n(h);W!==null;){if(W.callback===null)r(h);else if(W.startTime<=U)r(h),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(h)}}function O(U){if(R=!1,I(U),!k)if(n(c)!==null)k=!0,St(M);else{var W=n(h);W!==null&&L(O,W.startTime-U)}}function M(U,W){k=!1,R&&(R=!1,T(v),v=-1),A=!0;var Y=g;try{for(I(W),p=n(c);p!==null&&(!(p.expirationTime>W)||U&&!N());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,g=p.priorityLevel;var ue=ee(p.expirationTime<=W);W=t.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(c)&&r(c),I(W)}else r(c);p=n(c)}if(p!==null)var G=!0;else{var xe=n(h);xe!==null&&L(O,xe.startTime-W),G=!1}return G}finally{p=null,g=Y,A=!1}}var F=!1,x=null,v=-1,_=5,E=-1;function N(){return!(t.unstable_now()-E<_)}function C(){if(x!==null){var U=t.unstable_now();E=U;var W=!0;try{W=x(!0,U)}finally{W?b():(F=!1,x=null)}}else F=!1}var b;if(typeof w=="function")b=function(){w(C)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,ze=Ee.port2;Ee.port1.onmessage=C,b=function(){ze.postMessage(null)}}else b=function(){P(C,0)};function St(U){x=U,F||(F=!0,b())}function L(U,W){v=P(function(){U(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){k||A||(k=!0,St(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var Y=g;g=W;try{return U()}finally{g=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=g;g=U;try{return W()}finally{g=Y}},t.unstable_scheduleCallback=function(U,W,Y){var ee=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ee+Y:ee):Y=ee,U){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Y+ue,U={id:m++,callback:W,priorityLevel:U,startTime:Y,expirationTime:ue,sortIndex:-1},Y>ee?(U.sortIndex=Y,e(h,U),n(c)===null&&U===n(h)&&(R?(T(v),v=-1):R=!0,L(O,Y-ee))):(U.sortIndex=ue,e(c,U),k||A||(k=!0,St(M))),U},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(U){var W=g;return function(){var Y=g;g=W;try{return U.apply(this,arguments)}finally{g=Y}}}})(qg);Bg.exports=qg;var R1=Bg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1=q,zt=R1;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hg=new Set,lo={};function os(t,e){zs(t,e),zs(t+"Capture",e)}function zs(t,e){for(lo[t]=e,t=0;t<e.length;t++)Hg.add(e[t])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gc=Object.prototype.hasOwnProperty,D1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cm={},dm={};function V1(t){return gc.call(dm,t)?!0:gc.call(cm,t)?!1:D1.test(t)?dm[t]=!0:(cm[t]=!0,!1)}function M1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function O1(t,e,n,r){if(e===null||typeof e>"u"||M1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ld=/[\-:]([a-z])/g;function Fd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ld,Fd);ct[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ld,Fd);ct[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ld,Fd);ct[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ud(t,e,n,r){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(O1(e,n,s,r)&&(n=null),r||s===null?V1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qn=P1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ia=Symbol.for("react.element"),xs=Symbol.for("react.portal"),_s=Symbol.for("react.fragment"),zd=Symbol.for("react.strict_mode"),yc=Symbol.for("react.profiler"),Wg=Symbol.for("react.provider"),Gg=Symbol.for("react.context"),$d=Symbol.for("react.forward_ref"),vc=Symbol.for("react.suspense"),xc=Symbol.for("react.suspense_list"),Bd=Symbol.for("react.memo"),er=Symbol.for("react.lazy"),Qg=Symbol.for("react.offscreen"),hm=Symbol.iterator;function Ii(t){return t===null||typeof t!="object"?null:(t=hm&&t[hm]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,ju;function Ui(t){if(ju===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ju=e&&e[1]||""}return`
`+ju+t}var Ru=!1;function Pu(t,e){if(!t||Ru)return"";Ru=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Ru=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ui(t):""}function L1(t){switch(t.tag){case 5:return Ui(t.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 2:case 15:return t=Pu(t.type,!1),t;case 11:return t=Pu(t.type.render,!1),t;case 1:return t=Pu(t.type,!0),t;default:return""}}function _c(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _s:return"Fragment";case xs:return"Portal";case yc:return"Profiler";case zd:return"StrictMode";case vc:return"Suspense";case xc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gg:return(t.displayName||"Context")+".Consumer";case Wg:return(t._context.displayName||"Context")+".Provider";case $d:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bd:return e=t.displayName||null,e!==null?e:_c(t.type)||"Memo";case er:e=t._payload,t=t._init;try{return _c(t(e))}catch{}}return null}function F1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _c(e);case 8:return e===zd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function U1(t){var e=Kg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function oa(t){t._valueTracker||(t._valueTracker=U1(t))}function Yg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Kg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ga(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wc(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_r(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xg(t,e){e=e.checked,e!=null&&Ud(t,"checked",e,!1)}function Ec(t,e){Xg(t,e);var n=_r(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bc(t,e.type,n):e.hasOwnProperty("defaultValue")&&bc(t,e.type,_r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bc(t,e,n){(e!=="number"||Ga(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zi=Array.isArray;function js(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_r(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Sc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(zi(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_r(n)}}function Jg(t,e){var n=_r(e.value),r=_r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var aa,e0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(aa=aa||document.createElement("div"),aa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=aa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z1=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(t){z1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qi[e]=Qi[t]})});function t0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qi.hasOwnProperty(t)&&Qi[t]?(""+e).trim():e+"px"}function n0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=t0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var $1=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nc(t,e){if(e){if($1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Ic(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ac=null;function qd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cc=null,Rs=null,Ps=null;function ym(t){if(t=Fo(t)){if(typeof Cc!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Fl(e),Cc(t.stateNode,t.type,e))}}function r0(t){Rs?Ps?Ps.push(t):Ps=[t]:Rs=t}function s0(){if(Rs){var t=Rs,e=Ps;if(Ps=Rs=null,ym(t),e)for(t=0;t<e.length;t++)ym(e[t])}}function i0(t,e){return t(e)}function o0(){}var Du=!1;function a0(t,e,n){if(Du)return t(e,n);Du=!0;try{return i0(t,e,n)}finally{Du=!1,(Rs!==null||Ps!==null)&&(o0(),s0())}}function co(t,e){var n=t.stateNode;if(n===null)return null;var r=Fl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var kc=!1;if(Mn)try{var Ai={};Object.defineProperty(Ai,"passive",{get:function(){kc=!0}}),window.addEventListener("test",Ai,Ai),window.removeEventListener("test",Ai,Ai)}catch{kc=!1}function B1(t,e,n,r,s,i,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var Ki=!1,Qa=null,Ka=!1,jc=null,q1={onError:function(t){Ki=!0,Qa=t}};function H1(t,e,n,r,s,i,o,u,c){Ki=!1,Qa=null,B1.apply(q1,arguments)}function W1(t,e,n,r,s,i,o,u,c){if(H1.apply(this,arguments),Ki){if(Ki){var h=Qa;Ki=!1,Qa=null}else throw Error(H(198));Ka||(Ka=!0,jc=h)}}function as(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function l0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vm(t){if(as(t)!==t)throw Error(H(188))}function G1(t){var e=t.alternate;if(!e){if(e=as(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return vm(s),t;if(i===r)return vm(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function u0(t){return t=G1(t),t!==null?c0(t):null}function c0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=c0(t);if(e!==null)return e;t=t.sibling}return null}var d0=zt.unstable_scheduleCallback,xm=zt.unstable_cancelCallback,Q1=zt.unstable_shouldYield,K1=zt.unstable_requestPaint,We=zt.unstable_now,Y1=zt.unstable_getCurrentPriorityLevel,Hd=zt.unstable_ImmediatePriority,h0=zt.unstable_UserBlockingPriority,Ya=zt.unstable_NormalPriority,X1=zt.unstable_LowPriority,f0=zt.unstable_IdlePriority,Vl=null,yn=null;function J1(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Vl,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:t_,Z1=Math.log,e_=Math.LN2;function t_(t){return t>>>=0,t===0?32:31-(Z1(t)/e_|0)|0}var la=64,ua=4194304;function $i(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=$i(u):(i&=o,i!==0&&(r=$i(i)))}else o=n&~s,o!==0?r=$i(o):i!==0&&(r=$i(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),s=1<<n,r|=t[n],e&=~s;return r}function n_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=n_(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Rc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function m0(){var t=la;return la<<=1,!(la&4194240)&&(la=64),t}function Vu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Oo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function s_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Wd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ne=0;function p0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g0,Gd,y0,v0,x0,Pc=!1,ca=[],lr=null,ur=null,cr=null,ho=new Map,fo=new Map,nr=[],i_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _m(t,e){switch(t){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":ho.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fo.delete(e.pointerId)}}function Ci(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Fo(e),e!==null&&Gd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function o_(t,e,n,r,s){switch(e){case"focusin":return lr=Ci(lr,t,e,n,r,s),!0;case"dragenter":return ur=Ci(ur,t,e,n,r,s),!0;case"mouseover":return cr=Ci(cr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ho.set(i,Ci(ho.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,fo.set(i,Ci(fo.get(i)||null,t,e,n,r,s)),!0}return!1}function _0(t){var e=Hr(t.target);if(e!==null){var n=as(e);if(n!==null){if(e=n.tag,e===13){if(e=l0(n),e!==null){t.blockedOn=e,x0(t.priority,function(){y0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ca(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Dc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ac=r,n.target.dispatchEvent(r),Ac=null}else return e=Fo(n),e!==null&&Gd(e),t.blockedOn=n,!1;e.shift()}return!0}function wm(t,e,n){Ca(t)&&n.delete(e)}function a_(){Pc=!1,lr!==null&&Ca(lr)&&(lr=null),ur!==null&&Ca(ur)&&(ur=null),cr!==null&&Ca(cr)&&(cr=null),ho.forEach(wm),fo.forEach(wm)}function ki(t,e){t.blockedOn===e&&(t.blockedOn=null,Pc||(Pc=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,a_)))}function mo(t){function e(s){return ki(s,t)}if(0<ca.length){ki(ca[0],t);for(var n=1;n<ca.length;n++){var r=ca[n];r.blockedOn===t&&(r.blockedOn=null)}}for(lr!==null&&ki(lr,t),ur!==null&&ki(ur,t),cr!==null&&ki(cr,t),ho.forEach(e),fo.forEach(e),n=0;n<nr.length;n++)r=nr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<nr.length&&(n=nr[0],n.blockedOn===null);)_0(n),n.blockedOn===null&&nr.shift()}var Ds=qn.ReactCurrentBatchConfig,Ja=!0;function l_(t,e,n,r){var s=Ne,i=Ds.transition;Ds.transition=null;try{Ne=1,Qd(t,e,n,r)}finally{Ne=s,Ds.transition=i}}function u_(t,e,n,r){var s=Ne,i=Ds.transition;Ds.transition=null;try{Ne=4,Qd(t,e,n,r)}finally{Ne=s,Ds.transition=i}}function Qd(t,e,n,r){if(Ja){var s=Dc(t,e,n,r);if(s===null)Hu(t,e,r,Za,n),_m(t,r);else if(o_(s,t,e,n,r))r.stopPropagation();else if(_m(t,r),e&4&&-1<i_.indexOf(t)){for(;s!==null;){var i=Fo(s);if(i!==null&&g0(i),i=Dc(t,e,n,r),i===null&&Hu(t,e,r,Za,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Hu(t,e,r,null,n)}}var Za=null;function Dc(t,e,n,r){if(Za=null,t=qd(r),t=Hr(t),t!==null)if(e=as(t),e===null)t=null;else if(n=e.tag,n===13){if(t=l0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Za=t,null}function w0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Y1()){case Hd:return 1;case h0:return 4;case Ya:case X1:return 16;case f0:return 536870912;default:return 16}default:return 16}}var ir=null,Kd=null,ka=null;function E0(){if(ka)return ka;var t,e=Kd,n=e.length,r,s="value"in ir?ir.value:ir.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ka=s.slice(t,1<r?1-r:void 0)}function ja(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function da(){return!0}function Em(){return!1}function Bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?da:Em,this.isPropagationStopped=Em,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=da)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=da)},persist:function(){},isPersistent:da}),e}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yd=Bt(ri),Lo=Fe({},ri,{view:0,detail:0}),c_=Bt(Lo),Mu,Ou,ji,Ml=Fe({},Lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ji&&(ji&&t.type==="mousemove"?(Mu=t.screenX-ji.screenX,Ou=t.screenY-ji.screenY):Ou=Mu=0,ji=t),Mu)},movementY:function(t){return"movementY"in t?t.movementY:Ou}}),bm=Bt(Ml),d_=Fe({},Ml,{dataTransfer:0}),h_=Bt(d_),f_=Fe({},Lo,{relatedTarget:0}),Lu=Bt(f_),m_=Fe({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),p_=Bt(m_),g_=Fe({},ri,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),y_=Bt(g_),v_=Fe({},ri,{data:0}),Sm=Bt(v_),x_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},__={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=w_[t])?!!e[t]:!1}function Xd(){return E_}var b_=Fe({},Lo,{key:function(t){if(t.key){var e=x_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ja(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?__[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xd,charCode:function(t){return t.type==="keypress"?ja(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ja(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),S_=Bt(b_),T_=Fe({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tm=Bt(T_),N_=Fe({},Lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xd}),I_=Bt(N_),A_=Fe({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),C_=Bt(A_),k_=Fe({},Ml,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),j_=Bt(k_),R_=[9,13,27,32],Jd=Mn&&"CompositionEvent"in window,Yi=null;Mn&&"documentMode"in document&&(Yi=document.documentMode);var P_=Mn&&"TextEvent"in window&&!Yi,b0=Mn&&(!Jd||Yi&&8<Yi&&11>=Yi),Nm=" ",Im=!1;function S0(t,e){switch(t){case"keyup":return R_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ws=!1;function D_(t,e){switch(t){case"compositionend":return T0(e);case"keypress":return e.which!==32?null:(Im=!0,Nm);case"textInput":return t=e.data,t===Nm&&Im?null:t;default:return null}}function V_(t,e){if(ws)return t==="compositionend"||!Jd&&S0(t,e)?(t=E0(),ka=Kd=ir=null,ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return b0&&e.locale!=="ko"?null:e.data;default:return null}}var M_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Am(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!M_[t.type]:e==="textarea"}function N0(t,e,n,r){r0(r),e=el(e,"onChange"),0<e.length&&(n=new Yd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xi=null,po=null;function O_(t){O0(t,0)}function Ol(t){var e=Ss(t);if(Yg(e))return t}function L_(t,e){if(t==="change")return e}var I0=!1;if(Mn){var Fu;if(Mn){var Uu="oninput"in document;if(!Uu){var Cm=document.createElement("div");Cm.setAttribute("oninput","return;"),Uu=typeof Cm.oninput=="function"}Fu=Uu}else Fu=!1;I0=Fu&&(!document.documentMode||9<document.documentMode)}function km(){Xi&&(Xi.detachEvent("onpropertychange",A0),po=Xi=null)}function A0(t){if(t.propertyName==="value"&&Ol(po)){var e=[];N0(e,po,t,qd(t)),a0(O_,e)}}function F_(t,e,n){t==="focusin"?(km(),Xi=e,po=n,Xi.attachEvent("onpropertychange",A0)):t==="focusout"&&km()}function U_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ol(po)}function z_(t,e){if(t==="click")return Ol(e)}function $_(t,e){if(t==="input"||t==="change")return Ol(e)}function B_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:B_;function go(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!gc.call(e,s)||!an(t[s],e[s]))return!1}return!0}function jm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rm(t,e){var n=jm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jm(n)}}function C0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?C0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function k0(){for(var t=window,e=Ga();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ga(t.document)}return e}function Zd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function q_(t){var e=k0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&C0(n.ownerDocument.documentElement,n)){if(r!==null&&Zd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Rm(n,i);var o=Rm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var H_=Mn&&"documentMode"in document&&11>=document.documentMode,Es=null,Vc=null,Ji=null,Mc=!1;function Pm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mc||Es==null||Es!==Ga(r)||(r=Es,"selectionStart"in r&&Zd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ji&&go(Ji,r)||(Ji=r,r=el(Vc,"onSelect"),0<r.length&&(e=new Yd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Es)))}function ha(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bs={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionend:ha("Transition","TransitionEnd")},zu={},j0={};Mn&&(j0=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function Ll(t){if(zu[t])return zu[t];if(!bs[t])return t;var e=bs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in j0)return zu[t]=e[n];return t}var R0=Ll("animationend"),P0=Ll("animationiteration"),D0=Ll("animationstart"),V0=Ll("transitionend"),M0=new Map,Dm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,e){M0.set(t,e),os(e,[t])}for(var $u=0;$u<Dm.length;$u++){var Bu=Dm[$u],W_=Bu.toLowerCase(),G_=Bu[0].toUpperCase()+Bu.slice(1);Ar(W_,"on"+G_)}Ar(R0,"onAnimationEnd");Ar(P0,"onAnimationIteration");Ar(D0,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(V0,"onTransitionEnd");zs("onMouseEnter",["mouseout","mouseover"]);zs("onMouseLeave",["mouseout","mouseover"]);zs("onPointerEnter",["pointerout","pointerover"]);zs("onPointerLeave",["pointerout","pointerover"]);os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));os("onBeforeInput",["compositionend","keypress","textInput","paste"]);os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bi));function Vm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,W1(r,e,void 0,t),t.currentTarget=null}function O0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Vm(s,u,h),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Vm(s,u,h),i=c}}}if(Ka)throw t=jc,Ka=!1,jc=null,t}function Re(t,e){var n=e[zc];n===void 0&&(n=e[zc]=new Set);var r=t+"__bubble";n.has(r)||(L0(e,t,2,!1),n.add(r))}function qu(t,e,n){var r=0;e&&(r|=4),L0(n,t,r,e)}var fa="_reactListening"+Math.random().toString(36).slice(2);function yo(t){if(!t[fa]){t[fa]=!0,Hg.forEach(function(n){n!=="selectionchange"&&(Q_.has(n)||qu(n,!1,t),qu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fa]||(e[fa]=!0,qu("selectionchange",!1,e))}}function L0(t,e,n,r){switch(w0(e)){case 1:var s=l_;break;case 4:s=u_;break;default:s=Qd}n=s.bind(null,e,n,t),s=void 0,!kc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Hu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Hr(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}a0(function(){var h=i,m=qd(n),p=[];e:{var g=M0.get(t);if(g!==void 0){var A=Yd,k=t;switch(t){case"keypress":if(ja(n)===0)break e;case"keydown":case"keyup":A=S_;break;case"focusin":k="focus",A=Lu;break;case"focusout":k="blur",A=Lu;break;case"beforeblur":case"afterblur":A=Lu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=h_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=I_;break;case R0:case P0:case D0:A=p_;break;case V0:A=C_;break;case"scroll":A=c_;break;case"wheel":A=j_;break;case"copy":case"cut":case"paste":A=y_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Tm}var R=(e&4)!==0,P=!R&&t==="scroll",T=R?g!==null?g+"Capture":null:g;R=[];for(var w=h,I;w!==null;){I=w;var O=I.stateNode;if(I.tag===5&&O!==null&&(I=O,T!==null&&(O=co(w,T),O!=null&&R.push(vo(w,O,I)))),P)break;w=w.return}0<R.length&&(g=new A(g,k,null,n,m),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",g&&n!==Ac&&(k=n.relatedTarget||n.fromElement)&&(Hr(k)||k[On]))break e;if((A||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,A?(k=n.relatedTarget||n.toElement,A=h,k=k?Hr(k):null,k!==null&&(P=as(k),k!==P||k.tag!==5&&k.tag!==6)&&(k=null)):(A=null,k=h),A!==k)){if(R=bm,O="onMouseLeave",T="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(R=Tm,O="onPointerLeave",T="onPointerEnter",w="pointer"),P=A==null?g:Ss(A),I=k==null?g:Ss(k),g=new R(O,w+"leave",A,n,m),g.target=P,g.relatedTarget=I,O=null,Hr(m)===h&&(R=new R(T,w+"enter",k,n,m),R.target=I,R.relatedTarget=P,O=R),P=O,A&&k)t:{for(R=A,T=k,w=0,I=R;I;I=ms(I))w++;for(I=0,O=T;O;O=ms(O))I++;for(;0<w-I;)R=ms(R),w--;for(;0<I-w;)T=ms(T),I--;for(;w--;){if(R===T||T!==null&&R===T.alternate)break t;R=ms(R),T=ms(T)}R=null}else R=null;A!==null&&Mm(p,g,A,R,!1),k!==null&&P!==null&&Mm(p,P,k,R,!0)}}e:{if(g=h?Ss(h):window,A=g.nodeName&&g.nodeName.toLowerCase(),A==="select"||A==="input"&&g.type==="file")var M=L_;else if(Am(g))if(I0)M=$_;else{M=U_;var F=F_}else(A=g.nodeName)&&A.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=z_);if(M&&(M=M(t,h))){N0(p,M,n,m);break e}F&&F(t,g,h),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&bc(g,"number",g.value)}switch(F=h?Ss(h):window,t){case"focusin":(Am(F)||F.contentEditable==="true")&&(Es=F,Vc=h,Ji=null);break;case"focusout":Ji=Vc=Es=null;break;case"mousedown":Mc=!0;break;case"contextmenu":case"mouseup":case"dragend":Mc=!1,Pm(p,n,m);break;case"selectionchange":if(H_)break;case"keydown":case"keyup":Pm(p,n,m)}var x;if(Jd)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ws?S0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(b0&&n.locale!=="ko"&&(ws||v!=="onCompositionStart"?v==="onCompositionEnd"&&ws&&(x=E0()):(ir=m,Kd="value"in ir?ir.value:ir.textContent,ws=!0)),F=el(h,v),0<F.length&&(v=new Sm(v,t,null,n,m),p.push({event:v,listeners:F}),x?v.data=x:(x=T0(n),x!==null&&(v.data=x)))),(x=P_?D_(t,n):V_(t,n))&&(h=el(h,"onBeforeInput"),0<h.length&&(m=new Sm("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:h}),m.data=x))}O0(p,e)})}function vo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function el(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=co(t,n),i!=null&&r.unshift(vo(t,i,s)),i=co(t,e),i!=null&&r.push(vo(t,i,s))),t=t.return}return r}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,s?(c=co(n,i),c!=null&&o.unshift(vo(n,c,u))):s||(c=co(n,i),c!=null&&o.push(vo(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var K_=/\r\n?/g,Y_=/\u0000|\uFFFD/g;function Om(t){return(typeof t=="string"?t:""+t).replace(K_,`
`).replace(Y_,"")}function ma(t,e,n){if(e=Om(e),Om(t)!==e&&n)throw Error(H(425))}function tl(){}var Oc=null,Lc=null;function Fc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Uc=typeof setTimeout=="function"?setTimeout:void 0,X_=typeof clearTimeout=="function"?clearTimeout:void 0,Lm=typeof Promise=="function"?Promise:void 0,J_=typeof queueMicrotask=="function"?queueMicrotask:typeof Lm<"u"?function(t){return Lm.resolve(null).then(t).catch(Z_)}:Uc;function Z_(t){setTimeout(function(){throw t})}function Wu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),mo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);mo(e)}function dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Fm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var si=Math.random().toString(36).slice(2),gn="__reactFiber$"+si,xo="__reactProps$"+si,On="__reactContainer$"+si,zc="__reactEvents$"+si,ew="__reactListeners$"+si,tw="__reactHandles$"+si;function Hr(t){var e=t[gn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[On]||n[gn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Fm(t);t!==null;){if(n=t[gn])return n;t=Fm(t)}return e}t=n,n=t.parentNode}return null}function Fo(t){return t=t[gn]||t[On],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Fl(t){return t[xo]||null}var $c=[],Ts=-1;function Cr(t){return{current:t}}function De(t){0>Ts||(t.current=$c[Ts],$c[Ts]=null,Ts--)}function Ce(t,e){Ts++,$c[Ts]=t.current,t.current=e}var wr={},vt=Cr(wr),jt=Cr(!1),Jr=wr;function $s(t,e){var n=t.type.contextTypes;if(!n)return wr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Rt(t){return t=t.childContextTypes,t!=null}function nl(){De(jt),De(vt)}function Um(t,e,n){if(vt.current!==wr)throw Error(H(168));Ce(vt,e),Ce(jt,n)}function F0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,F1(t)||"Unknown",s));return Fe({},n,r)}function rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wr,Jr=vt.current,Ce(vt,t),Ce(jt,jt.current),!0}function zm(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=F0(t,e,Jr),r.__reactInternalMemoizedMergedChildContext=t,De(jt),De(vt),Ce(vt,t)):De(jt),Ce(jt,n)}var jn=null,Ul=!1,Gu=!1;function U0(t){jn===null?jn=[t]:jn.push(t)}function nw(t){Ul=!0,U0(t)}function kr(){if(!Gu&&jn!==null){Gu=!0;var t=0,e=Ne;try{var n=jn;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jn=null,Ul=!1}catch(s){throw jn!==null&&(jn=jn.slice(t+1)),d0(Hd,kr),s}finally{Ne=e,Gu=!1}}return null}var Ns=[],Is=0,sl=null,il=0,qt=[],Ht=0,Zr=null,Rn=1,Pn="";function zr(t,e){Ns[Is++]=il,Ns[Is++]=sl,sl=t,il=e}function z0(t,e,n){qt[Ht++]=Rn,qt[Ht++]=Pn,qt[Ht++]=Zr,Zr=t;var r=Rn;t=Pn;var s=32-rn(r)-1;r&=~(1<<s),n+=1;var i=32-rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Rn=1<<32-rn(e)+s|n<<s|r,Pn=i+t}else Rn=1<<i|n<<s|r,Pn=t}function eh(t){t.return!==null&&(zr(t,1),z0(t,1,0))}function th(t){for(;t===sl;)sl=Ns[--Is],Ns[Is]=null,il=Ns[--Is],Ns[Is]=null;for(;t===Zr;)Zr=qt[--Ht],qt[Ht]=null,Pn=qt[--Ht],qt[Ht]=null,Rn=qt[--Ht],qt[Ht]=null}var Ut=null,Lt=null,Ve=!1,nn=null;function $0(t,e){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $m(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,Lt=dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zr!==null?{id:Rn,overflow:Pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,Lt=null,!0):!1;default:return!1}}function Bc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qc(t){if(Ve){var e=Lt;if(e){var n=e;if(!$m(t,e)){if(Bc(t))throw Error(H(418));e=dr(n.nextSibling);var r=Ut;e&&$m(t,e)?$0(r,n):(t.flags=t.flags&-4097|2,Ve=!1,Ut=t)}}else{if(Bc(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ve=!1,Ut=t}}}function Bm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function pa(t){if(t!==Ut)return!1;if(!Ve)return Bm(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fc(t.type,t.memoizedProps)),e&&(e=Lt)){if(Bc(t))throw B0(),Error(H(418));for(;e;)$0(t,e),e=dr(e.nextSibling)}if(Bm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Ut?dr(t.stateNode.nextSibling):null;return!0}function B0(){for(var t=Lt;t;)t=dr(t.nextSibling)}function Bs(){Lt=Ut=null,Ve=!1}function nh(t){nn===null?nn=[t]:nn.push(t)}var rw=qn.ReactCurrentBatchConfig;function Ri(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function ga(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function qm(t){var e=t._init;return e(t._payload)}function q0(t){function e(T,w){if(t){var I=T.deletions;I===null?(T.deletions=[w],T.flags|=16):I.push(w)}}function n(T,w){if(!t)return null;for(;w!==null;)e(T,w),w=w.sibling;return null}function r(T,w){for(T=new Map;w!==null;)w.key!==null?T.set(w.key,w):T.set(w.index,w),w=w.sibling;return T}function s(T,w){return T=pr(T,w),T.index=0,T.sibling=null,T}function i(T,w,I){return T.index=I,t?(I=T.alternate,I!==null?(I=I.index,I<w?(T.flags|=2,w):I):(T.flags|=2,w)):(T.flags|=1048576,w)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function u(T,w,I,O){return w===null||w.tag!==6?(w=ec(I,T.mode,O),w.return=T,w):(w=s(w,I),w.return=T,w)}function c(T,w,I,O){var M=I.type;return M===_s?m(T,w,I.props.children,O,I.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===er&&qm(M)===w.type)?(O=s(w,I.props),O.ref=Ri(T,w,I),O.return=T,O):(O=La(I.type,I.key,I.props,null,T.mode,O),O.ref=Ri(T,w,I),O.return=T,O)}function h(T,w,I,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=tc(I,T.mode,O),w.return=T,w):(w=s(w,I.children||[]),w.return=T,w)}function m(T,w,I,O,M){return w===null||w.tag!==7?(w=Yr(I,T.mode,O,M),w.return=T,w):(w=s(w,I),w.return=T,w)}function p(T,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=ec(""+w,T.mode,I),w.return=T,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ia:return I=La(w.type,w.key,w.props,null,T.mode,I),I.ref=Ri(T,null,w),I.return=T,I;case xs:return w=tc(w,T.mode,I),w.return=T,w;case er:var O=w._init;return p(T,O(w._payload),I)}if(zi(w)||Ii(w))return w=Yr(w,T.mode,I,null),w.return=T,w;ga(T,w)}return null}function g(T,w,I,O){var M=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return M!==null?null:u(T,w,""+I,O);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ia:return I.key===M?c(T,w,I,O):null;case xs:return I.key===M?h(T,w,I,O):null;case er:return M=I._init,g(T,w,M(I._payload),O)}if(zi(I)||Ii(I))return M!==null?null:m(T,w,I,O,null);ga(T,I)}return null}function A(T,w,I,O,M){if(typeof O=="string"&&O!==""||typeof O=="number")return T=T.get(I)||null,u(w,T,""+O,M);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ia:return T=T.get(O.key===null?I:O.key)||null,c(w,T,O,M);case xs:return T=T.get(O.key===null?I:O.key)||null,h(w,T,O,M);case er:var F=O._init;return A(T,w,I,F(O._payload),M)}if(zi(O)||Ii(O))return T=T.get(I)||null,m(w,T,O,M,null);ga(w,O)}return null}function k(T,w,I,O){for(var M=null,F=null,x=w,v=w=0,_=null;x!==null&&v<I.length;v++){x.index>v?(_=x,x=null):_=x.sibling;var E=g(T,x,I[v],O);if(E===null){x===null&&(x=_);break}t&&x&&E.alternate===null&&e(T,x),w=i(E,w,v),F===null?M=E:F.sibling=E,F=E,x=_}if(v===I.length)return n(T,x),Ve&&zr(T,v),M;if(x===null){for(;v<I.length;v++)x=p(T,I[v],O),x!==null&&(w=i(x,w,v),F===null?M=x:F.sibling=x,F=x);return Ve&&zr(T,v),M}for(x=r(T,x);v<I.length;v++)_=A(x,T,v,I[v],O),_!==null&&(t&&_.alternate!==null&&x.delete(_.key===null?v:_.key),w=i(_,w,v),F===null?M=_:F.sibling=_,F=_);return t&&x.forEach(function(N){return e(T,N)}),Ve&&zr(T,v),M}function R(T,w,I,O){var M=Ii(I);if(typeof M!="function")throw Error(H(150));if(I=M.call(I),I==null)throw Error(H(151));for(var F=M=null,x=w,v=w=0,_=null,E=I.next();x!==null&&!E.done;v++,E=I.next()){x.index>v?(_=x,x=null):_=x.sibling;var N=g(T,x,E.value,O);if(N===null){x===null&&(x=_);break}t&&x&&N.alternate===null&&e(T,x),w=i(N,w,v),F===null?M=N:F.sibling=N,F=N,x=_}if(E.done)return n(T,x),Ve&&zr(T,v),M;if(x===null){for(;!E.done;v++,E=I.next())E=p(T,E.value,O),E!==null&&(w=i(E,w,v),F===null?M=E:F.sibling=E,F=E);return Ve&&zr(T,v),M}for(x=r(T,x);!E.done;v++,E=I.next())E=A(x,T,v,E.value,O),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?v:E.key),w=i(E,w,v),F===null?M=E:F.sibling=E,F=E);return t&&x.forEach(function(C){return e(T,C)}),Ve&&zr(T,v),M}function P(T,w,I,O){if(typeof I=="object"&&I!==null&&I.type===_s&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ia:e:{for(var M=I.key,F=w;F!==null;){if(F.key===M){if(M=I.type,M===_s){if(F.tag===7){n(T,F.sibling),w=s(F,I.props.children),w.return=T,T=w;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===er&&qm(M)===F.type){n(T,F.sibling),w=s(F,I.props),w.ref=Ri(T,F,I),w.return=T,T=w;break e}n(T,F);break}else e(T,F);F=F.sibling}I.type===_s?(w=Yr(I.props.children,T.mode,O,I.key),w.return=T,T=w):(O=La(I.type,I.key,I.props,null,T.mode,O),O.ref=Ri(T,w,I),O.return=T,T=O)}return o(T);case xs:e:{for(F=I.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){n(T,w.sibling),w=s(w,I.children||[]),w.return=T,T=w;break e}else{n(T,w);break}else e(T,w);w=w.sibling}w=tc(I,T.mode,O),w.return=T,T=w}return o(T);case er:return F=I._init,P(T,w,F(I._payload),O)}if(zi(I))return k(T,w,I,O);if(Ii(I))return R(T,w,I,O);ga(T,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(n(T,w.sibling),w=s(w,I),w.return=T,T=w):(n(T,w),w=ec(I,T.mode,O),w.return=T,T=w),o(T)):n(T,w)}return P}var qs=q0(!0),H0=q0(!1),ol=Cr(null),al=null,As=null,rh=null;function sh(){rh=As=al=null}function ih(t){var e=ol.current;De(ol),t._currentValue=e}function Hc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Vs(t,e){al=t,rh=As=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(rh!==t)if(t={context:t,memoizedValue:e,next:null},As===null){if(al===null)throw Error(H(308));As=t,al.dependencies={lanes:0,firstContext:t}}else As=As.next=t;return e}var Wr=null;function oh(t){Wr===null?Wr=[t]:Wr.push(t)}function W0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,oh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ln(t,r)}function Ln(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var tr=!1;function ah(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ln(t,n)}return s=r.interleaved,s===null?(e.next=e,oh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ln(t,n)}function Ra(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wd(t,n)}}function Hm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ll(t,e,n,r){var s=t.updateQueue;tr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==o&&(u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,m=h=c=null,u=i;do{var g=u.lane,A=u.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:A,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,R=u;switch(g=e,A=n,R.tag){case 1:if(k=R.payload,typeof k=="function"){p=k.call(A,p,g);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=R.payload,g=typeof k=="function"?k.call(A,p,g):k,g==null)break e;p=Fe({},p,g);break e;case 2:tr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[u]:g.push(u))}else A={eventTime:A,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(h=m=A,c=p):m=m.next=A,o|=g;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;g=u,u=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(c=p),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ts|=o,t.lanes=o,t.memoizedState=p}}function Wm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var Uo={},vn=Cr(Uo),_o=Cr(Uo),wo=Cr(Uo);function Gr(t){if(t===Uo)throw Error(H(174));return t}function lh(t,e){switch(Ce(wo,e),Ce(_o,t),Ce(vn,Uo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tc(e,t)}De(vn),Ce(vn,e)}function Hs(){De(vn),De(_o),De(wo)}function Q0(t){Gr(wo.current);var e=Gr(vn.current),n=Tc(e,t.type);e!==n&&(Ce(_o,t),Ce(vn,n))}function uh(t){_o.current===t&&(De(vn),De(_o))}var Oe=Cr(0);function ul(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qu=[];function ch(){for(var t=0;t<Qu.length;t++)Qu[t]._workInProgressVersionPrimary=null;Qu.length=0}var Pa=qn.ReactCurrentDispatcher,Ku=qn.ReactCurrentBatchConfig,es=0,Le=null,Ze=null,st=null,cl=!1,Zi=!1,Eo=0,sw=0;function ht(){throw Error(H(321))}function dh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function hh(t,e,n,r,s,i){if(es=i,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pa.current=t===null||t.memoizedState===null?lw:uw,t=n(r,s),Zi){i=0;do{if(Zi=!1,Eo=0,25<=i)throw Error(H(301));i+=1,st=Ze=null,e.updateQueue=null,Pa.current=cw,t=n(r,s)}while(Zi)}if(Pa.current=dl,e=Ze!==null&&Ze.next!==null,es=0,st=Ze=Le=null,cl=!1,e)throw Error(H(300));return t}function fh(){var t=Eo!==0;return Eo=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Le.memoizedState=st=t:st=st.next=t,st}function Yt(){if(Ze===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=st===null?Le.memoizedState:st.next;if(e!==null)st=e,Ze=t;else{if(t===null)throw Error(H(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},st===null?Le.memoizedState=st=t:st=st.next=t}return st}function bo(t,e){return typeof e=="function"?e(t):e}function Yu(t){var e=Yt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,h=i;do{var m=h.lane;if((es&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=p,o=r):c=c.next=p,Le.lanes|=m,ts|=m}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=u,an(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Le.lanes|=i,ts|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xu(t){var e=Yt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);an(i,e.memoizedState)||(kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function K0(){}function Y0(t,e){var n=Le,r=Yt(),s=e(),i=!an(r.memoizedState,s);if(i&&(r.memoizedState=s,kt=!0),r=r.queue,mh(Z0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,So(9,J0.bind(null,n,r,s,e),void 0,null),it===null)throw Error(H(349));es&30||X0(n,e,s)}return s}function X0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function J0(t,e,n,r){e.value=n,e.getSnapshot=r,ey(e)&&ty(t)}function Z0(t,e,n){return n(function(){ey(e)&&ty(t)})}function ey(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function ty(t){var e=Ln(t,1);e!==null&&sn(e,t,1,-1)}function Gm(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:t},e.queue=t,t=t.dispatch=aw.bind(null,Le,t),[e.memoizedState,t]}function So(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ny(){return Yt().memoizedState}function Da(t,e,n,r){var s=mn();Le.flags|=t,s.memoizedState=So(1|e,n,void 0,r===void 0?null:r)}function zl(t,e,n,r){var s=Yt();r=r===void 0?null:r;var i=void 0;if(Ze!==null){var o=Ze.memoizedState;if(i=o.destroy,r!==null&&dh(r,o.deps)){s.memoizedState=So(e,n,i,r);return}}Le.flags|=t,s.memoizedState=So(1|e,n,i,r)}function Qm(t,e){return Da(8390656,8,t,e)}function mh(t,e){return zl(2048,8,t,e)}function ry(t,e){return zl(4,2,t,e)}function sy(t,e){return zl(4,4,t,e)}function iy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oy(t,e,n){return n=n!=null?n.concat([t]):null,zl(4,4,iy.bind(null,e,t),n)}function ph(){}function ay(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ly(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function uy(t,e,n){return es&21?(an(n,e)||(n=m0(),Le.lanes|=n,ts|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function iw(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=Ku.transition;Ku.transition={};try{t(!1),e()}finally{Ne=n,Ku.transition=r}}function cy(){return Yt().memoizedState}function ow(t,e,n){var r=mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dy(t))hy(e,n);else if(n=W0(t,e,n,r),n!==null){var s=wt();sn(n,t,r,s),fy(n,e,r)}}function aw(t,e,n){var r=mr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dy(t))hy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,an(u,o)){var c=e.interleaved;c===null?(s.next=s,oh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=W0(t,e,s,r),n!==null&&(s=wt(),sn(n,t,r,s),fy(n,e,r))}}function dy(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function hy(t,e){Zi=cl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wd(t,n)}}var dl={readContext:Kt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},lw={readContext:Kt,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:Qm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Da(4194308,4,iy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Da(4194308,4,t,e)},useInsertionEffect:function(t,e){return Da(4,2,t,e)},useMemo:function(t,e){var n=mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ow.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:Gm,useDebugValue:ph,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=Gm(!1),e=t[0];return t=iw.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,s=mn();if(Ve){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),it===null)throw Error(H(349));es&30||X0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Qm(Z0.bind(null,r,i,t),[t]),r.flags|=2048,So(9,J0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mn(),e=it.identifierPrefix;if(Ve){var n=Pn,r=Rn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Eo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uw={readContext:Kt,useCallback:ay,useContext:Kt,useEffect:mh,useImperativeHandle:oy,useInsertionEffect:ry,useLayoutEffect:sy,useMemo:ly,useReducer:Yu,useRef:ny,useState:function(){return Yu(bo)},useDebugValue:ph,useDeferredValue:function(t){var e=Yt();return uy(e,Ze.memoizedState,t)},useTransition:function(){var t=Yu(bo)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:K0,useSyncExternalStore:Y0,useId:cy,unstable_isNewReconciler:!1},cw={readContext:Kt,useCallback:ay,useContext:Kt,useEffect:mh,useImperativeHandle:oy,useInsertionEffect:ry,useLayoutEffect:sy,useMemo:ly,useReducer:Xu,useRef:ny,useState:function(){return Xu(bo)},useDebugValue:ph,useDeferredValue:function(t){var e=Yt();return Ze===null?e.memoizedState=t:uy(e,Ze.memoizedState,t)},useTransition:function(){var t=Xu(bo)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:K0,useSyncExternalStore:Y0,useId:cy,unstable_isNewReconciler:!1};function en(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $l={isMounted:function(t){return(t=t._reactInternals)?as(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),s=mr(t),i=Dn(r,s);i.payload=e,n!=null&&(i.callback=n),e=hr(t,i,s),e!==null&&(sn(e,t,s,r),Ra(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),s=mr(t),i=Dn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hr(t,i,s),e!==null&&(sn(e,t,s,r),Ra(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=mr(t),s=Dn(n,r);s.tag=2,e!=null&&(s.callback=e),e=hr(t,s,r),e!==null&&(sn(e,t,r,n),Ra(e,t,r))}};function Km(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!go(n,r)||!go(s,i):!0}function my(t,e,n){var r=!1,s=wr,i=e.contextType;return typeof i=="object"&&i!==null?i=Kt(i):(s=Rt(e)?Jr:vt.current,r=e.contextTypes,i=(r=r!=null)?$s(t,s):wr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$l,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ym(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$l.enqueueReplaceState(e,e.state,null)}function Gc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ah(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Kt(i):(i=Rt(e)?Jr:vt.current,s.context=$s(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Wc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&$l.enqueueReplaceState(s,s.state,null),ll(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ws(t,e){try{var n="",r=e;do n+=L1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ju(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dw=typeof WeakMap=="function"?WeakMap:Map;function py(t,e,n){n=Dn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){fl||(fl=!0,sd=r),Qc(t,e)},n}function gy(t,e,n){n=Dn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Qc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qc(t,e),typeof r!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Xm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Tw.bind(null,t,e,n),e.then(t,t))}function Jm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dn(-1,1),e.tag=2,hr(n,e,1))),n.lanes|=1),t)}var hw=qn.ReactCurrentOwner,kt=!1;function _t(t,e,n,r){e.child=t===null?H0(e,null,n,r):qs(e,t.child,n,r)}function ep(t,e,n,r,s){n=n.render;var i=e.ref;return Vs(e,s),r=hh(t,e,n,r,i,s),n=fh(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fn(t,e,s)):(Ve&&n&&eh(e),e.flags|=1,_t(t,e,r,s),e.child)}function tp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!bh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,yy(t,e,i,r,s)):(t=La(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:go,n(o,r)&&t.ref===e.ref)return Fn(t,e,s)}return e.flags|=1,t=pr(i,r),t.ref=e.ref,t.return=e,e.child=t}function yy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(go(i,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,Fn(t,e,s)}return Kc(t,e,n,r,s)}function vy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(ks,Mt),Mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(ks,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ce(ks,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ce(ks,Mt),Mt|=r;return _t(t,e,s,n),e.child}function xy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Kc(t,e,n,r,s){var i=Rt(n)?Jr:vt.current;return i=$s(e,i),Vs(e,s),n=hh(t,e,n,r,i,s),r=fh(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fn(t,e,s)):(Ve&&r&&eh(e),e.flags|=1,_t(t,e,n,s),e.child)}function np(t,e,n,r,s){if(Rt(n)){var i=!0;rl(e)}else i=!1;if(Vs(e,s),e.stateNode===null)Va(t,e),my(e,n,r),Gc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Kt(h):(h=Rt(n)?Jr:vt.current,h=$s(e,h));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&Ym(e,o,r,h),tr=!1;var g=e.memoizedState;o.state=g,ll(e,r,o,s),c=e.memoizedState,u!==r||g!==c||jt.current||tr?(typeof m=="function"&&(Wc(e,n,m,r),c=e.memoizedState),(u=tr||Km(e,n,u,r,g,c,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,G0(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:en(e.type,u),o.props=h,p=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Kt(c):(c=Rt(n)?Jr:vt.current,c=$s(e,c));var A=n.getDerivedStateFromProps;(m=typeof A=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==p||g!==c)&&Ym(e,o,r,c),tr=!1,g=e.memoizedState,o.state=g,ll(e,r,o,s);var k=e.memoizedState;u!==p||g!==k||jt.current||tr?(typeof A=="function"&&(Wc(e,n,A,r),k=e.memoizedState),(h=tr||Km(e,n,h,r,g,k,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Yc(t,e,n,r,i,s)}function Yc(t,e,n,r,s,i){xy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&zm(e,n,!1),Fn(t,e,i);r=e.stateNode,hw.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=qs(e,t.child,null,i),e.child=qs(e,null,u,i)):_t(t,e,u,i),e.memoizedState=r.state,s&&zm(e,n,!0),e.child}function _y(t){var e=t.stateNode;e.pendingContext?Um(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Um(t,e.context,!1),lh(t,e.containerInfo)}function rp(t,e,n,r,s){return Bs(),nh(s),e.flags|=256,_t(t,e,n,r),e.child}var Xc={dehydrated:null,treeContext:null,retryLane:0};function Jc(t){return{baseLanes:t,cachePool:null,transitions:null}}function wy(t,e,n){var r=e.pendingProps,s=Oe.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ce(Oe,s&1),t===null)return qc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Hl(o,r,0,null),t=Yr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Jc(n),e.memoizedState=Xc,t):gh(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return fw(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=pr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=pr(u,i):(i=Yr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Jc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Xc,r}return i=t.child,t=i.sibling,r=pr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gh(t,e){return e=Hl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ya(t,e,n,r){return r!==null&&nh(r),qs(e,t.child,null,n),t=gh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fw(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ju(Error(H(422))),ya(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Hl({mode:"visible",children:r.children},s,0,null),i=Yr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&qs(e,t.child,null,o),e.child.memoizedState=Jc(o),e.memoizedState=Xc,i);if(!(e.mode&1))return ya(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(H(419)),r=Ju(i,r,void 0),ya(t,e,o,r)}if(u=(o&t.childLanes)!==0,kt||u){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ln(t,s),sn(r,t,s,-1))}return Eh(),r=Ju(Error(H(421))),ya(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Nw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Lt=dr(s.nextSibling),Ut=e,Ve=!0,nn=null,t!==null&&(qt[Ht++]=Rn,qt[Ht++]=Pn,qt[Ht++]=Zr,Rn=t.id,Pn=t.overflow,Zr=e),e=gh(e,r.children),e.flags|=4096,e)}function sp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hc(t.return,e,n)}function Zu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ey(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(_t(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sp(t,n,e);else if(t.tag===19)sp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ul(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Zu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ul(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Zu(e,!0,n,null,i);break;case"together":Zu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Va(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ts|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mw(t,e,n){switch(e.tag){case 3:_y(e),Bs();break;case 5:Q0(e);break;case 1:Rt(e.type)&&rl(e);break;case 4:lh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ce(ol,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?wy(t,e,n):(Ce(Oe,Oe.current&1),t=Fn(t,e,n),t!==null?t.sibling:null);Ce(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ey(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,vy(t,e,n)}return Fn(t,e,n)}var by,Zc,Sy,Ty;by=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zc=function(){};Sy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gr(vn.current);var i=null;switch(n){case"input":s=wc(t,s),r=wc(t,r),i=[];break;case"select":s=Fe({},s,{value:void 0}),r=Fe({},r,{value:void 0}),i=[];break;case"textarea":s=Sc(t,s),r=Sc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=tl)}Nc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(lo.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(lo.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Re("scroll",t),i||u===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Ty=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pi(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function pw(t,e,n){var r=e.pendingProps;switch(th(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return Rt(e.type)&&nl(),ft(e),null;case 3:return r=e.stateNode,Hs(),De(jt),De(vt),ch(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nn!==null&&(ad(nn),nn=null))),Zc(t,e),ft(e),null;case 5:uh(e);var s=Gr(wo.current);if(n=e.type,t!==null&&e.stateNode!=null)Sy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return ft(e),null}if(t=Gr(vn.current),pa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[gn]=e,r[xo]=i,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Bi.length;s++)Re(Bi[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":fm(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":pm(r,i),Re("invalid",r)}Nc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&ma(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&ma(r.textContent,u,t),s=["children",""+u]):lo.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":oa(r),mm(r,i,!0);break;case"textarea":oa(r),gm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=tl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gn]=e,t[xo]=r,by(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ic(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<Bi.length;s++)Re(Bi[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":fm(t,r),s=wc(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Fe({},r,{value:void 0}),Re("invalid",t);break;case"textarea":pm(t,r),s=Sc(t,r),Re("invalid",t);break;default:s=r}Nc(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?n0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&e0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&uo(t,c):typeof c=="number"&&uo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(lo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Re("scroll",t):c!=null&&Ud(t,i,c,o))}switch(n){case"input":oa(t),mm(t,r,!1);break;case"textarea":oa(t),gm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_r(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?js(t,!!r.multiple,i,!1):r.defaultValue!=null&&js(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=tl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)Ty(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Gr(wo.current),Gr(vn.current),pa(e)){if(r=e.stateNode,n=e.memoizedProps,r[gn]=e,(i=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:ma(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ma(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gn]=e,e.stateNode=r}return ft(e),null;case 13:if(De(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&Lt!==null&&e.mode&1&&!(e.flags&128))B0(),Bs(),e.flags|=98560,i=!1;else if(i=pa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[gn]=e}else Bs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),i=!1}else nn!==null&&(ad(nn),nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?et===0&&(et=3):Eh())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return Hs(),Zc(t,e),t===null&&yo(e.stateNode.containerInfo),ft(e),null;case 10:return ih(e.type._context),ft(e),null;case 17:return Rt(e.type)&&nl(),ft(e),null;case 19:if(De(Oe),i=e.memoizedState,i===null)return ft(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Pi(i,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ul(t),o!==null){for(e.flags|=128,Pi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Oe,Oe.current&1|2),e.child}t=t.sibling}i.tail!==null&&We()>Gs&&(e.flags|=128,r=!0,Pi(i,!1),e.lanes=4194304)}else{if(!r)if(t=ul(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ve)return ft(e),null}else 2*We()-i.renderingStartTime>Gs&&n!==1073741824&&(e.flags|=128,r=!0,Pi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=We(),e.sibling=null,n=Oe.current,Ce(Oe,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return wh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function gw(t,e){switch(th(e),e.tag){case 1:return Rt(e.type)&&nl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hs(),De(jt),De(vt),ch(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return uh(e),null;case 13:if(De(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Bs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(Oe),null;case 4:return Hs(),null;case 10:return ih(e.type._context),null;case 22:case 23:return wh(),null;case 24:return null;default:return null}}var va=!1,gt=!1,yw=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Cs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function ed(t,e,n){try{n()}catch(r){Be(t,e,r)}}var ip=!1;function vw(t,e){if(Oc=Ja,t=k0(),Zd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,m=0,p=t,g=null;t:for(;;){for(var A;p!==n||s!==0&&p.nodeType!==3||(u=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(A=p.firstChild)!==null;)g=p,p=A;for(;;){if(p===t)break t;if(g===n&&++h===s&&(u=o),g===i&&++m===r&&(c=o),(A=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=A}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lc={focusedElem:t,selectionRange:n},Ja=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var R=k.memoizedProps,P=k.memoizedState,T=e.stateNode,w=T.getSnapshotBeforeUpdate(e.elementType===e.type?R:en(e.type,R),P);T.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(O){Be(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return k=ip,ip=!1,k}function eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ed(e,n,i)}s=s.next}while(s!==r)}}function Bl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function td(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ny(t){var e=t.alternate;e!==null&&(t.alternate=null,Ny(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gn],delete e[xo],delete e[zc],delete e[ew],delete e[tw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Iy(t){return t.tag===5||t.tag===3||t.tag===4}function op(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function nd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tl));else if(r!==4&&(t=t.child,t!==null))for(nd(t,e,n),t=t.sibling;t!==null;)nd(t,e,n),t=t.sibling}function rd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(rd(t,e,n),t=t.sibling;t!==null;)rd(t,e,n),t=t.sibling}var ot=null,tn=!1;function Jn(t,e,n){for(n=n.child;n!==null;)Ay(t,e,n),n=n.sibling}function Ay(t,e,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Vl,n)}catch{}switch(n.tag){case 5:gt||Cs(n,e);case 6:var r=ot,s=tn;ot=null,Jn(t,e,n),ot=r,tn=s,ot!==null&&(tn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(tn?(t=ot,n=n.stateNode,t.nodeType===8?Wu(t.parentNode,n):t.nodeType===1&&Wu(t,n),mo(t)):Wu(ot,n.stateNode));break;case 4:r=ot,s=tn,ot=n.stateNode.containerInfo,tn=!0,Jn(t,e,n),ot=r,tn=s;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ed(n,e,o),s=s.next}while(s!==r)}Jn(t,e,n);break;case 1:if(!gt&&(Cs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Be(n,e,u)}Jn(t,e,n);break;case 21:Jn(t,e,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,Jn(t,e,n),gt=r):Jn(t,e,n);break;default:Jn(t,e,n)}}function ap(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yw),e.forEach(function(r){var s=Iw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:ot=u.stateNode,tn=!1;break e;case 3:ot=u.stateNode.containerInfo,tn=!0;break e;case 4:ot=u.stateNode.containerInfo,tn=!0;break e}u=u.return}if(ot===null)throw Error(H(160));Ay(i,o,s),ot=null,tn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Be(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Cy(e,t),e=e.sibling}function Cy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),fn(t),r&4){try{eo(3,t,t.return),Bl(3,t)}catch(R){Be(t,t.return,R)}try{eo(5,t,t.return)}catch(R){Be(t,t.return,R)}}break;case 1:Zt(e,t),fn(t),r&512&&n!==null&&Cs(n,n.return);break;case 5:if(Zt(e,t),fn(t),r&512&&n!==null&&Cs(n,n.return),t.flags&32){var s=t.stateNode;try{uo(s,"")}catch(R){Be(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Xg(s,i),Ic(u,o);var h=Ic(u,i);for(o=0;o<c.length;o+=2){var m=c[o],p=c[o+1];m==="style"?n0(s,p):m==="dangerouslySetInnerHTML"?e0(s,p):m==="children"?uo(s,p):Ud(s,m,p,h)}switch(u){case"input":Ec(s,i);break;case"textarea":Jg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var A=i.value;A!=null?js(s,!!i.multiple,A,!1):g!==!!i.multiple&&(i.defaultValue!=null?js(s,!!i.multiple,i.defaultValue,!0):js(s,!!i.multiple,i.multiple?[]:"",!1))}s[xo]=i}catch(R){Be(t,t.return,R)}}break;case 6:if(Zt(e,t),fn(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Be(t,t.return,R)}}break;case 3:if(Zt(e,t),fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mo(e.containerInfo)}catch(R){Be(t,t.return,R)}break;case 4:Zt(e,t),fn(t);break;case 13:Zt(e,t),fn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(xh=We())),r&4&&ap(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(h=gt)||m,Zt(e,t),gt=h):Zt(e,t),fn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(Z=t,m=t.child;m!==null;){for(p=Z=m;Z!==null;){switch(g=Z,A=g.child,g.tag){case 0:case 11:case 14:case 15:eo(4,g,g.return);break;case 1:Cs(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(R){Be(r,n,R)}}break;case 5:Cs(g,g.return);break;case 22:if(g.memoizedState!==null){up(p);continue}}A!==null?(A.return=g,Z=A):up(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=t0("display",o))}catch(R){Be(t,t.return,R)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(R){Be(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Zt(e,t),fn(t),r&4&&ap(t);break;case 21:break;default:Zt(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Iy(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(uo(s,""),r.flags&=-33);var i=op(t);rd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=op(t);nd(t,u,o);break;default:throw Error(H(161))}}catch(c){Be(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xw(t,e,n){Z=t,ky(t)}function ky(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||va;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||gt;u=va;var h=gt;if(va=o,(gt=c)&&!h)for(Z=s;Z!==null;)o=Z,c=o.child,o.tag===22&&o.memoizedState!==null?cp(s):c!==null?(c.return=o,Z=c):cp(s);for(;i!==null;)Z=i,ky(i),i=i.sibling;Z=s,va=u,gt=h}lp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):lp(t)}}function lp(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||Bl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:en(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wm(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&mo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}gt||e.flags&512&&td(e)}catch(g){Be(e,e.return,g)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function up(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function cp(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bl(4,e)}catch(c){Be(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Be(e,s,c)}}var i=e.return;try{td(e)}catch(c){Be(e,i,c)}break;case 5:var o=e.return;try{td(e)}catch(c){Be(e,o,c)}}}catch(c){Be(e,e.return,c)}if(e===t){Z=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Z=u;break}Z=e.return}}var _w=Math.ceil,hl=qn.ReactCurrentDispatcher,yh=qn.ReactCurrentOwner,Qt=qn.ReactCurrentBatchConfig,we=0,it=null,Ke=null,ut=0,Mt=0,ks=Cr(0),et=0,To=null,ts=0,ql=0,vh=0,to=null,At=null,xh=0,Gs=1/0,kn=null,fl=!1,sd=null,fr=null,xa=!1,or=null,ml=0,no=0,id=null,Ma=-1,Oa=0;function wt(){return we&6?We():Ma!==-1?Ma:Ma=We()}function mr(t){return t.mode&1?we&2&&ut!==0?ut&-ut:rw.transition!==null?(Oa===0&&(Oa=m0()),Oa):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:w0(t.type)),t):1}function sn(t,e,n,r){if(50<no)throw no=0,id=null,Error(H(185));Oo(t,n,r),(!(we&2)||t!==it)&&(t===it&&(!(we&2)&&(ql|=n),et===4&&rr(t,ut)),Pt(t,r),n===1&&we===0&&!(e.mode&1)&&(Gs=We()+500,Ul&&kr()))}function Pt(t,e){var n=t.callbackNode;r_(t,e);var r=Xa(t,t===it?ut:0);if(r===0)n!==null&&xm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xm(n),e===1)t.tag===0?nw(dp.bind(null,t)):U0(dp.bind(null,t)),J_(function(){!(we&6)&&kr()}),n=null;else{switch(p0(r)){case 1:n=Hd;break;case 4:n=h0;break;case 16:n=Ya;break;case 536870912:n=f0;break;default:n=Ya}n=Ly(n,jy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jy(t,e){if(Ma=-1,Oa=0,we&6)throw Error(H(327));var n=t.callbackNode;if(Ms()&&t.callbackNode!==n)return null;var r=Xa(t,t===it?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=pl(t,r);else{e=r;var s=we;we|=2;var i=Py();(it!==t||ut!==e)&&(kn=null,Gs=We()+500,Kr(t,e));do try{bw();break}catch(u){Ry(t,u)}while(!0);sh(),hl.current=i,we=s,Ke!==null?e=0:(it=null,ut=0,e=et)}if(e!==0){if(e===2&&(s=Rc(t),s!==0&&(r=s,e=od(t,s))),e===1)throw n=To,Kr(t,0),rr(t,r),Pt(t,We()),n;if(e===6)rr(t,r);else{if(s=t.current.alternate,!(r&30)&&!ww(s)&&(e=pl(t,r),e===2&&(i=Rc(t),i!==0&&(r=i,e=od(t,i))),e===1))throw n=To,Kr(t,0),rr(t,r),Pt(t,We()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:$r(t,At,kn);break;case 3:if(rr(t,r),(r&130023424)===r&&(e=xh+500-We(),10<e)){if(Xa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Uc($r.bind(null,t,At,kn),e);break}$r(t,At,kn);break;case 4:if(rr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_w(r/1960))-r,10<r){t.timeoutHandle=Uc($r.bind(null,t,At,kn),r);break}$r(t,At,kn);break;case 5:$r(t,At,kn);break;default:throw Error(H(329))}}}return Pt(t,We()),t.callbackNode===n?jy.bind(null,t):null}function od(t,e){var n=to;return t.current.memoizedState.isDehydrated&&(Kr(t,e).flags|=256),t=pl(t,e),t!==2&&(e=At,At=n,e!==null&&ad(e)),t}function ad(t){At===null?At=t:At.push.apply(At,t)}function ww(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!an(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rr(t,e){for(e&=~vh,e&=~ql,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function dp(t){if(we&6)throw Error(H(327));Ms();var e=Xa(t,0);if(!(e&1))return Pt(t,We()),null;var n=pl(t,e);if(t.tag!==0&&n===2){var r=Rc(t);r!==0&&(e=r,n=od(t,r))}if(n===1)throw n=To,Kr(t,0),rr(t,e),Pt(t,We()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$r(t,At,kn),Pt(t,We()),null}function _h(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(Gs=We()+500,Ul&&kr())}}function ns(t){or!==null&&or.tag===0&&!(we&6)&&Ms();var e=we;we|=1;var n=Qt.transition,r=Ne;try{if(Qt.transition=null,Ne=1,t)return t()}finally{Ne=r,Qt.transition=n,we=e,!(we&6)&&kr()}}function wh(){Mt=ks.current,De(ks)}function Kr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,X_(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(th(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nl();break;case 3:Hs(),De(jt),De(vt),ch();break;case 5:uh(r);break;case 4:Hs();break;case 13:De(Oe);break;case 19:De(Oe);break;case 10:ih(r.type._context);break;case 22:case 23:wh()}n=n.return}if(it=t,Ke=t=pr(t.current,null),ut=Mt=e,et=0,To=null,vh=ql=ts=0,At=to=null,Wr!==null){for(e=0;e<Wr.length;e++)if(n=Wr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Wr=null}return t}function Ry(t,e){do{var n=Ke;try{if(sh(),Pa.current=dl,cl){for(var r=Le.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}cl=!1}if(es=0,st=Ze=Le=null,Zi=!1,Eo=0,yh.current=null,n===null||n.return===null){et=1,To=e,Ke=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=ut,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=u,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var A=Jm(o);if(A!==null){A.flags&=-257,Zm(A,o,u,i,e),A.mode&1&&Xm(i,h,e),e=A,c=h;var k=e.updateQueue;if(k===null){var R=new Set;R.add(c),e.updateQueue=R}else k.add(c);break e}else{if(!(e&1)){Xm(i,h,e),Eh();break e}c=Error(H(426))}}else if(Ve&&u.mode&1){var P=Jm(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Zm(P,o,u,i,e),nh(Ws(c,u));break e}}i=c=Ws(c,u),et!==4&&(et=2),to===null?to=[i]:to.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var T=py(i,c,e);Hm(i,T);break e;case 1:u=c;var w=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(fr===null||!fr.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=gy(i,u,e);Hm(i,O);break e}}i=i.return}while(i!==null)}Vy(n)}catch(M){e=M,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function Py(){var t=hl.current;return hl.current=dl,t===null?dl:t}function Eh(){(et===0||et===3||et===2)&&(et=4),it===null||!(ts&268435455)&&!(ql&268435455)||rr(it,ut)}function pl(t,e){var n=we;we|=2;var r=Py();(it!==t||ut!==e)&&(kn=null,Kr(t,e));do try{Ew();break}catch(s){Ry(t,s)}while(!0);if(sh(),we=n,hl.current=r,Ke!==null)throw Error(H(261));return it=null,ut=0,et}function Ew(){for(;Ke!==null;)Dy(Ke)}function bw(){for(;Ke!==null&&!Q1();)Dy(Ke)}function Dy(t){var e=Oy(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?Vy(t):Ke=e,yh.current=null}function Vy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gw(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Ke=null;return}}else if(n=pw(n,e,Mt),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);et===0&&(et=5)}function $r(t,e,n){var r=Ne,s=Qt.transition;try{Qt.transition=null,Ne=1,Sw(t,e,n,r)}finally{Qt.transition=s,Ne=r}return null}function Sw(t,e,n,r){do Ms();while(or!==null);if(we&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(s_(t,i),t===it&&(Ke=it=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xa||(xa=!0,Ly(Ya,function(){return Ms(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Qt.transition,Qt.transition=null;var o=Ne;Ne=1;var u=we;we|=4,yh.current=null,vw(t,n),Cy(n,t),q_(Lc),Ja=!!Oc,Lc=Oc=null,t.current=n,xw(n),K1(),we=u,Ne=o,Qt.transition=i}else t.current=n;if(xa&&(xa=!1,or=t,ml=s),i=t.pendingLanes,i===0&&(fr=null),J1(n.stateNode),Pt(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(fl)throw fl=!1,t=sd,sd=null,t;return ml&1&&t.tag!==0&&Ms(),i=t.pendingLanes,i&1?t===id?no++:(no=0,id=t):no=0,kr(),null}function Ms(){if(or!==null){var t=p0(ml),e=Qt.transition,n=Ne;try{if(Qt.transition=null,Ne=16>t?16:t,or===null)var r=!1;else{if(t=or,or=null,ml=0,we&6)throw Error(H(331));var s=we;for(we|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(Z=h;Z!==null;){var m=Z;switch(m.tag){case 0:case 11:case 15:eo(8,m,i)}var p=m.child;if(p!==null)p.return=m,Z=p;else for(;Z!==null;){m=Z;var g=m.sibling,A=m.return;if(Ny(m),m===h){Z=null;break}if(g!==null){g.return=A,Z=g;break}Z=A}}}var k=i.alternate;if(k!==null){var R=k.child;if(R!==null){k.child=null;do{var P=R.sibling;R.sibling=null,R=P}while(R!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:eo(9,i,i.return)}var T=i.sibling;if(T!==null){T.return=i.return,Z=T;break e}Z=i.return}}var w=t.current;for(Z=w;Z!==null;){o=Z;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Z=I;else e:for(o=w;Z!==null;){if(u=Z,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Bl(9,u)}}catch(M){Be(u,u.return,M)}if(u===o){Z=null;break e}var O=u.sibling;if(O!==null){O.return=u.return,Z=O;break e}Z=u.return}}if(we=s,kr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Vl,t)}catch{}r=!0}return r}finally{Ne=n,Qt.transition=e}}return!1}function hp(t,e,n){e=Ws(n,e),e=py(t,e,1),t=hr(t,e,1),e=wt(),t!==null&&(Oo(t,1,e),Pt(t,e))}function Be(t,e,n){if(t.tag===3)hp(t,t,n);else for(;e!==null;){if(e.tag===3){hp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fr===null||!fr.has(r))){t=Ws(n,t),t=gy(e,t,1),e=hr(e,t,1),t=wt(),e!==null&&(Oo(e,1,t),Pt(e,t));break}}e=e.return}}function Tw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ut&n)===n&&(et===4||et===3&&(ut&130023424)===ut&&500>We()-xh?Kr(t,0):vh|=n),Pt(t,e)}function My(t,e){e===0&&(t.mode&1?(e=ua,ua<<=1,!(ua&130023424)&&(ua=4194304)):e=1);var n=wt();t=Ln(t,e),t!==null&&(Oo(t,e,n),Pt(t,n))}function Nw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),My(t,n)}function Iw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),My(t,n)}var Oy;Oy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,mw(t,e,n);kt=!!(t.flags&131072)}else kt=!1,Ve&&e.flags&1048576&&z0(e,il,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Va(t,e),t=e.pendingProps;var s=$s(e,vt.current);Vs(e,n),s=hh(null,e,r,t,s,n);var i=fh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(i=!0,rl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ah(e),s.updater=$l,e.stateNode=s,s._reactInternals=e,Gc(e,r,t,n),e=Yc(null,e,r,!0,i,n)):(e.tag=0,Ve&&i&&eh(e),_t(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Va(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Cw(r),t=en(r,t),s){case 0:e=Kc(null,e,r,t,n);break e;case 1:e=np(null,e,r,t,n);break e;case 11:e=ep(null,e,r,t,n);break e;case 14:e=tp(null,e,r,en(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),Kc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),np(t,e,r,s,n);case 3:e:{if(_y(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,G0(t,e),ll(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ws(Error(H(423)),e),e=rp(t,e,r,n,s);break e}else if(r!==s){s=Ws(Error(H(424)),e),e=rp(t,e,r,n,s);break e}else for(Lt=dr(e.stateNode.containerInfo.firstChild),Ut=e,Ve=!0,nn=null,n=H0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bs(),r===s){e=Fn(t,e,n);break e}_t(t,e,r,n)}e=e.child}return e;case 5:return Q0(e),t===null&&qc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Fc(r,s)?o=null:i!==null&&Fc(r,i)&&(e.flags|=32),xy(t,e),_t(t,e,o,n),e.child;case 6:return t===null&&qc(e),null;case 13:return wy(t,e,n);case 4:return lh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qs(e,null,r,n):_t(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),ep(t,e,r,s,n);case 7:return _t(t,e,e.pendingProps,n),e.child;case 8:return _t(t,e,e.pendingProps.children,n),e.child;case 12:return _t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ce(ol,r._currentValue),r._currentValue=o,i!==null)if(an(i.value,o)){if(i.children===s.children&&!jt.current){e=Fn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Dn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Hc(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Hc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}_t(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Vs(e,n),s=Kt(s),r=r(s),e.flags|=1,_t(t,e,r,n),e.child;case 14:return r=e.type,s=en(r,e.pendingProps),s=en(r.type,s),tp(t,e,r,s,n);case 15:return yy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:en(r,s),Va(t,e),e.tag=1,Rt(r)?(t=!0,rl(e)):t=!1,Vs(e,n),my(e,r,s),Gc(e,r,s,n),Yc(null,e,r,!0,t,n);case 19:return Ey(t,e,n);case 22:return vy(t,e,n)}throw Error(H(156,e.tag))};function Ly(t,e){return d0(t,e)}function Aw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,e,n,r){return new Aw(t,e,n,r)}function bh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cw(t){if(typeof t=="function")return bh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$d)return 11;if(t===Bd)return 14}return 2}function pr(t,e){var n=t.alternate;return n===null?(n=Gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function La(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")bh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _s:return Yr(n.children,s,i,e);case zd:o=8,s|=8;break;case yc:return t=Gt(12,n,e,s|2),t.elementType=yc,t.lanes=i,t;case vc:return t=Gt(13,n,e,s),t.elementType=vc,t.lanes=i,t;case xc:return t=Gt(19,n,e,s),t.elementType=xc,t.lanes=i,t;case Qg:return Hl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Wg:o=10;break e;case Gg:o=9;break e;case $d:o=11;break e;case Bd:o=14;break e;case er:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Gt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Yr(t,e,n,r){return t=Gt(7,t,r,e),t.lanes=n,t}function Hl(t,e,n,r){return t=Gt(22,t,r,e),t.elementType=Qg,t.lanes=n,t.stateNode={isHidden:!1},t}function ec(t,e,n){return t=Gt(6,t,null,e),t.lanes=n,t}function tc(t,e,n){return e=Gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vu(0),this.expirationTimes=Vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sh(t,e,n,r,s,i,o,u,c){return t=new kw(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(i),t}function jw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Fy(t){if(!t)return wr;t=t._reactInternals;e:{if(as(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(Rt(n))return F0(t,n,e)}return e}function Uy(t,e,n,r,s,i,o,u,c){return t=Sh(n,r,!0,t,s,i,o,u,c),t.context=Fy(null),n=t.current,r=wt(),s=mr(n),i=Dn(r,s),i.callback=e??null,hr(n,i,s),t.current.lanes=s,Oo(t,s,r),Pt(t,r),t}function Wl(t,e,n,r){var s=e.current,i=wt(),o=mr(s);return n=Fy(n),e.context===null?e.context=n:e.pendingContext=n,e=Dn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hr(s,e,o),t!==null&&(sn(t,s,o,i),Ra(t,s,o)),o}function gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Th(t,e){fp(t,e),(t=t.alternate)&&fp(t,e)}function Rw(){return null}var zy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nh(t){this._internalRoot=t}Gl.prototype.render=Nh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Wl(t,e,null,null)};Gl.prototype.unmount=Nh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ns(function(){Wl(null,t,null,null)}),e[On]=null}};function Gl(t){this._internalRoot=t}Gl.prototype.unstable_scheduleHydration=function(t){if(t){var e=v0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<nr.length&&e!==0&&e<nr[n].priority;n++);nr.splice(n,0,t),n===0&&_0(t)}};function Ih(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ql(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mp(){}function Pw(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=gl(o);i.call(h)}}var o=Uy(e,r,t,0,null,!1,!1,"",mp);return t._reactRootContainer=o,t[On]=o.current,yo(t.nodeType===8?t.parentNode:t),ns(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=gl(c);u.call(h)}}var c=Sh(t,0,!1,null,null,!1,!1,"",mp);return t._reactRootContainer=c,t[On]=c.current,yo(t.nodeType===8?t.parentNode:t),ns(function(){Wl(e,c,n,r)}),c}function Kl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=gl(o);u.call(c)}}Wl(e,o,t,s)}else o=Pw(n,e,t,s,r);return gl(o)}g0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$i(e.pendingLanes);n!==0&&(Wd(e,n|1),Pt(e,We()),!(we&6)&&(Gs=We()+500,kr()))}break;case 13:ns(function(){var r=Ln(t,1);if(r!==null){var s=wt();sn(r,t,1,s)}}),Th(t,1)}};Gd=function(t){if(t.tag===13){var e=Ln(t,134217728);if(e!==null){var n=wt();sn(e,t,134217728,n)}Th(t,134217728)}};y0=function(t){if(t.tag===13){var e=mr(t),n=Ln(t,e);if(n!==null){var r=wt();sn(n,t,e,r)}Th(t,e)}};v0=function(){return Ne};x0=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};Cc=function(t,e,n){switch(e){case"input":if(Ec(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Fl(r);if(!s)throw Error(H(90));Yg(r),Ec(r,s)}}}break;case"textarea":Jg(t,n);break;case"select":e=n.value,e!=null&&js(t,!!n.multiple,e,!1)}};i0=_h;o0=ns;var Dw={usingClientEntryPoint:!1,Events:[Fo,Ss,Fl,r0,s0,_h]},Di={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vw={bundleType:Di.bundleType,version:Di.version,rendererPackageName:Di.rendererPackageName,rendererConfig:Di.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=u0(t),t===null?null:t.stateNode},findFiberByHostInstance:Di.findFiberByHostInstance||Rw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_a.isDisabled&&_a.supportsFiber)try{Vl=_a.inject(Vw),yn=_a}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dw;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ih(e))throw Error(H(200));return jw(t,e,null,n)};$t.createRoot=function(t,e){if(!Ih(t))throw Error(H(299));var n=!1,r="",s=zy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Sh(t,1,!1,null,null,n,!1,r,s),t[On]=e.current,yo(t.nodeType===8?t.parentNode:t),new Nh(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=u0(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return ns(t)};$t.hydrate=function(t,e,n){if(!Ql(e))throw Error(H(200));return Kl(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!Ih(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=zy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Uy(e,null,t,1,n??null,s,!1,i,o),t[On]=e.current,yo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Gl(e)};$t.render=function(t,e,n){if(!Ql(e))throw Error(H(200));return Kl(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Ql(t))throw Error(H(40));return t._reactRootContainer?(ns(function(){Kl(null,null,t,!1,function(){t._reactRootContainer=null,t[On]=null})}),!0):!1};$t.unstable_batchedUpdates=_h;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ql(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Kl(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function $y(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($y)}catch(t){console.error(t)}}$y(),$g.exports=$t;var Mw=$g.exports,pp=Mw;pc.createRoot=pp.createRoot,pc.hydrateRoot=pp.hydrateRoot;const Ow=()=>{};var gp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Lw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},qy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,m=i>>2,p=(i&3)<<4|u>>4;let g=(u&15)<<2|h>>6,A=h&63;c||(A=64,o||(g=64)),r.push(n[m],n[p],n[g],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(By(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Lw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||h==null||p==null)throw new Fw;const g=i<<2|u>>4;if(r.push(g),h!==64){const A=u<<4&240|h>>2;if(r.push(A),p!==64){const k=h<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Fw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Uw=function(t){const e=By(t);return qy.encodeByteArray(e,!0)},yl=function(t){return Uw(t).replace(/\./g,"")},zw=function(t){try{return qy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=()=>$w().__FIREBASE_DEFAULTS__,qw=()=>{if(typeof process>"u"||typeof gp>"u")return;const t=gp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Hw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zw(t[1]);return e&&JSON.parse(e)},Ah=()=>{try{return Ow()||Bw()||qw()||Hw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ww=t=>{var e,n;return(n=(e=Ah())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Gw=t=>{const e=Ww(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Hy=()=>{var t;return(t=Ah())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[yl(JSON.stringify(n)),yl(JSON.stringify(o)),""].join(".")}const ro={};function Xw(){const t={prod:[],emulator:[]};for(const e of Object.keys(ro))ro[e]?t.emulator.push(e):t.prod.push(e);return t}function Jw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let yp=!1;function Zw(t,e){if(typeof window>"u"||typeof document>"u"||!Ch(window.location.host)||ro[t]===e||ro[t]||yp)return;ro[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=Xw().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function u(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,A){g.setAttribute("width","24"),g.setAttribute("id",A),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{yp=!0,o()},g}function m(g,A){g.setAttribute("id",A),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=Jw(r),A=n("text"),k=document.getElementById(A)||document.createElement("span"),R=n("learnmore"),P=document.getElementById(R)||document.createElement("a"),T=n("preprendIcon"),w=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;u(I),m(P,R);const O=h();c(w,T),I.append(w,k,P,O),document.body.appendChild(I)}i?(k.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tE(){var e;const t=(e=Ah())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nE(){return!tE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rE(){try{return typeof indexedDB=="object"}catch{return!1}}function sE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="FirebaseError";class ii extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iE,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wy.prototype.create)}}class Wy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?oE(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new ii(s,u,r)}}function oE(t,e){return t.replace(aE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const aE=/\{\$([^}]+)}/g;function vl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(vp(i)&&vp(o)){if(!vl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function vp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t){return t&&t._delegate?t._delegate:t}class No{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Qw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cE(e))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Br){return this.instances.has(e)}getOptions(e=Br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Br){return this.component?this.component.multipleInstances?e:Br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uE(t){return t===Br?void 0:t}function cE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const hE={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},fE=ve.INFO,mE={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},pE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=mE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gy{constructor(e){this.name=e,this._logLevel=fE,this._logHandler=pE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const gE=(t,e)=>e.some(n=>t instanceof n);let xp,_p;function yE(){return xp||(xp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vE(){return _p||(_p=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qy=new WeakMap,ld=new WeakMap,Ky=new WeakMap,nc=new WeakMap,kh=new WeakMap;function xE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(gr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Qy.set(n,t)}).catch(()=>{}),kh.set(e,t),e}function _E(t){if(ld.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ld.set(t,e)}let ud={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ld.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ky.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wE(t){ud=t(ud)}function EE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(rc(this),e,...n);return Ky.set(r,e.sort?e.sort():[e]),gr(r)}:vE().includes(t)?function(...e){return t.apply(rc(this),e),gr(Qy.get(this))}:function(...e){return gr(t.apply(rc(this),e))}}function bE(t){return typeof t=="function"?EE(t):(t instanceof IDBTransaction&&_E(t),gE(t,yE())?new Proxy(t,ud):t)}function gr(t){if(t instanceof IDBRequest)return xE(t);if(nc.has(t))return nc.get(t);const e=bE(t);return e!==t&&(nc.set(t,e),kh.set(e,t)),e}const rc=t=>kh.get(t);function SE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=gr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(gr(o.result),c.oldVersion,c.newVersion,gr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const TE=["get","getKey","getAll","getAllKeys","count"],NE=["put","add","delete","clear"],sc=new Map;function wp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sc.get(e))return sc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=NE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||TE.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return sc.set(e,i),i}wE(t=>({...t,get:(e,n,r)=>wp(e,n)||t.get(e,n,r),has:(e,n)=>!!wp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cd="@firebase/app",Ep="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new Gy("@firebase/app"),CE="@firebase/app-compat",kE="@firebase/analytics-compat",jE="@firebase/analytics",RE="@firebase/app-check-compat",PE="@firebase/app-check",DE="@firebase/auth",VE="@firebase/auth-compat",ME="@firebase/database",OE="@firebase/data-connect",LE="@firebase/database-compat",FE="@firebase/functions",UE="@firebase/functions-compat",zE="@firebase/installations",$E="@firebase/installations-compat",BE="@firebase/messaging",qE="@firebase/messaging-compat",HE="@firebase/performance",WE="@firebase/performance-compat",GE="@firebase/remote-config",QE="@firebase/remote-config-compat",KE="@firebase/storage",YE="@firebase/storage-compat",XE="@firebase/firestore",JE="@firebase/ai",ZE="@firebase/firestore-compat",e2="firebase",t2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="[DEFAULT]",n2={[cd]:"fire-core",[CE]:"fire-core-compat",[jE]:"fire-analytics",[kE]:"fire-analytics-compat",[PE]:"fire-app-check",[RE]:"fire-app-check-compat",[DE]:"fire-auth",[VE]:"fire-auth-compat",[ME]:"fire-rtdb",[OE]:"fire-data-connect",[LE]:"fire-rtdb-compat",[FE]:"fire-fn",[UE]:"fire-fn-compat",[zE]:"fire-iid",[$E]:"fire-iid-compat",[BE]:"fire-fcm",[qE]:"fire-fcm-compat",[HE]:"fire-perf",[WE]:"fire-perf-compat",[GE]:"fire-rc",[QE]:"fire-rc-compat",[KE]:"fire-gcs",[YE]:"fire-gcs-compat",[XE]:"fire-fst",[ZE]:"fire-fst-compat",[JE]:"fire-vertex","fire-js":"fire-js",[e2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new Map,r2=new Map,hd=new Map;function bp(t,e){try{t.container.addComponent(e)}catch(n){zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _l(t){const e=t.name;if(hd.has(e))return zn.debug(`There were multiple attempts to register component ${e}.`),!1;hd.set(e,t);for(const n of xl.values())bp(n,t);for(const n of r2.values())bp(n,t);return!0}function s2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function i2(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new Wy("app","Firebase",o2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new No("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=t2;function Yy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:dd,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw yr.create("bad-app-name",{appName:String(s)});if(n||(n=Hy()),!n)throw yr.create("no-options");const i=xl.get(s);if(i){if(vl(n,i.options)&&vl(r,i.config))return i;throw yr.create("duplicate-app",{appName:s})}const o=new dE(s);for(const c of hd.values())o.addComponent(c);const u=new a2(n,r,o);return xl.set(s,u),u}function u2(t=dd){const e=xl.get(t);if(!e&&t===dd&&Hy())return Yy();if(!e)throw yr.create("no-app",{appName:t});return e}function Os(t,e,n){let r=n2[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zn.warn(o.join(" "));return}_l(new No(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="firebase-heartbeat-database",d2=1,Io="firebase-heartbeat-store";let ic=null;function Xy(){return ic||(ic=SE(c2,d2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Io)}catch(n){console.warn(n)}}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),ic}async function h2(t){try{const n=(await Xy()).transaction(Io),r=await n.objectStore(Io).get(Jy(t));return await n.done,r}catch(e){if(e instanceof ii)zn.warn(e.message);else{const n=yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zn.warn(n.message)}}}async function Sp(t,e){try{const r=(await Xy()).transaction(Io,"readwrite");await r.objectStore(Io).put(e,Jy(t)),await r.done}catch(n){if(n instanceof ii)zn.warn(n.message);else{const r=yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zn.warn(r.message)}}}function Jy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=1024,m2=30;class p2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new y2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Tp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>m2){const o=v2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tp(),{heartbeatsToSend:r,unsentEntries:s}=g2(this._heartbeatsCache.heartbeats),i=yl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return zn.warn(n),""}}}function Tp(){return new Date().toISOString().substring(0,10)}function g2(t,e=f2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Np(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Np(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class y2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rE()?sE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await h2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Sp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Sp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Np(t){return yl(JSON.stringify({version:2,heartbeats:t})).length}function v2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){_l(new No("platform-logger",e=>new IE(e),"PRIVATE")),_l(new No("heartbeat",e=>new p2(e),"PRIVATE")),Os(cd,Ep,t),Os(cd,Ep,"esm2020"),Os("fire-js","")}x2("");var _2="firebase",w2="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Os(_2,w2,"app");var Ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vr,Zy;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function _(){}_.prototype=v.prototype,x.F=v.prototype,x.prototype=new _,x.prototype.constructor=x,x.D=function(E,N,C){for(var b=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)b[Ee-2]=arguments[Ee];return v.prototype[N].apply(E,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,v,_){_||(_=0);const E=Array(16);if(typeof v=="string")for(var N=0;N<16;++N)E[N]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(N=0;N<16;++N)E[N]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=x.g[0],_=x.g[1],N=x.g[2];let C=x.g[3],b;b=v+(C^_&(N^C))+E[0]+3614090360&4294967295,v=_+(b<<7&4294967295|b>>>25),b=C+(N^v&(_^N))+E[1]+3905402710&4294967295,C=v+(b<<12&4294967295|b>>>20),b=N+(_^C&(v^_))+E[2]+606105819&4294967295,N=C+(b<<17&4294967295|b>>>15),b=_+(v^N&(C^v))+E[3]+3250441966&4294967295,_=N+(b<<22&4294967295|b>>>10),b=v+(C^_&(N^C))+E[4]+4118548399&4294967295,v=_+(b<<7&4294967295|b>>>25),b=C+(N^v&(_^N))+E[5]+1200080426&4294967295,C=v+(b<<12&4294967295|b>>>20),b=N+(_^C&(v^_))+E[6]+2821735955&4294967295,N=C+(b<<17&4294967295|b>>>15),b=_+(v^N&(C^v))+E[7]+4249261313&4294967295,_=N+(b<<22&4294967295|b>>>10),b=v+(C^_&(N^C))+E[8]+1770035416&4294967295,v=_+(b<<7&4294967295|b>>>25),b=C+(N^v&(_^N))+E[9]+2336552879&4294967295,C=v+(b<<12&4294967295|b>>>20),b=N+(_^C&(v^_))+E[10]+4294925233&4294967295,N=C+(b<<17&4294967295|b>>>15),b=_+(v^N&(C^v))+E[11]+2304563134&4294967295,_=N+(b<<22&4294967295|b>>>10),b=v+(C^_&(N^C))+E[12]+1804603682&4294967295,v=_+(b<<7&4294967295|b>>>25),b=C+(N^v&(_^N))+E[13]+4254626195&4294967295,C=v+(b<<12&4294967295|b>>>20),b=N+(_^C&(v^_))+E[14]+2792965006&4294967295,N=C+(b<<17&4294967295|b>>>15),b=_+(v^N&(C^v))+E[15]+1236535329&4294967295,_=N+(b<<22&4294967295|b>>>10),b=v+(N^C&(_^N))+E[1]+4129170786&4294967295,v=_+(b<<5&4294967295|b>>>27),b=C+(_^N&(v^_))+E[6]+3225465664&4294967295,C=v+(b<<9&4294967295|b>>>23),b=N+(v^_&(C^v))+E[11]+643717713&4294967295,N=C+(b<<14&4294967295|b>>>18),b=_+(C^v&(N^C))+E[0]+3921069994&4294967295,_=N+(b<<20&4294967295|b>>>12),b=v+(N^C&(_^N))+E[5]+3593408605&4294967295,v=_+(b<<5&4294967295|b>>>27),b=C+(_^N&(v^_))+E[10]+38016083&4294967295,C=v+(b<<9&4294967295|b>>>23),b=N+(v^_&(C^v))+E[15]+3634488961&4294967295,N=C+(b<<14&4294967295|b>>>18),b=_+(C^v&(N^C))+E[4]+3889429448&4294967295,_=N+(b<<20&4294967295|b>>>12),b=v+(N^C&(_^N))+E[9]+568446438&4294967295,v=_+(b<<5&4294967295|b>>>27),b=C+(_^N&(v^_))+E[14]+3275163606&4294967295,C=v+(b<<9&4294967295|b>>>23),b=N+(v^_&(C^v))+E[3]+4107603335&4294967295,N=C+(b<<14&4294967295|b>>>18),b=_+(C^v&(N^C))+E[8]+1163531501&4294967295,_=N+(b<<20&4294967295|b>>>12),b=v+(N^C&(_^N))+E[13]+2850285829&4294967295,v=_+(b<<5&4294967295|b>>>27),b=C+(_^N&(v^_))+E[2]+4243563512&4294967295,C=v+(b<<9&4294967295|b>>>23),b=N+(v^_&(C^v))+E[7]+1735328473&4294967295,N=C+(b<<14&4294967295|b>>>18),b=_+(C^v&(N^C))+E[12]+2368359562&4294967295,_=N+(b<<20&4294967295|b>>>12),b=v+(_^N^C)+E[5]+4294588738&4294967295,v=_+(b<<4&4294967295|b>>>28),b=C+(v^_^N)+E[8]+2272392833&4294967295,C=v+(b<<11&4294967295|b>>>21),b=N+(C^v^_)+E[11]+1839030562&4294967295,N=C+(b<<16&4294967295|b>>>16),b=_+(N^C^v)+E[14]+4259657740&4294967295,_=N+(b<<23&4294967295|b>>>9),b=v+(_^N^C)+E[1]+2763975236&4294967295,v=_+(b<<4&4294967295|b>>>28),b=C+(v^_^N)+E[4]+1272893353&4294967295,C=v+(b<<11&4294967295|b>>>21),b=N+(C^v^_)+E[7]+4139469664&4294967295,N=C+(b<<16&4294967295|b>>>16),b=_+(N^C^v)+E[10]+3200236656&4294967295,_=N+(b<<23&4294967295|b>>>9),b=v+(_^N^C)+E[13]+681279174&4294967295,v=_+(b<<4&4294967295|b>>>28),b=C+(v^_^N)+E[0]+3936430074&4294967295,C=v+(b<<11&4294967295|b>>>21),b=N+(C^v^_)+E[3]+3572445317&4294967295,N=C+(b<<16&4294967295|b>>>16),b=_+(N^C^v)+E[6]+76029189&4294967295,_=N+(b<<23&4294967295|b>>>9),b=v+(_^N^C)+E[9]+3654602809&4294967295,v=_+(b<<4&4294967295|b>>>28),b=C+(v^_^N)+E[12]+3873151461&4294967295,C=v+(b<<11&4294967295|b>>>21),b=N+(C^v^_)+E[15]+530742520&4294967295,N=C+(b<<16&4294967295|b>>>16),b=_+(N^C^v)+E[2]+3299628645&4294967295,_=N+(b<<23&4294967295|b>>>9),b=v+(N^(_|~C))+E[0]+4096336452&4294967295,v=_+(b<<6&4294967295|b>>>26),b=C+(_^(v|~N))+E[7]+1126891415&4294967295,C=v+(b<<10&4294967295|b>>>22),b=N+(v^(C|~_))+E[14]+2878612391&4294967295,N=C+(b<<15&4294967295|b>>>17),b=_+(C^(N|~v))+E[5]+4237533241&4294967295,_=N+(b<<21&4294967295|b>>>11),b=v+(N^(_|~C))+E[12]+1700485571&4294967295,v=_+(b<<6&4294967295|b>>>26),b=C+(_^(v|~N))+E[3]+2399980690&4294967295,C=v+(b<<10&4294967295|b>>>22),b=N+(v^(C|~_))+E[10]+4293915773&4294967295,N=C+(b<<15&4294967295|b>>>17),b=_+(C^(N|~v))+E[1]+2240044497&4294967295,_=N+(b<<21&4294967295|b>>>11),b=v+(N^(_|~C))+E[8]+1873313359&4294967295,v=_+(b<<6&4294967295|b>>>26),b=C+(_^(v|~N))+E[15]+4264355552&4294967295,C=v+(b<<10&4294967295|b>>>22),b=N+(v^(C|~_))+E[6]+2734768916&4294967295,N=C+(b<<15&4294967295|b>>>17),b=_+(C^(N|~v))+E[13]+1309151649&4294967295,_=N+(b<<21&4294967295|b>>>11),b=v+(N^(_|~C))+E[4]+4149444226&4294967295,v=_+(b<<6&4294967295|b>>>26),b=C+(_^(v|~N))+E[11]+3174756917&4294967295,C=v+(b<<10&4294967295|b>>>22),b=N+(v^(C|~_))+E[2]+718787259&4294967295,N=C+(b<<15&4294967295|b>>>17),b=_+(C^(N|~v))+E[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(N+(b<<21&4294967295|b>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+C&4294967295}r.prototype.v=function(x,v){v===void 0&&(v=x.length);const _=v-this.blockSize,E=this.C;let N=this.h,C=0;for(;C<v;){if(N==0)for(;C<=_;)s(this,x,C),C+=this.blockSize;if(typeof x=="string"){for(;C<v;)if(E[N++]=x.charCodeAt(C++),N==this.blockSize){s(this,E),N=0;break}}else for(;C<v;)if(E[N++]=x[C++],N==this.blockSize){s(this,E),N=0;break}}this.h=N,this.o+=v},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;v=this.o*8;for(var _=x.length-8;_<x.length;++_)x[_]=v&255,v/=256;for(this.v(x),x=Array(16),v=0,_=0;_<4;++_)for(let E=0;E<32;E+=8)x[v++]=this.g[_]>>>E&255;return x};function i(x,v){var _=u;return Object.prototype.hasOwnProperty.call(_,x)?_[x]:_[x]=v(x)}function o(x,v){this.h=v;const _=[];let E=!0;for(let N=x.length-1;N>=0;N--){const C=x[N]|0;E&&C==v||(_[N]=C,E=!1)}this.g=_}var u={};function c(x){return-128<=x&&x<128?i(x,function(v){return new o([v|0],v<0?-1:0)}):new o([x|0],x<0?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return p;if(x<0)return P(h(-x));const v=[];let _=1;for(let E=0;x>=_;E++)v[E]=x/_|0,_*=4294967296;return new o(v,0)}function m(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return P(m(x.substring(1),v));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=h(Math.pow(v,8));let E=p;for(let C=0;C<x.length;C+=8){var N=Math.min(8,x.length-C);const b=parseInt(x.substring(C,C+N),v);N<8?(N=h(Math.pow(v,N)),E=E.j(N).add(h(b))):(E=E.j(_),E=E.add(h(b)))}return E}var p=c(0),g=c(1),A=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-P(this).m();let x=0,v=1;for(let _=0;_<this.g.length;_++){const E=this.i(_);x+=(E>=0?E:4294967296+E)*v,v*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(k(this))return"0";if(R(this))return"-"+P(this).toString(x);const v=h(Math.pow(x,6));var _=this;let E="";for(;;){const N=O(_,v).g;_=T(_,N.j(v));let C=((_.g.length>0?_.g[0]:_.h)>>>0).toString(x);if(_=N,k(_))return C+E;for(;C.length<6;)C="0"+C;E=C+E}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function k(x){if(x.h!=0)return!1;for(let v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function R(x){return x.h==-1}t.l=function(x){return x=T(this,x),R(x)?-1:k(x)?0:1};function P(x){const v=x.g.length,_=[];for(let E=0;E<v;E++)_[E]=~x.g[E];return new o(_,~x.h).add(g)}t.abs=function(){return R(this)?P(this):this},t.add=function(x){const v=Math.max(this.g.length,x.g.length),_=[];let E=0;for(let N=0;N<=v;N++){let C=E+(this.i(N)&65535)+(x.i(N)&65535),b=(C>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);E=b>>>16,C&=65535,b&=65535,_[N]=b<<16|C}return new o(_,_[_.length-1]&-2147483648?-1:0)};function T(x,v){return x.add(P(v))}t.j=function(x){if(k(this)||k(x))return p;if(R(this))return R(x)?P(this).j(P(x)):P(P(this).j(x));if(R(x))return P(this.j(P(x)));if(this.l(A)<0&&x.l(A)<0)return h(this.m()*x.m());const v=this.g.length+x.g.length,_=[];for(var E=0;E<2*v;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(let N=0;N<x.g.length;N++){const C=this.i(E)>>>16,b=this.i(E)&65535,Ee=x.i(N)>>>16,ze=x.i(N)&65535;_[2*E+2*N]+=b*ze,w(_,2*E+2*N),_[2*E+2*N+1]+=C*ze,w(_,2*E+2*N+1),_[2*E+2*N+1]+=b*Ee,w(_,2*E+2*N+1),_[2*E+2*N+2]+=C*Ee,w(_,2*E+2*N+2)}for(x=0;x<v;x++)_[x]=_[2*x+1]<<16|_[2*x];for(x=v;x<2*v;x++)_[x]=0;return new o(_,0)};function w(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function I(x,v){this.g=x,this.h=v}function O(x,v){if(k(v))throw Error("division by zero");if(k(x))return new I(p,p);if(R(x))return v=O(P(x),v),new I(P(v.g),P(v.h));if(R(v))return v=O(x,P(v)),new I(P(v.g),v.h);if(x.g.length>30){if(R(x)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,E=v;E.l(x)<=0;)_=M(_),E=M(E);var N=F(_,1),C=F(E,1);for(E=F(E,2),_=F(_,2);!k(E);){var b=C.add(E);b.l(x)<=0&&(N=N.add(_),C=b),E=F(E,1),_=F(_,1)}return v=T(x,N.j(v)),new I(N,v)}for(N=p;x.l(v)>=0;){for(_=Math.max(1,Math.floor(x.m()/v.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),C=h(_),b=C.j(v);R(b)||b.l(x)>0;)_-=E,C=h(_),b=C.j(v);k(C)&&(C=g),N=N.add(C),x=T(x,b)}return new I(N,x)}t.B=function(x){return O(this,x).h},t.and=function(x){const v=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<v;E++)_[E]=this.i(E)&x.i(E);return new o(_,this.h&x.h)},t.or=function(x){const v=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<v;E++)_[E]=this.i(E)|x.i(E);return new o(_,this.h|x.h)},t.xor=function(x){const v=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<v;E++)_[E]=this.i(E)^x.i(E);return new o(_,this.h^x.h)};function M(x){const v=x.g.length+1,_=[];for(let E=0;E<v;E++)_[E]=x.i(E)<<1|x.i(E-1)>>>31;return new o(_,x.h)}function F(x,v){const _=v>>5;v%=32;const E=x.g.length-_,N=[];for(let C=0;C<E;C++)N[C]=v>0?x.i(C+_)>>>v|x.i(C+_+1)<<32-v:x.i(C+_);return new o(N,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Zy=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,vr=o}).apply(typeof Ip<"u"?Ip:typeof self<"u"?self:typeof window<"u"?window:{});var wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ev,qi,tv,Fa,fd,nv,rv,sv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof wa=="object"&&wa];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var j=a[y];if(!(j in f))break e;f=f[j]}a=a[a.length-1],y=f[a],d=d(y),d!=y&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(d){var f=[],y;for(y in d)Object.prototype.hasOwnProperty.call(d,y)&&f.push([y,d[y]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function u(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function c(a,d,f){return a.call.apply(a.bind,arguments)}function h(a,d,f){return h=c,h.apply(null,arguments)}function m(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function p(a,d){function f(){}f.prototype=d.prototype,a.Z=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(y,j,D){for(var K=Array(arguments.length-2),he=2;he<arguments.length;he++)K[he-2]=arguments[he];return d.prototype[j].apply(y,K)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function A(a){const d=a.length;if(d>0){const f=Array(d);for(let y=0;y<d;y++)f[y]=a[y];return f}return[]}function k(a,d){for(let y=1;y<arguments.length;y++){const j=arguments[y];var f=typeof j;if(f=f!="object"?f:j?Array.isArray(j)?"array":f:"null",f=="array"||f=="object"&&typeof j.length=="number"){f=a.length||0;const D=j.length||0;a.length=f+D;for(let K=0;K<D;K++)a[f+K]=j[K]}else a.push(j)}}class R{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function P(a){o.setTimeout(()=>{throw a},0)}function T(){var a=x;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class w{constructor(){this.h=this.g=null}add(d,f){const y=I.get();y.set(d,f),this.h?this.h.next=y:this.g=y,this.h=y}}var I=new R(()=>new O,a=>a.reset());class O{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,x=new w,v=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(_)}};function _(){for(var a;a=T();){try{a.h.call(a.g)}catch(f){P(f)}var d=I;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}F=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,d),o.removeEventListener("test",f,d)}catch{}return a}();function b(a){return/^[\s\xa0]*$/.test(a)}function Ee(a,d){N.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(Ee,N),Ee.prototype.init=function(a,d){const f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),St=0;function L(a,d,f,y,j){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!y,this.ha=j,this.key=++St,this.da=this.fa=!1}function U(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function W(a,d,f){for(const y in a)d.call(f,a[y],y,a)}function Y(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function ee(a){const d={};for(const f in a)d[f]=a[f];return d}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(a,d){let f,y;for(let j=1;j<arguments.length;j++){y=arguments[j];for(f in y)a[f]=y[f];for(let D=0;D<ue.length;D++)f=ue[D],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function xe(a){this.src=a,this.g={},this.h=0}xe.prototype.add=function(a,d,f,y,j){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const K=be(a,d,y,j);return K>-1?(d=a[K],f||(d.fa=!1)):(d=new L(d,this.src,D,!!y,j),d.fa=f,a.push(d)),d};function Me(a,d){const f=d.type;if(f in a.g){var y=a.g[f],j=Array.prototype.indexOf.call(y,d,void 0),D;(D=j>=0)&&Array.prototype.splice.call(y,j,1),D&&(U(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function be(a,d,f,y){for(let j=0;j<a.length;++j){const D=a[j];if(!D.da&&D.listener==d&&D.capture==!!f&&D.ha==y)return j}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),Te={};function Xt(a,d,f,y,j){if(Array.isArray(d)){for(let D=0;D<d.length;D++)Xt(a,d[D],f,y,j);return null}return f=ae(f),a&&a[ze]?a.J(d,f,u(y)?!!y.capture:!1,j):Pr(a,d,f,!1,y,j)}function Pr(a,d,f,y,j,D){if(!d)throw Error("Invalid event type");const K=u(j)?!!j.capture:!!j;let he=Vr(a);if(he||(a[ce]=he=new xe(a)),f=he.add(d,f,y,K,D),f.proxy)return f;if(y=Hn(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)C||(j=K),j===void 0&&(j=!1),a.addEventListener(d.toString(),y,j);else if(a.attachEvent)a.attachEvent(un(d.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Hn(){function a(f){return d.call(a.src,a.listener,f)}const d=Dr;return a}function Tn(a,d,f,y,j){if(Array.isArray(d))for(var D=0;D<d.length;D++)Tn(a,d[D],f,y,j);else y=u(y)?!!y.capture:!!y,f=ae(f),a&&a[ze]?(a=a.i,D=String(d).toString(),D in a.g&&(d=a.g[D],f=be(d,f,y,j),f>-1&&(U(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete a.g[D],a.h--)))):a&&(a=Vr(a))&&(d=a.g[d.toString()],a=-1,d&&(a=be(d,f,y,j)),(f=a>-1?d[a]:null)&&Jt(f))}function Jt(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[ze])Me(d.i,a);else{var f=a.type,y=a.proxy;d.removeEventListener?d.removeEventListener(f,y,a.capture):d.detachEvent?d.detachEvent(un(f),y):d.addListener&&d.removeListener&&d.removeListener(y),(f=Vr(d))?(Me(f,a),f.h==0&&(f.src=null,d[ce]=null)):U(a)}}}function un(a){return a in Te?Te[a]:Te[a]="on"+a}function Dr(a,d){if(a.da)a=!0;else{d=new Ee(d,this);const f=a.listener,y=a.ha||a.src;a.fa&&Jt(a),a=f.call(y,d)}return a}function Vr(a){return a=a[ce],a instanceof xe?a:null}var $="__closure_events_fn_"+(Math.random()*1e9>>>0);function ae(a){return typeof a=="function"?a:(a[$]||(a[$]=function(d){return a.handleEvent(d)}),a[$])}function S(){E.call(this),this.i=new xe(this),this.M=this,this.G=null}p(S,E),S.prototype[ze]=!0,S.prototype.removeEventListener=function(a,d,f,y){Tn(this,a,d,f,y)};function V(a,d){var f,y=a.G;if(y)for(f=[];y;y=y.G)f.push(y);if(a=a.M,y=d.type||d,typeof d=="string")d=new N(d,a);else if(d instanceof N)d.target=d.target||a;else{var j=d;d=new N(y,a),G(d,j)}j=!0;let D,K;if(f)for(K=f.length-1;K>=0;K--)D=d.g=f[K],j=Q(D,y,!0,d)&&j;if(D=d.g=a,j=Q(D,y,!0,d)&&j,j=Q(D,y,!1,d)&&j,f)for(K=0;K<f.length;K++)D=d.g=f[K],j=Q(D,y,!1,d)&&j}S.prototype.N=function(){if(S.Z.N.call(this),this.i){var a=this.i;for(const d in a.g){const f=a.g[d];for(let y=0;y<f.length;y++)U(f[y]);delete a.g[d],a.h--}}this.G=null},S.prototype.J=function(a,d,f,y){return this.i.add(String(a),d,!1,f,y)},S.prototype.K=function(a,d,f,y){return this.i.add(String(a),d,!0,f,y)};function Q(a,d,f,y){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let j=!0;for(let D=0;D<d.length;++D){const K=d[D];if(K&&!K.da&&K.capture==f){const he=K.listener,Je=K.ha||K.src;K.fa&&Me(a.i,K),j=he.call(Je,y)!==!1&&j}}return j&&!y.defaultPrevented}function te(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(a,d||0)}function _e(a){a.g=te(()=>{a.g=null,a.i&&(a.i=!1,_e(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Nn extends E{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:_e(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function In(a){E.call(this),this.h=a,this.g={}}p(In,E);var cn=[];function pf(a){W(a.g,function(d,f){this.g.hasOwnProperty(f)&&Jt(d)},a),a.g={}}In.prototype.N=function(){In.Z.N.call(this),pf(this)},In.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fu=o.JSON.stringify,Fx=o.JSON.parse,Ux=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function gf(){}function yf(){}var hi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function mu(){N.call(this,"d")}p(mu,N);function pu(){N.call(this,"c")}p(pu,N);var Mr={},vf=null;function Go(){return vf=vf||new S}Mr.Ia="serverreachability";function xf(a){N.call(this,Mr.Ia,a)}p(xf,N);function fi(a){const d=Go();V(d,new xf(d))}Mr.STAT_EVENT="statevent";function _f(a,d){N.call(this,Mr.STAT_EVENT,a),this.stat=d}p(_f,N);function xt(a){const d=Go();V(d,new _f(d,a))}Mr.Ja="timingevent";function wf(a,d){N.call(this,Mr.Ja,a),this.size=d}p(wf,N);function mi(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},d)}function pi(){this.g=!0}pi.prototype.ua=function(){this.g=!1};function zx(a,d,f,y,j,D){a.info(function(){if(a.g)if(D){var K="",he=D.split("&");for(let Ie=0;Ie<he.length;Ie++){var Je=he[Ie].split("=");if(Je.length>1){const nt=Je[0];Je=Je[1];const hn=nt.split("_");K=hn.length>=2&&hn[1]=="type"?K+(nt+"="+Je+"&"):K+(nt+"=redacted&")}}}else K=null;else K=D;return"XMLHTTP REQ ("+y+") [attempt "+j+"]: "+d+`
`+f+`
`+K})}function $x(a,d,f,y,j,D,K){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+j+"]: "+d+`
`+f+`
`+D+" "+K})}function ds(a,d,f,y){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+qx(a,f)+(y?" "+y:"")})}function Bx(a,d){a.info(function(){return"TIMEOUT: "+d})}pi.prototype.info=function(){};function qx(a,d){if(!a.g)return d;if(!d)return null;try{const D=JSON.parse(d);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var f=D[a];if(!(f.length<2)){var y=f[1];if(Array.isArray(y)&&!(y.length<1)){var j=y[0];if(j!="noop"&&j!="stop"&&j!="close")for(let K=1;K<y.length;K++)y[K]=""}}}}return fu(D)}catch{return d}}var Qo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ef={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bf;function gu(){}p(gu,gf),gu.prototype.g=function(){return new XMLHttpRequest},bf=new gu;function gi(a){return encodeURIComponent(String(a))}function Hx(a){var d=1;a=a.split(":");const f=[];for(;d>0&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function Wn(a,d,f,y){this.j=a,this.i=d,this.l=f,this.S=y||1,this.V=new In(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Sf}function Sf(){this.i=null,this.g="",this.h=!1}var Tf={},yu={};function vu(a,d,f){a.M=1,a.A=Yo(dn(d)),a.u=f,a.R=!0,Nf(a,null)}function Nf(a,d){a.F=Date.now(),Ko(a),a.B=dn(a.A);var f=a.B,y=a.S;Array.isArray(y)||(y=[String(y)]),Ff(f.i,"t",y),a.C=0,f=a.j.L,a.h=new Sf,a.g=rm(a.j,f?d:null,!a.u),a.P>0&&(a.O=new Nn(h(a.Y,a,a.g),a.P)),d=a.V,f=a.g,y=a.ba;var j="readystatechange";Array.isArray(j)||(j&&(cn[0]=j.toString()),j=cn);for(let D=0;D<j.length;D++){const K=Xt(f,j[D],y||d.handleEvent,!1,d.h||d);if(!K)break;d.g[K.key]=K}d=a.J?ee(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),fi(),zx(a.i,a.v,a.B,a.l,a.S,a.u)}Wn.prototype.ba=function(a){a=a.target;const d=this.O;d&&Kn(a)==3?d.j():this.Y(a)},Wn.prototype.Y=function(a){try{if(a==this.g)e:{const he=Kn(this.g),Je=this.g.ya(),Ie=this.g.ca();if(!(he<3)&&(he!=3||this.g&&(this.h.h||this.g.la()||Wf(this.g)))){this.K||he!=4||Je==7||(Je==8||Ie<=0?fi(3):fi(2)),xu(this);var d=this.g.ca();this.X=d;var f=Wx(this);if(this.o=d==200,$x(this.i,this.v,this.B,this.l,this.S,he,d),this.o){if(this.U&&!this.L){t:{if(this.g){var y,j=this.g;if((y=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(y)){var D=y;break t}}D=null}if(a=D)ds(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_u(this,a);else{this.o=!1,this.m=3,xt(12),Or(this),yi(this);break e}}if(this.R){a=!0;let nt;for(;!this.K&&this.C<f.length;)if(nt=Gx(this,f),nt==yu){he==4&&(this.m=4,xt(14),a=!1),ds(this.i,this.l,null,"[Incomplete Response]");break}else if(nt==Tf){this.m=4,xt(15),ds(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else ds(this.i,this.l,nt,null),_u(this,nt);if(If(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),he!=4||f.length!=0||this.h.h||(this.m=1,xt(16),a=!1),this.o=this.o&&a,!a)ds(this.i,this.l,f,"[Invalid Chunked Response]"),Or(this),yi(this);else if(f.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Au(K),K.P=!0,xt(11))}}else ds(this.i,this.l,f,null),_u(this,f);he==4&&Or(this),this.o&&!this.K&&(he==4?Zf(this.j,this):(this.o=!1,Ko(this)))}else a1(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Or(this),yi(this)}}}catch{}finally{}};function Wx(a){if(!If(a))return a.g.la();const d=Wf(a.g);if(d==="")return"";let f="";const y=d.length,j=Kn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Or(a),yi(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<y;D++)a.h.h=!0,f+=a.h.i.decode(d[D],{stream:!(j&&D==y-1)});return d.length=0,a.h.g+=f,a.C=0,a.h.g}function If(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Gx(a,d){var f=a.C,y=d.indexOf(`
`,f);return y==-1?yu:(f=Number(d.substring(f,y)),isNaN(f)?Tf:(y+=1,y+f>d.length?yu:(d=d.slice(y,y+f),a.C=y+f,d)))}Wn.prototype.cancel=function(){this.K=!0,Or(this)};function Ko(a){a.T=Date.now()+a.H,Af(a,a.H)}function Af(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=mi(h(a.aa,a),d)}function xu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Wn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Bx(this.i,this.B),this.M!=2&&(fi(),xt(17)),Or(this),this.m=2,yi(this)):Af(this,this.T-a)};function yi(a){a.j.I==0||a.K||Zf(a.j,a)}function Or(a){xu(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,pf(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function _u(a,d){try{var f=a.j;if(f.I!=0&&(f.g==a||wu(f.h,a))){if(!a.L&&wu(f.h,a)&&f.I==3){try{var y=f.Ba.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var j=y;if(j[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)ta(f),Zo(f);else break e;Iu(f),xt(18)}}else f.xa=j[1],0<f.xa-f.K&&j[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=mi(h(f.Va,f),6e3));jf(f.h)<=1&&f.ta&&(f.ta=void 0)}else Fr(f,11)}else if((a.L||f.g==a)&&ta(f),!b(d))for(j=f.Ba.g.parse(d),d=0;d<j.length;d++){let Ie=j[d];const nt=Ie[0];if(!(nt<=f.K))if(f.K=nt,Ie=Ie[1],f.I==2)if(Ie[0]=="c"){f.M=Ie[1],f.ba=Ie[2];const hn=Ie[3];hn!=null&&(f.ka=hn,f.j.info("VER="+f.ka));const Ur=Ie[4];Ur!=null&&(f.za=Ur,f.j.info("SVER="+f.za));const Yn=Ie[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(y=1.5*Yn,f.O=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const Xn=a.g;if(Xn){const ra=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ra){var D=y.h;D.g||ra.indexOf("spdy")==-1&&ra.indexOf("quic")==-1&&ra.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Eu(D,D.h),D.h=null))}if(y.G){const Cu=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Cu&&(y.wa=Cu,ke(y.J,y.G,Cu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),y=f;var K=a;if(y.na=nm(y,y.L?y.ba:null,y.W),K.L){Rf(y.h,K);var he=K,Je=y.O;Je&&(he.H=Je),he.D&&(xu(he),Ko(he)),y.g=K}else Xf(y);f.i.length>0&&ea(f)}else Ie[0]!="stop"&&Ie[0]!="close"||Fr(f,7);else f.I==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Fr(f,7):Nu(f):Ie[0]!="noop"&&f.l&&f.l.qa(Ie),f.A=0)}}fi(4)}catch{}}var Qx=class{constructor(a,d){this.g=a,this.map=d}};function Cf(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function kf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function jf(a){return a.h?1:a.g?a.g.size:0}function wu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Eu(a,d){a.g?a.g.add(d):a.h=d}function Rf(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Cf.prototype.cancel=function(){if(this.i=Pf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Pf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.G);return d}return A(a.i)}var Df=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kx(a,d){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const y=a[f].indexOf("=");let j,D=null;y>=0?(j=a[f].substring(0,y),D=a[f].substring(y+1)):j=a[f],d(j,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Gn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Gn?(this.l=a.l,vi(this,a.j),this.o=a.o,this.g=a.g,xi(this,a.u),this.h=a.h,bu(this,Uf(a.i)),this.m=a.m):a&&(d=String(a).match(Df))?(this.l=!1,vi(this,d[1]||"",!0),this.o=_i(d[2]||""),this.g=_i(d[3]||"",!0),xi(this,d[4]),this.h=_i(d[5]||"",!0),bu(this,d[6]||"",!0),this.m=_i(d[7]||"")):(this.l=!1,this.i=new Ei(null,this.l))}Gn.prototype.toString=function(){const a=[];var d=this.j;d&&a.push(wi(d,Vf,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(wi(d,Vf,!0),"@"),a.push(gi(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(wi(f,f.charAt(0)=="/"?Jx:Xx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",wi(f,e1)),a.join("")},Gn.prototype.resolve=function(a){const d=dn(this);let f=!!a.j;f?vi(d,a.j):f=!!a.o,f?d.o=a.o:f=!!a.g,f?d.g=a.g:f=a.u!=null;var y=a.h;if(f)xi(d,a.u);else if(f=!!a.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var j=d.h.lastIndexOf("/");j!=-1&&(y=d.h.slice(0,j+1)+y)}if(j=y,j==".."||j==".")y="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){y=j.lastIndexOf("/",0)==0,j=j.split("/");const D=[];for(let K=0;K<j.length;){const he=j[K++];he=="."?y&&K==j.length&&D.push(""):he==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),y&&K==j.length&&D.push("")):(D.push(he),y=!0)}y=D.join("/")}else y=j}return f?d.h=y:f=a.i.toString()!=="",f?bu(d,Uf(a.i)):f=!!a.m,f&&(d.m=a.m),d};function dn(a){return new Gn(a)}function vi(a,d,f){a.j=f?_i(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function xi(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function bu(a,d,f){d instanceof Ei?(a.i=d,t1(a.i,a.l)):(f||(d=wi(d,Zx)),a.i=new Ei(d,a.l))}function ke(a,d,f){a.i.set(d,f)}function Yo(a){return ke(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function _i(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function wi(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Yx),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Yx(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Vf=/[#\/\?@]/g,Xx=/[#\?:]/g,Jx=/[#\?]/g,Zx=/[#\?@]/g,e1=/#/g;function Ei(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Lr(a){a.g||(a.g=new Map,a.h=0,a.i&&Kx(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ei.prototype,t.add=function(a,d){Lr(this),this.i=null,a=hs(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Mf(a,d){Lr(a),d=hs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Of(a,d){return Lr(a),d=hs(a,d),a.g.has(d)}t.forEach=function(a,d){Lr(this),this.g.forEach(function(f,y){f.forEach(function(j){a.call(d,j,y,this)},this)},this)};function Lf(a,d){Lr(a);let f=[];if(typeof d=="string")Of(a,d)&&(f=f.concat(a.g.get(hs(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)f=f.concat(a[d]);return f}t.set=function(a,d){return Lr(this),this.i=null,a=hs(this,a),Of(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=Lf(this,a),a.length>0?String(a[0]):d):d};function Ff(a,d,f){Mf(a,d),f.length>0&&(a.i=null,a.g.set(hs(a,d),A(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(let y=0;y<d.length;y++){var f=d[y];const j=gi(f);f=Lf(this,f);for(let D=0;D<f.length;D++){let K=j;f[D]!==""&&(K+="="+gi(f[D])),a.push(K)}}return this.i=a.join("&")};function Uf(a){const d=new Ei;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function hs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function t1(a,d){d&&!a.j&&(Lr(a),a.i=null,a.g.forEach(function(f,y){const j=y.toLowerCase();y!=j&&(Mf(this,y),Ff(this,j,f))},a)),a.j=d}function n1(a,d){const f=new pi;if(o.Image){const y=new Image;y.onload=m(Qn,f,"TestLoadImage: loaded",!0,d,y),y.onerror=m(Qn,f,"TestLoadImage: error",!1,d,y),y.onabort=m(Qn,f,"TestLoadImage: abort",!1,d,y),y.ontimeout=m(Qn,f,"TestLoadImage: timeout",!1,d,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else d(!1)}function r1(a,d){const f=new pi,y=new AbortController,j=setTimeout(()=>{y.abort(),Qn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:y.signal}).then(D=>{clearTimeout(j),D.ok?Qn(f,"TestPingServer: ok",!0,d):Qn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),Qn(f,"TestPingServer: error",!1,d)})}function Qn(a,d,f,y,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),y(f)}catch{}}function s1(){this.g=new Ux}function Su(a){this.i=a.Sb||null,this.h=a.ab||!1}p(Su,gf),Su.prototype.g=function(){return new Xo(this.i,this.h)};function Xo(a,d){S.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Xo,S),t=Xo.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,Si(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Si(this)),this.g&&(this.readyState=3,Si(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function zf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?bi(this):Si(this),this.readyState==3&&zf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,bi(this))},t.Na=function(a){this.g&&(this.response=a,bi(this))},t.ga=function(){this.g&&bi(this)};function bi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Si(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Si(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function $f(a){let d="";return W(a,function(f,y){d+=y,d+=":",d+=f,d+=`\r
`}),d}function Tu(a,d,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=$f(f),typeof a=="string"?f!=null&&gi(f):ke(a,d,f))}function $e(a){S.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p($e,S);var i1=/^https?$/i,o1=["POST","PUT"];t=$e.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bf.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(D){Bf(this,D);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var j in y)f.set(j,y[j]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const D of y.keys())f.set(D,y.get(D));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),j=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(o1,d,void 0)>=0)||y||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,K]of f)this.g.setRequestHeader(D,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){Bf(this,D)}};function Bf(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,qf(a),Jo(a)}function qf(a){a.A||(a.A=!0,V(a,"complete"),V(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,V(this,"complete"),V(this,"abort"),Jo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jo(this,!0)),$e.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Hf(this):this.Xa())},t.Xa=function(){Hf(this)};function Hf(a){if(a.h&&typeof i<"u"){if(a.v&&Kn(a)==4)setTimeout(a.Ca.bind(a),0);else if(V(a,"readystatechange"),Kn(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var y;if(y=D===0){let K=String(a.D).match(Df)[1]||null;!K&&o.self&&o.self.location&&(K=o.self.location.protocol.slice(0,-1)),y=!i1.test(K?K.toLowerCase():"")}f=y}if(f)V(a,"complete"),V(a,"success");else{a.o=6;try{var j=Kn(a)>2?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.ca()+"]",qf(a)}}finally{Jo(a)}}}}function Jo(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,d||V(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Kn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Kn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Fx(d)}};function Wf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function a1(a){const d={};a=(a.g&&Kn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(b(a[y]))continue;var f=Hx(a[y]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=d[j]||[];d[j]=D,D.push(f)}Y(d,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Gf(a){this.za=0,this.i=[],this.j=new pi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ti("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ti("baseRetryDelayMs",5e3,a),this.Za=Ti("retryDelaySeedMs",1e4,a),this.Ta=Ti("forwardChannelMaxRetries",2,a),this.va=Ti("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Cf(a&&a.concurrentRequestLimit),this.Ba=new s1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Gf.prototype,t.ka=8,t.I=1,t.connect=function(a,d,f,y){xt(0),this.W=a,this.H=d||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.J=nm(this,null,this.W),ea(this)};function Nu(a){if(Qf(a),a.I==3){var d=a.V++,f=dn(a.J);if(ke(f,"SID",a.M),ke(f,"RID",d),ke(f,"TYPE","terminate"),Ni(a,f),d=new Wn(a,a.j,d),d.M=2,d.A=Yo(dn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=d.A,f=!0),f||(d.g=rm(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Ko(d)}tm(a)}function Zo(a){a.g&&(Au(a),a.g.cancel(),a.g=null)}function Qf(a){Zo(a),a.v&&(o.clearTimeout(a.v),a.v=null),ta(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function ea(a){if(!kf(a.h)&&!a.m){a.m=!0;var d=a.Ea;M||v(),F||(M(),F=!0),x.add(d,a),a.D=0}}function l1(a,d){return jf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=mi(h(a.Ea,a,d),em(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const j=new Wn(this,this.j,a);let D=this.o;if(this.U&&(D?(D=ee(D),G(D,this.U)):D=this.U),this.u!==null||this.R||(j.J=D,D=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Yf(this,j,d),f=dn(this.J),ke(f,"RID",a),ke(f,"CVER",22),this.G&&ke(f,"X-HTTP-Session-Id",this.G),Ni(this,f),D&&(this.R?d="headers="+gi($f(D))+"&"+d:this.u&&Tu(f,this.u,D)),Eu(this.h,j),this.Ra&&ke(f,"TYPE","init"),this.S?(ke(f,"$req",d),ke(f,"SID","null"),j.U=!0,vu(j,f,null)):vu(j,f,d),this.I=2}}else this.I==3&&(a?Kf(this,a):this.i.length==0||kf(this.h)||Kf(this))};function Kf(a,d){var f;d?f=d.l:f=a.V++;const y=dn(a.J);ke(y,"SID",a.M),ke(y,"RID",f),ke(y,"AID",a.K),Ni(a,y),a.u&&a.o&&Tu(y,a.u,a.o),f=new Wn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),d&&(a.i=d.G.concat(a.i)),d=Yf(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Eu(a.h,f),vu(f,y,d)}function Ni(a,d){a.H&&W(a.H,function(f,y){ke(d,y,f)}),a.l&&W({},function(f,y){ke(d,y,f)})}function Yf(a,d,f){f=Math.min(a.i.length,f);const y=a.l?h(a.l.Ka,a.l,a):null;e:{var j=a.i;let he=-1;for(;;){const Je=["count="+f];he==-1?f>0?(he=j[0].g,Je.push("ofs="+he)):he=0:Je.push("ofs="+he);let Ie=!0;for(let nt=0;nt<f;nt++){var D=j[nt].g;const hn=j[nt].map;if(D-=he,D<0)he=Math.max(0,j[nt].g-100),Ie=!1;else try{D="req"+D+"_"||"";try{var K=hn instanceof Map?hn:Object.entries(hn);for(const[Ur,Yn]of K){let Xn=Yn;u(Yn)&&(Xn=fu(Yn)),Je.push(D+Ur+"="+encodeURIComponent(Xn))}}catch(Ur){throw Je.push(D+"type="+encodeURIComponent("_badmap")),Ur}}catch{y&&y(hn)}}if(Ie){K=Je.join("&");break e}}K=void 0}return a=a.i.splice(0,f),d.G=a,K}function Xf(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;M||v(),F||(M(),F=!0),x.add(d,a),a.A=0}}function Iu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=mi(h(a.Da,a),em(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Jf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=mi(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Zo(this),Jf(this))};function Au(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Jf(a){a.g=new Wn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=dn(a.na);ke(d,"RID","rpc"),ke(d,"SID",a.M),ke(d,"AID",a.K),ke(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&ke(d,"TO",a.ia),ke(d,"TYPE","xmlhttp"),Ni(a,d),a.u&&a.o&&Tu(d,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Yo(dn(d)),f.u=null,f.R=!0,Nf(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Zo(this),Iu(this),xt(19))};function ta(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Zf(a,d){var f=null;if(a.g==d){ta(a),Au(a),a.g=null;var y=2}else if(wu(a.h,d))f=d.G,Rf(a.h,d),y=1;else return;if(a.I!=0){if(d.o)if(y==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var j=a.D;y=Go(),V(y,new wf(y,f)),ea(a)}else Xf(a);else if(j=d.m,j==3||j==0&&d.X>0||!(y==1&&l1(a,d)||y==2&&Iu(a)))switch(f&&f.length>0&&(d=a.h,d.i=d.i.concat(f)),j){case 1:Fr(a,5);break;case 4:Fr(a,10);break;case 3:Fr(a,6);break;default:Fr(a,2)}}}function em(a,d){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*d}function Fr(a,d){if(a.j.info("Error code "+d),d==2){var f=h(a.bb,a),y=a.Ua;const j=!y;y=new Gn(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||vi(y,"https"),Yo(y),j?n1(y.toString(),f):r1(y.toString(),f)}else xt(2);a.I=0,a.l&&a.l.pa(d),tm(a),Qf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function tm(a){if(a.I=0,a.ja=[],a.l){const d=Pf(a.h);(d.length!=0||a.i.length!=0)&&(k(a.ja,d),k(a.ja,a.i),a.h.i.length=0,A(a.i),a.i.length=0),a.l.oa()}}function nm(a,d,f){var y=f instanceof Gn?dn(f):new Gn(f);if(y.g!="")d&&(y.g=d+"."+y.g),xi(y,y.u);else{var j=o.location;y=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;const D=new Gn(null);y&&vi(D,y),d&&(D.g=d),j&&xi(D,j),f&&(D.h=f),y=D}return f=a.G,d=a.wa,f&&d&&ke(y,f,d),ke(y,"VER",a.ka),Ni(a,y),y}function rm(a,d,f){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new $e(new Su({ab:f})):new $e(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sm(){}t=sm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function na(){}na.prototype.g=function(a,d){return new Dt(a,d)};function Dt(a,d){S.call(this),this.g=new Gf(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!b(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!b(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new fs(this)}p(Dt,S),Dt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Nu(this.g)},Dt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=fu(a),a=f);d.i.push(new Qx(d.Ya++,a)),d.I==3&&ea(d)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Nu(this.g),delete this.g,Dt.Z.N.call(this)};function im(a){mu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(im,mu);function om(){pu.call(this),this.status=1}p(om,pu);function fs(a){this.g=a}p(fs,sm),fs.prototype.ra=function(){V(this.g,"a")},fs.prototype.qa=function(a){V(this.g,new im(a))},fs.prototype.pa=function(a){V(this.g,new om)},fs.prototype.oa=function(){V(this.g,"b")},na.prototype.createWebChannel=na.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,sv=function(){return new na},rv=function(){return Go()},nv=Mr,fd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qo.NO_ERROR=0,Qo.TIMEOUT=8,Qo.HTTP_ERROR=6,Fa=Qo,Ef.COMPLETE="complete",tv=Ef,yf.EventType=hi,hi.OPEN="a",hi.CLOSE="b",hi.ERROR="c",hi.MESSAGE="d",S.prototype.listen=S.prototype.J,qi=yf,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,ev=$e}).apply(typeof wa<"u"?wa:typeof self<"u"?self:typeof window<"u"?window:{});const Ap="@firebase/firestore",Cp="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oi="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Gy("@firebase/firestore");function ps(){return rs.logLevel}function J(t,...e){if(rs.logLevel<=ve.DEBUG){const n=e.map(jh);rs.debug(`Firestore (${oi}): ${t}`,...n)}}function $n(t,...e){if(rs.logLevel<=ve.ERROR){const n=e.map(jh);rs.error(`Firestore (${oi}): ${t}`,...n)}}function Qs(t,...e){if(rs.logLevel<=ve.WARN){const n=e.map(jh);rs.warn(`Firestore (${oi}): ${t}`,...n)}}function jh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,iv(t,r,n)}function iv(t,e,n){let r=`FIRESTORE (${oi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $n(r),new Error(r)}function Se(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||iv(e,s,r)}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends ii{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class b2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class S2{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Se(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Vn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Se(typeof r.accessToken=="string",31837,{l:r}),new ov(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new pt(e)}}class T2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class N2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new T2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,i2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Se(this.o===void 0,3512);const r=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new kp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Se(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new kp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=A2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function md(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return oc(s)===oc(i)?pe(s,i):oc(s)?1:-1}return pe(t.length,e.length)}const C2=55296,k2=57343;function oc(t){const e=t.charCodeAt(0);return e>=C2&&e<=k2}function Ks(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="__name__";class pn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=pn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return pe(e.length,n.length)}static compareSegments(e,n){const r=pn.isNumericId(e),s=pn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?pn.extractNumericId(e).compare(pn.extractNumericId(n)):md(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vr.fromString(e.substring(4,e.length-2))}}class Ae extends pn{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const j2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends pn{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return j2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jp}static keyField(){return new lt([jp])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new X(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new X(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Ae.fromString(e))}static fromName(e){return new re(Ae.fromString(e).popFirst(5))}static empty(){return new re(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t,e,n){if(!n)throw new X(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R2(t,e,n,r){if(e===!0&&r===!0)throw new X(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Rp(t){if(!re.isDocumentKey(t))throw new X(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Pp(t){if(re.isDocumentKey(t))throw new X(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Yl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie(12329,{type:typeof t})}function bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yl(t);throw new X(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t,e){const n={typeString:t};return e&&(n.value=e),n}function zo(t,e){if(!lv(t))throw new X(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new X(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=-62135596800,Vp=1e6;class Pe{static now(){return Pe.fromMillis(Date.now())}static fromDate(e){return Pe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Vp);return new Pe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Dp)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vp}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zo(e,Pe._jsonSchema))return new Pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Dp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:Xe("string",Pe._jsonSchemaVersion),seconds:Xe("number"),nanoseconds:Xe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new Pe(0,0))}static max(){return new oe(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=-1;function P2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new Pe(n+1,0):new Pe(n,r));return new Er(s,re.empty(),e)}function D2(t){return new Er(t.readTime,t.key,Ao)}class Er{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Er(oe.min(),re.empty(),Ao)}static max(){return new Er(oe.max(),re.empty(),Ao)}}function V2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ai(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==M2)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(m=>{o[h]=m,++u,u===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function L2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function li(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Xl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=-1;function Jl(t){return t==null}function wl(t){return t===0&&1/t==-1/0}function F2(t){return typeof t=="number"&&Number.isInteger(t)&&!wl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="";function U2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Mp(e)),e=z2(t.get(n),e);return Mp(e)}function z2(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case uv:n+="";break;default:n+=i}}return n}function Mp(t){return t+uv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ea(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ea(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ea(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ea(this.root,e,this.comparator,!0)}}class Ea{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??at.RED,this.left=s??at.EMPTY,this.right=i??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new at(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lp(this.data.getIterator())}getIteratorFrom(e){return new Lp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class Lp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new tt(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ks(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new dv("Invalid base64 string: "+i):i}}(e);return new dt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const $2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const n=$2.exec(t);if(Se(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sr(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="server_timestamp",fv="__type__",mv="__previous_value__",pv="__local_write_time__";function Dh(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[fv])==null?void 0:r.stringValue)===hv}function Zl(t){const e=t.mapValue.fields[mv];return Dh(e)?Zl(e):e}function Co(t){const e=br(t.mapValue.fields[pv].timestampValue);return new Pe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r,s,i,o,u,c,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=m}}const El="(default)";class ko{constructor(e,n){this.projectId=e,this.database=n||El}static empty(){return new ko("","")}get isDefaultDatabase(){return this.database===El}isEqual(e){return e instanceof ko&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="__type__",q2="__max__",ba={mapValue:{}},yv="__vector__",bl="value";function Tr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dh(t)?4:W2(t)?9007199254740991:H2(t)?10:11:ie(28295,{value:t})}function Sn(t,e){if(t===e)return!0;const n=Tr(t);if(n!==Tr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Co(t).isEqual(Co(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=br(s.timestampValue),u=br(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Sr(s.bytesValue).isEqual(Sr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return He(s.geoPointValue.latitude)===He(i.geoPointValue.latitude)&&He(s.geoPointValue.longitude)===He(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return He(s.integerValue)===He(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=He(s.doubleValue),u=He(i.doubleValue);return o===u?wl(o)===wl(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Ks(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Op(o)!==Op(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!Sn(o[c],u[c])))return!1;return!0}(t,e);default:return ie(52216,{left:t})}}function jo(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function Ys(t,e){if(t===e)return 0;const n=Tr(t),r=Tr(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=He(i.integerValue||i.doubleValue),c=He(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return Fp(t.timestampValue,e.timestampValue);case 4:return Fp(Co(t),Co(e));case 5:return md(t.stringValue,e.stringValue);case 6:return function(i,o){const u=Sr(i),c=Sr(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const m=pe(u[h],c[h]);if(m!==0)return m}return pe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=pe(He(i.latitude),He(o.latitude));return u!==0?u:pe(He(i.longitude),He(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Up(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,A,k,R;const u=i.fields||{},c=o.fields||{},h=(g=u[bl])==null?void 0:g.arrayValue,m=(A=c[bl])==null?void 0:A.arrayValue,p=pe(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((R=m==null?void 0:m.values)==null?void 0:R.length)||0);return p!==0?p:Up(h,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ba.mapValue&&o===ba.mapValue)return 0;if(i===ba.mapValue)return 1;if(o===ba.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),h=o.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let p=0;p<c.length&&p<m.length;++p){const g=md(c[p],m[p]);if(g!==0)return g;const A=Ys(u[c[p]],h[m[p]]);if(A!==0)return A}return pe(c.length,m.length)}(t.mapValue,e.mapValue);default:throw ie(23264,{he:n})}}function Fp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=br(t),r=br(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function Up(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ys(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function Xs(t){return pd(t)}function pd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Sr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=pd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${pd(n.fields[o])}`;return s+"}"}(t.mapValue):ie(61005,{value:t})}function Ua(t){switch(Tr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zl(t);return e?16+Ua(e):16;case 5:return 2*t.stringValue.length;case 6:return Sr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ua(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return jr(r.fields,(i,o)=>{s+=i.length+Ua(o)}),s}(t.mapValue);default:throw ie(13486,{value:t})}}function zp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gd(t){return!!t&&"integerValue"in t}function Vh(t){return!!t&&"arrayValue"in t}function $p(t){return!!t&&"nullValue"in t}function Bp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function za(t){return!!t&&"mapValue"in t}function H2(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[gv])==null?void 0:r.stringValue)===yv}function so(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return jr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=so(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=so(t.arrayValue.values[n]);return e}return{...t}}function W2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===q2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!za(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=so(n)}setAll(e){let n=lt.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=so(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());za(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];za(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){jr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ct(so(this.value))}}function vv(t){const e=[];return jr(t.fields,(n,r)=>{const s=new lt([n]);if(za(r)){const i=vv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new yt(e,0,oe.min(),oe.min(),oe.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,s){return new yt(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new yt(e,2,n,oe.min(),oe.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new yt(e,3,n,oe.min(),oe.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n){this.position=e,this.inclusive=n}}function qp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=Ys(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n="asc"){this.field=e,this.dir=n}}function G2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xv=class{};class Ye extends xv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new K2(e,n,r):n==="array-contains"?new J2(e,r):n==="in"?new Z2(e,r):n==="not-in"?new eb(e,r):n==="array-contains-any"?new tb(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Y2(e,r):new X2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ys(n,this.value)):n!==null&&Tr(this.value)===Tr(n)&&this.matchesComparison(Ys(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends xv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ln(e,n)}matches(e){return _v(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _v(t){return t.op==="and"}function wv(t){return Q2(t)&&_v(t)}function Q2(t){for(const e of t.filters)if(e instanceof ln)return!1;return!0}function yd(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+Xs(t.value);if(wv(t))return t.filters.map(e=>yd(e)).join(",");{const e=t.filters.map(n=>yd(n)).join(",");return`${t.op}(${e})`}}function Ev(t,e){return t instanceof Ye?function(r,s){return s instanceof Ye&&r.op===s.op&&r.field.isEqual(s.field)&&Sn(r.value,s.value)}(t,e):t instanceof ln?function(r,s){return s instanceof ln&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&Ev(o,s.filters[u]),!0):!1}(t,e):void ie(19439)}function bv(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${Xs(n.value)}`}(t):t instanceof ln?function(n){return n.op.toString()+" {"+n.getFilters().map(bv).join(" ,")+"}"}(t):"Filter"}class K2 extends Ye{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class Y2 extends Ye{constructor(e,n){super(e,"in",n),this.keys=Sv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class X2 extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=Sv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Sv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class J2 extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vh(n)&&jo(n.arrayValue,this.value)}}class Z2 extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jo(this.value.arrayValue,n)}}class eb extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jo(this.value.arrayValue,n)}}class tb extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>jo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.Te=null}}function Wp(t,e=null,n=[],r=[],s=null,i=null,o=null){return new nb(t,e,n,r,s,i,o)}function Mh(t){const e=le(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Jl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xs(r)).join(",")),e.Te=n}return e.Te}function Oh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!G2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ev(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hp(t.startAt,e.startAt)&&Hp(t.endAt,e.endAt)}function vd(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rb(t,e,n,r,s,i,o,u){return new ui(t,e,n,r,s,i,o,u)}function Lh(t){return new ui(t)}function Gp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tv(t){return t.collectionGroup!==null}function io(t){const e=le(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new tt(lt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ro(i,r))}),n.has(lt.keyField().canonicalString())||e.Ie.push(new Ro(lt.keyField(),r))}return e.Ie}function xn(t){const e=le(t);return e.Ee||(e.Ee=sb(e,io(t))),e.Ee}function sb(t,e){if(t.limitType==="F")return Wp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ro(s.field,i)});const n=t.endAt?new Sl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sl(t.startAt.position,t.startAt.inclusive):null;return Wp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xd(t,e){const n=t.filters.concat([e]);return new ui(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _d(t,e,n){return new ui(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function eu(t,e){return Oh(xn(t),xn(e))&&t.limitType===e.limitType}function Nv(t){return`${Mh(xn(t))}|lt:${t.limitType}`}function gs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>bv(s)).join(", ")}]`),Jl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Xs(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Xs(s)).join(",")),`Target(${r})`}(xn(t))}; limitType=${t.limitType})`}function tu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):re.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of io(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const h=qp(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,io(r),s)||r.endAt&&!function(o,u,c){const h=qp(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,io(r),s))}(t,e)}function ib(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Iv(t){return(e,n)=>{let r=!1;for(const s of io(t)){const i=ob(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ob(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),h=u.data.field(i);return c!==null&&h!==null?Ys(c,h):ie(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return cv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Ue(re.comparator);function Bn(){return ab}const Av=new Ue(re.comparator);function Hi(...t){let e=Av;for(const n of t)e=e.insert(n.key,n);return e}function Cv(t){let e=Av;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qr(){return oo()}function kv(){return oo()}function oo(){return new ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const lb=new Ue(re.comparator),ub=new tt(re.comparator);function ge(...t){let e=ub;for(const n of t)e=e.add(n);return e}const cb=new tt(pe);function db(){return cb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wl(e)?"-0":e}}function jv(t){return{integerValue:""+t}}function hb(t,e){return F2(e)?jv(e):Fh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this._=void 0}}function fb(t,e,n){return t instanceof Tl?function(s,i){const o={fields:{[fv]:{stringValue:hv},[pv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Dh(i)&&(i=Zl(i)),i&&(o.fields[mv]=i),{mapValue:o}}(n,e):t instanceof Po?Pv(t,e):t instanceof Do?Dv(t,e):function(s,i){const o=Rv(s,i),u=Qp(o)+Qp(s.Ae);return gd(o)&&gd(s.Ae)?jv(u):Fh(s.serializer,u)}(t,e)}function mb(t,e,n){return t instanceof Po?Pv(t,e):t instanceof Do?Dv(t,e):n}function Rv(t,e){return t instanceof Nl?function(r){return gd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Tl extends nu{}class Po extends nu{constructor(e){super(),this.elements=e}}function Pv(t,e){const n=Vv(e);for(const r of t.elements)n.some(s=>Sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Do extends nu{constructor(e){super(),this.elements=e}}function Dv(t,e){let n=Vv(e);for(const r of t.elements)n=n.filter(s=>!Sn(s,r));return{arrayValue:{values:n}}}class Nl extends nu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Qp(t){return He(t.integerValue||t.doubleValue)}function Vv(t){return Vh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pb(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Po&&s instanceof Po||r instanceof Do&&s instanceof Do?Ks(r.elements,s.elements,Sn):r instanceof Nl&&s instanceof Nl?Sn(r.Ae,s.Ae):r instanceof Tl&&s instanceof Tl}(t.transform,e.transform)}class gb{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $a(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ru{}function Mv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Uh(t.key,on.none()):new $o(t.key,t.data,on.none());{const n=t.data,r=Ct.empty();let s=new tt(lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Rr(t.key,r,new Ft(s.toArray()),on.none())}}function yb(t,e,n){t instanceof $o?function(s,i,o){const u=s.value.clone(),c=Yp(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Rr?function(s,i,o){if(!$a(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=Yp(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Ov(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ao(t,e,n,r){return t instanceof $o?function(i,o,u,c){if(!$a(i.precondition,o))return u;const h=i.value.clone(),m=Xp(i.fieldTransforms,c,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rr?function(i,o,u,c){if(!$a(i.precondition,o))return u;const h=Xp(i.fieldTransforms,c,o),m=o.data;return m.setAll(Ov(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,u){return $a(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function vb(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Rv(r.transform,s||null);i!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,i))}return n||null}function Kp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ks(r,s,(i,o)=>pb(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $o extends ru{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rr extends ru{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ov(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Yp(t,e,n){const r=new Map;Se(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,mb(o,u,n[s]))}return r}function Xp(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,fb(i,o,e))}return r}class Uh extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xb extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&yb(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ao(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ao(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=Mv(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Ks(this.mutations,e.mutations,(n,r)=>Kp(n,r))&&Ks(this.baseMutations,e.baseMutations,(n,r)=>Kp(n,r))}}class zh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Se(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return lb}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new zh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,ye;function bb(t){switch(t){case z.OK:return ie(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ie(15467,{code:t})}}function Lv(t){if(t===void 0)return $n("GRPC error has no .code"),z.UNKNOWN;switch(t){case Qe.OK:return z.OK;case Qe.CANCELLED:return z.CANCELLED;case Qe.UNKNOWN:return z.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return z.INTERNAL;case Qe.UNAVAILABLE:return z.UNAVAILABLE;case Qe.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Qe.NOT_FOUND:return z.NOT_FOUND;case Qe.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Qe.ABORTED:return z.ABORTED;case Qe.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Qe.DATA_LOSS:return z.DATA_LOSS;default:return ie(39323,{code:t})}}(ye=Qe||(Qe={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=new vr([4294967295,4294967295],0);function Jp(t){const e=Sb().encode(t),n=new Zy;return n.update(e),new Uint8Array(n.digest())}function Zp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vr([n,r],0),new vr([s,i],0)]}class $h{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wi(`Invalid padding: ${n}`);if(r<0)throw new Wi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=vr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(vr.fromNumber(r)));return s.compare(Tb)===1&&(s=new vr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Jp(e),[r,s]=Zp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new $h(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.ge===0)return;const n=Jp(e),[r,s]=Zp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Bo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new su(oe.min(),s,new Ue(pe),Bn(),ge())}}class Bo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Bo(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Fv{constructor(e,n){this.targetId=e,this.Ce=n}}class Uv{constructor(e,n,r=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class eg{constructor(){this.ve=0,this.Fe=tg(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie(38017,{changeType:i})}}),new Bo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=tg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Nb{constructor(e){this.Ge=e,this.ze=new Map,this.je=Bn(),this.Je=Sa(),this.He=Sa(),this.Ye=new Ue(pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ie(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(vd(i))if(r===0){const o=new re(i.path);this.et(n,o,yt.newNoDocument(o,oe.min()))}else Se(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const u=this.ut(e),c=u?this.ct(u,e,o):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=Sr(r).toUint8Array()}catch(c){if(c instanceof dv)return Qs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new $h(o,s,i)}catch(c){return Qs(c instanceof Wi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const u=this.ot(o);if(u){if(i.current&&vd(u.target)){const c=new re(u.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,yt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=ge();this.He.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new su(e,n,this.Ye,this.je,r);return this.je=Bn(),this.Je=Sa(),this.He=Sa(),this.Ye=new Ue(pe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new eg,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new tt(pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new tt(pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Sa(){return new Ue(re.comparator)}function tg(){return new Ue(re.comparator)}const Ib={asc:"ASCENDING",desc:"DESCENDING"},Ab={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cb={and:"AND",or:"OR"};class kb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wd(t,e){return t.useProto3Json||Jl(e)?e:{value:e}}function Il(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jb(t,e){return Il(t,e.toTimestamp())}function _n(t){return Se(!!t,49232),oe.fromTimestamp(function(n){const r=br(n);return new Pe(r.seconds,r.nanos)}(t))}function Bh(t,e){return Ed(t,e).canonicalString()}function Ed(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $v(t){const e=Ae.fromString(t);return Se(Gv(e),10190,{key:e.toString()}),e}function bd(t,e){return Bh(t.databaseId,e.path)}function ac(t,e){const n=$v(e);if(n.get(1)!==t.databaseId.projectId)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(qv(n))}function Bv(t,e){return Bh(t.databaseId,e)}function Rb(t){const e=$v(t);return e.length===4?Ae.emptyPath():qv(e)}function Sd(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qv(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ng(t,e,n){return{name:bd(t,e),fields:n.value.mapValue.fields}}function Pb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ie(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,m){return h.useProto3Json?(Se(m===void 0||typeof m=="string",58123),dt.fromBase64String(m||"")):(Se(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),dt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const m=h.code===void 0?z.UNKNOWN:Lv(h.code);return new X(m,h.message||"")}(o);n=new Uv(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ac(t,r.document.name),i=_n(r.document.updateTime),o=r.document.createTime?_n(r.document.createTime):oe.min(),u=new Ct({mapValue:{fields:r.document.fields}}),c=yt.newFoundDocument(s,i,o,u),h=r.targetIds||[],m=r.removedTargetIds||[];n=new Ba(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ac(t,r.document),i=r.readTime?_n(r.readTime):oe.min(),o=yt.newNoDocument(s,i),u=r.removedTargetIds||[];n=new Ba([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ac(t,r.document),i=r.removedTargetIds||[];n=new Ba([],i,s,null)}else{if(!("filter"in e))return ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Eb(s,i),u=r.targetId;n=new Fv(u,o)}}return n}function Db(t,e){let n;if(e instanceof $o)n={update:ng(t,e.key,e.value)};else if(e instanceof Uh)n={delete:bd(t,e.key)};else if(e instanceof Rr)n={update:ng(t,e.key,e.data),updateMask:Bb(e.fieldMask)};else{if(!(e instanceof xb))return ie(16599,{Vt:e.type});n={verify:bd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Tl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Po)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Do)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Nl)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw ie(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:jb(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie(27497)}(t,e.precondition)),n}function Vb(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?_n(s.updateTime):_n(i);return o.isEqual(oe.min())&&(o=_n(i)),new gb(o,s.transformResults||[])}(n,e))):[]}function Mb(t,e){return{documents:[Bv(t,e.path)]}}function Ob(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Bv(t,s);const i=function(h){if(h.length!==0)return Wv(ln.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(m=>function(g){return{field:ys(g.field),direction:Ub(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=wd(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function Lb(t){let e=Rb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Se(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=Hv(p);return g instanceof ln&&wv(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(k){return new Ro(vs(k.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(p){let g;return g=typeof p=="object"?p.value:p,Jl(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,A=p.values||[];return new Sl(A,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,A=p.values||[];return new Sl(A,g)}(n.endAt)),rb(e,s,o,i,u,"F",c,h)}function Fb(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Hv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vs(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=vs(n.unaryFilter.field);return Ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=vs(n.unaryFilter.field);return Ye.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=vs(n.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(vs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ln.create(n.compositeFilter.filters.map(r=>Hv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie(1026)}}(n.compositeFilter.op))}(t):ie(30097,{filter:t})}function Ub(t){return Ib[t]}function zb(t){return Ab[t]}function $b(t){return Cb[t]}function ys(t){return{fieldPath:t.canonicalString()}}function vs(t){return lt.fromServerFormat(t.fieldPath)}function Wv(t){return t instanceof Ye?function(n){if(n.op==="=="){if(Bp(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NAN"}};if($p(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Bp(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NAN"}};if($p(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(n.field),op:zb(n.op),value:n.value}}}(t):t instanceof ln?function(n){const r=n.getFilters().map(s=>Wv(s));return r.length===1?r[0]:{compositeFilter:{op:$b(n.op),filters:r}}}(t):ie(54877,{filter:t})}function Bb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Gv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r,s,i=oe.min(),o=oe.min(),u=dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.yt=e}}function Hb(t){const e=Lb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_d(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.Cn=new Gb}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Er.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Er.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class Gb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new tt(Ae.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new tt(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qv=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(Qv,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Js(0)}static cr(){return new Js(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="LruGarbageCollector",Qb=1048576;function ig([t,e],[n,r]){const s=pe(t,n);return s===0?pe(e,r):s}class Kb{constructor(e){this.Ir=e,this.buffer=new tt(ig),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ig(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Yb{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(sg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){li(n)?J(sg,"Ignoring IndexedDB error during garbage collection: ",n):await ai(n)}await this.Vr(3e5)})}}class Xb{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Xl.ce);const r=new Kb(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(rg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rg):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,u,c,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,u=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),ps()<=ve.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${i} targets in `+(c-u)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-m}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Jb(t,e){return new Xb(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(){this.changes=new ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ao(r.mutation,s,Ft.empty(),Pe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=Qr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Hi();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Qr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Bn();const o=oo(),u=function(){return oo()}();return n.forEach((c,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof Rr)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),ao(m.mutation,h,m.mutation.getFieldMask(),Pe.now())):o.set(h.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>u.set(h,new eS(m,o.get(h)??null))),u))}recalculateAndSaveOverlays(e,n){const r=oo();let s=new Ue((o,u)=>o-u),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let m=r.get(c)||Ft.empty();m=u.applyToLocalView(h,m),r.set(c,m);const p=(s.get(u.batchId)||ge()).add(c);s=s.insert(u.batchId,p)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,m=c.value,p=kv();m.forEach(g=>{if(!i.has(g)){const A=Mv(n.get(g),r.get(g));A!==null&&p.set(g,A),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Tv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(Qr());let u=Ao,c=i;return o.next(h=>B.forEach(h,(m,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),i.get(m)?B.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,ge())).next(m=>({batchId:u,changes:Cv(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let s=Hi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Hi();return this.indexManager.getCollectionParents(e,i).next(u=>B.forEach(u,c=>{const h=function(p,g){return new ui(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,yt.newInvalidDocument(m)))});let u=Hi();return o.forEach((c,h)=>{const m=i.get(c);m!==void 0&&ao(m.mutation,h,Ft.empty(),Pe.now()),tu(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_n(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Hb(s.bundledQuery),readTime:_n(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.overlays=new Ue(re.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qr();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=Qr(),i=n.length+1,o=new re(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ue((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=i.get(h.largestBatchId);m===null&&(m=Qr(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=Qr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>u.set(h,m)),!(u.size()>=s)););return B.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new wb(n,r));let i=this.qr.get(n);i===void 0&&(i=ge(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this.Qr=new tt(rt.$r),this.Ur=new tt(rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new rt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new re(new Ae([])),r=new rt(n,e),s=new rt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new re(new Ae([])),r=new rt(n,e),s=new rt(n,e+1);let i=ge();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return re.comparator(e.key,n.key)||pe(e.Yr,n.Yr)}static Kr(e,n){return pe(e.Yr,n.Yr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new tt(rt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _b(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.Zr=this.Zr.add(new rt(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Ph:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),s=new rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const u=this.Xr(o.Yr);i.push(u)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(pe);return n.forEach(s=>{const i=new rt(s,0),o=new rt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],u=>{r=r.add(u.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;re.isDocumentKey(i)||(i=i.child(""));const o=new rt(new re(i),0);let u=new tt(pe);return this.Zr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.Yr)),!0)},o),B.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Se(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,s=>{const i=new rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new rt(n,0),s=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.ri=e,this.docs=function(){return new Ue(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let r=Bn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():yt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Bn();const o=n.path,u=new re(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||V2(D2(m),r)<=0||(s.has(m.key)||tu(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aS(this)}getSize(e){return B.resolve(this.size)}}class aS extends Zb{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.persistence=e,this.si=new ls(n=>Mh(n),Oh),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.oi=0,this._i=new qh,this.targetCount=0,this.ai=Js.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Js(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n){this.ui={},this.overlays={},this.ci=new Xl(0),this.li=!1,this.li=!0,this.hi=new sS,this.referenceDelegate=e(this),this.Pi=new lS(this),this.indexManager=new Wb,this.remoteDocumentCache=function(s){return new oS(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new qb(n),this.Ii=new nS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new iS(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new uS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class uS extends O2{constructor(e){super(),this.currentSequenceNumber=e}}class Hh{constructor(e){this.persistence=e,this.Ri=new qh,this.Vi=null}static mi(e){return new Hh(e)}get fi(){if(this.Vi)return this.Vi;throw ie(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const s=re.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Al{constructor(e,n){this.persistence=e,this.pi=new ls(r=>U2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Jb(this,n)}static mi(e,n){return new Al(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(u=>{u||(r++,i.removeEntry(o,oe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ua(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return nE()?8:L2(eE())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new cS;return this.Ss(e,n,o).next(u=>{if(i.result=u,this.Vs)return this.bs(e,n,o,u.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ps()<=ve.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(ps()<=ve.DEBUG&&J("QueryEngine","Query:",gs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ps()<=ve.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(n))):B.resolve())}ys(e,n){if(Gp(n))return B.resolve(null);let r=xn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=_d(n,null,"F"),r=xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ge(...i);return this.ps.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.Ds(n,u);return this.Cs(n,h,o,c.readTime)?this.ys(e,_d(n,null,"F")):this.vs(e,h,n,c)}))})))}ws(e,n,r,s){return Gp(n)||s.isEqual(oe.min())?B.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?B.resolve(null):(ps()<=ve.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),gs(n)),this.vs(e,o,n,P2(s,Ao)).next(u=>u))})}Ds(e,n){let r=new tt(Iv(e));return n.forEach((s,i)=>{tu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ps()<=ve.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",gs(n)),this.ps.getDocumentsMatchingQuery(e,n,Er.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="LocalStore",hS=3e8;class fS{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ue(pe),this.xs=new ls(i=>Mh(i),Oh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function mS(t,e,n,r){return new fS(t,e,n,r)}async function Yv(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=ge();for(const h of s){o.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of i){u.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:u}))})})}function pS(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,c,h,m){const p=h.batch,g=p.keys();let A=B.resolve();return g.forEach(k=>{A=A.next(()=>m.getEntry(c,k)).next(R=>{const P=h.docVersions.get(k);Se(P!==null,48541),R.version.compareTo(P)<0&&(p.applyToRemoteDocument(R,h),R.isValidDocument()&&(R.setReadTime(h.commitVersion),m.addEntry(R)))})}),A.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ge();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Xv(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function gS(t,e){const n=le(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;u.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let A=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?A=A.withResumeToken(dt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):m.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(m.resumeToken,r)),s=s.insert(p,A),function(R,P,T){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=hS?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(g,A,m)&&u.push(n.Pi.updateTargetData(i,A))});let c=Bn(),h=ge();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),u.push(yS(i,o,e.documentUpdates).next(m=>{c=m.ks,h=m.qs})),!r.isEqual(oe.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(m)}return B.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.Ms=s,i))}function yS(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Bn();return n.forEach((u,c)=>{const h=i.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):J(Gh,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{ks:o,qs:s}})}function vS(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ph),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xS(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new ar(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Td(t,e,n){const r=le(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!li(o))throw o;J(Gh,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function og(t,e,n){const r=le(t);let s=oe.min(),i=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,m){const p=le(c),g=p.xs.get(m);return g!==void 0?B.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,m)}(r,o,xn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:ge())).next(u=>(_S(r,ib(e),u),{documents:u,Qs:i})))}function _S(t,e,n){let r=t.Os.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class ag{constructor(){this.activeTargetIds=db()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wS{constructor(){this.Mo=new ag,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ag,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="ConnectivityMonitor";class ug{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(lg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(lg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ta=null;function Nd(){return Ta===null?Ta=function(){return 268435456+Math.round(2147483648*Math.random())}():Ta++,"0x"+Ta.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc="RestConnection",bS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===El?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Nd(),u=this.zo(e,n.toUriEncodedString());J(lc,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:h}=new URL(u),m=Ch(h);return this.Jo(e,u,c,r,m).then(p=>(J(lc,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Qs(lc,`RPC '${e}' ${o} failed with error: `,p,"url: ",u,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=bS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class NS extends SS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Nd();return new Promise((u,c)=>{const h=new ev;h.setWithCredentials(!0),h.listenOnce(tv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Fa.NO_ERROR:const p=h.getResponseJson();J(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),u(p);break;case Fa.TIMEOUT:J(mt,`RPC '${e}' ${o} timed out`),c(new X(z.DEADLINE_EXCEEDED,"Request time out"));break;case Fa.HTTP_ERROR:const g=h.getStatus();if(J(mt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let A=h.getResponseJson();Array.isArray(A)&&(A=A[0]);const k=A==null?void 0:A.error;if(k&&k.status&&k.message){const R=function(T){const w=T.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(w)>=0?w:z.UNKNOWN}(k.status);c(new X(R,k.message))}else c(new X(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new X(z.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{J(mt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);J(mt,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",m,r,15)})}T_(e,n,r){const s=Nd(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sv(),u=rv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");J(mt,`Creating RPC '${e}' stream ${s}: ${m}`,c);const p=o.createWebChannel(m,c);this.I_(p);let g=!1,A=!1;const k=new TS({Yo:P=>{A?J(mt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(J(mt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),J(mt,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},Zo:()=>p.close()}),R=(P,T,w)=>{P.listen(T,I=>{try{w(I)}catch(O){setTimeout(()=>{throw O},0)}})};return R(p,qi.EventType.OPEN,()=>{A||(J(mt,`RPC '${e}' stream ${s} transport opened.`),k.o_())}),R(p,qi.EventType.CLOSE,()=>{A||(A=!0,J(mt,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(p))}),R(p,qi.EventType.ERROR,P=>{A||(A=!0,Qs(mt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),k.a_(new X(z.UNAVAILABLE,"The operation could not be completed")))}),R(p,qi.EventType.MESSAGE,P=>{var T;if(!A){const w=P.data[0];Se(!!w,16349);const I=w,O=(I==null?void 0:I.error)||((T=I[0])==null?void 0:T.error);if(O){J(mt,`RPC '${e}' stream ${s} received error:`,O);const M=O.status;let F=function(_){const E=Qe[_];if(E!==void 0)return Lv(E)}(M),x=O.message;F===void 0&&(F=z.INTERNAL,x="Unknown error status: "+M+" with message "+O.message),A=!0,k.a_(new X(F,x)),p.close()}else J(mt,`RPC '${e}' stream ${s} received:`,w),k.u_(w)}}),R(u,nv.STAT_EVENT,P=>{P.stat===fd.PROXY?J(mt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===fd.NOPROXY&&J(mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function uc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){return new kb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="PersistentStream";class Zv{constructor(e,n,r,s,i,o,u,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?($n(n.toString()),$n("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new X(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(cg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(cg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IS extends Zv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Pb(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?_n(o.readTime):oe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Sd(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=vd(c)?{documents:Mb(i,c)}:{query:Ob(i,c).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=zv(i,o.resumeToken);const h=wd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(oe.min())>0){u.readTime=Il(i,o.snapshotVersion.toTimestamp());const h=wd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=Fb(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Sd(this.serializer),n.removeTarget=e,this.q_(n)}}class AS extends Zv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Vb(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Sd(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Db(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{}class kS extends CS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Ed(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(z.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Ho(e,Ed(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class jS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($n(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="RemoteStore";class RS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{us(this)&&(J(ss,"Restarting streams for network reachability change."),await async function(c){const h=le(c);h.Ea.add(4),await qo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await ou(h)}(this))})}),this.Ra=new jS(r,s)}}async function ou(t){if(us(t))for(const e of t.da)await e(!0)}async function qo(t){for(const e of t.da)await e(!1)}function ex(t,e){const n=le(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xh(n)?Yh(n):ci(n).O_()&&Kh(n,e))}function Qh(t,e){const n=le(t),r=ci(n);n.Ia.delete(e),r.O_()&&tx(n,e),n.Ia.size===0&&(r.O_()?r.L_():us(n)&&n.Ra.set("Unknown"))}function Kh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ci(t).Y_(e)}function tx(t,e){t.Va.Ue(e),ci(t).Z_(e)}function Yh(t){t.Va=new Nb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ci(t).start(),t.Ra.ua()}function Xh(t){return us(t)&&!ci(t).x_()&&t.Ia.size>0}function us(t){return le(t).Ea.size===0}function nx(t){t.Va=void 0}async function PS(t){t.Ra.set("Online")}async function DS(t){t.Ia.forEach((e,n)=>{Kh(t,e)})}async function VS(t,e){nx(t),Xh(t)?(t.Ra.ha(e),Yh(t)):t.Ra.set("Unknown")}async function MS(t,e,n){if(t.Ra.set("Online"),e instanceof Uv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.Va.removeTarget(u))}(t,e)}catch(r){J(ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cl(t,r)}else if(e instanceof Ba?t.Va.Ze(e):e instanceof Fv?t.Va.st(e):t.Va.tt(e),!n.isEqual(oe.min()))try{const r=await Xv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Va.Tt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.Ia.get(h);m&&i.Ia.set(h,m.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const m=i.Ia.get(c);if(!m)return;i.Ia.set(c,m.withResumeToken(dt.EMPTY_BYTE_STRING,m.snapshotVersion)),tx(i,c);const p=new ar(m.target,c,h,m.sequenceNumber);Kh(i,p)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){J(ss,"Failed to raise snapshot:",r),await Cl(t,r)}}async function Cl(t,e,n){if(!li(e))throw e;t.Ea.add(1),await qo(t),t.Ra.set("Offline"),n||(n=()=>Xv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(ss,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ou(t)})}function rx(t,e){return e().catch(n=>Cl(t,n,e))}async function au(t){const e=le(t),n=Nr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ph;for(;OS(e);)try{const s=await vS(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,LS(e,s)}catch(s){await Cl(e,s)}sx(e)&&ix(e)}function OS(t){return us(t)&&t.Ta.length<10}function LS(t,e){t.Ta.push(e);const n=Nr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function sx(t){return us(t)&&!Nr(t).x_()&&t.Ta.length>0}function ix(t){Nr(t).start()}async function FS(t){Nr(t).ra()}async function US(t){const e=Nr(t);for(const n of t.Ta)e.ea(n.mutations)}async function zS(t,e,n){const r=t.Ta.shift(),s=zh.from(r,e,n);await rx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await au(t)}async function $S(t,e){e&&Nr(t).X_&&await async function(r,s){if(function(o){return bb(o)&&o!==z.ABORTED}(s.code)){const i=r.Ta.shift();Nr(r).B_(),await rx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await au(r)}}(t,e),sx(t)&&ix(t)}async function dg(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),J(ss,"RemoteStore received new credentials");const r=us(n);n.Ea.add(3),await qo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ou(n)}async function BS(t,e){const n=le(t);e?(n.Ea.delete(2),await ou(n)):e||(n.Ea.add(2),await qo(n),n.Ra.set("Unknown"))}function ci(t){return t.ma||(t.ma=function(n,r,s){const i=le(n);return i.sa(),new IS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:PS.bind(null,t),t_:DS.bind(null,t),r_:VS.bind(null,t),H_:MS.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Xh(t)?Yh(t):t.Ra.set("Unknown")):(await t.ma.stop(),nx(t))})),t.ma}function Nr(t){return t.fa||(t.fa=function(n,r,s){const i=le(n);return i.sa(),new AS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:FS.bind(null,t),r_:$S.bind(null,t),ta:US.bind(null,t),na:zS.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await au(t)):(await t.fa.stop(),t.Ta.length>0&&(J(ss,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new Jh(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zh(t,e){if($n("AsyncQueue",`${e}: ${t}`),li(t))return new X(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{static emptySet(e){return new Ls(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=Hi(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ls)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ls;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.ga=new Ue(re.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Zs{constructor(e,n,r,s,i,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Zs(e,n,Ls.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class HS{constructor(){this.queries=fg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=le(n),i=s.queries;s.queries=fg(),i.forEach((o,u)=>{for(const c of u.Sa)c.onError(r)})})(this,new X(z.ABORTED,"Firestore shutting down"))}}function fg(){return new ls(t=>Nv(t),eu)}async function ox(t,e){const n=le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new qS,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Zh(o,`Initialization of query '${gs(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&ef(n)}async function ax(t,e){const n=le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function WS(t,e){const n=le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.Sa)u.Fa(s)&&(r=!0);o.wa=s}}r&&ef(n)}function GS(t,e,n){const r=le(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function ef(t){t.Ca.forEach(e=>{e.next()})}var Id,mg;(mg=Id||(Id={})).Ma="default",mg.Cache="cache";class lx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Zs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Id.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.key=e}}class cx{constructor(e){this.key=e}}class QS{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ge(),this.mutatedKeys=ge(),this.eu=Iv(e),this.tu=new Ls(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new hg,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),A=tu(this.query,p)?p:null,k=!!g&&this.mutatedKeys.has(g.key),R=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let P=!1;g&&A?g.data.isEqual(A.data)?k!==R&&(r.track({type:3,doc:A}),P=!0):this.su(g,A)||(r.track({type:2,doc:A}),P=!0,(c&&this.eu(A,c)>0||h&&this.eu(A,h)<0)&&(u=!0)):!g&&A?(r.track({type:0,doc:A}),P=!0):g&&!A&&(r.track({type:1,doc:g}),P=!0,(c||h)&&(u=!0)),P&&(A?(o=o.add(A),i=R?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:u,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(A,k){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Rt:P})}};return R(A)-R(k)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new Zs(this.query,e.tu,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new cx(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new ux(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Zs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tf="SyncEngine";class KS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YS{constructor(e){this.key=e,this.hu=!1}}class XS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ls(u=>Nv(u),eu),this.Iu=new Map,this.Eu=new Set,this.du=new Ue(re.comparator),this.Au=new Map,this.Ru=new qh,this.Vu={},this.mu=new Map,this.fu=Js.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function JS(t,e,n=!0){const r=gx(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await dx(r,e,n,!0),s}async function ZS(t,e){const n=gx(t);await dx(n,e,!0,!1)}async function dx(t,e,n,r){const s=await xS(t.localStore,xn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await eT(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&ex(t.remoteStore,s),u}async function eT(t,e,n,r,s){t.pu=(p,g,A)=>async function(R,P,T,w){let I=P.view.ru(T);I.Cs&&(I=await og(R.localStore,P.query,!1).then(({documents:x})=>P.view.ru(x,I)));const O=w&&w.targetChanges.get(P.targetId),M=w&&w.targetMismatches.get(P.targetId)!=null,F=P.view.applyChanges(I,R.isPrimaryClient,O,M);return gg(R,P.targetId,F.au),F.snapshot}(t,p,g,A);const i=await og(t.localStore,e,!0),o=new QS(e,i.Qs),u=o.ru(i.documents),c=Bo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(u,t.isPrimaryClient,c);gg(t,n,h.au);const m=new KS(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function tT(t,e,n){const r=le(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!eu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Td(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qh(r.remoteStore,s.targetId),Ad(r,s.targetId)}).catch(ai)):(Ad(r,s.targetId),await Td(r.localStore,s.targetId,!0))}async function nT(t,e){const n=le(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qh(n.remoteStore,r.targetId))}async function rT(t,e,n){const r=cT(t);try{const s=await function(o,u){const c=le(o),h=Pe.now(),m=u.reduce((A,k)=>A.add(k.key),ge());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let k=Bn(),R=ge();return c.Ns.getEntries(A,m).next(P=>{k=P,k.forEach((T,w)=>{w.isValidDocument()||(R=R.add(T))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,k)).next(P=>{p=P;const T=[];for(const w of u){const I=vb(w,p.get(w.key).overlayedDocument);I!=null&&T.push(new Rr(w.key,I,vv(I.value.mapValue),on.exists(!0)))}return c.mutationQueue.addMutationBatch(A,h,T,u)}).next(P=>{g=P;const T=P.applyToLocalDocumentSet(p,R);return c.documentOverlayCache.saveOverlays(A,P.batchId,T)})}).then(()=>({batchId:g.batchId,changes:Cv(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Ue(pe)),h=h.insert(u,c),o.Vu[o.currentUser.toKey()]=h}(r,s.batchId,n),await Ho(r,s.changes),await au(r.remoteStore)}catch(s){const i=Zh(s,"Failed to persist write");n.reject(i)}}async function hx(t,e){const n=le(t);try{const r=await gS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Se(o.hu,14607):s.removedDocuments.size>0&&(Se(o.hu,42227),o.hu=!1))}),await Ho(n,r,e)}catch(r){await ai(r)}}function pg(t,e,n){const r=le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=le(o);c.onlineState=u;let h=!1;c.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(u)&&(h=!0)}),h&&ef(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sT(t,e,n){const r=le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ue(re.comparator);o=o.insert(i,yt.newNoDocument(i,oe.min()));const u=ge().add(i),c=new su(oe.min(),new Map,new Ue(pe),o,u);await hx(r,c),r.du=r.du.remove(i),r.Au.delete(e),nf(r)}else await Td(r.localStore,e,!1).then(()=>Ad(r,e,n)).catch(ai)}async function iT(t,e){const n=le(t),r=e.batch.batchId;try{const s=await pS(n.localStore,e);mx(n,r,null),fx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ho(n,s)}catch(s){await ai(s)}}async function oT(t,e,n){const r=le(t);try{const s=await function(o,u){const c=le(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return c.mutationQueue.lookupMutationBatch(h,u).next(p=>(Se(p!==null,37113),m=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>c.localDocuments.getDocuments(h,m))})}(r.localStore,e);mx(r,e,n),fx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ho(r,s)}catch(s){await ai(s)}}function fx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function mx(t,e,n){const r=le(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Ad(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||px(t,r)})}function px(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Qh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),nf(t))}function gg(t,e,n){for(const r of n)r instanceof ux?(t.Ru.addReference(r.key,e),aT(t,r)):r instanceof cx?(J(tf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||px(t,r.key)):ie(19791,{wu:r})}function aT(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(J(tf,"New document in limbo: "+n),t.Eu.add(r),nf(t))}function nf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new re(Ae.fromString(e)),r=t.fu.next();t.Au.set(r,new YS(n)),t.du=t.du.insert(n,r),ex(t.remoteStore,new ar(xn(Lh(n.path)),r,"TargetPurposeLimboResolution",Xl.ce))}}async function Ho(t,e,n){const r=le(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((u,c)=>{o.push(r.pu(c,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Wh.As(c.targetId,h);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,h){const m=le(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(h,g=>B.forEach(g.Es,A=>m.persistence.referenceDelegate.addReference(p,g.targetId,A)).next(()=>B.forEach(g.ds,A=>m.persistence.referenceDelegate.removeReference(p,g.targetId,A)))))}catch(p){if(!li(p))throw p;J(Gh,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const A=m.Ms.get(g),k=A.snapshotVersion,R=A.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(g,R)}}}(r.localStore,i))}async function lT(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){J(tf,"User change. New user:",e.toKey());const r=await Yv(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(u=>{u.forEach(c=>{c.reject(new X(z.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ho(n,r.Ls)}}function uT(t,e){const n=le(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let s=ge();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const u=n.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}function gx(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sT.bind(null,e),e.Pu.H_=WS.bind(null,e.eventManager),e.Pu.yu=GS.bind(null,e.eventManager),e}function cT(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oT.bind(null,e),e}class kl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=iu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return mS(this.persistence,new dS,e.initialUser,this.serializer)}Cu(e){return new Kv(Hh.mi,this.serializer)}Du(e){return new wS}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kl.provider={build:()=>new kl};class dT extends kl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Se(this.persistence.referenceDelegate instanceof Al,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Yb(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new Kv(r=>Al.mi(r,n),this.serializer)}}class Cd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lT.bind(null,this.syncEngine),await BS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HS}()}createDatastore(e){const n=iu(e.databaseInfo.databaseId),r=function(i){return new NS(i)}(e.databaseInfo);return function(i,o,u,c){return new kS(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new RS(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>pg(this.syncEngine,n,0),function(){return ug.v()?new ug:new ES}())}createSyncEngine(e,n){return function(s,i,o,u,c,h,m){const p=new XS(s,i,o,u,c,h);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=le(s);J(ss,"RemoteStore shutting down."),i.Ea.add(5),await qo(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Cd.provider={build:()=>new Cd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$n("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="FirestoreClient";class hT{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=Rh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{J(Ir,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J(Ir,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function cc(t,e){t.asyncQueue.verifyOperationInProgress(),J(Ir,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Yv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function yg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fT(t);J(Ir,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>dg(e.remoteStore,s)),t._onlineComponents=e}async function fT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(Ir,"Using user provided OfflineComponentProvider");try{await cc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Qs("Error using user provided cache. Falling back to memory cache: "+n),await cc(t,new kl)}}else J(Ir,"Using default OfflineComponentProvider"),await cc(t,new dT(void 0));return t._offlineComponents}async function vx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(Ir,"Using user provided OnlineComponentProvider"),await yg(t,t._uninitializedComponentsProvider._online)):(J(Ir,"Using default OnlineComponentProvider"),await yg(t,new Cd))),t._onlineComponents}function mT(t){return vx(t).then(e=>e.syncEngine)}async function xx(t){const e=await vx(t),n=e.eventManager;return n.onListen=JS.bind(null,e.syncEngine),n.onUnlisten=tT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nT.bind(null,e.syncEngine),n}function pT(t,e,n={}){const r=new Vn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const m=new yx({next:g=>{m.Nu(),o.enqueueAndForget(()=>ax(i,p));const A=g.docs.has(u);!A&&g.fromCache?h.reject(new X(z.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&g.fromCache&&c&&c.source==="server"?h.reject(new X(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new lx(Lh(u.path),m,{includeMetadataChanges:!0,qa:!0});return ox(i,p)}(await xx(t),t.asyncQueue,e,n,r)),r.promise}function gT(t,e,n={}){const r=new Vn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const m=new yx({next:g=>{m.Nu(),o.enqueueAndForget(()=>ax(i,p)),g.fromCache&&c.source==="server"?h.reject(new X(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new lx(u,m,{includeMetadataChanges:!0,qa:!0});return ox(i,p)}(await xx(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="firestore.googleapis.com",xg=!0;class _g{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wx,this.ssl=xg}else this.host=e.host,this.ssl=e.ssl??xg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Qb)throw new X(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_x(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _g({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _g(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new E2;switch(r.type){case"firstParty":return new N2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=vg.get(n);r&&(J("ComponentProvider","Removing Datastore"),vg.delete(n),r.terminate())}(this),Promise.resolve()}}function yT(t,e,n,r={}){var h;t=bn(t,lu);const s=Ch(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(Kw(`https://${u}`),Zw("Firestore",!0)),i.host!==wx&&i.host!==u&&Qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:u,ssl:s,emulatorOptions:r};if(!vl(c,o)&&(t._setSettings(c),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=pt.MOCK_USER;else{m=Yw(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new X(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new pt(g)}t._authCredentials=new b2(new ov(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cs(this.firestore,e,this._query)}}class Ge{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ge(this.firestore,e,this._key)}toJSON(){return{type:Ge._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(zo(n,Ge._jsonSchema))return new Ge(e,r||null,new re(Ae.fromString(n.referencePath)))}}Ge._jsonSchemaVersion="firestore/documentReference/1.0",Ge._jsonSchema={type:Xe("string",Ge._jsonSchemaVersion),referencePath:Xe("string")};class xr extends cs{constructor(e,n,r){super(e,n,Lh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new re(e))}withConverter(e){return new xr(this.firestore,e,this._path)}}function Vt(t,e,...n){if(t=Un(t),av("collection","path",e),t instanceof lu){const r=Ae.fromString(e,...n);return Pp(r),new xr(t,null,r)}{if(!(t instanceof Ge||t instanceof xr))throw new X(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return Pp(r),new xr(t.firestore,null,r)}}function je(t,e,...n){if(t=Un(t),arguments.length===1&&(e=Rh.newId()),av("doc","path",e),t instanceof lu){const r=Ae.fromString(e,...n);return Rp(r),new Ge(t,null,new re(r))}{if(!(t instanceof Ge||t instanceof xr))throw new X(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return Rp(r),new Ge(t.firestore,t instanceof xr?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="AsyncQueue";class Eg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jv(this,"async_queue_retry"),this._c=()=>{const r=uc();r&&J(wg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=uc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=uc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Vn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!li(e))throw e;J(wg,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,$n("INTERNAL UNHANDLED ERROR: ",bg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Jh.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ie(47125,{Pc:bg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function bg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class di extends lu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Eg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Eg(e),this._firestoreClient=void 0,await e}}}function vT(t,e){const n=typeof t=="object"?t:u2(),r=typeof t=="string"?t:El,s=s2(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Gw("firestore");i&&yT(s,...i)}return s}function rf(t){if(t._terminated)throw new X(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||xT(t),t._firestoreClient}function xT(t){var r,s,i;const e=t._freezeSettings(),n=function(u,c,h,m){return new B2(u,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,_x(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new hT(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wt(dt.fromBase64String(e))}catch(n){throw new X(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wt(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zo(e,Wt._jsonSchema))return Wt.fromBase64String(e.bytes)}}Wt._jsonSchemaVersion="firestore/bytes/1.0",Wt._jsonSchema={type:Xe("string",Wt._jsonSchemaVersion),bytes:Xe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wn._jsonSchemaVersion}}static fromJSON(e){if(zo(e,wn._jsonSchema))return new wn(e.latitude,e.longitude)}}wn._jsonSchemaVersion="firestore/geoPoint/1.0",wn._jsonSchema={type:Xe("string",wn._jsonSchemaVersion),latitude:Xe("number"),longitude:Xe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:En._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zo(e,En._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new En(e.vectorValues);throw new X(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}En._jsonSchemaVersion="firestore/vectorValue/1.0",En._jsonSchema={type:Xe("string",En._jsonSchemaVersion),vectorValues:Xe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=/^__.*__$/;class wT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new $o(e,this.data,n,this.fieldTransforms)}}class Ex{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ac:t})}}class of{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new of({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bx(this.Ac)&&_T.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ET{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||iu(e)}Cc(e,n,r,s=!1){return new of({Ac:e,methodName:n,Dc:r,path:lt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function af(t){const e=t._freezeSettings(),n=iu(t._databaseId);return new ET(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bT(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);lf("Data must be an object, but it was:",o,r);const u=Sx(r,o);let c,h;if(i.merge)c=new Ft(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=kd(e,p,n);if(!o.contains(g))throw new X(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Nx(m,g)||m.push(g)}c=new Ft(m),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new wT(new Ct(u),c,h)}class cu extends sf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cu}}function ST(t,e,n,r){const s=t.Cc(1,e,n);lf("Data must be an object, but it was:",s,r);const i=[],o=Ct.empty();jr(r,(c,h)=>{const m=uf(e,c,n);h=Un(h);const p=s.yc(m);if(h instanceof cu)i.push(m);else{const g=Wo(h,p);g!=null&&(i.push(m),o.set(m,g))}});const u=new Ft(i);return new Ex(o,u,s.fieldTransforms)}function TT(t,e,n,r,s,i){const o=t.Cc(1,e,n),u=[kd(e,r,n)],c=[s];if(i.length%2!=0)throw new X(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)u.push(kd(e,i[g])),c.push(i[g+1]);const h=[],m=Ct.empty();for(let g=u.length-1;g>=0;--g)if(!Nx(h,u[g])){const A=u[g];let k=c[g];k=Un(k);const R=o.yc(A);if(k instanceof cu)h.push(A);else{const P=Wo(k,R);P!=null&&(h.push(A),m.set(A,P))}}const p=new Ft(h);return new Ex(m,p,o.fieldTransforms)}function NT(t,e,n,r=!1){return Wo(n,t.Cc(r?4:3,e))}function Wo(t,e){if(Tx(t=Un(t)))return lf("Unsupported field value:",e,t),Sx(t,e);if(t instanceof sf)return function(r,s){if(!bx(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=Wo(u,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Un(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Pe.fromDate(r);return{timestampValue:Il(s.serializer,i)}}if(r instanceof Pe){const i=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Il(s.serializer,i)}}if(r instanceof wn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wt)return{bytesValue:zv(s.serializer,r._byteString)};if(r instanceof Ge){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Bh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof En)return function(o,u){return{mapValue:{fields:{[gv]:{stringValue:yv},[bl]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return Fh(u.serializer,h)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Yl(r)}`)}(t,e)}function Sx(t,e){const n={};return cv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(t,(r,s)=>{const i=Wo(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Tx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pe||t instanceof wn||t instanceof Wt||t instanceof Ge||t instanceof sf||t instanceof En)}function lf(t,e,n){if(!Tx(n)||!lv(n)){const r=Yl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function kd(t,e,n){if((e=Un(e))instanceof uu)return e._internalPath;if(typeof e=="string")return uf(t,e);throw jl("Field path arguments must be of type string or ",t,!1,void 0,n)}const IT=new RegExp("[~\\*/\\[\\]]");function uf(t,e,n){if(e.search(IT)>=0)throw jl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new uu(...e.split("."))._internalPath}catch{throw jl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new X(z.INVALID_ARGUMENT,u+t+c)}function Nx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(du("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AT extends Ix{data(){return super.data()}}function du(t,e){return typeof e=="string"?uf(t,e):e instanceof uu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cf{}class Ax extends cf{}function Zn(t,e,...n){let r=[];e instanceof cf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof df).length,u=i.filter(c=>c instanceof hu).length;if(o>1||o>0&&u>0)throw new X(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class hu extends Ax{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new hu(e,n,r)}_apply(e){const n=this._parse(e);return Cx(e._query,n),new cs(e.firestore,e.converter,xd(e._query,n))}_parse(e){const n=af(e.firestore);return function(i,o,u,c,h,m,p){let g;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new X(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Ng(p,m);const k=[];for(const R of p)k.push(Tg(c,i,R));g={arrayValue:{values:k}}}else g=Tg(c,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Ng(p,m),g=NT(u,o,p,m==="in"||m==="not-in");return Ye.create(h,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vi(t,e,n){const r=e,s=du("where",t);return hu._create(s,r,n)}class df extends cf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new df(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)Cx(o,c),o=xd(o,c)}(e._query,n),new cs(e.firestore,e.converter,xd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hf extends Ax{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new X(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new X(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ro(i,o)}(e._query,this._field,this._direction);return new cs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ui(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Sg(t,e="asc"){const n=e,r=du("orderBy",t);return hf._create(r,n)}function Tg(t,e,n){if(typeof(n=Un(n))=="string"){if(n==="")throw new X(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tv(e)&&n.indexOf("/")!==-1)throw new X(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ae.fromString(n));if(!re.isDocumentKey(r))throw new X(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zp(t,new re(r))}if(n instanceof Ge)return zp(t,n._key);throw new X(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yl(n)}.`)}function Ng(t,e){if(!Array.isArray(t)||t.length===0)throw new X(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Cx(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kT{convertValue(e,n="none"){switch(Tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return jr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[bl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>He(o.doubleValue));return new En(n)}convertGeoPoint(e){return new wn(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Co(e));default:return null}}convertTimestamp(e){const n=br(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);Se(Gv(r),9688,{name:e});const s=new ko(r.get(1),r.get(3)),i=new re(r.popFirst(5));return s.isEqual(n)||$n(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Gi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xr extends Ix{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(du("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xr._jsonSchema={type:Xe("string",Xr._jsonSchemaVersion),bundleSource:Xe("string","DocumentSnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class qa extends Xr{data(e={}){return super.data(e)}}class Fs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Gi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qa(this._firestore,this._userDataWriter,r.key,r,new Gi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new qa(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Gi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new qa(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Gi(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),m=o.indexOf(u.doc.key)),{type:RT(u.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(t){t=bn(t,Ge);const e=bn(t.firestore,di);return pT(rf(e),t._key).then(n=>PT(e,t,n))}Fs._jsonSchemaVersion="firestore/querySnapshot/1.0",Fs._jsonSchema={type:Xe("string",Fs._jsonSchemaVersion),bundleSource:Xe("string","QuerySnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class kx extends kT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}function Tt(t){t=bn(t,cs);const e=bn(t.firestore,di),n=rf(e),r=new kx(e);return CT(t._query),gT(n,t._query).then(s=>new Fs(e,r,t,s))}function An(t,e,n){t=bn(t,Ge);const r=bn(t.firestore,di),s=jT(t.converter,e,n);return ff(r,[bT(af(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,on.none())])}function Mi(t,e,n,...r){t=bn(t,Ge);const s=bn(t.firestore,di),i=af(s);let o;return o=typeof(e=Un(e))=="string"||e instanceof uu?TT(i,"updateDoc",t._key,e,n,r):ST(i,"updateDoc",t._key,e),ff(s,[o.toMutation(t._key,on.exists(!0))])}function Cn(t){return ff(bn(t.firestore,di),[new Uh(t._key,on.none())])}function ff(t,e){return function(r,s){const i=new Vn;return r.asyncQueue.enqueueAndForget(async()=>rT(await mT(r),s,i)),i.promise}(rf(t),e)}function PT(t,e,n){const r=n.docs.get(e._key),s=new kx(t);return new Xr(t,s,e._key,r,new Gi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){oi=s})(l2),_l(new No("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new di(new S2(r.getProvider("auth-internal")),new I2(o,r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new X(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ko(h.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Os(Ap,Cp,e),Os(Ap,Cp,"esm2020")})();const jd={apiKey:"AIzaSyAO32W5Qdmdbt9mtp_ScyQE2fO5bEYC3LU",authDomain:"yj-order.firebaseapp.com",projectId:"yj-order",storageBucket:"yj-order.firebasestorage.app",messagingSenderId:"399409684502",appId:"1:399409684502:web:33a5660e855671d3211537"},DT=Yy(jd),de=vT(DT),VT=!!jd.apiKey&&!!jd.projectId,me={ORDERS:"cofoodie_orders",MENU_CATEGORIES:"cofoodie_menus_v3",EMPLOYEES:"cofoodie_employees_v2",ANNOUNCEMENTS:"cofoodie_announcements",ADMIN_SETTINGS:"cofoodie_admin_settings",ADMIN_ACCOUNTS:"cofoodie_admin_accounts",SESSION:"cofoodie_session",SESSION_USER_ID:"cofoodie_session_user_id",FRONTEND_PASSWORD:"cofoodie_frontend_password"},MT=[],OT=[],LT=[],Oi=[{id:"default_admin",name:"",username:"admin",password:"password",isSuperAdmin:!0}],Na="24664941";class FT{get useCloud(){return VT}async getOrders(){if(this.useCloud)try{const n=Zn(Vt(de,"orders"),Sg("timestamp","desc"));return(await Tt(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){return console.error("Fetch Orders Error:",n),[]}const e=localStorage.getItem(me.ORDERS);return e?JSON.parse(e):[]}async saveOrder(e){if(this.useCloud){const{id:s,...i}=e;await An(je(de,"orders",s),i);return}const n=await this.getOrders(),r=n.findIndex(s=>s.id===e.id);r!==-1?n[r]=e:n.push(e),localStorage.setItem(me.ORDERS,JSON.stringify(n))}async deleteOrder(e){if(this.useCloud){await Cn(je(de,"orders",e));return}let n=await this.getOrders();n=n.filter(r=>r.id!==e),localStorage.setItem(me.ORDERS,JSON.stringify(n))}async updateOrderStatus(e,n){if(this.useCloud){const i=je(de,"orders",e);await Mi(i,{status:n});return}const r=await this.getOrders(),s=r.findIndex(i=>i.id===e);s!==-1&&(r[s].status=n,localStorage.setItem(me.ORDERS,JSON.stringify(r)))}async toggleOrderPayment(e){if(this.useCloud){const s=je(de,"orders",e),i=await dc(s);if(i.exists()){const o=i.data().isPaid;await Mi(s,{isPaid:!o})}else console.error(`Order with ID ${e} not found for payment toggle.`);return}const n=await this.getOrders(),r=n.findIndex(s=>s.id===e);r!==-1&&(n[r].isPaid=!n[r].isPaid,localStorage.setItem(me.ORDERS,JSON.stringify(n)))}async deleteOrdersByContext(e,n){if(this.useCloud){try{const s=Zn(Vt(de,"orders"),Vi("dateStr","==",e),Vi("categoryLabel","==",n)),o=(await Tt(s)).docs.map(u=>Cn(je(de,"orders",u.id)));await Promise.all(o)}catch(s){console.error("Delete Orders Error:",s)}return}let r=await this.getOrders();r=r.filter(s=>!(s.dateStr===e&&s.categoryLabel===n)),localStorage.setItem(me.ORDERS,JSON.stringify(r))}async getMenuCategories(){if(this.useCloud){const n=Zn(Vt(de,"menus"));return(await Tt(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(me.MENU_CATEGORIES);return e?JSON.parse(e):MT}async saveMenuCategories(e){this.useCloud||localStorage.setItem(me.MENU_CATEGORIES,JSON.stringify(e))}async addMenuCategory(e,n){if(this.useCloud){const i="MENU_"+Date.now();await An(je(de,"menus",i),{label:e,config:n});return}const r=await this.getMenuCategories(),s="MENU_"+Date.now();r.push({id:s,label:e,config:n}),await this.saveMenuCategories(r)}async updateMenuCategory(e,n,r){if(this.useCloud){await Mi(je(de,"menus",e),{label:n,config:r});return}const s=await this.getMenuCategories(),i=s.findIndex(o=>o.id===e);i!==-1&&(s[i].label=n,s[i].config=r,await this.saveMenuCategories(s))}async deleteMenuCategory(e){if(this.useCloud){await Cn(je(de,"menus",e));return}let n=await this.getMenuCategories();n=n.filter(r=>r.id!==e),await this.saveMenuCategories(n)}async getEmployees(){if(this.useCloud){const n=Zn(Vt(de,"employees"),Sg("name"));return(await Tt(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(me.EMPLOYEES);return e?JSON.parse(e):OT}async saveEmployees(e){this.useCloud||localStorage.setItem(me.EMPLOYEES,JSON.stringify(e))}async addEmployee(e){if(this.useCloud){const{id:r,...s}=e;await An(je(de,"employees",r),s);return}const n=await this.getEmployees();n.push(e),await this.saveEmployees(n)}async updateEmployee(e){if(this.useCloud){await Mi(je(de,"employees",e.id),{name:e.name});return}const r=(await this.getEmployees()).map(s=>s.id===e.id?e:s);await this.saveEmployees(r)}async deleteEmployee(e){if(this.useCloud){await Cn(je(de,"employees",e));return}const r=(await this.getEmployees()).filter(s=>s.id!==e);await this.saveEmployees(r)}async getAnnouncements(){if(this.useCloud){const n=Zn(Vt(de,"announcements"));return(await Tt(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(me.ANNOUNCEMENTS);return e?JSON.parse(e):LT}async saveAnnouncements(e){if(this.useCloud){for(const n of e)await An(je(de,"announcements",n.id),{content:n.content,isActive:n.isActive},{merge:!0});return}localStorage.setItem(me.ANNOUNCEMENTS,JSON.stringify(e))}async getAdminSettings(){if(this.useCloud){if(!de)return{};try{const n=je(de,"settings","admin"),r=await dc(n);return r.exists()?r.data():{isGoogleBound:!0,googleAccountName:"Firebase Mode",googleAccountType:"WORKSPACE"}}catch(n){return console.error("Error fetching admin settings:",n),{}}}const e=localStorage.getItem(me.ADMIN_SETTINGS);return e?JSON.parse(e):{isGoogleBound:!1,googleAccountName:"",googleAccountType:"PERSONAL"}}async saveAdminSettings(e){if(this.useCloud){const r=je(de,"settings","admin");await An(r,e,{merge:!0});return}const n=await this.getAdminSettings();localStorage.setItem(me.ADMIN_SETTINGS,JSON.stringify({...n,...e}))}async setGoogleBound(e,n="",r="PERSONAL"){const s={isGoogleBound:e,googleAccountName:n,googleAccountType:r};localStorage.setItem(me.ADMIN_SETTINGS,JSON.stringify(s))}async checkDatabaseConnection(){if(this.useCloud)try{return await Tt(Vt(de,"admins")),!0}catch{return!1}return new Promise(e=>{setTimeout(()=>{e(!0)},1e3)})}async getAdminAccounts(){if(this.useCloud){const n=Zn(Vt(de,"admins")),s=(await Tt(n)).docs.map(i=>({id:i.id,...i.data()}));if(s.length===0){for(const i of Oi)await An(je(de,"admins",i.id),{...i});return Oi}return s}const e=localStorage.getItem(me.ADMIN_ACCOUNTS);return e?JSON.parse(e):(localStorage.setItem(me.ADMIN_ACCOUNTS,JSON.stringify(Oi)),Oi)}async saveAdminAccounts(e){this.useCloud||localStorage.setItem(me.ADMIN_ACCOUNTS,JSON.stringify(e))}async verifyAdmin(e,n){if(this.useCloud){if(!de)return null;const i=Vt(de,"admins");if((await Tt(i)).empty){console.log("No admins found in DB, seeding default admins...");for(const m of Oi)await An(je(de,"admins",m.id),{...m})}const u=Zn(i,Vi("username","==",e),Vi("password","==",n)),c=await Tt(u);if(c.empty)return null;const h=c.docs[0];return{id:h.id,...h.data()}}return(await this.getAdminAccounts()).find(i=>i.username===e&&i.password===n)||null}async getAdminById(e){return(await this.getAdminAccounts()).find(r=>r.id===e)}async addAdminAccount(e){if(this.useCloud){const r=Zn(Vt(de,"admins"),Vi("username","==",e.username));if(!(await Tt(r)).empty)throw new Error("");const{id:i,...o}=e;await An(je(de,"admins",i),o);return}const n=await this.getAdminAccounts();if(n.some(r=>r.username===e.username))throw new Error("");n.push(e),await this.saveAdminAccounts(n)}async updateAdminAccount(e){if(this.useCloud){const{id:s,...i}=e;await Mi(je(de,"admins",s),i);return}const n=await this.getAdminAccounts(),r=n.findIndex(s=>s.id===e.id);r!==-1&&(n[r]=e,await this.saveAdminAccounts(n))}async deleteAdminAccount(e){if(this.useCloud){await Cn(je(de,"admins",e));return}let n=await this.getAdminAccounts();n=n.filter(r=>r.id!==e),await this.saveAdminAccounts(n)}async getFrontendPassword(){if(this.useCloud){if(!de)return Na;try{const n=je(de,"settings","global"),r=await dc(n);return r.exists()&&r.data().frontendPassword?r.data().frontendPassword:Na}catch(n){return console.error("Error fetching frontend password:",n),Na}}return localStorage.getItem(me.FRONTEND_PASSWORD)||Na}async setFrontendPassword(e){if(this.useCloud){await An(je(de,"settings","global"),{frontendPassword:e},{merge:!0});return}localStorage.setItem(me.FRONTEND_PASSWORD,e)}async clearAllData(){if(this.useCloud){const e=await Tt(Vt(de,"orders"));for(const i of e.docs)await Cn(je(de,"orders",i.id));const n=await Tt(Vt(de,"menus"));for(const i of n.docs)await Cn(je(de,"menus",i.id));const r=await Tt(Vt(de,"employees"));for(const i of r.docs)await Cn(je(de,"employees",i.id));const s=await Tt(Vt(de,"announcements"));for(const i of s.docs)await Cn(je(de,"announcements",i.id));return}localStorage.removeItem(me.ORDERS),localStorage.removeItem(me.MENU_CATEGORIES),localStorage.removeItem(me.EMPLOYEES),localStorage.removeItem(me.ANNOUNCEMENTS)}setSession(e,n,r=!1){const s=r?localStorage:sessionStorage,i=r?sessionStorage:localStorage;i.removeItem(me.SESSION),i.removeItem(me.SESSION_USER_ID),s.setItem(me.SESSION,e),n&&s.setItem(me.SESSION_USER_ID,n)}getSession(){let e=localStorage.getItem(me.SESSION),n=localStorage.getItem(me.SESSION_USER_ID);return e||(e=sessionStorage.getItem(me.SESSION),n=sessionStorage.getItem(me.SESSION_USER_ID)),{role:e,userId:n}}clearSession(){localStorage.removeItem(me.SESSION),localStorage.removeItem(me.SESSION_USER_ID),sessionStorage.removeItem(me.SESSION),sessionStorage.removeItem(me.SESSION_USER_ID)}}const UT=new FT,ne=UT;var jx=(t=>(t.PENDING="PENDING",t.CONFIRMED="CONFIRMED",t.COMPLETED="COMPLETED",t.CANCELLED="CANCELLED",t))(jx||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),se=(t,e)=>{const n=q.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...h},m)=>q.createElement("svg",{ref:m,...zT,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${$T(t)}`,u].join(" "),...h},[...e.map(([p,g])=>q.createElement(p,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=se("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=se("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=se("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=se("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=se("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=se("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=se("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=se("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=se("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=se("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=se("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=se("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=se("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=se("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=se("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=se("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=se("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=se("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=se("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=se("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=se("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=se("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=se("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=se("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Wa=[{label:"",badge:"bg-blue-100 text-blue-700",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200",tab:"data-[state=active]:bg-blue-600"},{label:"",badge:"bg-emerald-100 text-emerald-700",bg:"bg-emerald-100",text:"text-emerald-700",border:"border-emerald-200",tab:"data-[state=active]:bg-emerald-600"},{label:"",badge:"bg-amber-100 text-amber-700",bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-200",tab:"data-[state=active]:bg-amber-600"}],mN={:"",:"",:""},qe=t=>{if(!t)return"";const e=t.trim();return mN[e]||e},It=t=>{const e=qe(t);if(!e)return{badge:"bg-slate-100 text-slate-500",bg:"bg-slate-100",text:"text-slate-500",border:"border-slate-200",tab:""};const n=Wa.find(s=>s.label===e);if(n)return n;const r=e.split("").reduce((s,i)=>s+i.charCodeAt(0),0)%Wa.length;return Wa[r]},pN=({onLogout:t,onGoToAdmin:e})=>{const[n,r]=q.useState([]),[s,i]=q.useState(""),[o,u]=q.useState("CARD"),[c,h]=q.useState(null),[m,p]=q.useState(null),[g,A]=q.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[k,R]=q.useState([]),[P,T]=q.useState(""),[w,I]=q.useState(""),[O,M]=q.useState(""),[F,x]=q.useState(""),[v,_]=q.useState("ALL"),[E,N]=q.useState([]),[C,b]=q.useState([]),[Ee,ze]=q.useState({}),[St,L]=q.useState([]),[U,W]=q.useState(new Date),Y=$=>{const ae=new Date($),S=ae.getDay(),V=ae.getDate()-S+(S===0?-6:1);return new Date(ae.setDate(V))},ee=new Date().toISOString().split("T")[0];q.useEffect(()=>{const $=setInterval(()=>W(new Date),1e3);(async()=>{const[V,Q,te,_e,Nn]=await Promise.all([ne.getMenuCategories(),ne.getEmployees(),ne.getAnnouncements(),ne.getOrders(),ne.getAdminSettings()]);r(V),ze(Nn);const In=Array.from(new Set(V.map(cn=>qe(cn.label)))).filter(cn=>!(Nn.hiddenCategories||[]).includes(cn));if(In.length>0&&!s){const cn=In.includes("")?"":In[0];i(cn)}N(Q),b(te.filter(cn=>cn.isActive)),L(_e)})();const S=()=>{window.innerWidth>=1024&&A(!0)};return window.addEventListener("resize",S),()=>{clearInterval($),window.removeEventListener("resize",S)}},[]),q.useEffect(()=>{if(!s)return;const $=n.filter(S=>qe(S.label)===s),ae=$.find(S=>S.config.date===ee);if(ae)h(ae);else if($.length>0){const S=[...$].sort((V,Q)=>Q.config.date.localeCompare(V.config.date));h(S[0])}else h(null)},[s,n]);const ue=Array.from(new Set(n.map($=>qe($.label)))).filter($=>!(Ee.hiddenCategories||[]).includes($)),G=n.filter($=>qe($.label)===s),xe=Y(new Date),Me=Array.from({length:5}).map(($,ae)=>{const S=new Date(xe);return S.setDate(xe.getDate()+ae),S.toISOString().split("T")[0]}),be=["","","","",""],ce=[{active:"bg-blue-50 text-blue-800 border-blue-600",hover:"hover:bg-blue-50 hover:text-blue-600",border:"border-blue-600",badge:"bg-blue-100 text-blue-700"},{active:"bg-emerald-50 text-emerald-800 border-emerald-600",hover:"hover:bg-emerald-50 hover:text-emerald-600",border:"border-emerald-600",badge:"bg-emerald-100 text-emerald-700"},{active:"bg-amber-50 text-amber-800 border-amber-600",hover:"hover:bg-amber-50 hover:text-amber-600",border:"border-amber-600",badge:"bg-amber-100 text-amber-700"},{active:"bg-rose-50 text-rose-800 border-rose-600",hover:"hover:bg-rose-50 hover:text-rose-600",border:"border-rose-600",badge:"bg-rose-100 text-rose-700"},{active:"bg-violet-50 text-violet-800 border-violet-600",hover:"hover:bg-violet-50 hover:text-violet-600",border:"border-violet-600",badge:"bg-violet-100 text-violet-700"}],Te=c?c.config.date<ee||(c.config.date===ee&&c.config.cutoffTime?`${U.getHours().toString().padStart(2,"0")}:${U.getMinutes().toString().padStart(2,"0")}`>c.config.cutoffTime:!1):!1,Xt=()=>{if(!P){alert("");return}if(!w){alert("");return}if(!F){alert("");return}const $={id:Date.now().toString(),name:w,note:O,price:Number(F)};R([...k,$]),I(""),M(""),x("")},Pr=async()=>{if(!P||k.length===0){alert("");return}const $=E.find(V=>V.id===P),ae={id:Date.now().toString(),employeeName:$?$.name:"Unknown",items:k,totalAmount:k.reduce((V,Q)=>V+Q.price,0),timestamp:Date.now(),status:jx.PENDING,dateStr:ee,categoryLabel:s};await ne.saveOrder(ae),alert(""),R([]),T("");const S=await ne.getOrders();L(S)},Hn=St.filter($=>$.dateStr===ee).sort(($,ae)=>ae.timestamp-$.timestamp),Tn=Array.from(new Set(Hn.map($=>qe($.categoryLabel)||""))).filter($=>!(Ee.hiddenCategories||[]).includes($)),Jt=Hn.filter($=>!(Ee.hiddenCategories||[]).includes(qe($.categoryLabel)||"")).filter($=>v==="ALL"||(qe($.categoryLabel)||"")===v),un=s===""||s===""||s===""||s==="",[Dr,Vr]=q.useState(0);return q.useEffect(()=>{if(C.length<=1)return;const $=setInterval(()=>{Vr(ae=>(ae+1)%C.length)},5e3);return()=>clearInterval($)},[C]),l.jsxs("div",{className:"min-h-screen bg-slate-50 pb-16 flex flex-col",children:[l.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-40 flex-shrink-0",children:[l.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 flex justify-between items-center text-sm",children:[l.jsxs("div",{className:"font-mono flex items-center gap-2",children:[l.jsx(hc,{size:14}),U.toLocaleDateString("zh-TW")," ",U.toLocaleTimeString("zh-TW",{hour12:!1})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:e,className:"flex items-center gap-1 text-slate-300 hover:text-white text-xs transition-colors",children:[l.jsx(KT,{size:14})," "]}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white text-xs",children:"Exit"})]})]}),l.jsx("div",{className:"bg-white text-orange-600 font-bold py-2 shadow-md border-b-2 border-orange-100 overflow-hidden relative h-10 flex items-center justify-center z-30",children:C.length>0?l.jsx("div",{className:"h-6 overflow-hidden relative w-full max-w-2xl mx-auto px-4",children:C.map(($,ae)=>l.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-all duration-500 ease-in-out transform ${ae===Dr?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:l.jsxs("span",{className:"drop-shadow-sm flex items-center gap-2 truncate",children:[" ",$.content]})},ae))}):l.jsx("span",{className:"text-sm opacity-80",children:""})}),l.jsx("div",{className:"text-center py-4 bg-white border-b border-slate-100",children:l.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:""})}),l.jsx("div",{className:"flex justify-center border-b border-slate-200 overflow-x-auto px-4 bg-white",children:ue.length===0?l.jsxs("div",{className:"p-4 text-slate-400 text-sm flex items-center gap-2",children:[l.jsx(GT,{size:16})," "]}):ue.map(($,ae)=>{const S=ce[ae%ce.length],V=s===$;return l.jsx("button",{onClick:()=>{i($),u("CARD")},className:`px-6 md:px-8 py-3 text-lg font-bold rounded-t-lg transition-all whitespace-nowrap border-b-4 mx-1 ${V?S.active:`border-transparent text-slate-500 bg-transparent ${S.hover}`}`,children:$},$)})})]}),l.jsxs("main",{className:"container mx-auto p-4 md:p-6 space-y-8 flex-grow",children:[l.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg shadow-sm border border-slate-200 cursor-pointer lg:cursor-auto select-none",onClick:()=>window.innerWidth<1024&&A(!g),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(Pd,{className:"text-primary"}),s," - ",un?"":""]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"lg:hidden text-slate-400 flex items-center gap-1 text-xs",children:g?l.jsxs(l.Fragment,{children:[" ",l.jsx(HT,{size:20})]}):l.jsxs(l.Fragment,{children:[" ",l.jsx(qT,{size:20})]})}),l.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1 shadow-inner",onClick:$=>$.stopPropagation(),children:[l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded flex items-center gap-2 transition-colors ${o==="CARD"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,title:"",children:l.jsx(is,{size:18})}),l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded flex items-center gap-2 transition-colors ${o==="LIST"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,title:"",children:l.jsx(XT,{size:18})})]})]})]}),g&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 duration-300",children:[un&&o==="CARD"&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Me.map(($,ae)=>{const S=G.find(_e=>_e.config.date===$),V=$===ee,Q=(c==null?void 0:c.id)===(S==null?void 0:S.id);let te=!1;if($<ee)te=!0;else if($===ee&&(S!=null&&S.config.cutoffTime)){const _e=new Date;`${_e.getHours().toString().padStart(2,"0")}:${_e.getMinutes().toString().padStart(2,"0")}`>S.config.cutoffTime&&(te=!0)}else $===ee&&!(S!=null&&S.config.cutoffTime)&&(te=!1);return l.jsxs("div",{onClick:()=>S&&h(S),className:`relative flex flex-col rounded-xl overflow-hidden transition-all cursor-pointer border-2 ${V?"border-amber-400 shadow-lg ring-2 ring-amber-100 scale-[1.02] z-10":"border-slate-200 hover:border-blue-300"} ${Q?"ring-2 ring-primary":""} bg-white`,children:[l.jsxs("div",{className:`p-2 text-center font-bold text-sm ${V?"bg-amber-400 text-white":"bg-slate-100 text-slate-600"}`,children:[be[ae]," ",l.jsx("span",{className:"text-xs font-normal opacity-90 block",children:$.slice(5)})]}),l.jsx("div",{className:"flex-1 min-h-[140px] flex items-center justify-center bg-slate-50 relative group flex-col",children:S?l.jsxs(l.Fragment,{children:[S.config.imageUrl?l.jsx("img",{src:S.config.imageUrl,alt:"Menu",className:`w-full h-full object-cover absolute inset-0 ${te?"grayscale-[0.5] opacity-80":""}`}):l.jsxs("div",{className:"text-xs text-slate-400 flex flex-col items-center z-10",children:[l.jsx(Vo,{size:24})," ",l.jsx("span",{children:""})]}),l.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-2 z-10",children:[l.jsx("div",{className:"text-white text-xs font-bold truncate",children:S.config.shopName}),S.config.cutoffTime&&l.jsxs("div",{className:"text-red-500 text-xs font-bold bg-white/90 px-1 rounded backdrop-blur-sm mt-1 inline-block",children:[": ",S.config.cutoffTime]})]}),te&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 pointer-events-none",children:l.jsx("div",{className:"border-4 border-red-600 text-red-600 text-xl font-black px-4 py-2 rounded-lg -rotate-12 bg-white/80 shadow-lg tracking-widest backdrop-blur-sm",children:""})})]}):l.jsx("div",{className:"text-slate-300 text-xs",children:""})}),V&&l.jsx("div",{className:"absolute top-1 right-1 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-full shadow animate-pulse z-20",children:"Today"})]},$)})}),un&&o==="LIST"&&l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsx("div",{className:"grid grid-cols-1 divide-y divide-slate-100",children:Me.map(($,ae)=>{const S=G.find(te=>te.config.date===$),V=$===ee,Q=(c==null?void 0:c.id)===(S==null?void 0:S.id);return l.jsxs("div",{onClick:()=>S&&h(S),className:`p-4 flex flex-col sm:flex-row sm:items-center gap-4 transition-all cursor-pointer relative ${V?"bg-amber-50/60 hover:bg-amber-100/50":"hover:bg-slate-50"} ${Q?"bg-blue-50/40 ring-1 ring-inset ring-primary":""}`,children:[V&&l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 bg-amber-400"}),l.jsxs("div",{className:"sm:w-40 flex-shrink-0 flex items-center gap-2 pl-2",children:[l.jsx("div",{className:`font-bold text-lg ${V?"text-amber-700":"text-slate-600"}`,children:be[ae]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs text-slate-400 font-mono",children:$}),V&&l.jsx("span",{className:"inline-block px-1.5 py-0.5 rounded-full bg-red-500 text-white text-[10px] font-bold w-fit mt-0.5",children:"Today"})]})]}),l.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[l.jsxs("div",{className:"w-20 h-14 bg-slate-100 rounded overflow-hidden flex-shrink-0 border border-slate-200 shadow-sm relative",children:[S!=null&&S.config.imageUrl?l.jsx("img",{src:S.config.imageUrl,className:"w-full h-full object-cover",alt:"thumb"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(Vo,{size:16})}),!S&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-50 text-[10px] text-slate-400",children:""})]}),l.jsx("div",{className:"flex-1 min-w-0",children:S?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"font-bold text-slate-800 text-base truncate",children:S.config.shopName}),S.config.cutoffTime?l.jsxs("div",{className:"text-xs font-bold text-red-600 flex items-center gap-1 mt-1",children:[l.jsx(hc,{size:12})," : ",S.config.cutoffTime]}):l.jsx("div",{className:"text-xs text-slate-400 mt-1",children:""})]}):l.jsx("span",{className:"text-slate-400 italic text-sm",children:"--  --"})})]}),l.jsx("div",{className:"text-right flex-shrink-0",children:S?l.jsx("button",{className:`px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition-all border ${Q?"bg-primary text-white border-primary shadow-md":"bg-white border-slate-300 text-slate-600 hover:border-primary hover:text-primary"}`,children:Q?"":""}):l.jsx("button",{disabled:!0,className:"px-4 py-2 rounded-lg text-sm text-slate-300 border border-slate-100 bg-slate-50 cursor-not-allowed",children:""})})]},$)})})}),!un&&o==="CARD"&&l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[G.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-8",children:""}),G.map($=>{const ae=(c==null?void 0:c.id)===$.id;return l.jsxs("div",{onClick:()=>h($),className:`bg-white rounded-xl shadow-sm border transition-all cursor-pointer overflow-hidden group hover:shadow-md ${ae?"border-primary ring-2 ring-primary/20":"border-slate-200 hover:border-blue-300"}`,children:[l.jsxs("div",{className:"aspect-video bg-slate-100 relative",children:[$.config.imageUrl?l.jsx("img",{src:$.config.imageUrl,alt:"item",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(Pd,{size:32})}),l.jsx("div",{className:"absolute top-2 right-2 bg-white/90 backdrop-blur px-2 py-1 rounded text-xs font-bold shadow text-slate-700",children:$.config.date})]}),l.jsxs("div",{className:"p-3",children:[l.jsx("h3",{className:"font-bold text-slate-800 truncate",children:$.config.shopName}),$.config.cutoffTime&&l.jsxs("div",{className:"text-sm font-bold text-red-600 mt-1",children:[": ",$.config.date," ",$.config.cutoffTime]}),l.jsx("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:""})]})]},$.id)})]}),!un&&o==="LIST"&&l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 text-slate-600 font-semibold w-32",children:""}),l.jsx("th",{className:"p-4 text-slate-600 font-semibold",children:" / "}),l.jsx("th",{className:"p-4 text-slate-600 font-semibold text-right",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[G.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-8 text-center text-slate-400",children:""})}),G.sort(($,ae)=>ae.config.date.localeCompare($.config.date)).map($=>l.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${(c==null?void 0:c.id)===$.id?"bg-blue-50/50":""}`,children:[l.jsx("td",{className:"p-4 text-slate-600 font-mono text-sm",children:$.config.date}),l.jsxs("td",{className:"p-4",children:[l.jsx("div",{className:"font-bold text-slate-800",children:$.config.shopName}),$.config.cutoffTime&&l.jsxs("div",{className:"text-red-600 text-sm font-bold mt-1",children:[": ",$.config.date," ",$.config.cutoffTime]})]}),l.jsx("td",{className:"p-4 text-right",children:l.jsx("button",{onClick:()=>h($),className:"px-4 py-2 bg-white border border-slate-300 rounded text-sm font-medium hover:bg-primary hover:text-white hover:border-primary transition-colors shadow-sm",children:""})})]},$.id))]})]})})]}),c&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 pt-4",children:[l.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(aN,{className:"text-amber-400 fill-amber-400"})," ",c.config.shopName]}),c.config.cutoffTime&&l.jsxs("div",{className:"text-red-600 font-bold mt-1 flex items-center gap-1 animate-pulse",children:[l.jsx(hc,{size:16})," : ",c.config.date," ",c.config.cutoffTime]})]}),l.jsx("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded",children:c.config.date})]}),l.jsx("div",{className:"w-full bg-white rounded-xl shadow border border-slate-200 overflow-hidden cursor-zoom-in group relative",onClick:()=>c.config.imageUrl&&p(c.config.imageUrl),children:c.config.imageUrl?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:c.config.imageUrl,alt:"Menu Detail",className:"w-full h-auto max-h-[500px] object-contain"}),l.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all flex items-center justify-center",children:l.jsxs("div",{className:"opacity-0 group-hover:opacity-100 bg-white px-4 py-2 rounded-full shadow-lg font-bold flex items-center gap-2 transform translate-y-2 group-hover:translate-y-0 transition-all",children:[l.jsx(Ox,{size:18})," "]})})]}):l.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:""})})]}),l.jsxs("div",{className:"lg:col-span-7 bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden flex flex-col relative",children:[Te&&l.jsx("div",{className:"absolute inset-0 bg-slate-100/60 z-20 flex items-center justify-center backdrop-blur-[2px]",children:l.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl text-center border-2 border-red-100 max-w-sm",children:[l.jsx("div",{className:"bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:l.jsx(Pl,{size:32})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:""}),l.jsx("p",{className:"text-slate-500",children:""})]})}),l.jsx("div",{className:`${Te?"bg-slate-400":"bg-slate-800"} text-white p-4 transition-colors`,children:l.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(oN,{size:20})," "]})}),l.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"1. "}),l.jsxs("select",{disabled:Te,value:P,onChange:$=>T($.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none disabled:bg-slate-100 disabled:text-slate-400",children:[l.jsx("option",{value:"",children:"--  --"}),E.map($=>l.jsx("option",{value:$.id,children:$.name},$.id))]})]}),l.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-100 space-y-3",children:[l.jsx("div",{className:"text-sm font-bold text-slate-700 border-b pb-2 mb-2",children:"2. "}),l.jsx("input",{disabled:Te,placeholder:" (: )",value:w,onChange:$=>I($.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsx("input",{disabled:Te,type:"number",placeholder:"",value:F,onChange:$=>x($.target.value===""?"":Number($.target.value)),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsx("input",{disabled:Te,placeholder:" (: )",value:O,onChange:$=>M($.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsxs("button",{disabled:Te,onClick:Xt,className:"w-full py-2 bg-secondary text-white rounded hover:bg-slate-700 text-sm font-bold flex items-center justify-center gap-2 disabled:bg-slate-400 disabled:cursor-not-allowed",children:[l.jsx(rN,{size:16})," "]})]})]}),l.jsxs("div",{className:"flex flex-col bg-amber-50 rounded-lg border border-amber-100 p-4",children:[l.jsx("h3",{className:"text-sm font-bold text-amber-800 mb-3",children:""}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-[200px] space-y-2 mb-3 pr-1 custom-scrollbar",children:k.length===0?l.jsx("p",{className:"text-xs text-amber-600/60 text-center py-4",children:""}):k.map(($,ae)=>l.jsxs("div",{className:"bg-white p-2 rounded shadow-sm flex justify-between items-start text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800",children:$.name}),$.note&&l.jsx("div",{className:"text-xs text-slate-500",children:$.note})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"font-medium",children:["$",$.price]}),l.jsx("button",{disabled:Te,onClick:()=>R(k.filter((S,V)=>V!==ae)),className:"text-red-400 hover:text-red-600 disabled:text-slate-300",children:l.jsx(Us,{size:14})})]})]},ae))}),l.jsxs("div",{className:"pt-3 border-t border-amber-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),l.jsxs("span",{className:"text-xl font-bold text-primary",children:["$",k.reduce(($,ae)=>$+ae.price,0)]})]}),l.jsx("button",{onClick:Pr,disabled:k.length===0||Te,className:`w-full py-3 rounded font-bold transition-all ${k.length>0&&!Te?"bg-primary text-white hover:bg-blue-700 shadow":"bg-slate-300 text-slate-500 cursor-not-allowed"}`,children:""}),l.jsx("p",{className:"text-xs text-red-500 font-bold mt-2 text-center",children:""})]})]})]})]})]}),l.jsxs("section",{className:"bg-white rounded-xl shadow border border-slate-200 overflow-hidden",children:[l.jsx("div",{className:"bg-slate-100 p-4 border-b border-slate-200",children:l.jsxs("h2",{className:"font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(YT,{size:20,className:"text-primary"})," "]})}),l.jsxs("div",{className:"p-3 border-b border-slate-100 flex gap-2 overflow-x-auto",children:[l.jsx("button",{onClick:()=>_("ALL"),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${v==="ALL"?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),Tn.map($=>{const ae=v===$,S=It($);return l.jsx("button",{onClick:()=>_($),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors border ${ae?"bg-slate-800 text-white":`bg-white ${S.border} text-slate-500 hover:bg-slate-50`}`,children:$},$)})]}),l.jsx("div",{className:"p-0 divide-y divide-slate-100",children:Jt.length===0?l.jsx("div",{className:"p-8 text-center text-slate-400",children:""}):Jt.map($=>{const ae=qe($.categoryLabel),S=It(ae).badge;return l.jsxs("div",{className:"p-4 flex items-center gap-4 hover:bg-slate-50",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 flex-shrink-0",children:l.jsx(Mx,{size:16})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-slate-800",children:$.employeeName}),ae&&l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${S}`,children:ae})]}),l.jsx("span",{className:"text-xs text-slate-400 flex-shrink-0",children:new Date($.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})})]}),l.jsx("div",{className:"text-sm text-slate-600 truncate",children:$.items.map(V=>`${V.name}${V.note?`(${V.note})`:""}`).join(", ")})]})]},$.id)})})]})]}),l.jsx("footer",{className:"bg-slate-900 text-slate-400 py-6 text-center text-sm font-mono border-t border-slate-800",children:" 2025 Powered by 007"}),m&&l.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4 cursor-zoom-out backdrop-blur-sm",onClick:()=>p(null),children:[l.jsx("img",{src:m,alt:"Zoom",className:"max-w-full max-h-[90vh] rounded shadow-2xl animate-in fade-in zoom-in duration-200"}),l.jsx("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white",children:l.jsx(Us,{size:32})})]}),l.jsx("style",{children:".custom-scrollbar::-webkit-scrollbar { width: 4px; } .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }"})]})},gN=()=>{const t=new Date,e=t.getDay(),n=e===0?-6:1-e,r=new Date(t);r.setDate(t.getDate()+n);const s=[];for(let i=0;i<5;i++){const o=new Date(r);o.setDate(r.getDate()+i),s.push(o.toISOString().split("T")[0])}return s},Ot=gN(),yN=[{id:"MENU_LUNCH_MON",label:"",config:{imageUrl:"./sample-images/bento_mon.svg",shopName:"",date:Ot[0],cutoffTime:"10:30",options:[{id:"opt_1",label:"",price:100},{id:"opt_2",label:"",price:110},{id:"opt_3",label:"",price:105},{id:"opt_4",label:"",price:120},{id:"opt_5",label:"",price:100}]}},{id:"MENU_LUNCH_TUE",label:"",config:{imageUrl:"./sample-images/bento_tue.svg",shopName:"",date:Ot[1],cutoffTime:"10:30",options:[{id:"opt_6",label:"",price:180},{id:"opt_7",label:"",price:150},{id:"opt_8",label:"",price:140},{id:"opt_9",label:"",price:160},{id:"opt_10",label:"",price:130}]}},{id:"MENU_LUNCH_WED",label:"",config:{imageUrl:"./sample-images/bento_wed.svg",shopName:"",date:Ot[2],cutoffTime:"10:30",options:[{id:"opt_11",label:"",price:180},{id:"opt_12",label:"",price:150},{id:"opt_13",label:"",price:160},{id:"opt_14",label:"",price:170},{id:"opt_15",label:"",price:140}]}},{id:"MENU_LUNCH_THU",label:"",config:{imageUrl:"./sample-images/bento_thu.svg",shopName:"",date:Ot[3],cutoffTime:"10:30",options:[{id:"opt_16",label:"",price:130},{id:"opt_17",label:"",price:140},{id:"opt_18",label:"",price:150},{id:"opt_19",label:"",price:120},{id:"opt_20",label:"",price:100}]}},{id:"MENU_LUNCH_FRI",label:"",config:{imageUrl:"./sample-images/bento_fri.svg",shopName:"",date:Ot[4],cutoffTime:"10:30",options:[{id:"opt_21",label:"",price:150},{id:"opt_22",label:"",price:180},{id:"opt_23",label:"",price:140},{id:"opt_24",label:"",price:160},{id:"opt_25",label:"",price:120}]}}],vN=[{id:"MENU_DRINK_MON",label:"",config:{imageUrl:"./sample-images/drink_mon.svg",shopName:"50",date:Ot[0],cutoffTime:"14:00",options:[{id:"drink_1",label:"",price:55},{id:"drink_2",label:"",price:35},{id:"drink_3",label:"",price:60},{id:"drink_4",label:"",price:35},{id:"drink_5",label:"",price:50},{id:"drink_6",label:"",price:65}]}},{id:"MENU_DRINK_TUE",label:"",config:{imageUrl:"./sample-images/drink_tue.svg",shopName:"",date:Ot[1],cutoffTime:"14:00",options:[{id:"drink_7",label:"",price:55},{id:"drink_8",label:"",price:70},{id:"drink_9",label:"",price:65},{id:"drink_10",label:"",price:80},{id:"drink_11",label:"",price:90}]}},{id:"MENU_DRINK_WED",label:"",config:{imageUrl:"./sample-images/drink_wed.svg",shopName:"",date:Ot[2],cutoffTime:"14:00",options:[{id:"drink_12",label:"",price:55},{id:"drink_13",label:"",price:75},{id:"drink_14",label:"",price:65},{id:"drink_15",label:"",price:40},{id:"drink_16",label:"",price:60}]}},{id:"MENU_DRINK_THU",label:"",config:{imageUrl:"./sample-images/drink_thu.svg",shopName:"",date:Ot[3],cutoffTime:"14:00",options:[{id:"drink_17",label:"",price:65},{id:"drink_18",label:"",price:65},{id:"drink_19",label:"",price:70},{id:"drink_20",label:"",price:60},{id:"drink_21",label:"",price:65}]}},{id:"MENU_DRINK_FRI",label:"",config:{imageUrl:"./sample-images/drink_fri.svg",shopName:"",date:Ot[4],cutoffTime:"14:00",options:[{id:"drink_22",label:"",price:35},{id:"drink_23",label:"",price:45},{id:"drink_24",label:"",price:60},{id:"drink_25",label:"",price:35},{id:"drink_26",label:"",price:55}]}}],xN=[{id:"MENU_GROUP_1",label:"",config:{imageUrl:"./sample-images/group_1.jpg",shopName:"",date:Ot[0],cutoffTime:"16:00",options:[{id:"group_1",label:" ()",price:150},{id:"group_2",label:" ()",price:170},{id:"group_3",label:" ()",price:160},{id:"group_4",label:" ()",price:190}]}},{id:"MENU_GROUP_2",label:"",config:{imageUrl:"./sample-images/group_2.jpg",shopName:"",date:Ot[2],cutoffTime:"16:00",options:[{id:"group_5",label:" ()",price:250},{id:"group_6",label:" ()",price:120},{id:"group_7",label:" ()",price:120},{id:"group_8",label:" ()",price:180}]}},{id:"MENU_GROUP_3",label:"",config:{imageUrl:"./sample-images/group_3.jpg",shopName:"",date:Ot[4],cutoffTime:"16:00",options:[{id:"group_9",label:" ()",price:150},{id:"group_10",label:" ()",price:150},{id:"group_11",label:" ()",price:150},{id:"group_12",label:" ()",price:150}]}}],_N=[...yN,...vN,...xN],wN=[{id:"EMP_001",name:""},{id:"EMP_002",name:""},{id:"EMP_003",name:""},{id:"EMP_004",name:""},{id:"EMP_005",name:""},{id:"EMP_006",name:""},{id:"EMP_007",name:""},{id:"EMP_008",name:""},{id:"EMP_009",name:""},{id:"EMP_010",name:""}],EN=[{id:"ANN_001",content:" ",isActive:!0},{id:"ANN_002",content:" ",isActive:!0},{id:"ANN_003",content:" ",isActive:!0},{id:"ANN_004",content:" ",isActive:!0},{id:"ANN_005",content:" ",isActive:!0}],bN=async()=>{console.log("Starting full database seed...");let t=0;try{if((await ne.getMenuCategories()).length===0){console.log("Seeding menus...");for(const s of _N)await ne.addMenuCategory(s.label,s.config);t++}else console.log("Menus already exist.");if((await ne.getEmployees()).length===0){console.log("Seeding employees...");for(const s of wN)await ne.addEmployee(s);t++}else console.log("Employees already exist.");(await ne.getAnnouncements()).length===0?(console.log("Seeding announcements..."),await ne.saveAnnouncements(EN),t++):console.log("Announcements already exist."),t>0?(console.log("Database seed completed!"),alert(`


 10
 13 (553)
 5`),window.location.reload()):alert(`

`)}catch(e){console.error("Seeding failed:",e),alert(" Console")}},SN=({onLogout:t,onGoToFrontend:e,currentUser:n})=>{const[r,s]=q.useState("ORDERS"),[i,o]=q.useState({}),[u,c]=q.useState(!1);q.useEffect(()=>{ne.getAdminSettings().then(o)},[]);const h=async(g,A)=>{await ne.setGoogleBound(!0,g,A);const k=await ne.getAdminSettings();o(k)},m=()=>{switch(r){case"ORDERS":return l.jsx(kg,{});case"MENU":return l.jsx(TN,{});case"EMPLOYEES":return l.jsx(NN,{});case"ANNOUNCEMENTS":return l.jsx(IN,{});case"SYSTEM":return l.jsx(AN,{settings:i,onBind:h,currentUser:n});default:return l.jsx(kg,{})}},p=()=>{switch(r){case"ORDERS":return"";case"MENU":return"";case"EMPLOYEES":return"";case"ANNOUNCEMENTS":return"";case"SYSTEM":return"";default:return""}};return l.jsxs("div",{className:"flex h-screen bg-slate-100 relative overflow-hidden",children:[u&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>c(!1)}),l.jsxs("aside",{className:`fixed md:relative z-50 w-64 h-full bg-slate-900 text-white flex flex-col shadow-lg transition-transform duration-300 ease-in-out ${u?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:[l.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-xl font-bold tracking-wide",children:["",l.jsx("br",{}),""]}),l.jsx("p",{className:"text-xs text-slate-400 mt-2",children:""})]}),l.jsx("button",{onClick:()=>c(!1),className:"md:hidden text-slate-400 hover:text-white",children:l.jsx(Us,{size:24})})]}),l.jsxs("div",{className:"px-6 py-4 flex items-center gap-3 bg-slate-800/50 border-b border-slate-800",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-slate-300 font-bold",children:n.name.charAt(0)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-bold text-white truncate",children:n.name}),l.jsxs("div",{className:"text-xs text-emerald-400 flex items-center gap-1",children:[l.jsx(Vx,{size:10})," ",n.isSuperAdmin?"":""]})]})]}),l.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[l.jsx(Fi,{icon:l.jsx(iN,{size:20}),label:"",active:r==="ORDERS",onClick:()=>{s("ORDERS"),c(!1)}}),l.jsx(Fi,{icon:l.jsx(dN,{size:20}),label:"",active:r==="MENU",onClick:()=>{s("MENU"),c(!1)}}),l.jsx(Fi,{icon:l.jsx(cN,{size:20}),label:"",active:r==="EMPLOYEES",onClick:()=>{s("EMPLOYEES"),c(!1)}}),l.jsx(Fi,{icon:l.jsx(ZT,{size:20}),label:"",active:r==="ANNOUNCEMENTS",onClick:()=>{s("ANNOUNCEMENTS"),c(!1)}}),l.jsx(Fi,{icon:l.jsx(Dx,{size:20}),label:"",active:r==="SYSTEM",onClick:()=>{s("SYSTEM"),c(!1)}})]}),l.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-2",children:[l.jsxs("button",{onClick:e,className:"flex items-center gap-3 w-full px-4 py-2 text-slate-300 hover:text-white hover:bg-slate-800 rounded transition-colors",children:[l.jsx(Pd,{size:20}),l.jsx("span",{children:""})]}),l.jsxs("button",{onClick:t,className:"flex items-center gap-3 w-full px-4 py-2 text-red-400 hover:bg-slate-800 rounded transition-colors",children:[l.jsx(JT,{size:20}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:[l.jsxs("header",{className:"md:hidden bg-slate-900 text-white p-4 flex items-center justify-between shadow-md shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>c(!0),className:"text-white hover:text-slate-300",children:l.jsx(eN,{size:24})}),l.jsx("h2",{className:"font-bold text-lg",children:p()})]}),l.jsx("div",{className:"text-xs text-slate-400",children:n.username})]}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 w-full bg-slate-100",children:m()})]})]})},Fi=({icon:t,label:e,active:n,onClick:r})=>l.jsxs("button",{onClick:r,className:`flex items-center gap-3 w-full px-4 py-3 rounded transition-colors ${n?"bg-primary text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[t,l.jsx("span",{className:"font-medium",children:e})]}),kg=()=>{const[t,e]=q.useState([]),[n,r]=q.useState([]),[s,i]=q.useState("TODAY"),[o,u]=q.useState("CARD"),[c,h]=q.useState(""),[m,p]=q.useState("WEEK"),[g,A]=q.useState(new Date),[k,R]=q.useState({start:"",end:""}),[P,T]=q.useState(null),w=q.useRef(null),I=q.useRef(null),[O,M]=q.useState([]),[F,x]=q.useState(null);q.useEffect(()=>{(async()=>{const[V,Q]=await Promise.all([ne.getOrders(),ne.getMenuCategories()]);e(V),e(V),r(Q);const te=Array.from(new Set(Q.map(_e=>qe(_e.label))));M(te)})()},[]);const v=new Date().toISOString().split("T")[0],_=S=>{const V=new Date(S),Q=V.getDay(),te=V.getDate()-Q+(Q===0?-6:1);return new Date(V.setDate(te))},E=S=>{const V=_(S);return Array.from({length:5}).map((Q,te)=>{const _e=new Date(V);return _e.setDate(V.getDate()+te),_e.toISOString().split("T")[0]})},N=S=>{const V=S.getFullYear(),Q=S.getMonth(),te=new Date(V,Q,1),_e=[];for(;te.getMonth()===Q;)_e.push(new Date(te).toISOString().split("T")[0]),te.setDate(te.getDate()+1);return _e},C=S=>{const V=new Date(g);m==="WEEK"?V.setDate(V.getDate()+S*7):m==="MONTH"&&V.setMonth(V.getMonth()+S),A(V)},b=S=>c===""?!0:qe(S.categoryLabel)===c,Ee=t.filter(S=>S.dateStr===v).filter(b).sort((S,V)=>V.timestamp-S.timestamp),ze=t.filter(S=>S.dateStr===v),St=ze.reduce((S,V)=>{const Q=qe(V.categoryLabel)||"";return S[Q]||(S[Q]={amount:0,count:0}),S[Q].amount+=V.totalAmount,S[Q].count+=1,S},{}),L=ze.reduce((S,V)=>S+V.totalAmount,0),U=ze.length,Y=(()=>{let S=[];return m==="WEEK"?S=t.filter(V=>V.dateStr<v):m==="MONTH"?S=t.filter(V=>V.dateStr.startsWith(g.toISOString().slice(0,7))):S=k.start&&k.end?t.filter(V=>V.dateStr>=k.start&&V.dateStr<=k.end):[],S.filter(b)})(),ee=P?t.filter(S=>S.dateStr===P).filter(b):[],ue=ee.reduce((S,V)=>S+V.totalAmount,0),G=S=>{var V,Q,te;try{(V=S.current)==null||V.showPicker()}catch{(Q=S.current)==null||Q.focus(),(te=S.current)==null||te.click()}},xe=(S,V)=>{if(!V)return;const Q=n.find(te=>te.config.date===S&&te.label===V);return Q==null?void 0:Q.config.imageUrl},[Me,be]=q.useState(!1),[ce,Te]=q.useState(null),[Xt,Pr]=q.useState([]);q.useEffect(()=>{ne.getEmployees().then(Pr)},[]);const Hn=async S=>{await ne.toggleOrderPayment(S),e(await ne.getOrders())},Tn=async S=>{window.confirm("")&&(await ne.deleteOrder(S),e(await ne.getOrders()),P&&T(null))},Jt=S=>{Te(JSON.parse(JSON.stringify(S))),be(!0)},un=async()=>{if(!ce)return;const S=ce.items.reduce((Q,te)=>Q+te.price,0),V={...ce,totalAmount:S};await ne.saveOrder(V),e(await ne.getOrders()),be(!1),Te(null)},Dr=(S,V,Q)=>{if(!ce)return;const te=[...ce.items];te[S]={...te[S],[V]:Q},Te({...ce,items:te})},Vr=S=>{if(!ce)return;const V=ce.items.filter((Q,te)=>te!==S);Te({...ce,items:V})},$=()=>{if(!ce)return;const S={id:Date.now().toString(),name:"",price:0,note:""};Te({...ce,items:[...ce.items,S]})},ae=()=>{var S;return!Me||!ce?null:l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"bg-slate-900 text-white p-4 flex justify-between items-center",children:[l.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(sr,{size:18})," "]}),l.jsx("button",{onClick:()=>be(!1),className:"text-slate-400 hover:text-white",children:l.jsx(Us,{size:24})})]}),l.jsxs("div",{className:"p-6 overflow-y-auto space-y-4 flex-1",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("select",{value:((S=Xt.find(V=>V.name===ce.employeeName))==null?void 0:S.id)||"",onChange:V=>{const Q=Xt.find(te=>te.id===V.target.value);Q&&Te({...ce,employeeName:Q.name})},className:"w-full p-2 border border-slate-300 rounded",children:[l.jsx("option",{value:"",children:"..."}),Xt.map(V=>l.jsx("option",{value:V.id,children:V.name},V.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("select",{value:ce.status,onChange:V=>Te({...ce,status:V.target.value}),className:"w-full p-2 border border-slate-300 rounded",children:[l.jsx("option",{value:"PENDING",children:""}),l.jsx("option",{value:"CONFIRMED",children:""}),l.jsx("option",{value:"COMPLETED",children:""}),l.jsx("option",{value:"CANCELLED",children:""})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-sm font-bold text-slate-700",children:""}),l.jsxs("button",{onClick:$,className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded font-bold hover:bg-emerald-200 flex items-center gap-1",children:[l.jsx(ti,{size:12})," "]})]}),l.jsx("div",{className:"space-y-2",children:ce.items.map((V,Q)=>l.jsxs("div",{className:"flex gap-2 items-start bg-slate-50 p-2 rounded border border-slate-200",children:[l.jsxs("div",{className:"flex-1 space-y-1",children:[l.jsx("input",{value:V.name,onChange:te=>Dr(Q,"name",te.target.value),className:"w-full p-1 text-sm border border-slate-300 rounded",placeholder:""}),l.jsx("input",{value:V.note,onChange:te=>Dr(Q,"note",te.target.value),className:"w-full p-1 text-xs border border-slate-300 rounded text-slate-500",placeholder:" ()"})]}),l.jsx("div",{className:"w-20",children:l.jsx("input",{type:"number",value:V.price,onChange:te=>Dr(Q,"price",Number(te.target.value)),className:"w-full p-1 text-sm border border-slate-300 rounded text-right font-mono",placeholder:""})}),l.jsx("button",{onClick:()=>Vr(Q),className:"p-1.5 text-slate-400 hover:text-red-500",children:l.jsx(qr,{size:16})})]},Q))})]}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-600",children:":"}),l.jsxs("span",{className:"text-2xl font-bold text-primary",children:["$",ce.items.reduce((V,Q)=>V+Q.price,0)]})]})]}),l.jsxs("div",{className:"p-4 bg-slate-50 flex gap-4 border-t border-slate-200",children:[l.jsxs("button",{onClick:un,className:"flex-1 bg-primary text-white py-2 rounded font-bold hover:bg-blue-700 shadow-sm flex items-center justify-center gap-2",children:[l.jsx(mf,{size:18})," "]}),l.jsx("button",{onClick:()=>be(!1),className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded font-bold hover:bg-slate-100",children:""})]})]})})};return l.jsxs("div",{className:"space-y-6 relative",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>i("TODAY"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${s==="TODAY"?"bg-primary text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:""}),l.jsx("button",{onClick:()=>i("HISTORY"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${s==="HISTORY"?"bg-primary text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:""})]})]}),s==="TODAY"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-2",children:[l.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-white shadow-md flex flex-col justify-between relative overflow-hidden",children:[l.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10",children:l.jsx(WT,{size:48})}),l.jsx("div",{className:"text-sm text-slate-400 font-bold mb-1",children:""}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-2xl font-bold tracking-tight",children:["$",L.toLocaleString()]}),l.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[U," "]})]})]}),O.map(S=>{const V=It(S),Q=St[S]||{amount:0,count:0};return l.jsxs("div",{className:`rounded-xl p-4 shadow-sm border flex flex-col justify-between ${V.bg} ${V.border}`,children:[l.jsxs("div",{className:"text-xs font-bold opacity-70 mb-1 flex items-center gap-1",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${V.tab.replace("data-[state=active]:","")}`}),S]}),l.jsxs("div",{children:[l.jsxs("div",{className:`text-xl font-bold ${V.text}`,children:["$",Q.amount.toLocaleString()]}),l.jsxs("div",{className:"text-xs opacity-60 font-bold",children:[Q.count," "]})]})]},S)})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-500 mr-2 flex items-center gap-1",children:[l.jsx(Cg,{size:14})," :"]}),l.jsx("button",{onClick:()=>h(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${c===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),O.map(S=>{const V=c===S,Q=It(S);return l.jsx("button",{onClick:()=>h(S),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${V?`${Q.bg} ${Q.text} ${Q.border}`:`bg-white ${Q.border} text-slate-500 hover:${Q.bg}`}`,children:S},S)})]}),l.jsx("div",{className:"flex justify-end md:justify-start",children:l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded ${o==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(is,{size:18})}),l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded ${o==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(ei,{size:18})})]})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[l.jsx("div",{className:`${o==="LIST"?"md:hidden":""}`,children:l.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[Ee.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-8",children:""}),Ee.map(S=>{const V=It(S.categoryLabel),Q=xe(S.dateStr,S.categoryLabel);return l.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-bold text-lg",children:S.employeeName.charAt(0)}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-slate-700 leading-none text-base",children:S.employeeName}),S.categoryLabel&&l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${V.badge} w-fit mt-0.5`,children:S.categoryLabel})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>Jt(S),className:"p-1.5 text-slate-400 hover:text-primary hover:bg-blue-50 rounded transition-colors",children:l.jsx(sr,{size:16})}),l.jsx("button",{onClick:()=>Tn(S.id),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",children:l.jsx(qr,{size:16})})]})]}),l.jsxs("div",{className:"flex gap-3 mb-3",children:[Q&&l.jsxs("div",{className:"w-16 h-16 rounded-md bg-slate-100 overflow-hidden border border-slate-200 flex-shrink-0 cursor-zoom-in relative group",onClick:()=>x(Q),children:[l.jsx("img",{src:Q,alt:"Menu",className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all flex items-center justify-center",children:l.jsx(Ox,{size:14,className:"text-white opacity-0 group-hover:opacity-100"})})]}),l.jsx("div",{className:"flex-1 space-y-1",children:S.items.map((te,_e)=>l.jsxs("div",{className:"text-sm text-slate-600 flex justify-between items-start",children:[l.jsxs("span",{children:[te.name," ",te.note&&l.jsxs("span",{className:"text-xs text-slate-400",children:["(",te.note,")"]})]}),l.jsxs("span",{className:"font-mono font-medium",children:["$",te.price]})]},_e))})]}),l.jsxs("div",{className:"pt-3 border-t border-slate-100 flex justify-between items-center",children:[l.jsx("div",{className:"flex flex-col",children:l.jsxs("span",{className:"font-bold text-primary text-xl",children:["$",S.totalAmount]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>Hn(S.id),className:`px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-1 transition-all ${S.isPaid?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[S.isPaid?l.jsx(Rd,{size:14}):l.jsx(Ag,{size:14}),S.isPaid?"":""]}),l.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 text-xs rounded-full font-bold",children:S.status})]})]})]},S.id)})]})}),l.jsx("div",{className:`hidden ${o==="LIST"?"md:block":""}`,children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-semibold text-slate-600 w-24",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-right",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-center",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-center",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[Ee.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400",children:""})}),Ee.map(S=>{const V=It(S.categoryLabel),Q=xe(S.dateStr,S.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 text-slate-500 text-sm font-mono",children:new Date(S.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}),l.jsx("td",{className:"p-4",children:Q?l.jsx("div",{className:"w-10 h-10 rounded bg-slate-100 border border-slate-200 overflow-hidden cursor-zoom-in",onClick:()=>x(Q),children:l.jsx("img",{src:Q,alt:"Menu",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-10 h-10 rounded bg-slate-50 border border-slate-100 flex items-center justify-center text-slate-300",children:l.jsx(Vo,{size:16})})}),l.jsx("td",{className:"p-4 font-bold text-slate-700",children:S.employeeName}),l.jsx("td",{className:"p-4",children:S.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${V.badge}`,children:S.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsx("td",{className:"p-4 text-sm text-slate-600",children:S.items.map(te=>`${te.name}${te.note?`(${te.note})`:""}`).join(", ")}),l.jsxs("td",{className:"p-4 font-bold text-primary text-right",children:["$",S.totalAmount]}),l.jsx("td",{className:"p-4 text-center",children:l.jsxs("button",{onClick:()=>Hn(S.id),className:`mx-auto px-3 py-1 rounded-full text-xs font-bold flex items-center justify-center gap-1 transition-all ${S.isPaid?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[S.isPaid?l.jsx(Rd,{size:12}):l.jsx(Ag,{size:12}),S.isPaid?"":""]})}),l.jsxs("td",{className:"p-4 text-center flex items-center justify-center gap-2",children:[l.jsx("button",{onClick:()=>Jt(S),className:"p-1 text-slate-400 hover:text-primary",children:l.jsx(sr,{size:16})}),l.jsx("button",{onClick:()=>Tn(S.id),className:"p-1 text-slate-400 hover:text-red-500",children:l.jsx(qr,{size:16})})]})]},S.id)})]})]})})]})]}),s==="HISTORY"&&l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-500 mr-2 flex items-center gap-1",children:[l.jsx(Cg,{size:14})," :"]}),l.jsx("button",{onClick:()=>h(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${c===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),O.map(S=>{const V=c===S,Q=It(S);return l.jsx("button",{onClick:()=>h(S),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${V?`${Q.bg} ${Q.text} ${Q.border}`:`bg-white ${Q.border} text-slate-500 hover:${Q.bg}`}`,children:S},S)})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[l.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1 self-start",children:[l.jsx("button",{onClick:()=>p("WEEK"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="WEEK"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""}),l.jsx("button",{onClick:()=>p("MONTH"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="MONTH"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""}),l.jsx("button",{onClick:()=>p("CUSTOM"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="CUSTOM"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""})]}),m!=="CUSTOM"?l.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>C(-1),className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Rx,{size:18})}),l.jsx("span",{className:"font-mono font-bold text-slate-700",children:m==="WEEK"?`${_(g).toLocaleDateString()} - ${(()=>{const S=_(g);return S.setDate(S.getDate()+4),S.toLocaleDateString()})()}`:g.toLocaleDateString("zh-TW",{year:"numeric",month:"long"})}),l.jsx("button",{onClick:()=>C(1),className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Px,{size:18})})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"relative group",onClick:()=>G(w),children:[l.jsx(Ha,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-primary transition-colors cursor-pointer",size:16}),l.jsx("input",{ref:w,type:"date",value:k.start,onClick:()=>G(w),onChange:S=>R(V=>({...V,start:S.target.value})),className:"pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary outline-none shadow-sm cursor-pointer hover:border-primary transition-colors w-40"})]}),l.jsx("span",{className:"text-slate-400 font-bold",children:"-"}),l.jsxs("div",{className:"relative group",onClick:()=>G(I),children:[l.jsx(Ha,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-primary transition-colors cursor-pointer",size:16}),l.jsx("input",{ref:I,type:"date",value:k.end,onClick:()=>G(I),onChange:S=>R(V=>({...V,end:S.target.value})),className:"pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary outline-none shadow-sm cursor-pointer hover:border-primary transition-colors w-40"})]})]})]}),m==="WEEK"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:E(g).map((S,V)=>{const Q=t.filter(_e=>_e.dateStr===S).filter(b),te=Q.reduce((_e,Nn)=>_e+Nn.totalAmount,0);return l.jsxs("div",{className:`border rounded-lg p-3 ${S===v?"border-amber-400 bg-amber-50":"border-slate-200 bg-slate-50"}`,children:[l.jsxs("div",{className:"font-bold text-slate-700 mb-2 border-b border-slate-200 pb-1 flex justify-between",children:[l.jsx("span",{children:["","","","",""][V]}),l.jsx("span",{className:"text-xs font-normal text-slate-500",children:S.slice(5)})]}),Q.length===0?l.jsx("div",{className:"text-xs text-slate-400 text-center py-4",children:""}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-xs text-slate-500",children:[": ",Q.length]}),l.jsxs("div",{className:"text-sm font-bold text-primary",children:[": $",te]}),l.jsx("button",{onClick:()=>T(S),className:"w-full text-xs bg-white border border-slate-300 py-1 rounded hover:bg-slate-100 font-bold text-slate-600",children:""})]})]},S)})}),m==="MONTH"&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:N(g).map(S=>{const V=t.filter(_e=>_e.dateStr===S).filter(b),Q=V.reduce((_e,Nn)=>_e+Nn.totalAmount,0),te=V.length>0;return l.jsxs("div",{onClick:()=>te&&T(S),className:`border rounded p-2 min-h-[80px] flex flex-col justify-between cursor-pointer transition-colors ${te?"bg-white border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-100 text-slate-300"}`,children:[l.jsx("div",{className:"text-xs font-mono text-right",children:S.slice(8)}),te&&l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-bold text-slate-700",children:[V.length," "]}),l.jsxs("div",{className:"text-xs text-primary",children:["$",Q]})]})]},S)})}),m==="CUSTOM"&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600 text-center",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600 text-center",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:Y.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-400",children:""})}):Y.map(S=>{const V=It(S.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-3 text-sm text-slate-500 font-mono",children:S.dateStr}),l.jsx("td",{className:"p-3 text-sm font-bold text-slate-700",children:S.employeeName}),l.jsx("td",{className:"p-3",children:S.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${V.badge}`,children:S.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsxs("td",{className:"p-3 text-sm text-slate-600",children:[S.items[0].name,"..."]}),l.jsxs("td",{className:"p-3 text-sm font-bold text-primary",children:["$",S.totalAmount]}),l.jsx("td",{className:"p-3 text-center",children:l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${S.isPaid?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:S.isPaid?"":""})}),l.jsxs("td",{className:"p-3 text-center flex items-center justify-center gap-2",children:[l.jsx("button",{onClick:()=>Jt(S),className:"p-1 text-slate-400 hover:text-primary",children:l.jsx(sr,{size:16})}),l.jsx("button",{onClick:()=>Tn(S.id),className:"p-1 text-slate-400 hover:text-red-500",children:l.jsx(qr,{size:16})})]})]},S.id)})})]})})]}),P&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[80vh] flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"bg-slate-900 text-white p-4 flex justify-between items-center",children:[l.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(Ha,{size:18})," ",P,"  ",c!==""&&l.jsxs("span",{className:"text-xs bg-slate-700 px-2 py-0.5 rounded ml-2",children:[": ",c]})]}),l.jsx("button",{onClick:()=>T(null),className:"text-slate-400 hover:text-white",children:l.jsx(Us,{size:24})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-0",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-right",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-center",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-center",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:ee.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400",children:""})}):ee.map(S=>{const V=qe(S.categoryLabel),Q=It(V),te=xe(S.dateStr,S.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 text-xs font-mono text-slate-500",children:new Date(S.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}),l.jsx("td",{className:"p-4",children:te?l.jsx("div",{className:"w-8 h-8 rounded bg-slate-100 border border-slate-200 overflow-hidden cursor-zoom-in",onClick:()=>x(te),children:l.jsx("img",{src:te,alt:"Menu",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-8 h-8 rounded bg-slate-50 border border-slate-100 flex items-center justify-center text-slate-300",children:l.jsx(Vo,{size:14})})}),l.jsx("td",{className:"p-4 font-bold text-slate-800",children:S.employeeName}),l.jsx("td",{className:"p-4",children:V?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${Q.badge}`,children:V}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsx("td",{className:"p-4 text-sm text-slate-600",children:S.items.map(_e=>l.jsxs("div",{className:"flex gap-1",children:[l.jsx("span",{children:_e.name}),_e.note&&l.jsxs("span",{className:"text-xs text-slate-400",children:["(",_e.note,")"]})]},_e.name))}),l.jsxs("td",{className:"p-4 font-bold text-primary text-right",children:["$",S.totalAmount]}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("button",{onClick:()=>Hn(S.id),className:`mx-auto px-2 py-0.5 rounded-full text-[10px] font-bold transition-all border ${S.isPaid?"bg-emerald-100 text-emerald-700 border-emerald-200 hover:bg-emerald-200":"bg-slate-100 text-slate-500 border-slate-200 hover:bg-slate-200"}`,children:S.isPaid?"":""})}),l.jsxs("td",{className:"p-4 text-center flex items-center justify-center gap-2",children:[l.jsx("button",{onClick:()=>Jt(S),className:"p-1 text-slate-400 hover:text-primary",children:l.jsx(sr,{size:16})}),l.jsx("button",{onClick:()=>Tn(S.id),className:"p-1 text-slate-400 hover:text-red-500",children:l.jsx(qr,{size:16})})]})]},S.id)})})]})}),l.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-between items-center",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("span",{className:"text-sm text-slate-500",children:[" ",ee.length," "]}),l.jsxs("span",{className:"text-sm text-emerald-600 font-bold",children:[": $",ee.filter(S=>S.isPaid).reduce((S,V)=>S+V.totalAmount,0)]}),l.jsxs("span",{className:"text-sm text-slate-400",children:[": $",ee.filter(S=>!S.isPaid).reduce((S,V)=>S+V.totalAmount,0)]})]}),l.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[": ",l.jsxs("span",{className:"text-primary",children:["$",ue]})]})]})]})}),F&&l.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4 cursor-zoom-out backdrop-blur-sm",onClick:()=>x(null),children:[l.jsx("img",{src:F,alt:"Zoom",className:"max-w-full max-h-[90vh] rounded shadow-2xl animate-in fade-in zoom-in duration-200"}),l.jsx("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white",children:l.jsx(Us,{size:32})})]}),l.jsx(ae,{})]})},TN=()=>{const[t,e]=q.useState([]),[n,r]=q.useState("ACTIVE"),[s,i]=q.useState(""),[o,u]=q.useState("CARD"),[c,h]=q.useState(!1),[m,p]=q.useState(null),[g,A]=q.useState(new Date),[k,R]=q.useState(""),[P,T]=q.useState({categoryLabel:"",shopName:"",date:new Date().toISOString().split("T")[0],cutoffTime:"",imageFile:null,imageUrl:""}),w=new Date().toISOString().split("T")[0];q.useEffect(()=>{ne.getMenuCategories().then(e)},[]);const I=async()=>{try{if(!P.shopName){alert("");return}let L=P.imageUrl;if(P.imageFile)try{L=await M(P.imageFile)}catch{alert("");return}if(L&&L.length>5e4){alert(" ( 50,000 )");return}const U={imageUrl:L,shopName:P.shopName,date:P.date,cutoffTime:P.cutoffTime};await O(U)}catch(L){console.error(L),alert(`
: `+L.message)}},O=async L=>{m?await ne.updateMenuCategory(m,P.categoryLabel,L):await ne.addMenuCategory(P.categoryLabel,L),e(await ne.getMenuCategories()),h(!1),_()},M=L=>new Promise((U,W)=>{const Y=new FileReader;Y.readAsDataURL(L),Y.onload=ee=>{var G;const ue=new Image;ue.src=(G=ee.target)==null?void 0:G.result,ue.onload=()=>{let be=ue.width,ce=ue.height;be>ce?be>400&&(ce*=400/be,be=400):ce>400&&(be*=400/ce,ce=400);const Te=document.createElement("canvas");Te.width=be,Te.height=ce;const Xt=Te.getContext("2d");if(!Xt){W(new Error("Canvas context not supported"));return}Xt.drawImage(ue,0,0,be,ce);const Pr=Te.toDataURL("image/jpeg",.5);U(Pr)},ue.onerror=xe=>W(xe)},Y.onerror=ee=>W(ee)}),F=async L=>{const U=t.find(ee=>ee.id===L);if(!U)return;const Y=(await ne.getOrders()).filter(ee=>ee.dateStr===U.config.date&&ee.categoryLabel===U.label);if(Y.length>0){const ee=` ${U.config.date}${U.label} ${Y.length} 



`;confirm(ee)&&(await ne.deleteOrdersByContext(U.config.date,U.label),await ne.deleteMenuCategory(L),e(await ne.getMenuCategories()),alert(""))}else confirm("")&&(await ne.deleteMenuCategory(L),e(await ne.getMenuCategories()))},x=L=>{if(L.config.date<w){alert(`
`);return}h(!0),p(L.id),T({categoryLabel:L.label,shopName:L.config.shopName,date:L.config.date,cutoffTime:L.config.cutoffTime||"",imageUrl:L.config.imageUrl,imageFile:null})},v=L=>{h(!0),p(null),T({categoryLabel:L.label,shopName:L.config.shopName,date:w,cutoffTime:L.config.cutoffTime||"",imageUrl:L.config.imageUrl,imageFile:null})},_=()=>{p(null),T({categoryLabel:"",shopName:"",date:w,cutoffTime:"",imageFile:null,imageUrl:""})},E=L=>{const U=new Date(L),W=U.getDay(),Y=U.getDate()-W+(W===0?-6:1);return new Date(U.setDate(Y))},N=L=>{const U=E(L);return Array.from({length:5}).map((W,Y)=>{const ee=new Date(U);return ee.setDate(U.getDate()+Y),ee.toISOString().split("T")[0]})},C=Array.from(new Set(t.map(L=>qe(L.label)))),b=t.filter(L=>L.config.date>=w).filter(L=>s===""?!0:qe(L.label)===s),Ee=t.filter(L=>L.config.date<w),ze=N(g),St=Ee.filter(L=>ze.includes(L.config.date));return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""})}),l.jsxs("div",{className:"flex border-b border-slate-200",children:[l.jsx("button",{onClick:()=>r("ACTIVE"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${n==="ACTIVE"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700"}`,children:" ()"}),l.jsx("button",{onClick:()=>r("HISTORY"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${n==="HISTORY"?"border-slate-500 text-slate-700":"border-transparent text-slate-500 hover:text-slate-700"}`,children:" ()"})]}),c?l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-2xl mx-auto",children:[l.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[l.jsx(sr,{className:"text-primary"})," ",m?"":""]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"1.  (Tab)"}),l.jsxs("select",{value:qe(P.categoryLabel),onChange:L=>T({...P,categoryLabel:L.target.value}),className:"w-full p-2.5 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",children:[C.length===0&&l.jsx("option",{value:"",children:" ()"}),C.map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"2. "}),l.jsx("input",{value:P.shopName,onChange:L=>T({...P,shopName:L.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",placeholder:": "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"3. "}),l.jsx("input",{type:"date",value:P.date,onChange:L=>T({...P,date:L.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary"})]})]}),"              ",l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["4. ",qe(P.categoryLabel)===""?"":" ()"]}),qe(P.categoryLabel)===""?l.jsx("input",{type:"datetime-local",value:P.cutoffTime.replace(" ","T"),onChange:L=>{const W=L.target.value.replace("T"," ");T({...P,cutoffTime:W})},className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary"}):l.jsxs("select",{value:P.cutoffTime,onChange:L=>T({...P,cutoffTime:L.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"",children:""}),Array.from({length:21}).map((L,U)=>{const W=480+U*30,Y=Math.floor(W/60),ee=W%60,ue=`${Y.toString().padStart(2,"0")}:${ee.toString().padStart(2,"0")}`;return l.jsx("option",{value:ue,children:ue},ue)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"5. "}),l.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:bg-slate-50 transition-colors relative",children:[l.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/gif, image/bmp",onChange:L=>{var W;const U=(W=L.target.files)==null?void 0:W[0];if(U){if(U.size>2*1024*1024){alert(" 2MB");return}const Y=new FileReader;Y.onloadend=()=>{T({...P,imageFile:U,imageUrl:Y.result})},Y.readAsDataURL(U)}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),P.imageFile||P.imageUrl?l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("img",{src:P.imageUrl,alt:"Preview",className:"h-32 object-contain mb-2 rounded shadow-sm"}),l.jsx("div",{className:"text-sm text-slate-600 font-bold",children:P.imageFile?`: ${P.imageFile.name}`:""}),l.jsx("span",{className:"text-xs text-slate-500 mt-1",children:""})]}):l.jsxs("div",{className:"text-slate-400 flex flex-col items-center",children:[l.jsx(lN,{size:32,className:"mb-2"}),"   ",l.jsx("span",{className:"text-xs mt-1",children:"JPG, PNG, GIF, BMP (Max 2MB)"})]})]})]}),l.jsxs("div",{className:"flex gap-4 pt-4",children:[l.jsx("button",{onClick:I,className:"flex-1 bg-primary text-white py-2 rounded-lg font-bold hover:bg-blue-700 transition-colors shadow-sm",children:m?"":""}),l.jsx("button",{onClick:()=>{h(!1),_()},className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded-lg font-bold hover:bg-slate-50 transition-colors",children:""})]})]})]}):l.jsxs(l.Fragment,{children:[n==="ACTIVE"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>i(""),className:`px-4 py-1.5 rounded-full text-sm font-bold transition-all ${s===""?"bg-slate-800 text-white":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:""}),C.map(L=>{const U=s===L,W=It(L);return l.jsx("button",{onClick:()=>i(L),className:`px-4 py-1.5 rounded-full text-sm font-bold transition-all border-2 ${U?`${W.bg} ${W.text} ${W.border}`:`bg-white ${W.border} text-slate-500 hover:${W.bg}`}`,children:L},L)})]}),l.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[l.jsxs("button",{onClick:()=>{_(),h(!0)},className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors shadow-sm font-bold",children:[l.jsx(ti,{size:18})," "]}),l.jsxs("div",{className:"hidden md:flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded ${o==="LIST"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(ei,{size:18})}),l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded ${o==="CARD"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(is,{size:18})})]})]})]}),l.jsx("div",{className:`${o==="LIST"?"md:hidden":""}`,children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-12",children:""}),b.map(L=>{const U=qe(L.label),W=It(U);return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden group hover:shadow-md transition-all",children:[l.jsxs("div",{className:`px-4 py-2 border-b flex justify-between items-center ${W.bg} ${W.border}`,children:[l.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${W.badge}`,children:U}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>x(L),className:"p-1.5 bg-white rounded-full text-slate-500 hover:text-primary shadow-sm",children:l.jsx(sr,{size:14})}),l.jsx("button",{onClick:()=>F(L.id),className:"p-1.5 bg-white rounded-full text-slate-500 hover:text-red-500 shadow-sm",children:l.jsx(qr,{size:14})})]})]}),l.jsxs("div",{className:"aspect-video bg-slate-100 relative",children:[L.config.imageUrl?l.jsx("img",{src:L.config.imageUrl,alt:"Menu",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(Vo,{size:32})}),l.jsxs("div",{className:"absolute bottom-0 inset-x-0 bg-gradient-to-t from-black/70 to-transparent p-3 text-white",children:[l.jsx("h4",{className:"font-bold truncate",children:L.config.shopName}),l.jsxs("div",{className:"text-xs opacity-90",children:[L.config.date," ",L.config.cutoffTime&&` ${L.config.cutoffTime} `]})]})]})]},L.id)})]})}),l.jsx("div",{className:`hidden ${o==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:" / "}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 w-32",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-right",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[b.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-400",children:""})}),b.map(L=>{const U=qe(L.label),W=It(U);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4",children:l.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${W.badge}`,children:U})}),l.jsxs("td",{className:"p-4",children:[l.jsx("div",{className:"font-bold text-slate-800",children:L.config.shopName}),l.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(Ha,{size:14})," ",L.config.date,L.config.cutoffTime&&l.jsxs("span",{className:"text-red-500 font-bold ml-2",children:["(",L.config.cutoffTime," )"]})]})]}),l.jsx("td",{className:"p-4",children:l.jsx("div",{className:"w-16 h-10 bg-slate-100 rounded overflow-hidden border border-slate-200",children:L.config.imageUrl?l.jsx("img",{src:L.config.imageUrl,className:"w-full h-full object-cover"}):null})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>x(L),className:"px-3 py-1.5 border border-slate-300 rounded text-sm hover:bg-primary hover:text-white hover:border-primary transition-colors",children:""}),l.jsx("button",{onClick:()=>F(L.id),className:"px-3 py-1.5 border border-slate-300 rounded text-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-colors",children:""})]})]},L.id)})]})]})})})]}),n==="HISTORY"&&l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 border-b border-slate-100 pb-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-500 flex items-center mr-2",children:":"}),l.jsx("button",{onClick:()=>R(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${k===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),C.map(L=>{const U=k===L,W=It(L);return l.jsx("button",{onClick:()=>R(L),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${U?`${W.bg} ${W.text} ${W.border}`:`bg-white ${W.border} text-slate-500 hover:${W.bg}`}`,children:L},L)})]}),l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(QT,{size:18})," "]}),l.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>{const L=new Date(g);L.setDate(L.getDate()-7),A(L)},className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Rx,{size:18})}),l.jsxs("span",{className:"font-mono text-sm font-bold text-slate-700",children:[E(g).toLocaleDateString()," - ",(()=>{const L=E(g);return L.setDate(L.getDate()+4),L.toLocaleDateString()})()]}),l.jsx("button",{onClick:()=>{const L=new Date(g);L.setDate(L.getDate()+7),A(L)},className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Px,{size:18})})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:N(g).map((L,U)=>{const W=St.filter(Y=>Y.config.date===L&&(k===""||qe(Y.label)===k));return l.jsxs("div",{className:"border border-slate-200 rounded-lg bg-slate-50 min-h-[150px] flex flex-col",children:[l.jsxs("div",{className:"p-2 border-b border-slate-200 bg-white rounded-t-lg text-center",children:[l.jsx("div",{className:"text-sm font-bold text-slate-700",children:["","","","",""][U]}),l.jsx("div",{className:"text-xs text-slate-400",children:L})]}),l.jsx("div",{className:"p-2 space-y-2 flex-1",children:W.length===0?l.jsx("div",{className:"text-center text-xs text-slate-300 py-4",children:""}):W.map(Y=>{const ee=qe(Y.label),ue=It(ee);return l.jsxs("div",{className:"bg-white border border-slate-200 rounded p-2 shadow-sm text-xs cursor-pointer hover:border-primary group hover:bg-blue-50 transition-colors",onClick:()=>v(Y),title:"",children:[l.jsx("div",{className:`inline-block px-1.5 py-0.5 rounded-full text-[10px] font-bold mb-1 ${ue.badge}`,children:ee}),l.jsx("div",{className:"font-bold text-slate-700 truncate",children:Y.config.shopName}),l.jsx("div",{className:"hidden group-hover:block text-[10px] text-primary mt-1 text-center font-bold",children:""})]},Y.id)})})]},L)})})]})]})]})},NN=()=>{const[t,e]=q.useState([]),[n,r]=q.useState({}),[s,i]=q.useState("CARD"),[o,u]=q.useState(!1),[c,h]=q.useState(null),[m,p]=q.useState(""),[g,A]=q.useState(null),[k,R]=q.useState(!1);q.useEffect(()=>{P()},[]);const P=async()=>{const _=await ne.getEmployees();e(_);const E=await ne.getOrders(),N=new Date().toISOString().slice(0,7),C={};_.forEach(b=>{const Ee=E.filter(ze=>ze.employeeName===b.name&&ze.dateStr.startsWith(N)).length;C[b.id]=Ee}),r(C),R(!1)},T=async()=>{if(!m.trim()){alert("");return}c?await ne.updateEmployee({id:c,name:m}):await ne.addEmployee({id:Date.now().toString(),name:m}),P(),u(!1),p(""),h(null)},w=async _=>{confirm("")&&(await ne.deleteEmployee(_),P())},I=_=>{u(!0),h(_.id),p(_.name)},O=()=>{const _=[...t].sort((E,N)=>E.name.localeCompare(N.name,"zh-TW"));e(_),R(!0)},M=(_,E)=>{A(E),_.dataTransfer.effectAllowed="move"},F=(_,E)=>{if(_.preventDefault(),g===null||g===E)return;const N=[...t],C=N[g];N.splice(g,1),N.splice(E,0,C),e(N),A(E),R(!0)},x=()=>{A(null)},v=async()=>{await ne.saveEmployees(t),R(!1),alert("")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>i("CARD"),className:`p-2 rounded ${s==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(is,{size:18})}),l.jsx("button",{onClick:()=>i("LIST"),className:`p-2 rounded ${s==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(ei,{size:18})})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-wrap gap-4 items-center justify-between",children:[k&&l.jsxs("button",{onClick:v,className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg font-bold shadow animate-pulse",children:[l.jsx(mf,{size:18})," "]}),l.jsxs("div",{className:"flex gap-2 ml-auto",children:[l.jsxs("button",{onClick:O,className:"flex items-center gap-2 bg-white border border-slate-300 px-4 py-2 rounded-lg hover:bg-slate-50 text-slate-700 font-medium",children:[l.jsx(BT,{size:16})," "]}),l.jsxs("button",{onClick:()=>{u(!0),h(null),p("")},className:"flex items-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 font-bold shadow-sm",children:[l.jsx(ti,{size:18})," "]})]})]}),o&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-md mx-auto",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:c?"":""}),l.jsx("input",{value:m,onChange:_=>p(_.target.value),className:"w-full p-2 border border-slate-300 rounded mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:T,className:"flex-1 bg-primary text-white py-2 rounded font-bold",children:""}),l.jsx("button",{onClick:()=>u(!1),className:"flex-1 border border-slate-300 py-2 rounded font-bold",children:""})]})]}),l.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[l.jsx(fN,{size:12})," "]}),l.jsx("div",{className:`${s==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((_,E)=>l.jsxs("div",{draggable:!o,onDragStart:N=>M(N,E),onDragOver:N=>F(N,E),onDragEnd:x,className:`relative p-4 rounded-xl border cursor-move transition-all flex flex-col items-center text-center ${E%2===0?"bg-white border-slate-200":"bg-blue-50 border-blue-200"} hover:shadow-md hover:scale-[1.02]`,children:[l.jsx("div",{className:"absolute top-2 right-2 text-slate-300",children:l.jsx(Rl,{size:16})}),l.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-bold text-lg mb-2",children:_.name.charAt(0)}),l.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:_.name}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[l.jsx(Ig,{size:12})," : ",l.jsx("span",{className:"font-bold text-primary",children:n[_.id]||0})]}),l.jsxs("div",{className:"flex gap-2 mt-4 w-full",children:[l.jsx("button",{onClick:()=>I(_),className:"flex-1 py-1 text-xs border border-slate-300 rounded hover:bg-white text-slate-600",children:""}),l.jsx("button",{onClick:()=>w(_.id),className:"flex-1 py-1 text-xs border border-red-200 text-red-500 rounded hover:bg-red-50",children:""})]})]},_.id))})}),l.jsx("div",{className:`hidden ${s==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-16",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 text-right",children:""})]})}),l.jsx("tbody",{children:t.map((_,E)=>l.jsxs("tr",{draggable:!o,onDragStart:N=>M(N,E),onDragOver:N=>F(N,E),onDragEnd:x,className:`cursor-move transition-colors ${E%2===0?"bg-white":"bg-slate-50"} hover:bg-blue-50/50`,children:[l.jsx("td",{className:"p-4 text-slate-300",children:l.jsx(Rl,{size:20})}),l.jsx("td",{className:"p-4 font-bold text-slate-700 text-lg",children:_.name}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ig,{size:16,className:"text-slate-400"}),l.jsx("span",{className:"font-bold text-primary",children:n[_.id]||0})]})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>I(_),className:"text-sm font-bold text-blue-600 hover:underline",children:""}),l.jsx("button",{onClick:()=>w(_.id),className:"text-sm font-bold text-red-500 hover:underline",children:""})]})]},_.id))})]})})})]})},IN=()=>{const[t,e]=q.useState([]),[n,r]=q.useState(!1),[s,i]=q.useState(null),[o,u]=q.useState(""),[c,h]=q.useState("CARD"),[m,p]=q.useState(null),[g,A]=q.useState(!1);q.useEffect(()=>{ne.getAnnouncements().then(e)},[]);const k=async()=>{if(!o.trim()){alert("");return}const M=[...t];if(s){const F=M.findIndex(x=>x.id===s);F!==-1&&(M[F].content=o)}else M.push({id:Date.now().toString(),content:o,isActive:!0});await ne.saveAnnouncements(M),e(M),r(!1),u(""),i(null)},R=async M=>{if(confirm("")){const F=t.filter(x=>x.id!==M);await ne.saveAnnouncements(F),e(F)}},P=async M=>{const F=t.map(x=>x.id===M?{...x,isActive:!x.isActive}:x);await ne.saveAnnouncements(F),e(F)},T=M=>{r(!0),i(M.id),u(M.content)},w=(M,F)=>{p(F),M.dataTransfer.effectAllowed="move"},I=(M,F)=>{if(M.preventDefault(),m===null||m===F)return;const x=[...t],v=x[m];x.splice(m,1),x.splice(F,0,v),e(x),p(F),A(!0)},O=async()=>{await ne.saveAnnouncements(t),A(!1),alert("")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>h("CARD"),className:`p-2 rounded ${c==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(is,{size:18})}),l.jsx("button",{onClick:()=>h("LIST"),className:`p-2 rounded ${c==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(ei,{size:18})})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex justify-between items-center",children:[g?l.jsxs("button",{onClick:O,className:"bg-primary text-white px-4 py-2 rounded-lg font-bold shadow animate-pulse flex items-center gap-2",children:[l.jsx(mf,{size:18})," "]}):l.jsx("div",{}),l.jsxs("button",{onClick:()=>{r(!0),i(null),u("")},className:"bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold hover:bg-emerald-600 flex items-center gap-2",children:[l.jsx(ti,{size:18})," "]})]}),n&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200",children:[l.jsx("textarea",{value:o,onChange:M=>u(M.target.value),className:"w-full p-4 border border-slate-300 rounded-lg mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:"...",rows:3}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:k,className:"bg-primary text-white px-6 py-2 rounded font-bold",children:""}),l.jsx("button",{onClick:()=>r(!1),className:"border border-slate-300 px-6 py-2 rounded font-bold",children:""})]})]}),l.jsx("div",{className:`${c==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((M,F)=>l.jsxs("div",{draggable:!0,onDragStart:x=>w(x,F),onDragOver:x=>I(x,F),className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 cursor-move hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("div",{className:"p-1 text-slate-300",children:l.jsx(Rl,{size:16})}),l.jsxs("button",{onClick:()=>P(M.id),className:`px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 ${M.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:[M.isActive?l.jsx(nN,{size:12}):l.jsx(tN,{size:12}),M.isActive?"":""]})]}),l.jsx("p",{className:"text-slate-700 font-medium mb-4 min-h-[3rem]",children:M.content}),l.jsxs("div",{className:"flex border-t border-slate-100 pt-3 gap-2",children:[l.jsx("button",{onClick:()=>T(M),className:"flex-1 py-1 text-sm bg-slate-50 text-slate-600 rounded hover:bg-slate-100",children:""}),l.jsx("button",{onClick:()=>R(M.id),className:"flex-1 py-1 text-sm bg-red-50 text-red-500 rounded hover:bg-red-100",children:""})]})]},M.id))})}),l.jsx("div",{className:`hidden ${c==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-12"}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 w-32 text-center",children:""}),l.jsx("th",{className:"p-4 w-32 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:t.map((M,F)=>l.jsxs("tr",{draggable:!0,onDragStart:x=>w(x,F),onDragOver:x=>I(x,F),className:"hover:bg-slate-50 cursor-move",children:[l.jsx("td",{className:"p-4 text-slate-300",children:l.jsx(Rl,{size:20})}),l.jsx("td",{className:"p-4 text-slate-700 font-medium",children:M.content}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("button",{onClick:()=>P(M.id),className:`px-3 py-1 rounded-full text-xs font-bold transition-all ${M.isActive?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:M.isActive?"":""})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>T(M),className:"text-blue-600 font-bold text-sm hover:underline",children:""}),l.jsx("button",{onClick:()=>R(M.id),className:"text-red-500 font-bold text-sm hover:underline",children:""})]})]},M.id))})]})})})]})},AN=({currentUser:t})=>{const[e,n]=q.useState("ACCOUNT"),[r,s]=q.useState([]),[i,o]=q.useState(!1),[u,c]=q.useState(null),[h,m]=q.useState({name:"",username:"",password:"",isSuperAdmin:!1}),[p,g]=q.useState(!1),[A,k]=q.useState(""),[R,P]=q.useState(""),[T,w]=q.useState(!1),[I,O]=q.useState(!1),[M,F]=q.useState("GRID"),[x,v]=q.useState({}),[_,E]=q.useState("IDLE");q.useEffect(()=>{C(),Ee(),N()},[]);const N=async()=>{const G=await ne.getAdminSettings();v(G)},C=async()=>{const G=await ne.getAdminAccounts();s(G)},b=async(G,xe)=>{const Me=x.hiddenCategories||[];let be;xe?be=[...Me,G]:be=Me.filter(Te=>Te!==G);const ce={...x,hiddenCategories:be};v(ce),await ne.saveAdminSettings({hiddenCategories:be})},Ee=async()=>{E("CHECKING");try{const G=await ne.checkDatabaseConnection();E(G?"SUCCESS":"ERROR")}catch{E("ERROR")}},ze=async()=>{if(!h.name||!h.username){alert("");return}if(!u&&!h.password){alert("");return}try{if(u){const G=r.find(xe=>xe.id===u);G&&await ne.updateAdminAccount({...G,name:h.name,username:h.username,password:h.password,isSuperAdmin:h.isSuperAdmin})}else await ne.addAdminAccount({id:Date.now().toString(),name:h.name,username:h.username,password:h.password,isSuperAdmin:h.isSuperAdmin});alert(u?"":""),o(!1),Y(),C()}catch(G){alert(": "+G.message)}},St=async G=>{if(confirm(""))try{await ne.deleteAdminAccount(G),alert(""),C()}catch(xe){alert(": "+xe.message)}},L=G=>t.isSuperAdmin||t.id===G.id,U=G=>t.isSuperAdmin&&t.id!==G.id,W=G=>{o(!0),c(G.id),m({name:G.name,username:G.username,password:"",isSuperAdmin:G.isSuperAdmin||!1})},Y=()=>{c(null),m({name:"",username:"",password:"",isSuperAdmin:!1})},ee=async()=>{if(!A||!R){alert("");return}if(A!==R){alert("");return}confirm("")&&(await ne.setFrontendPassword(A),alert(""),k(""),P(""))},ue=async G=>{if(!t.isSuperAdmin){alert("");return}const xe=prompt("");if(!xe)return;xe===t.password?await G():alert("")};return l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(Dx,{className:"text-slate-600"})," "]}),l.jsx("p",{className:"text-slate-500 text-sm mt-1",children:""})]}),l.jsxs("div",{className:"flex bg-white p-1 rounded-lg border border-slate-200 shadow-sm",children:[l.jsxs("button",{onClick:()=>n("ACCOUNT"),className:`px-4 py-2 rounded font-bold text-sm transition-all flex items-center gap-2 ${e==="ACCOUNT"?"bg-slate-800 text-white shadow":"text-slate-500 hover:bg-slate-50"}`,children:[l.jsx(uN,{size:16})," "]}),l.jsxs("button",{onClick:()=>n("FEATURE"),className:`px-4 py-2 rounded font-bold text-sm transition-all flex items-center gap-2 ${e==="FEATURE"?"bg-slate-800 text-white shadow":"text-slate-500 hover:bg-slate-50"}`,children:[l.jsx(is,{size:16})," "]}),l.jsxs("button",{onClick:()=>n("INFO"),className:`px-4 py-2 rounded font-bold text-sm transition-all flex items-center gap-2 ${e==="INFO"?"bg-slate-800 text-white shadow":"text-slate-500 hover:bg-slate-50"}`,children:[l.jsx(Li,{size:16})," "]})]})]}),e==="ACCOUNT"&&l.jsxs(l.Fragment,{children:[!i&&l.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[l.jsxs("button",{onClick:()=>{o(!0),Y()},className:"bg-primary text-white px-4 py-2 rounded-lg font-bold hover:bg-blue-700 shadow-md flex items-center gap-2",children:[l.jsx(ti,{size:18})," "]}),l.jsxs("div",{className:"flex bg-white rounded p-1 border border-slate-200",children:[l.jsx("button",{onClick:()=>F("GRID"),className:`p-2 rounded ${M==="GRID"?"bg-slate-100 text-slate-800":"text-slate-400"}`,children:l.jsx(is,{size:18})}),l.jsx("button",{onClick:()=>F("LIST"),className:`p-2 rounded ${M==="LIST"?"bg-slate-100 text-slate-800":"text-slate-400"}`,children:l.jsx(ei,{size:18})})]})]}),i&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-primary/20 mb-8 animate-in fade-in slide-in-from-top-4",children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[u?l.jsx(sr,{size:18}):l.jsx(ti,{size:18})," ",u?"":""]}),l.jsxs("div",{className:"space-y-4 max-w-md",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{value:h.name,onChange:G=>m({...h,name:G.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none",placeholder:"e.g. "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 p-3 rounded border border-slate-200",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",checked:!h.isSuperAdmin,onChange:()=>m({...h,isSuperAdmin:!1}),className:"w-4 h-4 text-primary"}),l.jsx("span",{className:"text-sm font-bold text-slate-700",children:" ()"})]}),l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"radio",checked:h.isSuperAdmin,onChange:()=>m({...h,isSuperAdmin:!0}),className:"w-4 h-4 text-primary",disabled:t.id===u}),l.jsx("span",{className:"text-sm font-bold text-indigo-600",children:""})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{value:h.username,onChange:G=>m({...h,username:G.target.value}),disabled:!!u&&h.username==="sysop",className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none disabled:bg-slate-100"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{value:h.password,onChange:G=>m({...h,password:G.target.value}),className:"w-full p-2 pr-10 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none",type:p?"text":"password",placeholder:""}),l.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:p?l.jsx(fc,{size:18}):l.jsx(mc,{size:18})})]})]}),l.jsxs("div",{className:"flex gap-4 mt-4",children:[l.jsx("button",{onClick:ze,className:"flex-1 bg-primary text-white py-2 rounded-lg font-bold hover:bg-blue-700",children:""}),l.jsx("button",{onClick:()=>{o(!1),Y()},className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded-lg font-bold hover:bg-slate-50",children:""})]})]})]}),l.jsx("div",{className:`${M==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(G=>l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${G.isSuperAdmin?"bg-indigo-600":"bg-slate-500"}`,children:G.name.charAt(0)}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800",children:G.name}),l.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[l.jsx(Mx,{size:12})," ",G.username]})]})]}),G.isSuperAdmin&&l.jsx(Vx,{className:"text-amber-500",size:20})]}),l.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-100",children:[L(G)?l.jsx("button",{onClick:()=>W(G),className:"flex-1 py-1.5 text-sm bg-blue-50 text-blue-600 rounded hover:bg-blue-100 font-bold",children:"/"}):l.jsx("button",{disabled:!0,className:"flex-1 py-1.5 text-sm bg-slate-50 text-slate-300 rounded cursor-not-allowed",children:""}),U(G)&&l.jsx("button",{onClick:()=>St(G.id),className:"px-3 py-1.5 text-sm bg-red-50 text-red-500 rounded hover:bg-red-100 font-bold",children:""})]})]},G.id))})}),l.jsx("div",{className:`hidden ${M==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(G=>l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-700",children:G.name}),l.jsx("td",{className:"p-4 font-mono text-slate-600",children:G.username}),l.jsx("td",{className:"p-4",children:G.isSuperAdmin?l.jsx("span",{className:"text-xs font-bold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:""}):l.jsx("span",{className:"text-xs font-bold bg-slate-100 text-slate-600 px-2 py-1 rounded-full",children:""})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[L(G)&&l.jsx("button",{onClick:()=>W(G),className:"text-blue-600 font-bold text-sm hover:underline",children:""}),U(G)&&l.jsx("button",{onClick:()=>St(G.id),className:"text-red-500 font-bold text-sm hover:underline",children:""})]})]},G.id))})]})})}),l.jsxs("div",{className:"bg-red-50/50 p-6 rounded-xl shadow-sm border border-red-100 mt-8",children:[l.jsxs("h3",{className:"text-lg font-bold text-red-600 flex items-center gap-2 mb-4",children:[l.jsx(Pl,{size:18})," "]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:T?"text":"password",value:A,onChange:G=>k(G.target.value),className:"w-full p-2 pr-10 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-red-500 outline-none",placeholder:""}),l.jsx("button",{type:"button",onClick:()=>w(!T),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:T?l.jsx(fc,{size:18}):l.jsx(mc,{size:18})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:I?"text":"password",value:R,onChange:G=>P(G.target.value),className:"w-full p-2 pr-10 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-red-500 outline-none",placeholder:""}),l.jsx("button",{type:"button",onClick:()=>O(!I),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:I?l.jsx(fc,{size:18}):l.jsx(mc,{size:18})})]})]}),l.jsx("div",{children:l.jsx("button",{onClick:ee,className:"w-full bg-red-600 text-white py-2 rounded font-bold hover:bg-red-700 transition-colors shadow-sm",children:""})})]}),l.jsx("p",{className:"text-xs text-red-400 mt-2 font-bold",children:""})]})]}),e==="FEATURE"&&l.jsx("div",{className:"grid grid-cols-1 gap-6 animate-in fade-in slide-in-from-top-4",children:l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[l.jsx(ei,{className:"text-primary"})," "]}),l.jsx("p",{className:"text-slate-400 text-xs mt-1",children:""})]}),l.jsx("button",{className:"text-sm bg-slate-100 text-slate-600 px-3 py-1.5 rounded font-bold hover:bg-slate-200 transition-colors",onClick:()=>alert(""),children:""})]}),l.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-lg p-4",children:[l.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:""}),l.jsx("div",{className:"space-y-3",children:Wa.map((G,xe)=>{const Me=(x.hiddenCategories||[]).includes(G.label);return l.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-200 rounded-lg shadow-sm",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-bold border flex items-center gap-2 ${G.bg} ${G.text} ${G.border}`,children:G.label})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:`text-xs font-bold ${Me?"text-slate-400":"text-emerald-500"}`,children:Me?"":""}),l.jsx("button",{onClick:()=>b(G.label,!Me),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 ${Me?"bg-slate-200":"bg-primary"}`,children:l.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${Me?"translate-x-1":"translate-x-6"}`})})]})]},xe)})})]}),l.jsx("p",{className:"text-xs text-slate-400 mt-4 text-center",children:""})]})}),e==="INFO"&&l.jsxs("div",{className:"grid grid-cols-1 gap-6 animate-in fade-in slide-in-from-top-4",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[l.jsx(Li,{className:"text-indigo-600"})," "]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"bg-orange-500 p-1 rounded-full text-white",children:l.jsx(Li,{size:14})}),l.jsx("span",{className:"font-mono font-bold text-slate-800",children:"Firebase Mode"})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),_==="IDLE"&&l.jsx("span",{className:"text-slate-400 font-bold text-sm",children:""}),_==="CHECKING"&&l.jsx("span",{className:"text-blue-500 font-bold text-sm animate-pulse",children:"..."}),_==="SUCCESS"&&l.jsxs("span",{className:"text-emerald-600 font-bold text-sm flex items-center gap-1",children:[l.jsx(Rd,{size:14})," "]}),_==="ERROR"&&l.jsxs("span",{className:"text-red-500 font-bold text-sm flex items-center gap-1",children:[l.jsx(hN,{size:14})," "]})]})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[l.jsx(Li,{className:"text-indigo-600"})," "]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-slate-800 mb-1 font-bold",children:""}),l.jsx("p",{className:"text-xs text-slate-400",children:"353"})]}),l.jsxs("button",{onClick:()=>ue(()=>bN()),className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-2 rounded-lg font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md flex items-center gap-2 whitespace-nowrap",children:[l.jsx(Li,{size:16})," "]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-red-600 mb-1 font-bold",children:""}),l.jsx("p",{className:"text-xs text-slate-400",children:""})]}),l.jsxs("button",{onClick:()=>ue(async()=>{await ne.clearAllData(),alert(""),window.location.reload()}),className:"bg-white border-2 border-red-100 text-red-500 px-6 py-2 rounded-lg font-bold hover:bg-red-50 hover:border-red-200 transition-all flex items-center gap-2 whitespace-nowrap",children:[l.jsx(qr,{size:16})," "]})]})]})]})]}),l.jsx("footer",{className:"bg-white border-t border-slate-200 mt-8 py-6 text-center text-sm font-mono text-slate-400",children:" 2025 Powered by 007"})]})},CN=()=>{const[t,e]=q.useState(!1),[n,r]=q.useState(!1),[s,i]=q.useState(void 0),[o,u]=q.useState(!0),[c,h]=q.useState(""),[m,p]=q.useState(""),[g,A]=q.useState(""),[k,R]=q.useState("USER"),[P,T]=q.useState(""),[w,I]=q.useState(!1);q.useEffect(()=>{(async()=>{const{role:v,userId:_}=ne.getSession();if(v==="USER")e(!0);else if(v==="ADMIN"&&_){const E=await ne.getAdminById(_);E?(r(!0),i(E)):ne.clearSession()}u(!1)})()},[]);const O=async x=>{x.preventDefault(),u(!0);const v=await ne.getFrontendPassword();u(!1),c===v?(e(!0),T(""),ne.setSession("USER",void 0,w)):T("")},M=async x=>{x.preventDefault(),u(!0);const v=await ne.verifyAdmin(m,g);u(!1),v?(r(!0),i(v),T(""),ne.setSession("ADMIN",v.id,w)):T("")},F=()=>{e(!1),r(!1),i(void 0),ne.clearSession(),h(""),A(""),p("")};return o?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:"Loading..."}):n&&s?l.jsx(SN,{currentUser:s,onLogout:F,onGoToFrontend:()=>{r(!1),e(!0)}}):t?l.jsx(pN,{onLogout:F,onGoToAdmin:()=>{F(),R("ADMIN")}}):l.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-800 to-slate-900 p-4",children:[l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden w-full max-w-md",children:[l.jsxs("div",{className:"flex text-sm font-bold text-center border-b bg-gray-50",children:[l.jsx("button",{onClick:()=>{R("USER"),T("")},className:`flex-1 py-4 uppercase tracking-wider transition-all border-t-4 ${k==="USER"?"bg-white text-primary border-primary":"bg-gray-100 text-gray-400 border-transparent hover:bg-gray-50"}`,children:""}),l.jsx("button",{onClick:()=>{R("ADMIN"),T("")},className:`flex-1 py-4 uppercase tracking-wider transition-all border-t-4 ${k==="ADMIN"?"bg-white text-slate-800 border-slate-800":"bg-gray-100 text-gray-400 border-transparent hover:bg-gray-50"}`,children:""})]}),l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),l.jsx("p",{className:"text-slate-500 text-sm",children:""})]}),P&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded border border-red-200 text-center",children:P}),k==="USER"?l.jsxs("form",{onSubmit:O,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(Pl,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"password",value:c,onChange:x=>h(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none",placeholder:"",autoComplete:"current-password"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember-user",type:"checkbox",checked:w,onChange:x=>I(x.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary bg-white"}),l.jsx("label",{htmlFor:"remember-user",className:"ml-2 block text-sm text-slate-600 cursor-pointer",children:" (Remember me)"})]}),l.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors",children:""})]}):l.jsxs("form",{onSubmit:M,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(sN,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"text",value:m,onChange:x=>p(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none",placeholder:"",autoComplete:"username"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(Pl,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"password",value:g,onChange:x=>A(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none",placeholder:"",autoComplete:"current-password"})]})]}),l.jsxs("div",{className:"flex items-center pt-2",children:[l.jsx("input",{id:"remember-admin",type:"checkbox",checked:w,onChange:x=>I(x.target.checked),className:"w-4 h-4 text-slate-800 border-gray-300 rounded focus:ring-slate-800 bg-white"}),l.jsx("label",{htmlFor:"remember-admin",className:"ml-2 block text-sm text-slate-600 cursor-pointer",children:" (Remember me)"})]}),l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white py-3 rounded-lg font-bold hover:bg-slate-900 transition-colors mt-2",children:""})]})]})]}),l.jsx("div",{className:"fixed bottom-6 text-center w-full text-slate-500 text-xs font-mono opacity-60",children:" 2025 Powered by 007"})]})},Lx=document.getElementById("root");if(!Lx)throw new Error("Could not find root element to mount to");const kN=pc.createRoot(Lx);kN.render(l.jsx(T1.StrictMode,{children:l.jsx(CN,{})}));
