(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function u1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rg={exports:{}},jl={},Pg={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jo=Symbol.for("react.element"),c1=Symbol.for("react.portal"),d1=Symbol.for("react.fragment"),h1=Symbol.for("react.strict_mode"),f1=Symbol.for("react.profiler"),m1=Symbol.for("react.provider"),p1=Symbol.for("react.context"),g1=Symbol.for("react.forward_ref"),y1=Symbol.for("react.suspense"),v1=Symbol.for("react.memo"),x1=Symbol.for("react.lazy"),om=Symbol.iterator;function _1(t){return t===null||typeof t!="object"?null:(t=om&&t[om]||t["@@iterator"],typeof t=="function"?t:null)}var Dg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vg=Object.assign,Mg={};function Ks(t,e,n){this.props=t,this.context=e,this.refs=Mg,this.updater=n||Dg}Ks.prototype.isReactComponent={};Ks.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ks.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Og(){}Og.prototype=Ks.prototype;function Rd(t,e,n){this.props=t,this.context=e,this.refs=Mg,this.updater=n||Dg}var Pd=Rd.prototype=new Og;Pd.constructor=Rd;Vg(Pd,Ks.prototype);Pd.isPureReactComponent=!0;var am=Array.isArray,Lg=Object.prototype.hasOwnProperty,Dd={current:null},Fg={key:!0,ref:!0,__self:!0,__source:!0};function Ug(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Lg.call(e,r)&&!Fg.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:jo,type:t,key:i,ref:o,props:s,_owner:Dd.current}}function w1(t,e){return{$$typeof:jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vd(t){return typeof t=="object"&&t!==null&&t.$$typeof===jo}function E1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lm=/\/+/g;function Iu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?E1(""+t.key):e.toString(36)}function Ta(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case jo:case c1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Iu(o,0):r,am(s)?(n="",t!=null&&(n=t.replace(lm,"$&/")+"/"),Ta(s,e,n,"",function(h){return h})):s!=null&&(Vd(s)&&(s=w1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",am(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Iu(i,u);o+=Ta(i,e,n,c,s)}else if(c=_1(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Iu(i,u++),o+=Ta(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ta(t,e,n){if(t==null)return t;var r=[],s=0;return Ta(t,r,"","",function(i){return e.call(n,i,s++)}),r}function b1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},Na={transition:null},S1={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:Na,ReactCurrentOwner:Dd};function zg(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:ta,forEach:function(t,e,n){ta(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ta(t,function(){e++}),e},toArray:function(t){return ta(t,function(e){return e})||[]},only:function(t){if(!Vd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Ks;fe.Fragment=d1;fe.Profiler=f1;fe.PureComponent=Rd;fe.StrictMode=h1;fe.Suspense=y1;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S1;fe.act=zg;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Vg({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Dd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Lg.call(e,c)&&!Fg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];r.children=u}return{$$typeof:jo,type:t.type,key:s,ref:i,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:p1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:m1,_context:t},t.Consumer=t};fe.createElement=Ug;fe.createFactory=function(t){var e=Ug.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:g1,render:t}};fe.isValidElement=Vd;fe.lazy=function(t){return{$$typeof:x1,_payload:{_status:-1,_result:t},_init:b1}};fe.memo=function(t,e){return{$$typeof:v1,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Na.transition;Na.transition={};try{t()}finally{Na.transition=e}};fe.unstable_act=zg;fe.useCallback=function(t,e){return bt.current.useCallback(t,e)};fe.useContext=function(t){return bt.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};fe.useEffect=function(t,e){return bt.current.useEffect(t,e)};fe.useId=function(){return bt.current.useId()};fe.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return bt.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};fe.useRef=function(t){return bt.current.useRef(t)};fe.useState=function(t){return bt.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return bt.current.useTransition()};fe.version="18.3.1";Pg.exports=fe;var q=Pg.exports;const T1=u1(q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1=q,I1=Symbol.for("react.element"),A1=Symbol.for("react.fragment"),C1=Object.prototype.hasOwnProperty,k1=N1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j1={key:!0,ref:!0,__self:!0,__source:!0};function $g(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)C1.call(e,r)&&!j1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:I1,type:t,key:i,ref:o,props:s,_owner:k1.current}}jl.Fragment=A1;jl.jsx=$g;jl.jsxs=$g;Rg.exports=jl;var l=Rg.exports,fc={},Bg={exports:{}},Bt={},qg={exports:{}},Hg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,H){var Y=j.length;j.push(H);e:for(;0<Y;){var ne=Y-1>>>1,he=j[ne];if(0<s(he,H))j[ne]=H,j[Y]=he,Y=ne;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var H=j[0],Y=j.pop();if(Y!==H){j[0]=Y;e:for(var ne=0,he=j.length,et=he>>>1;ne<et;){var Ue=2*(ne+1)-1,Pt=j[Ue],ge=Ue+1,ce=j[ge];if(0>s(Pt,Y))ge<he&&0>s(ce,Pt)?(j[ne]=ce,j[ge]=Y,ne=ge):(j[ne]=Pt,j[Ue]=Y,ne=Ue);else if(ge<he&&0>s(ce,Y))j[ne]=ce,j[ge]=Y,ne=ge;else break e}}return H}function s(j,H){var Y=j.sortIndex-H.sortIndex;return Y!==0?Y:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],h=[],m=1,p=null,g=3,N=!1,k=!1,P=!1,D=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(j){for(var H=n(h);H!==null;){if(H.callback===null)r(h);else if(H.startTime<=j)r(h),H.sortIndex=H.expirationTime,e(c,H);else break;H=n(h)}}function O(j){if(P=!1,I(j),!k)if(n(c)!==null)k=!0,xt(M);else{var H=n(h);H!==null&&L(O,H.startTime-j)}}function M(j,H){k=!1,P&&(P=!1,S(v),v=-1),N=!0;var Y=g;try{for(I(H),p=n(c);p!==null&&(!(p.expirationTime>H)||j&&!T());){var ne=p.callback;if(typeof ne=="function"){p.callback=null,g=p.priorityLevel;var he=ne(p.expirationTime<=H);H=t.unstable_now(),typeof he=="function"?p.callback=he:p===n(c)&&r(c),I(H)}else r(c);p=n(c)}if(p!==null)var et=!0;else{var Ue=n(h);Ue!==null&&L(O,Ue.startTime-H),et=!1}return et}finally{p=null,g=Y,N=!1}}var F=!1,x=null,v=-1,_=5,E=-1;function T(){return!(t.unstable_now()-E<_)}function C(){if(x!==null){var j=t.unstable_now();E=j;var H=!0;try{H=x(!0,j)}finally{H?b():(F=!1,x=null)}}else F=!1}var b;if(typeof w=="function")b=function(){w(C)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Pe=we.port2;we.port1.onmessage=C,b=function(){Pe.postMessage(null)}}else b=function(){D(C,0)};function xt(j){x=j,F||(F=!0,b())}function L(j,H){v=D(function(){j(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){k||N||(k=!0,xt(M))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(j){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var Y=g;g=H;try{return j()}finally{g=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Y=g;g=j;try{return H()}finally{g=Y}},t.unstable_scheduleCallback=function(j,H,Y){var ne=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ne+Y:ne):Y=ne,j){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Y+he,j={id:m++,callback:H,priorityLevel:j,startTime:Y,expirationTime:he,sortIndex:-1},Y>ne?(j.sortIndex=Y,e(h,j),n(c)===null&&j===n(h)&&(P?(S(v),v=-1):P=!0,L(O,Y-ne))):(j.sortIndex=he,e(c,j),k||N||(k=!0,xt(M))),j},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(j){var H=g;return function(){var Y=g;g=H;try{return j.apply(this,arguments)}finally{g=Y}}}})(Hg);qg.exports=Hg;var R1=qg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1=q,$t=R1;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wg=new Set,ro={};function es(t,e){Ms(t,e),Ms(t+"Capture",e)}function Ms(t,e){for(ro[t]=e,t=0;t<e.length;t++)Wg.add(e[t])}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mc=Object.prototype.hasOwnProperty,D1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,um={},cm={};function V1(t){return mc.call(cm,t)?!0:mc.call(um,t)?!1:D1.test(t)?cm[t]=!0:(um[t]=!0,!1)}function M1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function O1(t,e,n,r){if(e===null||typeof e>"u"||M1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ct[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ct[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ct[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ct[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ct[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ct[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ct[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ct[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ct[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var Md=/[\-:]([a-z])/g;function Od(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Md,Od);ct[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Md,Od);ct[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Md,Od);ct[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ct[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});ct.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ct[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ld(t,e,n,r){var s=ct.hasOwnProperty(e)?ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(O1(e,n,s,r)&&(n=null),r||s===null?V1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Un=P1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,na=Symbol.for("react.element"),ms=Symbol.for("react.portal"),ps=Symbol.for("react.fragment"),Fd=Symbol.for("react.strict_mode"),pc=Symbol.for("react.profiler"),Gg=Symbol.for("react.provider"),Qg=Symbol.for("react.context"),Ud=Symbol.for("react.forward_ref"),gc=Symbol.for("react.suspense"),yc=Symbol.for("react.suspense_list"),zd=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),Kg=Symbol.for("react.offscreen"),dm=Symbol.iterator;function bi(t){return t===null||typeof t!="object"?null:(t=dm&&t[dm]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Au;function Vi(t){if(Au===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Au=e&&e[1]||""}return`
`+Au+t}var Cu=!1;function ku(t,e){if(!t||Cu)return"";Cu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Cu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vi(t):""}function L1(t){switch(t.tag){case 5:return Vi(t.type);case 16:return Vi("Lazy");case 13:return Vi("Suspense");case 19:return Vi("SuspenseList");case 0:case 2:case 15:return t=ku(t.type,!1),t;case 11:return t=ku(t.type.render,!1),t;case 1:return t=ku(t.type,!0),t;default:return""}}function vc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ps:return"Fragment";case ms:return"Portal";case pc:return"Profiler";case Fd:return"StrictMode";case gc:return"Suspense";case yc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qg:return(t.displayName||"Context")+".Consumer";case Gg:return(t._context.displayName||"Context")+".Provider";case Ud:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zd:return e=t.displayName||null,e!==null?e:vc(t.type)||"Memo";case Xn:e=t._payload,t=t._init;try{return vc(t(e))}catch{}}return null}function F1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vc(e);case 8:return e===Fd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function gr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function U1(t){var e=Yg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ra(t){t._valueTracker||(t._valueTracker=U1(t))}function Xg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Yg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xc(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=gr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jg(t,e){e=e.checked,e!=null&&Ld(t,"checked",e,!1)}function _c(t,e){Jg(t,e);var n=gr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wc(t,e.type,n):e.hasOwnProperty("defaultValue")&&wc(t,e.type,gr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wc(t,e,n){(e!=="number"||qa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mi=Array.isArray;function Ns(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+gr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ec(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Mi(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:gr(n)}}function Zg(t,e){var n=gr(e.value),r=gr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function e0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?e0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sa,t0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sa=sa||document.createElement("div"),sa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function so(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z1=["Webkit","ms","Moz","O"];Object.keys(Bi).forEach(function(t){z1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bi[e]=Bi[t]})});function n0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bi.hasOwnProperty(t)&&Bi[t]?(""+e).trim():e+"px"}function r0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=n0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var $1=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sc(t,e){if(e){if($1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Tc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nc=null;function $d(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ic=null,Is=null,As=null;function gm(t){if(t=Do(t)){if(typeof Ic!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Ml(e),Ic(t.stateNode,t.type,e))}}function s0(t){Is?As?As.push(t):As=[t]:Is=t}function i0(){if(Is){var t=Is,e=As;if(As=Is=null,gm(t),e)for(t=0;t<e.length;t++)gm(e[t])}}function o0(t,e){return t(e)}function a0(){}var ju=!1;function l0(t,e,n){if(ju)return t(e,n);ju=!0;try{return o0(t,e,n)}finally{ju=!1,(Is!==null||As!==null)&&(a0(),i0())}}function io(t,e){var n=t.stateNode;if(n===null)return null;var r=Ml(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Ac=!1;if(Rn)try{var Si={};Object.defineProperty(Si,"passive",{get:function(){Ac=!0}}),window.addEventListener("test",Si,Si),window.removeEventListener("test",Si,Si)}catch{Ac=!1}function B1(t,e,n,r,s,i,o,u,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var qi=!1,Ha=null,Wa=!1,Cc=null,q1={onError:function(t){qi=!0,Ha=t}};function H1(t,e,n,r,s,i,o,u,c){qi=!1,Ha=null,B1.apply(q1,arguments)}function W1(t,e,n,r,s,i,o,u,c){if(H1.apply(this,arguments),qi){if(qi){var h=Ha;qi=!1,Ha=null}else throw Error(W(198));Wa||(Wa=!0,Cc=h)}}function ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function u0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ym(t){if(ts(t)!==t)throw Error(W(188))}function G1(t){var e=t.alternate;if(!e){if(e=ts(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ym(s),t;if(i===r)return ym(s),e;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function c0(t){return t=G1(t),t!==null?d0(t):null}function d0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=d0(t);if(e!==null)return e;t=t.sibling}return null}var h0=$t.unstable_scheduleCallback,vm=$t.unstable_cancelCallback,Q1=$t.unstable_shouldYield,K1=$t.unstable_requestPaint,qe=$t.unstable_now,Y1=$t.unstable_getCurrentPriorityLevel,Bd=$t.unstable_ImmediatePriority,f0=$t.unstable_UserBlockingPriority,Ga=$t.unstable_NormalPriority,X1=$t.unstable_LowPriority,m0=$t.unstable_IdlePriority,Rl=null,yn=null;function J1(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Rl,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:t_,Z1=Math.log,e_=Math.LN2;function t_(t){return t>>>=0,t===0?32:31-(Z1(t)/e_|0)|0}var ia=64,oa=4194304;function Oi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Oi(u):(i&=o,i!==0&&(r=Oi(i)))}else o=n&~s,o!==0?r=Oi(o):i!==0&&(r=Oi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sn(e),s=1<<n,r|=t[n],e&=~s;return r}function n_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-sn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=n_(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function kc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p0(){var t=ia;return ia<<=1,!(ia&4194240)&&(ia=64),t}function Ru(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ro(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=n}function s_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function qd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var be=0;function g0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var y0,Hd,v0,x0,_0,jc=!1,aa=[],sr=null,ir=null,or=null,oo=new Map,ao=new Map,Zn=[],i_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xm(t,e){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":oo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ao.delete(e.pointerId)}}function Ti(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Do(e),e!==null&&Hd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function o_(t,e,n,r,s){switch(e){case"focusin":return sr=Ti(sr,t,e,n,r,s),!0;case"dragenter":return ir=Ti(ir,t,e,n,r,s),!0;case"mouseover":return or=Ti(or,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return oo.set(i,Ti(oo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ao.set(i,Ti(ao.get(i)||null,t,e,n,r,s)),!0}return!1}function w0(t){var e=Ur(t.target);if(e!==null){var n=ts(e);if(n!==null){if(e=n.tag,e===13){if(e=u0(n),e!==null){t.blockedOn=e,_0(t.priority,function(){v0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ia(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nc=r,n.target.dispatchEvent(r),Nc=null}else return e=Do(n),e!==null&&Hd(e),t.blockedOn=n,!1;e.shift()}return!0}function _m(t,e,n){Ia(t)&&n.delete(e)}function a_(){jc=!1,sr!==null&&Ia(sr)&&(sr=null),ir!==null&&Ia(ir)&&(ir=null),or!==null&&Ia(or)&&(or=null),oo.forEach(_m),ao.forEach(_m)}function Ni(t,e){t.blockedOn===e&&(t.blockedOn=null,jc||(jc=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,a_)))}function lo(t){function e(s){return Ni(s,t)}if(0<aa.length){Ni(aa[0],t);for(var n=1;n<aa.length;n++){var r=aa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(sr!==null&&Ni(sr,t),ir!==null&&Ni(ir,t),or!==null&&Ni(or,t),oo.forEach(e),ao.forEach(e),n=0;n<Zn.length;n++)r=Zn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zn.length&&(n=Zn[0],n.blockedOn===null);)w0(n),n.blockedOn===null&&Zn.shift()}var Cs=Un.ReactCurrentBatchConfig,Ka=!0;function l_(t,e,n,r){var s=be,i=Cs.transition;Cs.transition=null;try{be=1,Wd(t,e,n,r)}finally{be=s,Cs.transition=i}}function u_(t,e,n,r){var s=be,i=Cs.transition;Cs.transition=null;try{be=4,Wd(t,e,n,r)}finally{be=s,Cs.transition=i}}function Wd(t,e,n,r){if(Ka){var s=Rc(t,e,n,r);if(s===null)$u(t,e,r,Ya,n),xm(t,r);else if(o_(s,t,e,n,r))r.stopPropagation();else if(xm(t,r),e&4&&-1<i_.indexOf(t)){for(;s!==null;){var i=Do(s);if(i!==null&&y0(i),i=Rc(t,e,n,r),i===null&&$u(t,e,r,Ya,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else $u(t,e,r,null,n)}}var Ya=null;function Rc(t,e,n,r){if(Ya=null,t=$d(r),t=Ur(t),t!==null)if(e=ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=u0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ya=t,null}function E0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Y1()){case Bd:return 1;case f0:return 4;case Ga:case X1:return 16;case m0:return 536870912;default:return 16}default:return 16}}var tr=null,Gd=null,Aa=null;function b0(){if(Aa)return Aa;var t,e=Gd,n=e.length,r,s="value"in tr?tr.value:tr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Aa=s.slice(t,1<r?1-r:void 0)}function Ca(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function la(){return!0}function wm(){return!1}function qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?la:wm,this.isPropagationStopped=wm,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),e}var Ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qd=qt(Ys),Po=Le({},Ys,{view:0,detail:0}),c_=qt(Po),Pu,Du,Ii,Pl=Le({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ii&&(Ii&&t.type==="mousemove"?(Pu=t.screenX-Ii.screenX,Du=t.screenY-Ii.screenY):Du=Pu=0,Ii=t),Pu)},movementY:function(t){return"movementY"in t?t.movementY:Du}}),Em=qt(Pl),d_=Le({},Pl,{dataTransfer:0}),h_=qt(d_),f_=Le({},Po,{relatedTarget:0}),Vu=qt(f_),m_=Le({},Ys,{animationName:0,elapsedTime:0,pseudoElement:0}),p_=qt(m_),g_=Le({},Ys,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),y_=qt(g_),v_=Le({},Ys,{data:0}),bm=qt(v_),x_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},__={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=w_[t])?!!e[t]:!1}function Kd(){return E_}var b_=Le({},Po,{key:function(t){if(t.key){var e=x_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ca(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?__[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kd,charCode:function(t){return t.type==="keypress"?Ca(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ca(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),S_=qt(b_),T_=Le({},Pl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sm=qt(T_),N_=Le({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kd}),I_=qt(N_),A_=Le({},Ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),C_=qt(A_),k_=Le({},Pl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),j_=qt(k_),R_=[9,13,27,32],Yd=Rn&&"CompositionEvent"in window,Hi=null;Rn&&"documentMode"in document&&(Hi=document.documentMode);var P_=Rn&&"TextEvent"in window&&!Hi,S0=Rn&&(!Yd||Hi&&8<Hi&&11>=Hi),Tm=" ",Nm=!1;function T0(t,e){switch(t){case"keyup":return R_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gs=!1;function D_(t,e){switch(t){case"compositionend":return N0(e);case"keypress":return e.which!==32?null:(Nm=!0,Tm);case"textInput":return t=e.data,t===Tm&&Nm?null:t;default:return null}}function V_(t,e){if(gs)return t==="compositionend"||!Yd&&T0(t,e)?(t=b0(),Aa=Gd=tr=null,gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return S0&&e.locale!=="ko"?null:e.data;default:return null}}var M_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Im(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!M_[t.type]:e==="textarea"}function I0(t,e,n,r){s0(r),e=Xa(e,"onChange"),0<e.length&&(n=new Qd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wi=null,uo=null;function O_(t){L0(t,0)}function Dl(t){var e=xs(t);if(Xg(e))return t}function L_(t,e){if(t==="change")return e}var A0=!1;if(Rn){var Mu;if(Rn){var Ou="oninput"in document;if(!Ou){var Am=document.createElement("div");Am.setAttribute("oninput","return;"),Ou=typeof Am.oninput=="function"}Mu=Ou}else Mu=!1;A0=Mu&&(!document.documentMode||9<document.documentMode)}function Cm(){Wi&&(Wi.detachEvent("onpropertychange",C0),uo=Wi=null)}function C0(t){if(t.propertyName==="value"&&Dl(uo)){var e=[];I0(e,uo,t,$d(t)),l0(O_,e)}}function F_(t,e,n){t==="focusin"?(Cm(),Wi=e,uo=n,Wi.attachEvent("onpropertychange",C0)):t==="focusout"&&Cm()}function U_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dl(uo)}function z_(t,e){if(t==="click")return Dl(e)}function $_(t,e){if(t==="input"||t==="change")return Dl(e)}function B_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:B_;function co(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!mc.call(e,s)||!ln(t[s],e[s]))return!1}return!0}function km(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jm(t,e){var n=km(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=km(n)}}function k0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?k0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function j0(){for(var t=window,e=qa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qa(t.document)}return e}function Xd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function q_(t){var e=j0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&k0(n.ownerDocument.documentElement,n)){if(r!==null&&Xd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=jm(n,i);var o=jm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var H_=Rn&&"documentMode"in document&&11>=document.documentMode,ys=null,Pc=null,Gi=null,Dc=!1;function Rm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dc||ys==null||ys!==qa(r)||(r=ys,"selectionStart"in r&&Xd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gi&&co(Gi,r)||(Gi=r,r=Xa(Pc,"onSelect"),0<r.length&&(e=new Qd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ys)))}function ua(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vs={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionend:ua("Transition","TransitionEnd")},Lu={},R0={};Rn&&(R0=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Vl(t){if(Lu[t])return Lu[t];if(!vs[t])return t;var e=vs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R0)return Lu[t]=e[n];return t}var P0=Vl("animationend"),D0=Vl("animationiteration"),V0=Vl("animationstart"),M0=Vl("transitionend"),O0=new Map,Pm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(t,e){O0.set(t,e),es(e,[t])}for(var Fu=0;Fu<Pm.length;Fu++){var Uu=Pm[Fu],W_=Uu.toLowerCase(),G_=Uu[0].toUpperCase()+Uu.slice(1);Sr(W_,"on"+G_)}Sr(P0,"onAnimationEnd");Sr(D0,"onAnimationIteration");Sr(V0,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(M0,"onTransitionEnd");Ms("onMouseEnter",["mouseout","mouseover"]);Ms("onMouseLeave",["mouseout","mouseover"]);Ms("onPointerEnter",["pointerout","pointerover"]);Ms("onPointerLeave",["pointerout","pointerover"]);es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));es("onBeforeInput",["compositionend","keypress","textInput","paste"]);es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function Dm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,W1(r,e,void 0,t),t.currentTarget=null}function L0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Dm(s,u,h),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Dm(s,u,h),i=c}}}if(Wa)throw t=Cc,Wa=!1,Cc=null,t}function ke(t,e){var n=e[Fc];n===void 0&&(n=e[Fc]=new Set);var r=t+"__bubble";n.has(r)||(F0(e,t,2,!1),n.add(r))}function zu(t,e,n){var r=0;e&&(r|=4),F0(n,t,r,e)}var ca="_reactListening"+Math.random().toString(36).slice(2);function ho(t){if(!t[ca]){t[ca]=!0,Wg.forEach(function(n){n!=="selectionchange"&&(Q_.has(n)||zu(n,!1,t),zu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ca]||(e[ca]=!0,zu("selectionchange",!1,e))}}function F0(t,e,n,r){switch(E0(e)){case 1:var s=l_;break;case 4:s=u_;break;default:s=Wd}n=s.bind(null,e,n,t),s=void 0,!Ac||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function $u(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Ur(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}l0(function(){var h=i,m=$d(n),p=[];e:{var g=O0.get(t);if(g!==void 0){var N=Qd,k=t;switch(t){case"keypress":if(Ca(n)===0)break e;case"keydown":case"keyup":N=S_;break;case"focusin":k="focus",N=Vu;break;case"focusout":k="blur",N=Vu;break;case"beforeblur":case"afterblur":N=Vu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Em;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=h_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=I_;break;case P0:case D0:case V0:N=p_;break;case M0:N=C_;break;case"scroll":N=c_;break;case"wheel":N=j_;break;case"copy":case"cut":case"paste":N=y_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Sm}var P=(e&4)!==0,D=!P&&t==="scroll",S=P?g!==null?g+"Capture":null:g;P=[];for(var w=h,I;w!==null;){I=w;var O=I.stateNode;if(I.tag===5&&O!==null&&(I=O,S!==null&&(O=io(w,S),O!=null&&P.push(fo(w,O,I)))),D)break;w=w.return}0<P.length&&(g=new N(g,k,null,n,m),p.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",g&&n!==Nc&&(k=n.relatedTarget||n.fromElement)&&(Ur(k)||k[Pn]))break e;if((N||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,N?(k=n.relatedTarget||n.toElement,N=h,k=k?Ur(k):null,k!==null&&(D=ts(k),k!==D||k.tag!==5&&k.tag!==6)&&(k=null)):(N=null,k=h),N!==k)){if(P=Em,O="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(P=Sm,O="onPointerLeave",S="onPointerEnter",w="pointer"),D=N==null?g:xs(N),I=k==null?g:xs(k),g=new P(O,w+"leave",N,n,m),g.target=D,g.relatedTarget=I,O=null,Ur(m)===h&&(P=new P(S,w+"enter",k,n,m),P.target=I,P.relatedTarget=D,O=P),D=O,N&&k)t:{for(P=N,S=k,w=0,I=P;I;I=us(I))w++;for(I=0,O=S;O;O=us(O))I++;for(;0<w-I;)P=us(P),w--;for(;0<I-w;)S=us(S),I--;for(;w--;){if(P===S||S!==null&&P===S.alternate)break t;P=us(P),S=us(S)}P=null}else P=null;N!==null&&Vm(p,g,N,P,!1),k!==null&&D!==null&&Vm(p,D,k,P,!0)}}e:{if(g=h?xs(h):window,N=g.nodeName&&g.nodeName.toLowerCase(),N==="select"||N==="input"&&g.type==="file")var M=L_;else if(Im(g))if(A0)M=$_;else{M=U_;var F=F_}else(N=g.nodeName)&&N.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=z_);if(M&&(M=M(t,h))){I0(p,M,n,m);break e}F&&F(t,g,h),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&wc(g,"number",g.value)}switch(F=h?xs(h):window,t){case"focusin":(Im(F)||F.contentEditable==="true")&&(ys=F,Pc=h,Gi=null);break;case"focusout":Gi=Pc=ys=null;break;case"mousedown":Dc=!0;break;case"contextmenu":case"mouseup":case"dragend":Dc=!1,Rm(p,n,m);break;case"selectionchange":if(H_)break;case"keydown":case"keyup":Rm(p,n,m)}var x;if(Yd)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else gs?T0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(S0&&n.locale!=="ko"&&(gs||v!=="onCompositionStart"?v==="onCompositionEnd"&&gs&&(x=b0()):(tr=m,Gd="value"in tr?tr.value:tr.textContent,gs=!0)),F=Xa(h,v),0<F.length&&(v=new bm(v,t,null,n,m),p.push({event:v,listeners:F}),x?v.data=x:(x=N0(n),x!==null&&(v.data=x)))),(x=P_?D_(t,n):V_(t,n))&&(h=Xa(h,"onBeforeInput"),0<h.length&&(m=new bm("onBeforeInput","beforeinput",null,n,m),p.push({event:m,listeners:h}),m.data=x))}L0(p,e)})}function fo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=io(t,n),i!=null&&r.unshift(fo(t,i,s)),i=io(t,e),i!=null&&r.push(fo(t,i,s))),t=t.return}return r}function us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,h=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&h!==null&&(u=h,s?(c=io(n,i),c!=null&&o.unshift(fo(n,c,u))):s||(c=io(n,i),c!=null&&o.push(fo(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var K_=/\r\n?/g,Y_=/\u0000|\uFFFD/g;function Mm(t){return(typeof t=="string"?t:""+t).replace(K_,`
`).replace(Y_,"")}function da(t,e,n){if(e=Mm(e),Mm(t)!==e&&n)throw Error(W(425))}function Ja(){}var Vc=null,Mc=null;function Oc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lc=typeof setTimeout=="function"?setTimeout:void 0,X_=typeof clearTimeout=="function"?clearTimeout:void 0,Om=typeof Promise=="function"?Promise:void 0,J_=typeof queueMicrotask=="function"?queueMicrotask:typeof Om<"u"?function(t){return Om.resolve(null).then(t).catch(Z_)}:Lc;function Z_(t){setTimeout(function(){throw t})}function Bu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),lo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);lo(e)}function ar(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),gn="__reactFiber$"+Xs,mo="__reactProps$"+Xs,Pn="__reactContainer$"+Xs,Fc="__reactEvents$"+Xs,ew="__reactListeners$"+Xs,tw="__reactHandles$"+Xs;function Ur(t){var e=t[gn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pn]||n[gn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lm(t);t!==null;){if(n=t[gn])return n;t=Lm(t)}return e}t=n,n=t.parentNode}return null}function Do(t){return t=t[gn]||t[Pn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Ml(t){return t[mo]||null}var Uc=[],_s=-1;function Tr(t){return{current:t}}function Re(t){0>_s||(t.current=Uc[_s],Uc[_s]=null,_s--)}function Ae(t,e){_s++,Uc[_s]=t.current,t.current=e}var yr={},vt=Tr(yr),kt=Tr(!1),Gr=yr;function Os(t,e){var n=t.type.contextTypes;if(!n)return yr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function Za(){Re(kt),Re(vt)}function Fm(t,e,n){if(vt.current!==yr)throw Error(W(168));Ae(vt,e),Ae(kt,n)}function U0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,F1(t)||"Unknown",s));return Le({},n,r)}function el(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yr,Gr=vt.current,Ae(vt,t),Ae(kt,kt.current),!0}function Um(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=U0(t,e,Gr),r.__reactInternalMemoizedMergedChildContext=t,Re(kt),Re(vt),Ae(vt,t)):Re(kt),Ae(kt,n)}var In=null,Ol=!1,qu=!1;function z0(t){In===null?In=[t]:In.push(t)}function nw(t){Ol=!0,z0(t)}function Nr(){if(!qu&&In!==null){qu=!0;var t=0,e=be;try{var n=In;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}In=null,Ol=!1}catch(s){throw In!==null&&(In=In.slice(t+1)),h0(Bd,Nr),s}finally{be=e,qu=!1}}return null}var ws=[],Es=0,tl=null,nl=0,Gt=[],Qt=0,Qr=null,An=1,Cn="";function Vr(t,e){ws[Es++]=nl,ws[Es++]=tl,tl=t,nl=e}function $0(t,e,n){Gt[Qt++]=An,Gt[Qt++]=Cn,Gt[Qt++]=Qr,Qr=t;var r=An;t=Cn;var s=32-sn(r)-1;r&=~(1<<s),n+=1;var i=32-sn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,An=1<<32-sn(e)+s|n<<s|r,Cn=i+t}else An=1<<i|n<<s|r,Cn=t}function Jd(t){t.return!==null&&(Vr(t,1),$0(t,1,0))}function Zd(t){for(;t===tl;)tl=ws[--Es],ws[Es]=null,nl=ws[--Es],ws[Es]=null;for(;t===Qr;)Qr=Gt[--Qt],Gt[Qt]=null,Cn=Gt[--Qt],Gt[Qt]=null,An=Gt[--Qt],Gt[Qt]=null}var zt=null,Ft=null,De=!1,rn=null;function B0(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ft=ar(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qr!==null?{id:An,overflow:Cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ft=null,!0):!1;default:return!1}}function zc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $c(t){if(De){var e=Ft;if(e){var n=e;if(!zm(t,e)){if(zc(t))throw Error(W(418));e=ar(n.nextSibling);var r=zt;e&&zm(t,e)?B0(r,n):(t.flags=t.flags&-4097|2,De=!1,zt=t)}}else{if(zc(t))throw Error(W(418));t.flags=t.flags&-4097|2,De=!1,zt=t}}}function $m(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function ha(t){if(t!==zt)return!1;if(!De)return $m(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Oc(t.type,t.memoizedProps)),e&&(e=Ft)){if(zc(t))throw q0(),Error(W(418));for(;e;)B0(t,e),e=ar(e.nextSibling)}if($m(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ft=ar(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=zt?ar(t.stateNode.nextSibling):null;return!0}function q0(){for(var t=Ft;t;)t=ar(t.nextSibling)}function Ls(){Ft=zt=null,De=!1}function eh(t){rn===null?rn=[t]:rn.push(t)}var rw=Un.ReactCurrentBatchConfig;function Ai(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function fa(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bm(t){var e=t._init;return e(t._payload)}function H0(t){function e(S,w){if(t){var I=S.deletions;I===null?(S.deletions=[w],S.flags|=16):I.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function s(S,w){return S=dr(S,w),S.index=0,S.sibling=null,S}function i(S,w,I){return S.index=I,t?(I=S.alternate,I!==null?(I=I.index,I<w?(S.flags|=2,w):I):(S.flags|=2,w)):(S.flags|=1048576,w)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,w,I,O){return w===null||w.tag!==6?(w=Xu(I,S.mode,O),w.return=S,w):(w=s(w,I),w.return=S,w)}function c(S,w,I,O){var M=I.type;return M===ps?m(S,w,I.props.children,O,I.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Xn&&Bm(M)===w.type)?(O=s(w,I.props),O.ref=Ai(S,w,I),O.return=S,O):(O=Ma(I.type,I.key,I.props,null,S.mode,O),O.ref=Ai(S,w,I),O.return=S,O)}function h(S,w,I,O){return w===null||w.tag!==4||w.stateNode.containerInfo!==I.containerInfo||w.stateNode.implementation!==I.implementation?(w=Ju(I,S.mode,O),w.return=S,w):(w=s(w,I.children||[]),w.return=S,w)}function m(S,w,I,O,M){return w===null||w.tag!==7?(w=Hr(I,S.mode,O,M),w.return=S,w):(w=s(w,I),w.return=S,w)}function p(S,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Xu(""+w,S.mode,I),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case na:return I=Ma(w.type,w.key,w.props,null,S.mode,I),I.ref=Ai(S,null,w),I.return=S,I;case ms:return w=Ju(w,S.mode,I),w.return=S,w;case Xn:var O=w._init;return p(S,O(w._payload),I)}if(Mi(w)||bi(w))return w=Hr(w,S.mode,I,null),w.return=S,w;fa(S,w)}return null}function g(S,w,I,O){var M=w!==null?w.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return M!==null?null:u(S,w,""+I,O);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case na:return I.key===M?c(S,w,I,O):null;case ms:return I.key===M?h(S,w,I,O):null;case Xn:return M=I._init,g(S,w,M(I._payload),O)}if(Mi(I)||bi(I))return M!==null?null:m(S,w,I,O,null);fa(S,I)}return null}function N(S,w,I,O,M){if(typeof O=="string"&&O!==""||typeof O=="number")return S=S.get(I)||null,u(w,S,""+O,M);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case na:return S=S.get(O.key===null?I:O.key)||null,c(w,S,O,M);case ms:return S=S.get(O.key===null?I:O.key)||null,h(w,S,O,M);case Xn:var F=O._init;return N(S,w,I,F(O._payload),M)}if(Mi(O)||bi(O))return S=S.get(I)||null,m(w,S,O,M,null);fa(w,O)}return null}function k(S,w,I,O){for(var M=null,F=null,x=w,v=w=0,_=null;x!==null&&v<I.length;v++){x.index>v?(_=x,x=null):_=x.sibling;var E=g(S,x,I[v],O);if(E===null){x===null&&(x=_);break}t&&x&&E.alternate===null&&e(S,x),w=i(E,w,v),F===null?M=E:F.sibling=E,F=E,x=_}if(v===I.length)return n(S,x),De&&Vr(S,v),M;if(x===null){for(;v<I.length;v++)x=p(S,I[v],O),x!==null&&(w=i(x,w,v),F===null?M=x:F.sibling=x,F=x);return De&&Vr(S,v),M}for(x=r(S,x);v<I.length;v++)_=N(x,S,v,I[v],O),_!==null&&(t&&_.alternate!==null&&x.delete(_.key===null?v:_.key),w=i(_,w,v),F===null?M=_:F.sibling=_,F=_);return t&&x.forEach(function(T){return e(S,T)}),De&&Vr(S,v),M}function P(S,w,I,O){var M=bi(I);if(typeof M!="function")throw Error(W(150));if(I=M.call(I),I==null)throw Error(W(151));for(var F=M=null,x=w,v=w=0,_=null,E=I.next();x!==null&&!E.done;v++,E=I.next()){x.index>v?(_=x,x=null):_=x.sibling;var T=g(S,x,E.value,O);if(T===null){x===null&&(x=_);break}t&&x&&T.alternate===null&&e(S,x),w=i(T,w,v),F===null?M=T:F.sibling=T,F=T,x=_}if(E.done)return n(S,x),De&&Vr(S,v),M;if(x===null){for(;!E.done;v++,E=I.next())E=p(S,E.value,O),E!==null&&(w=i(E,w,v),F===null?M=E:F.sibling=E,F=E);return De&&Vr(S,v),M}for(x=r(S,x);!E.done;v++,E=I.next())E=N(x,S,v,E.value,O),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?v:E.key),w=i(E,w,v),F===null?M=E:F.sibling=E,F=E);return t&&x.forEach(function(C){return e(S,C)}),De&&Vr(S,v),M}function D(S,w,I,O){if(typeof I=="object"&&I!==null&&I.type===ps&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case na:e:{for(var M=I.key,F=w;F!==null;){if(F.key===M){if(M=I.type,M===ps){if(F.tag===7){n(S,F.sibling),w=s(F,I.props.children),w.return=S,S=w;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Xn&&Bm(M)===F.type){n(S,F.sibling),w=s(F,I.props),w.ref=Ai(S,F,I),w.return=S,S=w;break e}n(S,F);break}else e(S,F);F=F.sibling}I.type===ps?(w=Hr(I.props.children,S.mode,O,I.key),w.return=S,S=w):(O=Ma(I.type,I.key,I.props,null,S.mode,O),O.ref=Ai(S,w,I),O.return=S,S=O)}return o(S);case ms:e:{for(F=I.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===I.containerInfo&&w.stateNode.implementation===I.implementation){n(S,w.sibling),w=s(w,I.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=Ju(I,S.mode,O),w.return=S,S=w}return o(S);case Xn:return F=I._init,D(S,w,F(I._payload),O)}if(Mi(I))return k(S,w,I,O);if(bi(I))return P(S,w,I,O);fa(S,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,w!==null&&w.tag===6?(n(S,w.sibling),w=s(w,I),w.return=S,S=w):(n(S,w),w=Xu(I,S.mode,O),w.return=S,S=w),o(S)):n(S,w)}return D}var Fs=H0(!0),W0=H0(!1),rl=Tr(null),sl=null,bs=null,th=null;function nh(){th=bs=sl=null}function rh(t){var e=rl.current;Re(rl),t._currentValue=e}function Bc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ks(t,e){sl=t,th=bs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Jt(t){var e=t._currentValue;if(th!==t)if(t={context:t,memoizedValue:e,next:null},bs===null){if(sl===null)throw Error(W(308));bs=t,sl.dependencies={lanes:0,firstContext:t}}else bs=bs.next=t;return e}var zr=null;function sh(t){zr===null?zr=[t]:zr.push(t)}function G0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,sh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Dn(t,r)}function Dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jn=!1;function ih(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Dn(t,n)}return s=r.interleaved,s===null?(e.next=e,sh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Dn(t,n)}function ka(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qd(t,n)}}function qm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function il(t,e,n,r){var s=t.updateQueue;Jn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==o&&(u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,m=h=c=null,u=i;do{var g=u.lane,N=u.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:N,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,P=u;switch(g=e,N=n,P.tag){case 1:if(k=P.payload,typeof k=="function"){p=k.call(N,p,g);break e}p=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=P.payload,g=typeof k=="function"?k.call(N,p,g):k,g==null)break e;p=Le({},p,g);break e;case 2:Jn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[u]:g.push(u))}else N={eventTime:N,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(h=m=N,c=p):m=m.next=N,o|=g;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;g=u,u=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(c=p),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Yr|=o,t.lanes=o,t.memoizedState=p}}function Hm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var Vo={},vn=Tr(Vo),po=Tr(Vo),go=Tr(Vo);function $r(t){if(t===Vo)throw Error(W(174));return t}function oh(t,e){switch(Ae(go,e),Ae(po,t),Ae(vn,Vo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bc(e,t)}Re(vn),Ae(vn,e)}function Us(){Re(vn),Re(po),Re(go)}function K0(t){$r(go.current);var e=$r(vn.current),n=bc(e,t.type);e!==n&&(Ae(po,t),Ae(vn,n))}function ah(t){po.current===t&&(Re(vn),Re(po))}var Me=Tr(0);function ol(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hu=[];function lh(){for(var t=0;t<Hu.length;t++)Hu[t]._workInProgressVersionPrimary=null;Hu.length=0}var ja=Un.ReactCurrentDispatcher,Wu=Un.ReactCurrentBatchConfig,Kr=0,Oe=null,Xe=null,st=null,al=!1,Qi=!1,yo=0,sw=0;function ht(){throw Error(W(321))}function uh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ln(t[n],e[n]))return!1;return!0}function ch(t,e,n,r,s,i){if(Kr=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ja.current=t===null||t.memoizedState===null?lw:uw,t=n(r,s),Qi){i=0;do{if(Qi=!1,yo=0,25<=i)throw Error(W(301));i+=1,st=Xe=null,e.updateQueue=null,ja.current=cw,t=n(r,s)}while(Qi)}if(ja.current=ll,e=Xe!==null&&Xe.next!==null,Kr=0,st=Xe=Oe=null,al=!1,e)throw Error(W(300));return t}function dh(){var t=yo!==0;return yo=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Oe.memoizedState=st=t:st=st.next=t,st}function Zt(){if(Xe===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=st===null?Oe.memoizedState:st.next;if(e!==null)st=e,Xe=t;else{if(t===null)throw Error(W(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},st===null?Oe.memoizedState=st=t:st=st.next=t}return st}function vo(t,e){return typeof e=="function"?e(t):e}function Gu(t){var e=Zt(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Xe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,h=i;do{var m=h.lane;if((Kr&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var p={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(u=c=p,o=r):c=c.next=p,Oe.lanes|=m,Yr|=m}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=u,ln(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,Yr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qu(t){var e=Zt(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ln(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Y0(){}function X0(t,e){var n=Oe,r=Zt(),s=e(),i=!ln(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,hh(ey.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,xo(9,Z0.bind(null,n,r,s,e),void 0,null),it===null)throw Error(W(349));Kr&30||J0(n,e,s)}return s}function J0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Z0(t,e,n,r){e.value=n,e.getSnapshot=r,ty(e)&&ny(t)}function ey(t,e,n){return n(function(){ty(e)&&ny(t)})}function ty(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ln(t,n)}catch{return!0}}function ny(t){var e=Dn(t,1);e!==null&&on(e,t,1,-1)}function Wm(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vo,lastRenderedState:t},e.queue=t,t=t.dispatch=aw.bind(null,Oe,t),[e.memoizedState,t]}function xo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ry(){return Zt().memoizedState}function Ra(t,e,n,r){var s=mn();Oe.flags|=t,s.memoizedState=xo(1|e,n,void 0,r===void 0?null:r)}function Ll(t,e,n,r){var s=Zt();r=r===void 0?null:r;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,r!==null&&uh(r,o.deps)){s.memoizedState=xo(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=xo(1|e,n,i,r)}function Gm(t,e){return Ra(8390656,8,t,e)}function hh(t,e){return Ll(2048,8,t,e)}function sy(t,e){return Ll(4,2,t,e)}function iy(t,e){return Ll(4,4,t,e)}function oy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ay(t,e,n){return n=n!=null?n.concat([t]):null,Ll(4,4,oy.bind(null,e,t),n)}function fh(){}function ly(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function uy(t,e){var n=Zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&uh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cy(t,e,n){return Kr&21?(ln(n,e)||(n=p0(),Oe.lanes|=n,Yr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function iw(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=Wu.transition;Wu.transition={};try{t(!1),e()}finally{be=n,Wu.transition=r}}function dy(){return Zt().memoizedState}function ow(t,e,n){var r=cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hy(t))fy(e,n);else if(n=G0(t,e,n,r),n!==null){var s=Et();on(n,t,r,s),my(n,e,r)}}function aw(t,e,n){var r=cr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hy(t))fy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,ln(u,o)){var c=e.interleaved;c===null?(s.next=s,sh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=G0(t,e,s,r),n!==null&&(s=Et(),on(n,t,r,s),my(n,e,r))}}function hy(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function fy(t,e){Qi=al=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function my(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qd(t,n)}}var ll={readContext:Jt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},lw={readContext:Jt,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:Jt,useEffect:Gm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ra(4194308,4,oy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ra(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ra(4,2,t,e)},useMemo:function(t,e){var n=mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ow.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:Wm,useDebugValue:fh,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=Wm(!1),e=t[0];return t=iw.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=mn();if(De){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),it===null)throw Error(W(349));Kr&30||J0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Gm(ey.bind(null,r,i,t),[t]),r.flags|=2048,xo(9,Z0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mn(),e=it.identifierPrefix;if(De){var n=Cn,r=An;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=yo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uw={readContext:Jt,useCallback:ly,useContext:Jt,useEffect:hh,useImperativeHandle:ay,useInsertionEffect:sy,useLayoutEffect:iy,useMemo:uy,useReducer:Gu,useRef:ry,useState:function(){return Gu(vo)},useDebugValue:fh,useDeferredValue:function(t){var e=Zt();return cy(e,Xe.memoizedState,t)},useTransition:function(){var t=Gu(vo)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Y0,useSyncExternalStore:X0,useId:dy,unstable_isNewReconciler:!1},cw={readContext:Jt,useCallback:ly,useContext:Jt,useEffect:hh,useImperativeHandle:ay,useInsertionEffect:sy,useLayoutEffect:iy,useMemo:uy,useReducer:Qu,useRef:ry,useState:function(){return Qu(vo)},useDebugValue:fh,useDeferredValue:function(t){var e=Zt();return Xe===null?e.memoizedState=t:cy(e,Xe.memoizedState,t)},useTransition:function(){var t=Qu(vo)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:Y0,useSyncExternalStore:X0,useId:dy,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fl={isMounted:function(t){return(t=t._reactInternals)?ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),s=cr(t),i=kn(r,s);i.payload=e,n!=null&&(i.callback=n),e=lr(t,i,s),e!==null&&(on(e,t,s,r),ka(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),s=cr(t),i=kn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=lr(t,i,s),e!==null&&(on(e,t,s,r),ka(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=cr(t),s=kn(n,r);s.tag=2,e!=null&&(s.callback=e),e=lr(t,s,r),e!==null&&(on(e,t,r,n),ka(e,t,r))}};function Qm(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!co(n,r)||!co(s,i):!0}function py(t,e,n){var r=!1,s=yr,i=e.contextType;return typeof i=="object"&&i!==null?i=Jt(i):(s=jt(e)?Gr:vt.current,r=e.contextTypes,i=(r=r!=null)?Os(t,s):yr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Km(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Fl.enqueueReplaceState(e,e.state,null)}function Hc(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ih(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Jt(i):(i=jt(e)?Gr:vt.current,s.context=Os(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qc(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Fl.enqueueReplaceState(s,s.state,null),il(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function zs(t,e){try{var n="",r=e;do n+=L1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ku(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dw=typeof WeakMap=="function"?WeakMap:Map;function gy(t,e,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cl||(cl=!0,nd=r),Wc(t,e)},n}function yy(t,e,n){n=kn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Wc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Wc(t,e),typeof r!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ym(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Tw.bind(null,t,e,n),e.then(t,t))}function Xm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jm(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kn(-1,1),e.tag=2,lr(n,e,1))),n.lanes|=1),t)}var hw=Un.ReactCurrentOwner,Ct=!1;function wt(t,e,n,r){e.child=t===null?W0(e,null,n,r):Fs(e,t.child,n,r)}function Zm(t,e,n,r,s){n=n.render;var i=e.ref;return ks(e,s),r=ch(t,e,n,r,i,s),n=dh(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vn(t,e,s)):(De&&n&&Jd(e),e.flags|=1,wt(t,e,r,s),e.child)}function ep(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!wh(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,vy(t,e,i,r,s)):(t=Ma(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:co,n(o,r)&&t.ref===e.ref)return Vn(t,e,s)}return e.flags|=1,t=dr(i,r),t.ref=e.ref,t.return=e,e.child=t}function vy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(co(i,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,Vn(t,e,s)}return Gc(t,e,n,r,s)}function xy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Ts,Ot),Ot|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Ts,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ae(Ts,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ae(Ts,Ot),Ot|=r;return wt(t,e,s,n),e.child}function _y(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gc(t,e,n,r,s){var i=jt(n)?Gr:vt.current;return i=Os(e,i),ks(e,s),n=ch(t,e,n,r,i,s),r=dh(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vn(t,e,s)):(De&&r&&Jd(e),e.flags|=1,wt(t,e,n,s),e.child)}function tp(t,e,n,r,s){if(jt(n)){var i=!0;el(e)}else i=!1;if(ks(e,s),e.stateNode===null)Pa(t,e),py(e,n,r),Hc(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Jt(h):(h=jt(n)?Gr:vt.current,h=Os(e,h));var m=n.getDerivedStateFromProps,p=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==h)&&Km(e,o,r,h),Jn=!1;var g=e.memoizedState;o.state=g,il(e,r,o,s),c=e.memoizedState,u!==r||g!==c||kt.current||Jn?(typeof m=="function"&&(qc(e,n,m,r),c=e.memoizedState),(u=Jn||Qm(e,n,u,r,g,c,h))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Q0(t,e),u=e.memoizedProps,h=e.type===e.elementType?u:tn(e.type,u),o.props=h,p=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Jt(c):(c=jt(n)?Gr:vt.current,c=Os(e,c));var N=n.getDerivedStateFromProps;(m=typeof N=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==p||g!==c)&&Km(e,o,r,c),Jn=!1,g=e.memoizedState,o.state=g,il(e,r,o,s);var k=e.memoizedState;u!==p||g!==k||kt.current||Jn?(typeof N=="function"&&(qc(e,n,N,r),k=e.memoizedState),(h=Jn||Qm(e,n,h,r,g,k,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,k,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,k,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),o.props=r,o.state=k,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Qc(t,e,n,r,i,s)}function Qc(t,e,n,r,s,i){_y(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Um(e,n,!1),Vn(t,e,i);r=e.stateNode,hw.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fs(e,t.child,null,i),e.child=Fs(e,null,u,i)):wt(t,e,u,i),e.memoizedState=r.state,s&&Um(e,n,!0),e.child}function wy(t){var e=t.stateNode;e.pendingContext?Fm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fm(t,e.context,!1),oh(t,e.containerInfo)}function np(t,e,n,r,s){return Ls(),eh(s),e.flags|=256,wt(t,e,n,r),e.child}var Kc={dehydrated:null,treeContext:null,retryLane:0};function Yc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ey(t,e,n){var r=e.pendingProps,s=Me.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ae(Me,s&1),t===null)return $c(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=$l(o,r,0,null),t=Hr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Yc(n),e.memoizedState=Kc,t):mh(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return fw(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=dr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=dr(u,i):(i=Hr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Yc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Kc,r}return i=t.child,t=i.sibling,r=dr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mh(t,e){return e=$l({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ma(t,e,n,r){return r!==null&&eh(r),Fs(e,t.child,null,n),t=mh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fw(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ku(Error(W(422))),ma(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=$l({mode:"visible",children:r.children},s,0,null),i=Hr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Fs(e,t.child,null,o),e.child.memoizedState=Yc(o),e.memoizedState=Kc,i);if(!(e.mode&1))return ma(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(W(419)),r=Ku(i,r,void 0),ma(t,e,o,r)}if(u=(o&t.childLanes)!==0,Ct||u){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Dn(t,s),on(r,t,s,-1))}return _h(),r=Ku(Error(W(421))),ma(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Nw.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ft=ar(s.nextSibling),zt=e,De=!0,rn=null,t!==null&&(Gt[Qt++]=An,Gt[Qt++]=Cn,Gt[Qt++]=Qr,An=t.id,Cn=t.overflow,Qr=e),e=mh(e,r.children),e.flags|=4096,e)}function rp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bc(t.return,e,n)}function Yu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function by(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rp(t,n,e);else if(t.tag===19)rp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Me,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ol(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Yu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ol(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Yu(e,!0,n,null,i);break;case"together":Yu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pa(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=dr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=dr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mw(t,e,n){switch(e.tag){case 3:wy(e),Ls();break;case 5:K0(e);break;case 1:jt(e.type)&&el(e);break;case 4:oh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ae(rl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?Ey(t,e,n):(Ae(Me,Me.current&1),t=Vn(t,e,n),t!==null?t.sibling:null);Ae(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return by(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,xy(t,e,n)}return Vn(t,e,n)}var Sy,Xc,Ty,Ny;Sy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xc=function(){};Ty=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,$r(vn.current);var i=null;switch(n){case"input":s=xc(t,s),r=xc(t,r),i=[];break;case"select":s=Le({},s,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":s=Ec(t,s),r=Ec(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ja)}Sc(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var u=s[h];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ro.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(u=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==u&&(c!=null||u!=null))if(h==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ro.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ke("scroll",t),i||u===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};Ny=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ci(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function pw(t,e,n){var r=e.pendingProps;switch(Zd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(e),null;case 1:return jt(e.type)&&Za(),ft(e),null;case 3:return r=e.stateNode,Us(),Re(kt),Re(vt),lh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ha(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rn!==null&&(id(rn),rn=null))),Xc(t,e),ft(e),null;case 5:ah(e);var s=$r(go.current);if(n=e.type,t!==null&&e.stateNode!=null)Ty(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return ft(e),null}if(t=$r(vn.current),ha(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[gn]=e,r[mo]=i,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(s=0;s<Li.length;s++)ke(Li[s],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":hm(r,i),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ke("invalid",r);break;case"textarea":mm(r,i),ke("invalid",r)}Sc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&da(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&da(r.textContent,u,t),s=["children",""+u]):ro.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":ra(r),fm(r,i,!0);break;case"textarea":ra(r),pm(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ja)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=e0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gn]=e,t[mo]=r,Sy(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tc(n,r),n){case"dialog":ke("cancel",t),ke("close",t),s=r;break;case"iframe":case"object":case"embed":ke("load",t),s=r;break;case"video":case"audio":for(s=0;s<Li.length;s++)ke(Li[s],t);s=r;break;case"source":ke("error",t),s=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),s=r;break;case"details":ke("toggle",t),s=r;break;case"input":hm(t,r),s=xc(t,r),ke("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Le({},r,{value:void 0}),ke("invalid",t);break;case"textarea":mm(t,r),s=Ec(t,r),ke("invalid",t);break;default:s=r}Sc(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?r0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&t0(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&so(t,c):typeof c=="number"&&so(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ro.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ke("scroll",t):c!=null&&Ld(t,i,c,o))}switch(n){case"input":ra(t),fm(t,r,!1);break;case"textarea":ra(t),pm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+gr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ns(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ns(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ja)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ft(e),null;case 6:if(t&&e.stateNode!=null)Ny(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=$r(go.current),$r(vn.current),ha(e)){if(r=e.stateNode,n=e.memoizedProps,r[gn]=e,(i=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:da(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&da(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gn]=e,e.stateNode=r}return ft(e),null;case 13:if(Re(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&Ft!==null&&e.mode&1&&!(e.flags&128))q0(),Ls(),e.flags|=98560,i=!1;else if(i=ha(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[gn]=e}else Ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ft(e),i=!1}else rn!==null&&(id(rn),rn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?Je===0&&(Je=3):_h())),e.updateQueue!==null&&(e.flags|=4),ft(e),null);case 4:return Us(),Xc(t,e),t===null&&ho(e.stateNode.containerInfo),ft(e),null;case 10:return rh(e.type._context),ft(e),null;case 17:return jt(e.type)&&Za(),ft(e),null;case 19:if(Re(Me),i=e.memoizedState,i===null)return ft(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ci(i,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ol(t),o!==null){for(e.flags|=128,Ci(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Me,Me.current&1|2),e.child}t=t.sibling}i.tail!==null&&qe()>$s&&(e.flags|=128,r=!0,Ci(i,!1),e.lanes=4194304)}else{if(!r)if(t=ol(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ci(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!De)return ft(e),null}else 2*qe()-i.renderingStartTime>$s&&n!==1073741824&&(e.flags|=128,r=!0,Ci(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=qe(),e.sibling=null,n=Me.current,Ae(Me,r?n&1|2:n&1),e):(ft(e),null);case 22:case 23:return xh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(ft(e),e.subtreeFlags&6&&(e.flags|=8192)):ft(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function gw(t,e){switch(Zd(e),e.tag){case 1:return jt(e.type)&&Za(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Us(),Re(kt),Re(vt),lh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ah(e),null;case 13:if(Re(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));Ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Me),null;case 4:return Us(),null;case 10:return rh(e.type._context),null;case 22:case 23:return xh(),null;case 24:return null;default:return null}}var pa=!1,gt=!1,yw=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Ss(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function Jc(t,e,n){try{n()}catch(r){$e(t,e,r)}}var sp=!1;function vw(t,e){if(Vc=Ka,t=j0(),Xd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,h=0,m=0,p=t,g=null;t:for(;;){for(var N;p!==n||s!==0&&p.nodeType!==3||(u=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(N=p.firstChild)!==null;)g=p,p=N;for(;;){if(p===t)break t;if(g===n&&++h===s&&(u=o),g===i&&++m===r&&(c=o),(N=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=N}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mc={focusedElem:t,selectionRange:n},Ka=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var P=k.memoizedProps,D=k.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?P:tn(e.type,P),D);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(O){$e(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return k=sp,sp=!1,k}function Ki(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Jc(e,n,i)}s=s.next}while(s!==r)}}function Ul(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Iy(t){var e=t.alternate;e!==null&&(t.alternate=null,Iy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gn],delete e[mo],delete e[Fc],delete e[ew],delete e[tw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ay(t){return t.tag===5||t.tag===3||t.tag===4}function ip(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ay(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ed(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ja));else if(r!==4&&(t=t.child,t!==null))for(ed(t,e,n),t=t.sibling;t!==null;)ed(t,e,n),t=t.sibling}function td(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(td(t,e,n),t=t.sibling;t!==null;)td(t,e,n),t=t.sibling}var ot=null,nn=!1;function Qn(t,e,n){for(n=n.child;n!==null;)Cy(t,e,n),n=n.sibling}function Cy(t,e,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Rl,n)}catch{}switch(n.tag){case 5:gt||Ss(n,e);case 6:var r=ot,s=nn;ot=null,Qn(t,e,n),ot=r,nn=s,ot!==null&&(nn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(nn?(t=ot,n=n.stateNode,t.nodeType===8?Bu(t.parentNode,n):t.nodeType===1&&Bu(t,n),lo(t)):Bu(ot,n.stateNode));break;case 4:r=ot,s=nn,ot=n.stateNode.containerInfo,nn=!0,Qn(t,e,n),ot=r,nn=s;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Jc(n,e,o),s=s.next}while(s!==r)}Qn(t,e,n);break;case 1:if(!gt&&(Ss(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){$e(n,e,u)}Qn(t,e,n);break;case 21:Qn(t,e,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,Qn(t,e,n),gt=r):Qn(t,e,n);break;default:Qn(t,e,n)}}function op(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yw),e.forEach(function(r){var s=Iw.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function en(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:ot=u.stateNode,nn=!1;break e;case 3:ot=u.stateNode.containerInfo,nn=!0;break e;case 4:ot=u.stateNode.containerInfo,nn=!0;break e}u=u.return}if(ot===null)throw Error(W(160));Cy(i,o,s),ot=null,nn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){$e(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ky(e,t),e=e.sibling}function ky(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(e,t),fn(t),r&4){try{Ki(3,t,t.return),Ul(3,t)}catch(P){$e(t,t.return,P)}try{Ki(5,t,t.return)}catch(P){$e(t,t.return,P)}}break;case 1:en(e,t),fn(t),r&512&&n!==null&&Ss(n,n.return);break;case 5:if(en(e,t),fn(t),r&512&&n!==null&&Ss(n,n.return),t.flags&32){var s=t.stateNode;try{so(s,"")}catch(P){$e(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Jg(s,i),Tc(u,o);var h=Tc(u,i);for(o=0;o<c.length;o+=2){var m=c[o],p=c[o+1];m==="style"?r0(s,p):m==="dangerouslySetInnerHTML"?t0(s,p):m==="children"?so(s,p):Ld(s,m,p,h)}switch(u){case"input":_c(s,i);break;case"textarea":Zg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var N=i.value;N!=null?Ns(s,!!i.multiple,N,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ns(s,!!i.multiple,i.defaultValue,!0):Ns(s,!!i.multiple,i.multiple?[]:"",!1))}s[mo]=i}catch(P){$e(t,t.return,P)}}break;case 6:if(en(e,t),fn(t),r&4){if(t.stateNode===null)throw Error(W(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){$e(t,t.return,P)}}break;case 3:if(en(e,t),fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lo(e.containerInfo)}catch(P){$e(t,t.return,P)}break;case 4:en(e,t),fn(t);break;case 13:en(e,t),fn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(yh=qe())),r&4&&op(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(h=gt)||m,en(e,t),gt=h):en(e,t),fn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!m&&t.mode&1)for(Z=t,m=t.child;m!==null;){for(p=Z=m;Z!==null;){switch(g=Z,N=g.child,g.tag){case 0:case 11:case 14:case 15:Ki(4,g,g.return);break;case 1:Ss(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(P){$e(r,n,P)}}break;case 5:Ss(g,g.return);break;case 22:if(g.memoizedState!==null){lp(p);continue}}N!==null?(N.return=g,Z=N):lp(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{s=p.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=n0("display",o))}catch(P){$e(t,t.return,P)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(P){$e(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:en(e,t),fn(t),r&4&&op(t);break;case 21:break;default:en(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ay(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(so(s,""),r.flags&=-33);var i=ip(t);td(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=ip(t);ed(t,u,o);break;default:throw Error(W(161))}}catch(c){$e(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xw(t,e,n){Z=t,jy(t)}function jy(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||pa;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||gt;u=pa;var h=gt;if(pa=o,(gt=c)&&!h)for(Z=s;Z!==null;)o=Z,c=o.child,o.tag===22&&o.memoizedState!==null?up(s):c!==null?(c.return=o,Z=c):up(s);for(;i!==null;)Z=i,jy(i),i=i.sibling;Z=s,pa=u,gt=h}ap(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):ap(t)}}function ap(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||Ul(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Hm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hm(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&lo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}gt||e.flags&512&&Zc(e)}catch(g){$e(e,e.return,g)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function lp(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function up(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ul(4,e)}catch(c){$e(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){$e(e,s,c)}}var i=e.return;try{Zc(e)}catch(c){$e(e,i,c)}break;case 5:var o=e.return;try{Zc(e)}catch(c){$e(e,o,c)}}}catch(c){$e(e,e.return,c)}if(e===t){Z=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Z=u;break}Z=e.return}}var _w=Math.ceil,ul=Un.ReactCurrentDispatcher,ph=Un.ReactCurrentOwner,Xt=Un.ReactCurrentBatchConfig,_e=0,it=null,Ge=null,ut=0,Ot=0,Ts=Tr(0),Je=0,_o=null,Yr=0,zl=0,gh=0,Yi=null,It=null,yh=0,$s=1/0,Nn=null,cl=!1,nd=null,ur=null,ga=!1,nr=null,dl=0,Xi=0,rd=null,Da=-1,Va=0;function Et(){return _e&6?qe():Da!==-1?Da:Da=qe()}function cr(t){return t.mode&1?_e&2&&ut!==0?ut&-ut:rw.transition!==null?(Va===0&&(Va=p0()),Va):(t=be,t!==0||(t=window.event,t=t===void 0?16:E0(t.type)),t):1}function on(t,e,n,r){if(50<Xi)throw Xi=0,rd=null,Error(W(185));Ro(t,n,r),(!(_e&2)||t!==it)&&(t===it&&(!(_e&2)&&(zl|=n),Je===4&&er(t,ut)),Rt(t,r),n===1&&_e===0&&!(e.mode&1)&&($s=qe()+500,Ol&&Nr()))}function Rt(t,e){var n=t.callbackNode;r_(t,e);var r=Qa(t,t===it?ut:0);if(r===0)n!==null&&vm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vm(n),e===1)t.tag===0?nw(cp.bind(null,t)):z0(cp.bind(null,t)),J_(function(){!(_e&6)&&Nr()}),n=null;else{switch(g0(r)){case 1:n=Bd;break;case 4:n=f0;break;case 16:n=Ga;break;case 536870912:n=m0;break;default:n=Ga}n=Fy(n,Ry.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ry(t,e){if(Da=-1,Va=0,_e&6)throw Error(W(327));var n=t.callbackNode;if(js()&&t.callbackNode!==n)return null;var r=Qa(t,t===it?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=hl(t,r);else{e=r;var s=_e;_e|=2;var i=Dy();(it!==t||ut!==e)&&(Nn=null,$s=qe()+500,qr(t,e));do try{bw();break}catch(u){Py(t,u)}while(!0);nh(),ul.current=i,_e=s,Ge!==null?e=0:(it=null,ut=0,e=Je)}if(e!==0){if(e===2&&(s=kc(t),s!==0&&(r=s,e=sd(t,s))),e===1)throw n=_o,qr(t,0),er(t,r),Rt(t,qe()),n;if(e===6)er(t,r);else{if(s=t.current.alternate,!(r&30)&&!ww(s)&&(e=hl(t,r),e===2&&(i=kc(t),i!==0&&(r=i,e=sd(t,i))),e===1))throw n=_o,qr(t,0),er(t,r),Rt(t,qe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:Mr(t,It,Nn);break;case 3:if(er(t,r),(r&130023424)===r&&(e=yh+500-qe(),10<e)){if(Qa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Lc(Mr.bind(null,t,It,Nn),e);break}Mr(t,It,Nn);break;case 4:if(er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-sn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_w(r/1960))-r,10<r){t.timeoutHandle=Lc(Mr.bind(null,t,It,Nn),r);break}Mr(t,It,Nn);break;case 5:Mr(t,It,Nn);break;default:throw Error(W(329))}}}return Rt(t,qe()),t.callbackNode===n?Ry.bind(null,t):null}function sd(t,e){var n=Yi;return t.current.memoizedState.isDehydrated&&(qr(t,e).flags|=256),t=hl(t,e),t!==2&&(e=It,It=n,e!==null&&id(e)),t}function id(t){It===null?It=t:It.push.apply(It,t)}function ww(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ln(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~gh,e&=~zl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),r=1<<n;t[n]=-1,e&=~r}}function cp(t){if(_e&6)throw Error(W(327));js();var e=Qa(t,0);if(!(e&1))return Rt(t,qe()),null;var n=hl(t,e);if(t.tag!==0&&n===2){var r=kc(t);r!==0&&(e=r,n=sd(t,r))}if(n===1)throw n=_o,qr(t,0),er(t,e),Rt(t,qe()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mr(t,It,Nn),Rt(t,qe()),null}function vh(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&($s=qe()+500,Ol&&Nr())}}function Xr(t){nr!==null&&nr.tag===0&&!(_e&6)&&js();var e=_e;_e|=1;var n=Xt.transition,r=be;try{if(Xt.transition=null,be=1,t)return t()}finally{be=r,Xt.transition=n,_e=e,!(_e&6)&&Nr()}}function xh(){Ot=Ts.current,Re(Ts)}function qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,X_(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(Zd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Za();break;case 3:Us(),Re(kt),Re(vt),lh();break;case 5:ah(r);break;case 4:Us();break;case 13:Re(Me);break;case 19:Re(Me);break;case 10:rh(r.type._context);break;case 22:case 23:xh()}n=n.return}if(it=t,Ge=t=dr(t.current,null),ut=Ot=e,Je=0,_o=null,gh=zl=Yr=0,It=Yi=null,zr!==null){for(e=0;e<zr.length;e++)if(n=zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zr=null}return t}function Py(t,e){do{var n=Ge;try{if(nh(),ja.current=ll,al){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}al=!1}if(Kr=0,st=Xe=Oe=null,Qi=!1,yo=0,ph.current=null,n===null||n.return===null){Je=1,_o=e,Ge=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=ut,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=u,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var N=Xm(o);if(N!==null){N.flags&=-257,Jm(N,o,u,i,e),N.mode&1&&Ym(i,h,e),e=N,c=h;var k=e.updateQueue;if(k===null){var P=new Set;P.add(c),e.updateQueue=P}else k.add(c);break e}else{if(!(e&1)){Ym(i,h,e),_h();break e}c=Error(W(426))}}else if(De&&u.mode&1){var D=Xm(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Jm(D,o,u,i,e),eh(zs(c,u));break e}}i=c=zs(c,u),Je!==4&&(Je=2),Yi===null?Yi=[i]:Yi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=gy(i,c,e);qm(i,S);break e;case 1:u=c;var w=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ur===null||!ur.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=yy(i,u,e);qm(i,O);break e}}i=i.return}while(i!==null)}My(n)}catch(M){e=M,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function Dy(){var t=ul.current;return ul.current=ll,t===null?ll:t}function _h(){(Je===0||Je===3||Je===2)&&(Je=4),it===null||!(Yr&268435455)&&!(zl&268435455)||er(it,ut)}function hl(t,e){var n=_e;_e|=2;var r=Dy();(it!==t||ut!==e)&&(Nn=null,qr(t,e));do try{Ew();break}catch(s){Py(t,s)}while(!0);if(nh(),_e=n,ul.current=r,Ge!==null)throw Error(W(261));return it=null,ut=0,Je}function Ew(){for(;Ge!==null;)Vy(Ge)}function bw(){for(;Ge!==null&&!Q1();)Vy(Ge)}function Vy(t){var e=Ly(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?My(t):Ge=e,ph.current=null}function My(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gw(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,Ge=null;return}}else if(n=pw(n,e,Ot),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Je===0&&(Je=5)}function Mr(t,e,n){var r=be,s=Xt.transition;try{Xt.transition=null,be=1,Sw(t,e,n,r)}finally{Xt.transition=s,be=r}return null}function Sw(t,e,n,r){do js();while(nr!==null);if(_e&6)throw Error(W(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(s_(t,i),t===it&&(Ge=it=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ga||(ga=!0,Fy(Ga,function(){return js(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xt.transition,Xt.transition=null;var o=be;be=1;var u=_e;_e|=4,ph.current=null,vw(t,n),ky(n,t),q_(Mc),Ka=!!Vc,Mc=Vc=null,t.current=n,xw(n),K1(),_e=u,be=o,Xt.transition=i}else t.current=n;if(ga&&(ga=!1,nr=t,dl=s),i=t.pendingLanes,i===0&&(ur=null),J1(n.stateNode),Rt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(cl)throw cl=!1,t=nd,nd=null,t;return dl&1&&t.tag!==0&&js(),i=t.pendingLanes,i&1?t===rd?Xi++:(Xi=0,rd=t):Xi=0,Nr(),null}function js(){if(nr!==null){var t=g0(dl),e=Xt.transition,n=be;try{if(Xt.transition=null,be=16>t?16:t,nr===null)var r=!1;else{if(t=nr,nr=null,dl=0,_e&6)throw Error(W(331));var s=_e;for(_e|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var h=u[c];for(Z=h;Z!==null;){var m=Z;switch(m.tag){case 0:case 11:case 15:Ki(8,m,i)}var p=m.child;if(p!==null)p.return=m,Z=p;else for(;Z!==null;){m=Z;var g=m.sibling,N=m.return;if(Iy(m),m===h){Z=null;break}if(g!==null){g.return=N,Z=g;break}Z=N}}}var k=i.alternate;if(k!==null){var P=k.child;if(P!==null){k.child=null;do{var D=P.sibling;P.sibling=null,P=D}while(P!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ki(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,Z=S;break e}Z=i.return}}var w=t.current;for(Z=w;Z!==null;){o=Z;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,Z=I;else e:for(o=w;Z!==null;){if(u=Z,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ul(9,u)}}catch(M){$e(u,u.return,M)}if(u===o){Z=null;break e}var O=u.sibling;if(O!==null){O.return=u.return,Z=O;break e}Z=u.return}}if(_e=s,Nr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Rl,t)}catch{}r=!0}return r}finally{be=n,Xt.transition=e}}return!1}function dp(t,e,n){e=zs(n,e),e=gy(t,e,1),t=lr(t,e,1),e=Et(),t!==null&&(Ro(t,1,e),Rt(t,e))}function $e(t,e,n){if(t.tag===3)dp(t,t,n);else for(;e!==null;){if(e.tag===3){dp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ur===null||!ur.has(r))){t=zs(n,t),t=yy(e,t,1),e=lr(e,t,1),t=Et(),e!==null&&(Ro(e,1,t),Rt(e,t));break}}e=e.return}}function Tw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(ut&n)===n&&(Je===4||Je===3&&(ut&130023424)===ut&&500>qe()-yh?qr(t,0):gh|=n),Rt(t,e)}function Oy(t,e){e===0&&(t.mode&1?(e=oa,oa<<=1,!(oa&130023424)&&(oa=4194304)):e=1);var n=Et();t=Dn(t,e),t!==null&&(Ro(t,e,n),Rt(t,n))}function Nw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Oy(t,n)}function Iw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),Oy(t,n)}var Ly;Ly=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,mw(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,De&&e.flags&1048576&&$0(e,nl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pa(t,e),t=e.pendingProps;var s=Os(e,vt.current);ks(e,n),s=ch(null,e,r,t,s,n);var i=dh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(i=!0,el(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ih(e),s.updater=Fl,e.stateNode=s,s._reactInternals=e,Hc(e,r,t,n),e=Qc(null,e,r,!0,i,n)):(e.tag=0,De&&i&&Jd(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pa(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Cw(r),t=tn(r,t),s){case 0:e=Gc(null,e,r,t,n);break e;case 1:e=tp(null,e,r,t,n);break e;case 11:e=Zm(null,e,r,t,n);break e;case 14:e=ep(null,e,r,tn(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Gc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),tp(t,e,r,s,n);case 3:e:{if(wy(e),t===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Q0(t,e),il(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=zs(Error(W(423)),e),e=np(t,e,r,n,s);break e}else if(r!==s){s=zs(Error(W(424)),e),e=np(t,e,r,n,s);break e}else for(Ft=ar(e.stateNode.containerInfo.firstChild),zt=e,De=!0,rn=null,n=W0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ls(),r===s){e=Vn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return K0(e),t===null&&$c(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Oc(r,s)?o=null:i!==null&&Oc(r,i)&&(e.flags|=32),_y(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&$c(e),null;case 13:return Ey(t,e,n);case 4:return oh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fs(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Zm(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ae(rl,r._currentValue),r._currentValue=o,i!==null)if(ln(i.value,o)){if(i.children===s.children&&!kt.current){e=Vn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=kn(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Bc(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Bc(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ks(e,n),s=Jt(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=tn(r,e.pendingProps),s=tn(r.type,s),ep(t,e,r,s,n);case 15:return vy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Pa(t,e),e.tag=1,jt(r)?(t=!0,el(e)):t=!1,ks(e,n),py(e,r,s),Hc(e,r,s,n),Qc(null,e,r,!0,t,n);case 19:return by(t,e,n);case 22:return xy(t,e,n)}throw Error(W(156,e.tag))};function Fy(t,e){return h0(t,e)}function Aw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new Aw(t,e,n,r)}function wh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cw(t){if(typeof t=="function")return wh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ud)return 11;if(t===zd)return 14}return 2}function dr(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ma(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")wh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ps:return Hr(n.children,s,i,e);case Fd:o=8,s|=8;break;case pc:return t=Yt(12,n,e,s|2),t.elementType=pc,t.lanes=i,t;case gc:return t=Yt(13,n,e,s),t.elementType=gc,t.lanes=i,t;case yc:return t=Yt(19,n,e,s),t.elementType=yc,t.lanes=i,t;case Kg:return $l(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gg:o=10;break e;case Qg:o=9;break e;case Ud:o=11;break e;case zd:o=14;break e;case Xn:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Hr(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function $l(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=Kg,t.lanes=n,t.stateNode={isHidden:!1},t}function Xu(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function Ju(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kw(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ru(0),this.expirationTimes=Ru(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ru(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Eh(t,e,n,r,s,i,o,u,c){return t=new kw(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ih(i),t}function jw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ms,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Uy(t){if(!t)return yr;t=t._reactInternals;e:{if(ts(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(jt(n))return U0(t,n,e)}return e}function zy(t,e,n,r,s,i,o,u,c){return t=Eh(n,r,!0,t,s,i,o,u,c),t.context=Uy(null),n=t.current,r=Et(),s=cr(n),i=kn(r,s),i.callback=e??null,lr(n,i,s),t.current.lanes=s,Ro(t,s,r),Rt(t,r),t}function Bl(t,e,n,r){var s=e.current,i=Et(),o=cr(s);return n=Uy(n),e.context===null?e.context=n:e.pendingContext=n,e=kn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=lr(s,e,o),t!==null&&(on(t,s,o,i),ka(t,s,o)),o}function fl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function bh(t,e){hp(t,e),(t=t.alternate)&&hp(t,e)}function Rw(){return null}var $y=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sh(t){this._internalRoot=t}ql.prototype.render=Sh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Bl(t,e,null,null)};ql.prototype.unmount=Sh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xr(function(){Bl(null,t,null,null)}),e[Pn]=null}};function ql(t){this._internalRoot=t}ql.prototype.unstable_scheduleHydration=function(t){if(t){var e=x0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zn.length&&e!==0&&e<Zn[n].priority;n++);Zn.splice(n,0,t),n===0&&w0(t)}};function Th(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fp(){}function Pw(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=fl(o);i.call(h)}}var o=zy(e,r,t,0,null,!1,!1,"",fp);return t._reactRootContainer=o,t[Pn]=o.current,ho(t.nodeType===8?t.parentNode:t),Xr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var h=fl(c);u.call(h)}}var c=Eh(t,0,!1,null,null,!1,!1,"",fp);return t._reactRootContainer=c,t[Pn]=c.current,ho(t.nodeType===8?t.parentNode:t),Xr(function(){Bl(e,c,n,r)}),c}function Wl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=fl(o);u.call(c)}}Bl(e,o,t,s)}else o=Pw(n,e,t,s,r);return fl(o)}y0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Oi(e.pendingLanes);n!==0&&(qd(e,n|1),Rt(e,qe()),!(_e&6)&&($s=qe()+500,Nr()))}break;case 13:Xr(function(){var r=Dn(t,1);if(r!==null){var s=Et();on(r,t,1,s)}}),bh(t,1)}};Hd=function(t){if(t.tag===13){var e=Dn(t,134217728);if(e!==null){var n=Et();on(e,t,134217728,n)}bh(t,134217728)}};v0=function(t){if(t.tag===13){var e=cr(t),n=Dn(t,e);if(n!==null){var r=Et();on(n,t,e,r)}bh(t,e)}};x0=function(){return be};_0=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};Ic=function(t,e,n){switch(e){case"input":if(_c(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ml(r);if(!s)throw Error(W(90));Xg(r),_c(r,s)}}}break;case"textarea":Zg(t,n);break;case"select":e=n.value,e!=null&&Ns(t,!!n.multiple,e,!1)}};o0=vh;a0=Xr;var Dw={usingClientEntryPoint:!1,Events:[Do,xs,Ml,s0,i0,vh]},ki={findFiberByHostInstance:Ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vw={bundleType:ki.bundleType,version:ki.version,rendererPackageName:ki.rendererPackageName,rendererConfig:ki.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c0(t),t===null?null:t.stateNode},findFiberByHostInstance:ki.findFiberByHostInstance||Rw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ya.isDisabled&&ya.supportsFiber)try{Rl=ya.inject(Vw),yn=ya}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dw;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Th(e))throw Error(W(200));return jw(t,e,null,n)};Bt.createRoot=function(t,e){if(!Th(t))throw Error(W(299));var n=!1,r="",s=$y;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Eh(t,1,!1,null,null,n,!1,r,s),t[Pn]=e.current,ho(t.nodeType===8?t.parentNode:t),new Sh(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=c0(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return Xr(t)};Bt.hydrate=function(t,e,n){if(!Hl(e))throw Error(W(200));return Wl(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Th(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=$y;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zy(e,null,t,1,n??null,s,!1,i,o),t[Pn]=e.current,ho(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ql(e)};Bt.render=function(t,e,n){if(!Hl(e))throw Error(W(200));return Wl(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!Hl(t))throw Error(W(40));return t._reactRootContainer?(Xr(function(){Wl(null,null,t,!1,function(){t._reactRootContainer=null,t[Pn]=null})}),!0):!1};Bt.unstable_batchedUpdates=vh;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hl(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Wl(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function By(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(By)}catch(t){console.error(t)}}By(),Bg.exports=Bt;var Mw=Bg.exports,mp=Mw;fc.createRoot=mp.createRoot,fc.hydrateRoot=mp.hydrateRoot;const Ow=()=>{};var pp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Lw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Hy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,m=i>>2,p=(i&3)<<4|u>>4;let g=(u&15)<<2|h>>6,N=h&63;c||(N=64,o||(g=64)),r.push(n[m],n[p],n[g],n[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qy(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Lw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||h==null||p==null)throw new Fw;const g=i<<2|u>>4;if(r.push(g),h!==64){const N=u<<4&240|h>>2;if(r.push(N),p!==64){const k=h<<6&192|p;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Fw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Uw=function(t){const e=qy(t);return Hy.encodeByteArray(e,!0)},ml=function(t){return Uw(t).replace(/\./g,"")},zw=function(t){try{return Hy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=()=>$w().__FIREBASE_DEFAULTS__,qw=()=>{if(typeof process>"u"||typeof pp>"u")return;const t=pp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Hw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zw(t[1]);return e&&JSON.parse(e)},Nh=()=>{try{return Ow()||Bw()||qw()||Hw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ww=t=>{var e,n;return(n=(e=Nh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Gw=t=>{const e=Ww(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Wy=()=>{var t;return(t=Nh())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ml(JSON.stringify(n)),ml(JSON.stringify(o)),""].join(".")}const Ji={};function Xw(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ji))Ji[e]?t.emulator.push(e):t.prod.push(e);return t}function Jw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let gp=!1;function Zw(t,e){if(typeof window>"u"||typeof document>"u"||!Ih(window.location.host)||Ji[t]===e||Ji[t]||gp)return;Ji[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=Xw().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function u(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,N){g.setAttribute("width","24"),g.setAttribute("id",N),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{gp=!0,o()},g}function m(g,N){g.setAttribute("id",N),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=Jw(r),N=n("text"),k=document.getElementById(N)||document.createElement("span"),P=n("learnmore"),D=document.getElementById(P)||document.createElement("a"),S=n("preprendIcon"),w=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const I=g.element;u(I),m(D,P);const O=h();c(w,S),I.append(w,k,D,O),document.body.appendChild(I)}i?(k.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tE(){var e;const t=(e=Nh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nE(){return!tE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rE(){try{return typeof indexedDB=="object"}catch{return!1}}function sE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="FirebaseError";class Js extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=iE,Object.setPrototypeOf(this,Js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gy.prototype.create)}}class Gy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?oE(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new Js(s,u,r)}}function oE(t,e){return t.replace(aE,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const aE=/\{\$([^}]+)}/g;function pl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(yp(i)&&yp(o)){if(!pl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function yp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t){return t&&t._delegate?t._delegate:t}class wo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Qw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cE(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uE(t){return t===Or?void 0:t}function cE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const hE={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},fE=xe.INFO,mE={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},pE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=mE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qy{constructor(e){this.name=e,this._logLevel=fE,this._logHandler=pE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const gE=(t,e)=>e.some(n=>t instanceof n);let vp,xp;function yE(){return vp||(vp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vE(){return xp||(xp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ky=new WeakMap,od=new WeakMap,Yy=new WeakMap,Zu=new WeakMap,Ah=new WeakMap;function xE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(hr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ky.set(n,t)}).catch(()=>{}),Ah.set(e,t),e}function _E(t){if(od.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});od.set(t,e)}let ad={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return od.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Yy.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wE(t){ad=t(ad)}function EE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ec(this),e,...n);return Yy.set(r,e.sort?e.sort():[e]),hr(r)}:vE().includes(t)?function(...e){return t.apply(ec(this),e),hr(Ky.get(this))}:function(...e){return hr(t.apply(ec(this),e))}}function bE(t){return typeof t=="function"?EE(t):(t instanceof IDBTransaction&&_E(t),gE(t,yE())?new Proxy(t,ad):t)}function hr(t){if(t instanceof IDBRequest)return xE(t);if(Zu.has(t))return Zu.get(t);const e=bE(t);return e!==t&&(Zu.set(t,e),Ah.set(e,t)),e}const ec=t=>Ah.get(t);function SE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=hr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(hr(o.result),c.oldVersion,c.newVersion,hr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const TE=["get","getKey","getAll","getAllKeys","count"],NE=["put","add","delete","clear"],tc=new Map;function _p(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(tc.get(e))return tc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=NE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||TE.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return tc.set(e,i),i}wE(t=>({...t,get:(e,n,r)=>_p(e,n)||t.get(e,n,r),has:(e,n)=>!!_p(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ld="@firebase/app",wp="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On=new Qy("@firebase/app"),CE="@firebase/app-compat",kE="@firebase/analytics-compat",jE="@firebase/analytics",RE="@firebase/app-check-compat",PE="@firebase/app-check",DE="@firebase/auth",VE="@firebase/auth-compat",ME="@firebase/database",OE="@firebase/data-connect",LE="@firebase/database-compat",FE="@firebase/functions",UE="@firebase/functions-compat",zE="@firebase/installations",$E="@firebase/installations-compat",BE="@firebase/messaging",qE="@firebase/messaging-compat",HE="@firebase/performance",WE="@firebase/performance-compat",GE="@firebase/remote-config",QE="@firebase/remote-config-compat",KE="@firebase/storage",YE="@firebase/storage-compat",XE="@firebase/firestore",JE="@firebase/ai",ZE="@firebase/firestore-compat",e2="firebase",t2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ud="[DEFAULT]",n2={[ld]:"fire-core",[CE]:"fire-core-compat",[jE]:"fire-analytics",[kE]:"fire-analytics-compat",[PE]:"fire-app-check",[RE]:"fire-app-check-compat",[DE]:"fire-auth",[VE]:"fire-auth-compat",[ME]:"fire-rtdb",[OE]:"fire-data-connect",[LE]:"fire-rtdb-compat",[FE]:"fire-fn",[UE]:"fire-fn-compat",[zE]:"fire-iid",[$E]:"fire-iid-compat",[BE]:"fire-fcm",[qE]:"fire-fcm-compat",[HE]:"fire-perf",[WE]:"fire-perf-compat",[GE]:"fire-rc",[QE]:"fire-rc-compat",[KE]:"fire-gcs",[YE]:"fire-gcs-compat",[XE]:"fire-fst",[ZE]:"fire-fst-compat",[JE]:"fire-vertex","fire-js":"fire-js",[e2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=new Map,r2=new Map,cd=new Map;function Ep(t,e){try{t.container.addComponent(e)}catch(n){On.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yl(t){const e=t.name;if(cd.has(e))return On.debug(`There were multiple attempts to register component ${e}.`),!1;cd.set(e,t);for(const n of gl.values())Ep(n,t);for(const n of r2.values())Ep(n,t);return!0}function s2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function i2(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new Gy("app","Firebase",o2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=t2;function Xy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ud,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw fr.create("bad-app-name",{appName:String(s)});if(n||(n=Wy()),!n)throw fr.create("no-options");const i=gl.get(s);if(i){if(pl(n,i.options)&&pl(r,i.config))return i;throw fr.create("duplicate-app",{appName:s})}const o=new dE(s);for(const c of cd.values())o.addComponent(c);const u=new a2(n,r,o);return gl.set(s,u),u}function u2(t=ud){const e=gl.get(t);if(!e&&t===ud&&Wy())return Xy();if(!e)throw fr.create("no-app",{appName:t});return e}function Rs(t,e,n){let r=n2[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),On.warn(o.join(" "));return}yl(new wo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="firebase-heartbeat-database",d2=1,Eo="firebase-heartbeat-store";let nc=null;function Jy(){return nc||(nc=SE(c2,d2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Eo)}catch(n){console.warn(n)}}}}).catch(t=>{throw fr.create("idb-open",{originalErrorMessage:t.message})})),nc}async function h2(t){try{const n=(await Jy()).transaction(Eo),r=await n.objectStore(Eo).get(Zy(t));return await n.done,r}catch(e){if(e instanceof Js)On.warn(e.message);else{const n=fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});On.warn(n.message)}}}async function bp(t,e){try{const r=(await Jy()).transaction(Eo,"readwrite");await r.objectStore(Eo).put(e,Zy(t)),await r.done}catch(n){if(n instanceof Js)On.warn(n.message);else{const r=fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});On.warn(r.message)}}}function Zy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=1024,m2=30;class p2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new y2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Sp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>m2){const o=v2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){On.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Sp(),{heartbeatsToSend:r,unsentEntries:s}=g2(this._heartbeatsCache.heartbeats),i=ml(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return On.warn(n),""}}}function Sp(){return new Date().toISOString().substring(0,10)}function g2(t,e=f2){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Tp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Tp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class y2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rE()?sE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await h2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return bp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Tp(t){return ml(JSON.stringify({version:2,heartbeats:t})).length}function v2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){yl(new wo("platform-logger",e=>new IE(e),"PRIVATE")),yl(new wo("heartbeat",e=>new p2(e),"PRIVATE")),Rs(ld,wp,t),Rs(ld,wp,"esm2020"),Rs("fire-js","")}x2("");var _2="firebase",w2="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rs(_2,w2,"app");var Np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mr,ev;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function _(){}_.prototype=v.prototype,x.F=v.prototype,x.prototype=new _,x.prototype.constructor=x,x.D=function(E,T,C){for(var b=Array(arguments.length-2),we=2;we<arguments.length;we++)b[we-2]=arguments[we];return v.prototype[T].apply(E,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,v,_){_||(_=0);const E=Array(16);if(typeof v=="string")for(var T=0;T<16;++T)E[T]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(T=0;T<16;++T)E[T]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=x.g[0],_=x.g[1],T=x.g[2];let C=x.g[3],b;b=v+(C^_&(T^C))+E[0]+3614090360&4294967295,v=_+(b<<7&4294967295|b>>>25),b=C+(T^v&(_^T))+E[1]+3905402710&4294967295,C=v+(b<<12&4294967295|b>>>20),b=T+(_^C&(v^_))+E[2]+606105819&4294967295,T=C+(b<<17&4294967295|b>>>15),b=_+(v^T&(C^v))+E[3]+3250441966&4294967295,_=T+(b<<22&4294967295|b>>>10),b=v+(C^_&(T^C))+E[4]+4118548399&4294967295,v=_+(b<<7&4294967295|b>>>25),b=C+(T^v&(_^T))+E[5]+1200080426&4294967295,C=v+(b<<12&4294967295|b>>>20),b=T+(_^C&(v^_))+E[6]+2821735955&4294967295,T=C+(b<<17&4294967295|b>>>15),b=_+(v^T&(C^v))+E[7]+4249261313&4294967295,_=T+(b<<22&4294967295|b>>>10),b=v+(C^_&(T^C))+E[8]+1770035416&4294967295,v=_+(b<<7&4294967295|b>>>25),b=C+(T^v&(_^T))+E[9]+2336552879&4294967295,C=v+(b<<12&4294967295|b>>>20),b=T+(_^C&(v^_))+E[10]+4294925233&4294967295,T=C+(b<<17&4294967295|b>>>15),b=_+(v^T&(C^v))+E[11]+2304563134&4294967295,_=T+(b<<22&4294967295|b>>>10),b=v+(C^_&(T^C))+E[12]+1804603682&4294967295,v=_+(b<<7&4294967295|b>>>25),b=C+(T^v&(_^T))+E[13]+4254626195&4294967295,C=v+(b<<12&4294967295|b>>>20),b=T+(_^C&(v^_))+E[14]+2792965006&4294967295,T=C+(b<<17&4294967295|b>>>15),b=_+(v^T&(C^v))+E[15]+1236535329&4294967295,_=T+(b<<22&4294967295|b>>>10),b=v+(T^C&(_^T))+E[1]+4129170786&4294967295,v=_+(b<<5&4294967295|b>>>27),b=C+(_^T&(v^_))+E[6]+3225465664&4294967295,C=v+(b<<9&4294967295|b>>>23),b=T+(v^_&(C^v))+E[11]+643717713&4294967295,T=C+(b<<14&4294967295|b>>>18),b=_+(C^v&(T^C))+E[0]+3921069994&4294967295,_=T+(b<<20&4294967295|b>>>12),b=v+(T^C&(_^T))+E[5]+3593408605&4294967295,v=_+(b<<5&4294967295|b>>>27),b=C+(_^T&(v^_))+E[10]+38016083&4294967295,C=v+(b<<9&4294967295|b>>>23),b=T+(v^_&(C^v))+E[15]+3634488961&4294967295,T=C+(b<<14&4294967295|b>>>18),b=_+(C^v&(T^C))+E[4]+3889429448&4294967295,_=T+(b<<20&4294967295|b>>>12),b=v+(T^C&(_^T))+E[9]+568446438&4294967295,v=_+(b<<5&4294967295|b>>>27),b=C+(_^T&(v^_))+E[14]+3275163606&4294967295,C=v+(b<<9&4294967295|b>>>23),b=T+(v^_&(C^v))+E[3]+4107603335&4294967295,T=C+(b<<14&4294967295|b>>>18),b=_+(C^v&(T^C))+E[8]+1163531501&4294967295,_=T+(b<<20&4294967295|b>>>12),b=v+(T^C&(_^T))+E[13]+2850285829&4294967295,v=_+(b<<5&4294967295|b>>>27),b=C+(_^T&(v^_))+E[2]+4243563512&4294967295,C=v+(b<<9&4294967295|b>>>23),b=T+(v^_&(C^v))+E[7]+1735328473&4294967295,T=C+(b<<14&4294967295|b>>>18),b=_+(C^v&(T^C))+E[12]+2368359562&4294967295,_=T+(b<<20&4294967295|b>>>12),b=v+(_^T^C)+E[5]+4294588738&4294967295,v=_+(b<<4&4294967295|b>>>28),b=C+(v^_^T)+E[8]+2272392833&4294967295,C=v+(b<<11&4294967295|b>>>21),b=T+(C^v^_)+E[11]+1839030562&4294967295,T=C+(b<<16&4294967295|b>>>16),b=_+(T^C^v)+E[14]+4259657740&4294967295,_=T+(b<<23&4294967295|b>>>9),b=v+(_^T^C)+E[1]+2763975236&4294967295,v=_+(b<<4&4294967295|b>>>28),b=C+(v^_^T)+E[4]+1272893353&4294967295,C=v+(b<<11&4294967295|b>>>21),b=T+(C^v^_)+E[7]+4139469664&4294967295,T=C+(b<<16&4294967295|b>>>16),b=_+(T^C^v)+E[10]+3200236656&4294967295,_=T+(b<<23&4294967295|b>>>9),b=v+(_^T^C)+E[13]+681279174&4294967295,v=_+(b<<4&4294967295|b>>>28),b=C+(v^_^T)+E[0]+3936430074&4294967295,C=v+(b<<11&4294967295|b>>>21),b=T+(C^v^_)+E[3]+3572445317&4294967295,T=C+(b<<16&4294967295|b>>>16),b=_+(T^C^v)+E[6]+76029189&4294967295,_=T+(b<<23&4294967295|b>>>9),b=v+(_^T^C)+E[9]+3654602809&4294967295,v=_+(b<<4&4294967295|b>>>28),b=C+(v^_^T)+E[12]+3873151461&4294967295,C=v+(b<<11&4294967295|b>>>21),b=T+(C^v^_)+E[15]+530742520&4294967295,T=C+(b<<16&4294967295|b>>>16),b=_+(T^C^v)+E[2]+3299628645&4294967295,_=T+(b<<23&4294967295|b>>>9),b=v+(T^(_|~C))+E[0]+4096336452&4294967295,v=_+(b<<6&4294967295|b>>>26),b=C+(_^(v|~T))+E[7]+1126891415&4294967295,C=v+(b<<10&4294967295|b>>>22),b=T+(v^(C|~_))+E[14]+2878612391&4294967295,T=C+(b<<15&4294967295|b>>>17),b=_+(C^(T|~v))+E[5]+4237533241&4294967295,_=T+(b<<21&4294967295|b>>>11),b=v+(T^(_|~C))+E[12]+1700485571&4294967295,v=_+(b<<6&4294967295|b>>>26),b=C+(_^(v|~T))+E[3]+2399980690&4294967295,C=v+(b<<10&4294967295|b>>>22),b=T+(v^(C|~_))+E[10]+4293915773&4294967295,T=C+(b<<15&4294967295|b>>>17),b=_+(C^(T|~v))+E[1]+2240044497&4294967295,_=T+(b<<21&4294967295|b>>>11),b=v+(T^(_|~C))+E[8]+1873313359&4294967295,v=_+(b<<6&4294967295|b>>>26),b=C+(_^(v|~T))+E[15]+4264355552&4294967295,C=v+(b<<10&4294967295|b>>>22),b=T+(v^(C|~_))+E[6]+2734768916&4294967295,T=C+(b<<15&4294967295|b>>>17),b=_+(C^(T|~v))+E[13]+1309151649&4294967295,_=T+(b<<21&4294967295|b>>>11),b=v+(T^(_|~C))+E[4]+4149444226&4294967295,v=_+(b<<6&4294967295|b>>>26),b=C+(_^(v|~T))+E[11]+3174756917&4294967295,C=v+(b<<10&4294967295|b>>>22),b=T+(v^(C|~_))+E[2]+718787259&4294967295,T=C+(b<<15&4294967295|b>>>17),b=_+(C^(T|~v))+E[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(T+(b<<21&4294967295|b>>>11))&4294967295,x.g[2]=x.g[2]+T&4294967295,x.g[3]=x.g[3]+C&4294967295}r.prototype.v=function(x,v){v===void 0&&(v=x.length);const _=v-this.blockSize,E=this.C;let T=this.h,C=0;for(;C<v;){if(T==0)for(;C<=_;)s(this,x,C),C+=this.blockSize;if(typeof x=="string"){for(;C<v;)if(E[T++]=x.charCodeAt(C++),T==this.blockSize){s(this,E),T=0;break}}else for(;C<v;)if(E[T++]=x[C++],T==this.blockSize){s(this,E),T=0;break}}this.h=T,this.o+=v},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;v=this.o*8;for(var _=x.length-8;_<x.length;++_)x[_]=v&255,v/=256;for(this.v(x),x=Array(16),v=0,_=0;_<4;++_)for(let E=0;E<32;E+=8)x[v++]=this.g[_]>>>E&255;return x};function i(x,v){var _=u;return Object.prototype.hasOwnProperty.call(_,x)?_[x]:_[x]=v(x)}function o(x,v){this.h=v;const _=[];let E=!0;for(let T=x.length-1;T>=0;T--){const C=x[T]|0;E&&C==v||(_[T]=C,E=!1)}this.g=_}var u={};function c(x){return-128<=x&&x<128?i(x,function(v){return new o([v|0],v<0?-1:0)}):new o([x|0],x<0?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return p;if(x<0)return D(h(-x));const v=[];let _=1;for(let E=0;x>=_;E++)v[E]=x/_|0,_*=4294967296;return new o(v,0)}function m(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return D(m(x.substring(1),v));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=h(Math.pow(v,8));let E=p;for(let C=0;C<x.length;C+=8){var T=Math.min(8,x.length-C);const b=parseInt(x.substring(C,C+T),v);T<8?(T=h(Math.pow(v,T)),E=E.j(T).add(h(b))):(E=E.j(_),E=E.add(h(b)))}return E}var p=c(0),g=c(1),N=c(16777216);t=o.prototype,t.m=function(){if(P(this))return-D(this).m();let x=0,v=1;for(let _=0;_<this.g.length;_++){const E=this.i(_);x+=(E>=0?E:4294967296+E)*v,v*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(k(this))return"0";if(P(this))return"-"+D(this).toString(x);const v=h(Math.pow(x,6));var _=this;let E="";for(;;){const T=O(_,v).g;_=S(_,T.j(v));let C=((_.g.length>0?_.g[0]:_.h)>>>0).toString(x);if(_=T,k(_))return C+E;for(;C.length<6;)C="0"+C;E=C+E}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function k(x){if(x.h!=0)return!1;for(let v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function P(x){return x.h==-1}t.l=function(x){return x=S(this,x),P(x)?-1:k(x)?0:1};function D(x){const v=x.g.length,_=[];for(let E=0;E<v;E++)_[E]=~x.g[E];return new o(_,~x.h).add(g)}t.abs=function(){return P(this)?D(this):this},t.add=function(x){const v=Math.max(this.g.length,x.g.length),_=[];let E=0;for(let T=0;T<=v;T++){let C=E+(this.i(T)&65535)+(x.i(T)&65535),b=(C>>>16)+(this.i(T)>>>16)+(x.i(T)>>>16);E=b>>>16,C&=65535,b&=65535,_[T]=b<<16|C}return new o(_,_[_.length-1]&-2147483648?-1:0)};function S(x,v){return x.add(D(v))}t.j=function(x){if(k(this)||k(x))return p;if(P(this))return P(x)?D(this).j(D(x)):D(D(this).j(x));if(P(x))return D(this.j(D(x)));if(this.l(N)<0&&x.l(N)<0)return h(this.m()*x.m());const v=this.g.length+x.g.length,_=[];for(var E=0;E<2*v;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(let T=0;T<x.g.length;T++){const C=this.i(E)>>>16,b=this.i(E)&65535,we=x.i(T)>>>16,Pe=x.i(T)&65535;_[2*E+2*T]+=b*Pe,w(_,2*E+2*T),_[2*E+2*T+1]+=C*Pe,w(_,2*E+2*T+1),_[2*E+2*T+1]+=b*we,w(_,2*E+2*T+1),_[2*E+2*T+2]+=C*we,w(_,2*E+2*T+2)}for(x=0;x<v;x++)_[x]=_[2*x+1]<<16|_[2*x];for(x=v;x<2*v;x++)_[x]=0;return new o(_,0)};function w(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function I(x,v){this.g=x,this.h=v}function O(x,v){if(k(v))throw Error("division by zero");if(k(x))return new I(p,p);if(P(x))return v=O(D(x),v),new I(D(v.g),D(v.h));if(P(v))return v=O(x,D(v)),new I(D(v.g),v.h);if(x.g.length>30){if(P(x)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,E=v;E.l(x)<=0;)_=M(_),E=M(E);var T=F(_,1),C=F(E,1);for(E=F(E,2),_=F(_,2);!k(E);){var b=C.add(E);b.l(x)<=0&&(T=T.add(_),C=b),E=F(E,1),_=F(_,1)}return v=S(x,T.j(v)),new I(T,v)}for(T=p;x.l(v)>=0;){for(_=Math.max(1,Math.floor(x.m()/v.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),C=h(_),b=C.j(v);P(b)||b.l(x)>0;)_-=E,C=h(_),b=C.j(v);k(C)&&(C=g),T=T.add(C),x=S(x,b)}return new I(T,x)}t.B=function(x){return O(this,x).h},t.and=function(x){const v=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<v;E++)_[E]=this.i(E)&x.i(E);return new o(_,this.h&x.h)},t.or=function(x){const v=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<v;E++)_[E]=this.i(E)|x.i(E);return new o(_,this.h|x.h)},t.xor=function(x){const v=Math.max(this.g.length,x.g.length),_=[];for(let E=0;E<v;E++)_[E]=this.i(E)^x.i(E);return new o(_,this.h^x.h)};function M(x){const v=x.g.length+1,_=[];for(let E=0;E<v;E++)_[E]=x.i(E)<<1|x.i(E-1)>>>31;return new o(_,x.h)}function F(x,v){const _=v>>5;v%=32;const E=x.g.length-_,T=[];for(let C=0;C<E;C++)T[C]=v>0?x.i(C+_)>>>v|x.i(C+_+1)<<32-v:x.i(C+_);return new o(T,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,ev=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,mr=o}).apply(typeof Np<"u"?Np:typeof self<"u"?self:typeof window<"u"?window:{});var va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tv,Fi,nv,Oa,dd,rv,sv,iv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof va=="object"&&va];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var R=a[y];if(!(R in f))break e;f=f[R]}a=a[a.length-1],y=f[a],d=d(y),d!=y&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(d){var f=[],y;for(y in d)Object.prototype.hasOwnProperty.call(d,y)&&f.push([y,d[y]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function u(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function c(a,d,f){return a.call.apply(a.bind,arguments)}function h(a,d,f){return h=c,h.apply(null,arguments)}function m(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function p(a,d){function f(){}f.prototype=d.prototype,a.Z=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(y,R,V){for(var Q=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)Q[ue-2]=arguments[ue];return d.prototype[R].apply(y,Q)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function N(a){const d=a.length;if(d>0){const f=Array(d);for(let y=0;y<d;y++)f[y]=a[y];return f}return[]}function k(a,d){for(let y=1;y<arguments.length;y++){const R=arguments[y];var f=typeof R;if(f=f!="object"?f:R?Array.isArray(R)?"array":f:"null",f=="array"||f=="object"&&typeof R.length=="number"){f=a.length||0;const V=R.length||0;a.length=f+V;for(let Q=0;Q<V;Q++)a[f+Q]=R[Q]}else a.push(R)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function D(a){o.setTimeout(()=>{throw a},0)}function S(){var a=x;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class w{constructor(){this.h=this.g=null}add(d,f){const y=I.get();y.set(d,f),this.h?this.h.next=y:this.g=y,this.h=y}}var I=new P(()=>new O,a=>a.reset());class O{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,x=new w,v=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(_)}};function _(){for(var a;a=S();){try{a.h.call(a.g)}catch(f){D(f)}var d=I;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}F=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,d),o.removeEventListener("test",f,d)}catch{}return a}();function b(a){return/^[\s\xa0]*$/.test(a)}function we(a,d){T.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(we,T),we.prototype.init=function(a,d){const f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Pe="closure_listenable_"+(Math.random()*1e6|0),xt=0;function L(a,d,f,y,R){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!y,this.ha=R,this.key=++xt,this.da=this.fa=!1}function j(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function H(a,d,f){for(const y in a)d.call(f,a[y],y,a)}function Y(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function ne(a){const d={};for(const f in a)d[f]=a[f];return d}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function et(a,d){let f,y;for(let R=1;R<arguments.length;R++){y=arguments[R];for(f in y)a[f]=y[f];for(let V=0;V<he.length;V++)f=he[V],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function Ue(a){this.src=a,this.g={},this.h=0}Ue.prototype.add=function(a,d,f,y,R){const V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);const Q=ge(a,d,y,R);return Q>-1?(d=a[Q],f||(d.fa=!1)):(d=new L(d,this.src,V,!!y,R),d.fa=f,a.push(d)),d};function Pt(a,d){const f=d.type;if(f in a.g){var y=a.g[f],R=Array.prototype.indexOf.call(y,d,void 0),V;(V=R>=0)&&Array.prototype.splice.call(y,R,1),V&&(j(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ge(a,d,f,y){for(let R=0;R<a.length;++R){const V=a[R];if(!V.da&&V.listener==d&&V.capture==!!f&&V.ha==y)return R}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),tt={};function Ht(a,d,f,y,R){if(Array.isArray(d)){for(let V=0;V<d.length;V++)Ht(a,d[V],f,y,R);return null}return f=Se(f),a&&a[Pe]?a.J(d,f,u(y)?!!y.capture:!1,R):Cr(a,d,f,!1,y,R)}function Cr(a,d,f,y,R,V){if(!d)throw Error("Invalid event type");const Q=u(R)?!!R.capture:!!R;let ue=le(a);if(ue||(a[ce]=ue=new Ue(a)),f=ue.add(d,f,y,Q,V),f.proxy)return f;if(y=zn(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)C||(R=Q),R===void 0&&(R=!1),a.addEventListener(d.toString(),y,R);else if(a.attachEvent)a.attachEvent(is(d.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function zn(){function a(f){return d.call(a.src,a.listener,f)}const d=$;return a}function Dt(a,d,f,y,R){if(Array.isArray(d))for(var V=0;V<d.length;V++)Dt(a,d[V],f,y,R);else y=u(y)?!!y.capture:!!y,f=Se(f),a&&a[Pe]?(a=a.i,V=String(d).toString(),V in a.g&&(d=a.g[V],f=ge(d,f,y,R),f>-1&&(j(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete a.g[V],a.h--)))):a&&(a=le(a))&&(d=a.g[d.toString()],a=-1,d&&(a=ge(d,f,y,R)),(f=a>-1?d[a]:null)&&cn(f))}function cn(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Pe])Pt(d.i,a);else{var f=a.type,y=a.proxy;d.removeEventListener?d.removeEventListener(f,y,a.capture):d.detachEvent?d.detachEvent(is(f),y):d.addListener&&d.removeListener&&d.removeListener(y),(f=le(d))?(Pt(f,a),f.h==0&&(f.src=null,d[ce]=null)):j(a)}}}function is(a){return a in tt?tt[a]:tt[a]="on"+a}function $(a,d){if(a.da)a=!0;else{d=new we(d,this);const f=a.listener,y=a.ha||a.src;a.fa&&cn(a),a=f.call(y,d)}return a}function le(a){return a=a[ce],a instanceof Ue?a:null}var J="__closure_events_fn_"+(Math.random()*1e9>>>0);function Se(a){return typeof a=="function"?a:(a[J]||(a[J]=function(d){return a.handleEvent(d)}),a[J])}function A(){E.call(this),this.i=new Ue(this),this.M=this,this.G=null}p(A,E),A.prototype[Pe]=!0,A.prototype.removeEventListener=function(a,d,f,y){Dt(this,a,d,f,y)};function U(a,d){var f,y=a.G;if(y)for(f=[];y;y=y.G)f.push(y);if(a=a.M,y=d.type||d,typeof d=="string")d=new T(d,a);else if(d instanceof T)d.target=d.target||a;else{var R=d;d=new T(y,a),et(d,R)}R=!0;let V,Q;if(f)for(Q=f.length-1;Q>=0;Q--)V=d.g=f[Q],R=G(V,y,!0,d)&&R;if(V=d.g=a,R=G(V,y,!0,d)&&R,R=G(V,y,!1,d)&&R,f)for(Q=0;Q<f.length;Q++)V=d.g=f[Q],R=G(V,y,!1,d)&&R}A.prototype.N=function(){if(A.Z.N.call(this),this.i){var a=this.i;for(const d in a.g){const f=a.g[d];for(let y=0;y<f.length;y++)j(f[y]);delete a.g[d],a.h--}}this.G=null},A.prototype.J=function(a,d,f,y){return this.i.add(String(a),d,!1,f,y)},A.prototype.K=function(a,d,f,y){return this.i.add(String(a),d,!0,f,y)};function G(a,d,f,y){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let R=!0;for(let V=0;V<d.length;++V){const Q=d[V];if(Q&&!Q.da&&Q.capture==f){const ue=Q.listener,Ye=Q.ha||Q.src;Q.fa&&Pt(a.i,Q),R=ue.call(Ye,y)!==!1&&R}}return R&&!y.defaultPrevented}function te(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:o.setTimeout(a,d||0)}function Te(a){a.g=te(()=>{a.g=null,a.i&&(a.i=!1,Te(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class oi extends E{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Te(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ai(a){E.call(this),this.h=a,this.g={}}p(ai,E);var ff=[];function mf(a){H(a.g,function(d,f){this.g.hasOwnProperty(f)&&cn(d)},a),a.g={}}ai.prototype.N=function(){ai.Z.N.call(this),mf(this)},ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cu=o.JSON.stringify,Fx=o.JSON.parse,Ux=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function pf(){}function gf(){}var li={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function du(){T.call(this,"d")}p(du,T);function hu(){T.call(this,"c")}p(hu,T);var kr={},yf=null;function qo(){return yf=yf||new A}kr.Ia="serverreachability";function vf(a){T.call(this,kr.Ia,a)}p(vf,T);function ui(a){const d=qo();U(d,new vf(d))}kr.STAT_EVENT="statevent";function xf(a,d){T.call(this,kr.STAT_EVENT,a),this.stat=d}p(xf,T);function _t(a){const d=qo();U(d,new xf(d,a))}kr.Ja="timingevent";function _f(a,d){T.call(this,kr.Ja,a),this.size=d}p(_f,T);function ci(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},d)}function di(){this.g=!0}di.prototype.ua=function(){this.g=!1};function zx(a,d,f,y,R,V){a.info(function(){if(a.g)if(V){var Q="",ue=V.split("&");for(let Ne=0;Ne<ue.length;Ne++){var Ye=ue[Ne].split("=");if(Ye.length>1){const nt=Ye[0];Ye=Ye[1];const hn=nt.split("_");Q=hn.length>=2&&hn[1]=="type"?Q+(nt+"="+Ye+"&"):Q+(nt+"=redacted&")}}}else Q=null;else Q=V;return"XMLHTTP REQ ("+y+") [attempt "+R+"]: "+d+`
`+f+`
`+Q})}function $x(a,d,f,y,R,V,Q){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+R+"]: "+d+`
`+f+`
`+V+" "+Q})}function os(a,d,f,y){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+qx(a,f)+(y?" "+y:"")})}function Bx(a,d){a.info(function(){return"TIMEOUT: "+d})}di.prototype.info=function(){};function qx(a,d){if(!a.g)return d;if(!d)return null;try{const V=JSON.parse(d);if(V){for(a=0;a<V.length;a++)if(Array.isArray(V[a])){var f=V[a];if(!(f.length<2)){var y=f[1];if(Array.isArray(y)&&!(y.length<1)){var R=y[0];if(R!="noop"&&R!="stop"&&R!="close")for(let Q=1;Q<y.length;Q++)y[Q]=""}}}}return cu(V)}catch{return d}}var Ho={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ef;function fu(){}p(fu,pf),fu.prototype.g=function(){return new XMLHttpRequest},Ef=new fu;function hi(a){return encodeURIComponent(String(a))}function Hx(a){var d=1;a=a.split(":");const f=[];for(;d>0&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function $n(a,d,f,y){this.j=a,this.i=d,this.l=f,this.S=y||1,this.V=new ai(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bf}function bf(){this.i=null,this.g="",this.h=!1}var Sf={},mu={};function pu(a,d,f){a.M=1,a.A=Go(dn(d)),a.u=f,a.R=!0,Tf(a,null)}function Tf(a,d){a.F=Date.now(),Wo(a),a.B=dn(a.A);var f=a.B,y=a.S;Array.isArray(y)||(y=[String(y)]),Lf(f.i,"t",y),a.C=0,f=a.j.L,a.h=new bf,a.g=nm(a.j,f?d:null,!a.u),a.P>0&&(a.O=new oi(h(a.Y,a,a.g),a.P)),d=a.V,f=a.g,y=a.ba;var R="readystatechange";Array.isArray(R)||(R&&(ff[0]=R.toString()),R=ff);for(let V=0;V<R.length;V++){const Q=Ht(f,R[V],y||d.handleEvent,!1,d.h||d);if(!Q)break;d.g[Q.key]=Q}d=a.J?ne(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),ui(),zx(a.i,a.v,a.B,a.l,a.S,a.u)}$n.prototype.ba=function(a){a=a.target;const d=this.O;d&&Hn(a)==3?d.j():this.Y(a)},$n.prototype.Y=function(a){try{if(a==this.g)e:{const ue=Hn(this.g),Ye=this.g.ya(),Ne=this.g.ca();if(!(ue<3)&&(ue!=3||this.g&&(this.h.h||this.g.la()||Hf(this.g)))){this.K||ue!=4||Ye==7||(Ye==8||Ne<=0?ui(3):ui(2)),gu(this);var d=this.g.ca();this.X=d;var f=Wx(this);if(this.o=d==200,$x(this.i,this.v,this.B,this.l,this.S,ue,d),this.o){if(this.U&&!this.L){t:{if(this.g){var y,R=this.g;if((y=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(y)){var V=y;break t}}V=null}if(a=V)os(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yu(this,a);else{this.o=!1,this.m=3,_t(12),jr(this),fi(this);break e}}if(this.R){a=!0;let nt;for(;!this.K&&this.C<f.length;)if(nt=Gx(this,f),nt==mu){ue==4&&(this.m=4,_t(14),a=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(nt==Sf){this.m=4,_t(15),os(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else os(this.i,this.l,nt,null),yu(this,nt);if(Nf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||f.length!=0||this.h.h||(this.m=1,_t(16),a=!1),this.o=this.o&&a,!a)os(this.i,this.l,f,"[Invalid Chunked Response]"),jr(this),fi(this);else if(f.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Tu(Q),Q.P=!0,_t(11))}}else os(this.i,this.l,f,null),yu(this,f);ue==4&&jr(this),this.o&&!this.K&&(ue==4?Jf(this.j,this):(this.o=!1,Wo(this)))}else a1(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),jr(this),fi(this)}}}catch{}finally{}};function Wx(a){if(!Nf(a))return a.g.la();const d=Hf(a.g);if(d==="")return"";let f="";const y=d.length,R=Hn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return jr(a),fi(a),"";a.h.i=new o.TextDecoder}for(let V=0;V<y;V++)a.h.h=!0,f+=a.h.i.decode(d[V],{stream:!(R&&V==y-1)});return d.length=0,a.h.g+=f,a.C=0,a.h.g}function Nf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Gx(a,d){var f=a.C,y=d.indexOf(`
`,f);return y==-1?mu:(f=Number(d.substring(f,y)),isNaN(f)?Sf:(y+=1,y+f>d.length?mu:(d=d.slice(y,y+f),a.C=y+f,d)))}$n.prototype.cancel=function(){this.K=!0,jr(this)};function Wo(a){a.T=Date.now()+a.H,If(a,a.H)}function If(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=ci(h(a.aa,a),d)}function gu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}$n.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Bx(this.i,this.B),this.M!=2&&(ui(),_t(17)),jr(this),this.m=2,fi(this)):If(this,this.T-a)};function fi(a){a.j.I==0||a.K||Jf(a.j,a)}function jr(a){gu(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,mf(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function yu(a,d){try{var f=a.j;if(f.I!=0&&(f.g==a||vu(f.h,a))){if(!a.L&&vu(f.h,a)&&f.I==3){try{var y=f.Ba.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var R=y;if(R[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)Jo(f),Yo(f);else break e;Su(f),_t(18)}}else f.xa=R[1],0<f.xa-f.K&&R[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=ci(h(f.Va,f),6e3));kf(f.h)<=1&&f.ta&&(f.ta=void 0)}else Pr(f,11)}else if((a.L||f.g==a)&&Jo(f),!b(d))for(R=f.Ba.g.parse(d),d=0;d<R.length;d++){let Ne=R[d];const nt=Ne[0];if(!(nt<=f.K))if(f.K=nt,Ne=Ne[1],f.I==2)if(Ne[0]=="c"){f.M=Ne[1],f.ba=Ne[2];const hn=Ne[3];hn!=null&&(f.ka=hn,f.j.info("VER="+f.ka));const Dr=Ne[4];Dr!=null&&(f.za=Dr,f.j.info("SVER="+f.za));const Wn=Ne[5];Wn!=null&&typeof Wn=="number"&&Wn>0&&(y=1.5*Wn,f.O=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const Gn=a.g;if(Gn){const ea=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ea){var V=y.h;V.g||ea.indexOf("spdy")==-1&&ea.indexOf("quic")==-1&&ea.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(xu(V,V.h),V.h=null))}if(y.G){const Nu=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Nu&&(y.wa=Nu,Ce(y.J,y.G,Nu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),y=f;var Q=a;if(y.na=tm(y,y.L?y.ba:null,y.W),Q.L){jf(y.h,Q);var ue=Q,Ye=y.O;Ye&&(ue.H=Ye),ue.D&&(gu(ue),Wo(ue)),y.g=Q}else Yf(y);f.i.length>0&&Xo(f)}else Ne[0]!="stop"&&Ne[0]!="close"||Pr(f,7);else f.I==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Pr(f,7):bu(f):Ne[0]!="noop"&&f.l&&f.l.qa(Ne),f.A=0)}}ui(4)}catch{}}var Qx=class{constructor(a,d){this.g=a,this.map=d}};function Af(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Cf(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function kf(a){return a.h?1:a.g?a.g.size:0}function vu(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function xu(a,d){a.g?a.g.add(d):a.h=d}function jf(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Af.prototype.cancel=function(){if(this.i=Rf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Rf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.G);return d}return N(a.i)}var Pf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kx(a,d){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const y=a[f].indexOf("=");let R,V=null;y>=0?(R=a[f].substring(0,y),V=a[f].substring(y+1)):R=a[f],d(R,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Bn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof Bn?(this.l=a.l,mi(this,a.j),this.o=a.o,this.g=a.g,pi(this,a.u),this.h=a.h,_u(this,Ff(a.i)),this.m=a.m):a&&(d=String(a).match(Pf))?(this.l=!1,mi(this,d[1]||"",!0),this.o=gi(d[2]||""),this.g=gi(d[3]||"",!0),pi(this,d[4]),this.h=gi(d[5]||"",!0),_u(this,d[6]||"",!0),this.m=gi(d[7]||"")):(this.l=!1,this.i=new vi(null,this.l))}Bn.prototype.toString=function(){const a=[];var d=this.j;d&&a.push(yi(d,Df,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(yi(d,Df,!0),"@"),a.push(hi(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(yi(f,f.charAt(0)=="/"?Jx:Xx,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",yi(f,e1)),a.join("")},Bn.prototype.resolve=function(a){const d=dn(this);let f=!!a.j;f?mi(d,a.j):f=!!a.o,f?d.o=a.o:f=!!a.g,f?d.g=a.g:f=a.u!=null;var y=a.h;if(f)pi(d,a.u);else if(f=!!a.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var R=d.h.lastIndexOf("/");R!=-1&&(y=d.h.slice(0,R+1)+y)}if(R=y,R==".."||R==".")y="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){y=R.lastIndexOf("/",0)==0,R=R.split("/");const V=[];for(let Q=0;Q<R.length;){const ue=R[Q++];ue=="."?y&&Q==R.length&&V.push(""):ue==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),y&&Q==R.length&&V.push("")):(V.push(ue),y=!0)}y=V.join("/")}else y=R}return f?d.h=y:f=a.i.toString()!=="",f?_u(d,Ff(a.i)):f=!!a.m,f&&(d.m=a.m),d};function dn(a){return new Bn(a)}function mi(a,d,f){a.j=f?gi(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function pi(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function _u(a,d,f){d instanceof vi?(a.i=d,t1(a.i,a.l)):(f||(d=yi(d,Zx)),a.i=new vi(d,a.l))}function Ce(a,d,f){a.i.set(d,f)}function Go(a){return Ce(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function gi(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function yi(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,Yx),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Yx(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Df=/[#\/\?@]/g,Xx=/[#\?:]/g,Jx=/[#\?]/g,Zx=/[#\?@]/g,e1=/#/g;function vi(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Rr(a){a.g||(a.g=new Map,a.h=0,a.i&&Kx(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=vi.prototype,t.add=function(a,d){Rr(this),this.i=null,a=as(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Vf(a,d){Rr(a),d=as(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Mf(a,d){return Rr(a),d=as(a,d),a.g.has(d)}t.forEach=function(a,d){Rr(this),this.g.forEach(function(f,y){f.forEach(function(R){a.call(d,R,y,this)},this)},this)};function Of(a,d){Rr(a);let f=[];if(typeof d=="string")Mf(a,d)&&(f=f.concat(a.g.get(as(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)f=f.concat(a[d]);return f}t.set=function(a,d){return Rr(this),this.i=null,a=as(this,a),Mf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=Of(this,a),a.length>0?String(a[0]):d):d};function Lf(a,d,f){Vf(a,d),f.length>0&&(a.i=null,a.g.set(as(a,d),N(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(let y=0;y<d.length;y++){var f=d[y];const R=hi(f);f=Of(this,f);for(let V=0;V<f.length;V++){let Q=R;f[V]!==""&&(Q+="="+hi(f[V])),a.push(Q)}}return this.i=a.join("&")};function Ff(a){const d=new vi;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function as(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function t1(a,d){d&&!a.j&&(Rr(a),a.i=null,a.g.forEach(function(f,y){const R=y.toLowerCase();y!=R&&(Vf(this,y),Lf(this,R,f))},a)),a.j=d}function n1(a,d){const f=new di;if(o.Image){const y=new Image;y.onload=m(qn,f,"TestLoadImage: loaded",!0,d,y),y.onerror=m(qn,f,"TestLoadImage: error",!1,d,y),y.onabort=m(qn,f,"TestLoadImage: abort",!1,d,y),y.ontimeout=m(qn,f,"TestLoadImage: timeout",!1,d,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else d(!1)}function r1(a,d){const f=new di,y=new AbortController,R=setTimeout(()=>{y.abort(),qn(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:y.signal}).then(V=>{clearTimeout(R),V.ok?qn(f,"TestPingServer: ok",!0,d):qn(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(R),qn(f,"TestPingServer: error",!1,d)})}function qn(a,d,f,y,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),y(f)}catch{}}function s1(){this.g=new Ux}function wu(a){this.i=a.Sb||null,this.h=a.ab||!1}p(wu,pf),wu.prototype.g=function(){return new Qo(this.i,this.h)};function Qo(a,d){A.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Qo,A),t=Qo.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,_i(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||o).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xi(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,_i(this)),this.g&&(this.readyState=3,_i(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Uf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Uf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?xi(this):_i(this),this.readyState==3&&Uf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,xi(this))},t.Na=function(a){this.g&&(this.response=a,xi(this))},t.ga=function(){this.g&&xi(this)};function xi(a){a.readyState=4,a.l=null,a.j=null,a.B=null,_i(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function _i(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Qo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function zf(a){let d="";return H(a,function(f,y){d+=y,d+=":",d+=f,d+=`\r
`}),d}function Eu(a,d,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=zf(f),typeof a=="string"?f!=null&&hi(f):Ce(a,d,f))}function ze(a){A.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ze,A);var i1=/^https?$/i,o1=["POST","PUT"];t=ze.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ef.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(V){$f(this,V);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var R in y)f.set(R,y[R]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const V of y.keys())f.set(V,y.get(V));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),R=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(o1,d,void 0)>=0)||y||R||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,Q]of f)this.g.setRequestHeader(V,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(V){$f(this,V)}};function $f(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,Bf(a),Ko(a)}function Bf(a){a.A||(a.A=!0,U(a,"complete"),U(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,U(this,"complete"),U(this,"abort"),Ko(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ko(this,!0)),ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?qf(this):this.Xa())},t.Xa=function(){qf(this)};function qf(a){if(a.h&&typeof i<"u"){if(a.v&&Hn(a)==4)setTimeout(a.Ca.bind(a),0);else if(U(a,"readystatechange"),Hn(a)==4){a.h=!1;try{const V=a.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var y;if(y=V===0){let Q=String(a.D).match(Pf)[1]||null;!Q&&o.self&&o.self.location&&(Q=o.self.location.protocol.slice(0,-1)),y=!i1.test(Q?Q.toLowerCase():"")}f=y}if(f)U(a,"complete"),U(a,"success");else{a.o=6;try{var R=Hn(a)>2?a.g.statusText:""}catch{R=""}a.l=R+" ["+a.ca()+"]",Bf(a)}}finally{Ko(a)}}}}function Ko(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,d||U(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Hn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Hn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Fx(d)}};function Hf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function a1(a){const d={};a=(a.g&&Hn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(b(a[y]))continue;var f=Hx(a[y]);const R=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=d[R]||[];d[R]=V,V.push(f)}Y(d,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Wf(a){this.za=0,this.i=[],this.j=new di,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,a),this.Za=wi("retryDelaySeedMs",1e4,a),this.Ta=wi("forwardChannelMaxRetries",2,a),this.va=wi("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Af(a&&a.concurrentRequestLimit),this.Ba=new s1,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Wf.prototype,t.ka=8,t.I=1,t.connect=function(a,d,f,y){_t(0),this.W=a,this.H=d||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.J=tm(this,null,this.W),Xo(this)};function bu(a){if(Gf(a),a.I==3){var d=a.V++,f=dn(a.J);if(Ce(f,"SID",a.M),Ce(f,"RID",d),Ce(f,"TYPE","terminate"),Ei(a,f),d=new $n(a,a.j,d),d.M=2,d.A=Go(dn(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=d.A,f=!0),f||(d.g=nm(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Wo(d)}em(a)}function Yo(a){a.g&&(Tu(a),a.g.cancel(),a.g=null)}function Gf(a){Yo(a),a.v&&(o.clearTimeout(a.v),a.v=null),Jo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function Xo(a){if(!Cf(a.h)&&!a.m){a.m=!0;var d=a.Ea;M||v(),F||(M(),F=!0),x.add(d,a),a.D=0}}function l1(a,d){return kf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=ci(h(a.Ea,a,d),Zf(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const R=new $n(this,this.j,a);let V=this.o;if(this.U&&(V?(V=ne(V),et(V,this.U)):V=this.U),this.u!==null||this.R||(R.J=V,V=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Kf(this,R,d),f=dn(this.J),Ce(f,"RID",a),Ce(f,"CVER",22),this.G&&Ce(f,"X-HTTP-Session-Id",this.G),Ei(this,f),V&&(this.R?d="headers="+hi(zf(V))+"&"+d:this.u&&Eu(f,this.u,V)),xu(this.h,R),this.Ra&&Ce(f,"TYPE","init"),this.S?(Ce(f,"$req",d),Ce(f,"SID","null"),R.U=!0,pu(R,f,null)):pu(R,f,d),this.I=2}}else this.I==3&&(a?Qf(this,a):this.i.length==0||Cf(this.h)||Qf(this))};function Qf(a,d){var f;d?f=d.l:f=a.V++;const y=dn(a.J);Ce(y,"SID",a.M),Ce(y,"RID",f),Ce(y,"AID",a.K),Ei(a,y),a.u&&a.o&&Eu(y,a.u,a.o),f=new $n(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),d&&(a.i=d.G.concat(a.i)),d=Kf(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),xu(a.h,f),pu(f,y,d)}function Ei(a,d){a.H&&H(a.H,function(f,y){Ce(d,y,f)}),a.l&&H({},function(f,y){Ce(d,y,f)})}function Kf(a,d,f){f=Math.min(a.i.length,f);const y=a.l?h(a.l.Ka,a.l,a):null;e:{var R=a.i;let ue=-1;for(;;){const Ye=["count="+f];ue==-1?f>0?(ue=R[0].g,Ye.push("ofs="+ue)):ue=0:Ye.push("ofs="+ue);let Ne=!0;for(let nt=0;nt<f;nt++){var V=R[nt].g;const hn=R[nt].map;if(V-=ue,V<0)ue=Math.max(0,R[nt].g-100),Ne=!1;else try{V="req"+V+"_"||"";try{var Q=hn instanceof Map?hn:Object.entries(hn);for(const[Dr,Wn]of Q){let Gn=Wn;u(Wn)&&(Gn=cu(Wn)),Ye.push(V+Dr+"="+encodeURIComponent(Gn))}}catch(Dr){throw Ye.push(V+"type="+encodeURIComponent("_badmap")),Dr}}catch{y&&y(hn)}}if(Ne){Q=Ye.join("&");break e}}Q=void 0}return a=a.i.splice(0,f),d.G=a,Q}function Yf(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;M||v(),F||(M(),F=!0),x.add(d,a),a.A=0}}function Su(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=ci(h(a.Da,a),Zf(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Xf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=ci(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),Yo(this),Xf(this))};function Tu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Xf(a){a.g=new $n(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=dn(a.na);Ce(d,"RID","rpc"),Ce(d,"SID",a.M),Ce(d,"AID",a.K),Ce(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ce(d,"TO",a.ia),Ce(d,"TYPE","xmlhttp"),Ei(a,d),a.u&&a.o&&Eu(d,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=Go(dn(d)),f.u=null,f.R=!0,Tf(f,a)}t.Va=function(){this.C!=null&&(this.C=null,Yo(this),Su(this),_t(19))};function Jo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Jf(a,d){var f=null;if(a.g==d){Jo(a),Tu(a),a.g=null;var y=2}else if(vu(a.h,d))f=d.G,jf(a.h,d),y=1;else return;if(a.I!=0){if(d.o)if(y==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var R=a.D;y=qo(),U(y,new _f(y,f)),Xo(a)}else Yf(a);else if(R=d.m,R==3||R==0&&d.X>0||!(y==1&&l1(a,d)||y==2&&Su(a)))switch(f&&f.length>0&&(d=a.h,d.i=d.i.concat(f)),R){case 1:Pr(a,5);break;case 4:Pr(a,10);break;case 3:Pr(a,6);break;default:Pr(a,2)}}}function Zf(a,d){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*d}function Pr(a,d){if(a.j.info("Error code "+d),d==2){var f=h(a.bb,a),y=a.Ua;const R=!y;y=new Bn(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||mi(y,"https"),Go(y),R?n1(y.toString(),f):r1(y.toString(),f)}else _t(2);a.I=0,a.l&&a.l.pa(d),em(a),Gf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function em(a){if(a.I=0,a.ja=[],a.l){const d=Rf(a.h);(d.length!=0||a.i.length!=0)&&(k(a.ja,d),k(a.ja,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.oa()}}function tm(a,d,f){var y=f instanceof Bn?dn(f):new Bn(f);if(y.g!="")d&&(y.g=d+"."+y.g),pi(y,y.u);else{var R=o.location;y=R.protocol,d=d?d+"."+R.hostname:R.hostname,R=+R.port;const V=new Bn(null);y&&mi(V,y),d&&(V.g=d),R&&pi(V,R),f&&(V.h=f),y=V}return f=a.G,d=a.wa,f&&d&&Ce(y,f,d),Ce(y,"VER",a.ka),Ei(a,y),y}function nm(a,d,f){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new ze(new wu({ab:f})):new ze(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rm(){}t=rm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Zo(){}Zo.prototype.g=function(a,d){return new Vt(a,d)};function Vt(a,d){A.call(this),this.g=new Wf(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!b(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!b(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ls(this)}p(Vt,A),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){bu(this.g)},Vt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=cu(a),a=f);d.i.push(new Qx(d.Ya++,a)),d.I==3&&Xo(d)},Vt.prototype.N=function(){this.g.l=null,delete this.j,bu(this.g),delete this.g,Vt.Z.N.call(this)};function sm(a){du.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(sm,du);function im(){hu.call(this),this.status=1}p(im,hu);function ls(a){this.g=a}p(ls,rm),ls.prototype.ra=function(){U(this.g,"a")},ls.prototype.qa=function(a){U(this.g,new sm(a))},ls.prototype.pa=function(a){U(this.g,new im)},ls.prototype.oa=function(){U(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,iv=function(){return new Zo},sv=function(){return qo()},rv=kr,dd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ho.NO_ERROR=0,Ho.TIMEOUT=8,Ho.HTTP_ERROR=6,Oa=Ho,wf.COMPLETE="complete",nv=wf,gf.EventType=li,li.OPEN="a",li.CLOSE="b",li.ERROR="c",li.MESSAGE="d",A.prototype.listen=A.prototype.J,Fi=gf,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,tv=ze}).apply(typeof va<"u"?va:typeof self<"u"?self:typeof window<"u"?window:{});const Ip="@firebase/firestore",Ap="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zs="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new Qy("@firebase/firestore");function cs(){return Jr.logLevel}function X(t,...e){if(Jr.logLevel<=xe.DEBUG){const n=e.map(Ch);Jr.debug(`Firestore (${Zs}): ${t}`,...n)}}function Ln(t,...e){if(Jr.logLevel<=xe.ERROR){const n=e.map(Ch);Jr.error(`Firestore (${Zs}): ${t}`,...n)}}function Bs(t,...e){if(Jr.logLevel<=xe.WARN){const n=e.map(Ch);Jr.warn(`Firestore (${Zs}): ${t}`,...n)}}function Ch(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ov(t,r,n)}function ov(t,e,n){let r=`FIRESTORE (${Zs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ln(r),new Error(r)}function Ee(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ov(e,s,r)}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Js{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class b2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class S2{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new jn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new av(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new pt(e)}}class T2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class N2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new T2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class I2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,i2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ee(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Cp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=A2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function hd(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return rc(s)===rc(i)?me(s,i):rc(s)?1:-1}return me(t.length,e.length)}const C2=55296,k2=57343;function rc(t){const e=t.charCodeAt(0);return e>=C2&&e<=k2}function qs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="__name__";class pn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=pn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return me(e.length,n.length)}static compareSegments(e,n){const r=pn.isNumericId(e),s=pn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?pn.extractNumericId(e).compare(pn.extractNumericId(n)):hd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mr.fromString(e.substring(4,e.length-2))}}class Ie extends pn{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const j2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends pn{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return j2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kp}static keyField(){return new lt([kp])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new K(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new K(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Ie.fromString(e))}static fromName(e){return new re(Ie.fromString(e).popFirst(5))}static empty(){return new re(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Ie(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t,e,n){if(!n)throw new K(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R2(t,e,n,r){if(e===!0&&r===!0)throw new K(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jp(t){if(!re.isDocumentKey(t))throw new K(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rp(t){if(re.isDocumentKey(t))throw new K(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Gl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie(12329,{type:typeof t})}function bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gl(t);throw new K(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t,e){const n={typeString:t};return e&&(n.value=e),n}function Mo(t,e){if(!uv(t))throw new K(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new K(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=-62135596800,Dp=1e6;class je{static now(){return je.fromMillis(Date.now())}static fromDate(e){return je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Dp);return new je(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Pp)throw new K(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dp}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mo(e,je._jsonSchema))return new je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Pp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}je._jsonSchemaVersion="firestore/timestamp/1.0",je._jsonSchema={type:Ke("string",je._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new je(0,0))}static max(){return new oe(new je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=-1;function P2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new vr(s,re.empty(),e)}function D2(t){return new vr(t.readTime,t.key,bo)}class vr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new vr(oe.min(),re.empty(),bo)}static max(){return new vr(oe.max(),re.empty(),bo)}}function V2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ei(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==M2)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(m=>{o[h]=m,++u,u===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function L2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ti(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ql.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=-1;function Kl(t){return t==null}function vl(t){return t===0&&1/t==-1/0}function F2(t){return typeof t=="number"&&Number.isInteger(t)&&!vl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="";function U2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Vp(e)),e=z2(t.get(n),e);return Vp(e)}function z2(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case cv:n+="";break;default:n+=i}}return n}function Vp(t){return t+cv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ir(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xa(this.root,e,this.comparator,!1)}getReverseIterator(){return new xa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xa(this.root,e,this.comparator,!0)}}class xa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??at.RED,this.left=s??at.EMPTY,this.right=i??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new at(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ie(27949);return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw ie(57766)}get value(){throw ie(16141)}get color(){throw ie(16727)}get left(){throw ie(29726)}get right(){throw ie(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Op(this.data.getIterator())}getIteratorFrom(e){return new Op(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class Op{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new Ze(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new hv("Invalid base64 string: "+i):i}}(e);return new dt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const $2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(t){if(Ee(!!t,39018),typeof t=="string"){let e=0;const n=$2.exec(t);if(Ee(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _r(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="server_timestamp",mv="__type__",pv="__previous_value__",gv="__local_write_time__";function Rh(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[mv])==null?void 0:r.stringValue)===fv}function Yl(t){const e=t.mapValue.fields[pv];return Rh(e)?Yl(e):e}function So(t){const e=xr(t.mapValue.fields[gv].timestampValue);return new je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r,s,i,o,u,c,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=m}}const xl="(default)";class To{constructor(e,n){this.projectId=e,this.database=n||xl}static empty(){return new To("","")}get isDefaultDatabase(){return this.database===xl}isEqual(e){return e instanceof To&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="__type__",q2="__max__",_a={mapValue:{}},vv="__vector__",_l="value";function wr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rh(t)?4:W2(t)?9007199254740991:H2(t)?10:11:ie(28295,{value:t})}function Sn(t,e){if(t===e)return!0;const n=wr(t);if(n!==wr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return So(t).isEqual(So(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=xr(s.timestampValue),u=xr(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return _r(s.bytesValue).isEqual(_r(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Be(s.geoPointValue.latitude)===Be(i.geoPointValue.latitude)&&Be(s.geoPointValue.longitude)===Be(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Be(s.integerValue)===Be(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Be(s.doubleValue),u=Be(i.doubleValue);return o===u?vl(o)===vl(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return qs(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Mp(o)!==Mp(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!Sn(o[c],u[c])))return!1;return!0}(t,e);default:return ie(52216,{left:t})}}function No(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function Hs(t,e){if(t===e)return 0;const n=wr(t),r=wr(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Be(i.integerValue||i.doubleValue),c=Be(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return Lp(t.timestampValue,e.timestampValue);case 4:return Lp(So(t),So(e));case 5:return hd(t.stringValue,e.stringValue);case 6:return function(i,o){const u=_r(i),c=_r(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let h=0;h<u.length&&h<c.length;h++){const m=me(u[h],c[h]);if(m!==0)return m}return me(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=me(Be(i.latitude),Be(o.latitude));return u!==0?u:me(Be(i.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Fp(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,N,k,P;const u=i.fields||{},c=o.fields||{},h=(g=u[_l])==null?void 0:g.arrayValue,m=(N=c[_l])==null?void 0:N.arrayValue,p=me(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((P=m==null?void 0:m.values)==null?void 0:P.length)||0);return p!==0?p:Fp(h,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===_a.mapValue&&o===_a.mapValue)return 0;if(i===_a.mapValue)return 1;if(o===_a.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),h=o.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let p=0;p<c.length&&p<m.length;++p){const g=hd(c[p],m[p]);if(g!==0)return g;const N=Hs(u[c[p]],h[m[p]]);if(N!==0)return N}return me(c.length,m.length)}(t.mapValue,e.mapValue);default:throw ie(23264,{he:n})}}function Lp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=xr(t),r=xr(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function Fp(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Hs(n[s],r[s]);if(i)return i}return me(n.length,r.length)}function Ws(t){return fd(t)}function fd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _r(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=fd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${fd(n.fields[o])}`;return s+"}"}(t.mapValue):ie(61005,{value:t})}function La(t){switch(wr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yl(t);return e?16+La(e):16;case 5:return 2*t.stringValue.length;case 6:return _r(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+La(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ir(r.fields,(i,o)=>{s+=i.length+La(o)}),s}(t.mapValue);default:throw ie(13486,{value:t})}}function Up(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function md(t){return!!t&&"integerValue"in t}function Ph(t){return!!t&&"arrayValue"in t}function zp(t){return!!t&&"nullValue"in t}function $p(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fa(t){return!!t&&"mapValue"in t}function H2(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[yv])==null?void 0:r.stringValue)===vv}function Zi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ir(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zi(t.arrayValue.values[n]);return e}return{...t}}function W2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===q2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zi(n)}setAll(e){let n=lt.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=Zi(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Fa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Fa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ir(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(Zi(this.value))}}function xv(t){const e=[];return Ir(t.fields,(n,r)=>{const s=new lt([n]);if(Fa(r)){const i=xv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new yt(e,0,oe.min(),oe.min(),oe.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new yt(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new yt(e,2,n,oe.min(),oe.min(),At.empty(),0)}static newUnknownDocument(e,n){return new yt(e,3,n,oe.min(),oe.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this.position=e,this.inclusive=n}}function Bp(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=Hs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function qp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n="asc"){this.field=e,this.dir=n}}function G2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _v=class{};class Qe extends _v{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new K2(e,n,r):n==="array-contains"?new J2(e,r):n==="in"?new Z2(e,r):n==="not-in"?new eb(e,r):n==="array-contains-any"?new tb(e,r):new Qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Y2(e,r):new X2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hs(n,this.value)):n!==null&&wr(this.value)===wr(n)&&this.matchesComparison(Hs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends _v{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new un(e,n)}matches(e){return wv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wv(t){return t.op==="and"}function Ev(t){return Q2(t)&&wv(t)}function Q2(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function pd(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+Ws(t.value);if(Ev(t))return t.filters.map(e=>pd(e)).join(",");{const e=t.filters.map(n=>pd(n)).join(",");return`${t.op}(${e})`}}function bv(t,e){return t instanceof Qe?function(r,s){return s instanceof Qe&&r.op===s.op&&r.field.isEqual(s.field)&&Sn(r.value,s.value)}(t,e):t instanceof un?function(r,s){return s instanceof un&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&bv(o,s.filters[u]),!0):!1}(t,e):void ie(19439)}function Sv(t){return t instanceof Qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ws(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(Sv).join(" ,")+"}"}(t):"Filter"}class K2 extends Qe{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class Y2 extends Qe{constructor(e,n){super(e,"in",n),this.keys=Tv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class X2 extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=Tv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Tv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class J2 extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ph(n)&&No(n.arrayValue,this.value)}}class Z2 extends Qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&No(this.value.arrayValue,n)}}class eb extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(No(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!No(this.value.arrayValue,n)}}class tb extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ph(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>No(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.Te=null}}function Hp(t,e=null,n=[],r=[],s=null,i=null,o=null){return new nb(t,e,n,r,s,i,o)}function Dh(t){const e=ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Kl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ws(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ws(r)).join(",")),e.Te=n}return e.Te}function Vh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!G2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qp(t.startAt,e.startAt)&&qp(t.endAt,e.endAt)}function gd(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rb(t,e,n,r,s,i,o,u){return new ni(t,e,n,r,s,i,o,u)}function Mh(t){return new ni(t)}function Wp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nv(t){return t.collectionGroup!==null}function eo(t){const e=ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Ze(lt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Io(i,r))}),n.has(lt.keyField().canonicalString())||e.Ie.push(new Io(lt.keyField(),r))}return e.Ie}function xn(t){const e=ae(t);return e.Ee||(e.Ee=sb(e,eo(t))),e.Ee}function sb(t,e){if(t.limitType==="F")return Hp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Io(s.field,i)});const n=t.endAt?new wl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wl(t.startAt.position,t.startAt.inclusive):null;return Hp(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yd(t,e){const n=t.filters.concat([e]);return new ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vd(t,e,n){return new ni(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xl(t,e){return Vh(xn(t),xn(e))&&t.limitType===e.limitType}function Iv(t){return`${Dh(xn(t))}|lt:${t.limitType}`}function ds(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Sv(s)).join(", ")}]`),Kl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ws(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ws(s)).join(",")),`Target(${r})`}(xn(t))}; limitType=${t.limitType})`}function Jl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):re.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of eo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const h=Bp(o,u,c);return o.inclusive?h<=0:h<0}(r.startAt,eo(r),s)||r.endAt&&!function(o,u,c){const h=Bp(o,u,c);return o.inclusive?h>=0:h>0}(r.endAt,eo(r),s))}(t,e)}function ib(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Av(t){return(e,n)=>{let r=!1;for(const s of eo(t)){const i=ob(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ob(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),h=u.data.field(i);return c!==null&&h!==null?Hs(c,h):ie(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ir(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return dv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Fe(re.comparator);function Fn(){return ab}const Cv=new Fe(re.comparator);function Ui(...t){let e=Cv;for(const n of t)e=e.insert(n.key,n);return e}function kv(t){let e=Cv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Br(){return to()}function jv(){return to()}function to(){return new ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const lb=new Fe(re.comparator),ub=new Ze(re.comparator);function pe(...t){let e=ub;for(const n of t)e=e.add(n);return e}const cb=new Ze(me);function db(){return cb}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vl(e)?"-0":e}}function Rv(t){return{integerValue:""+t}}function hb(t,e){return F2(e)?Rv(e):Oh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(){this._=void 0}}function fb(t,e,n){return t instanceof El?function(s,i){const o={fields:{[mv]:{stringValue:fv},[gv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Rh(i)&&(i=Yl(i)),i&&(o.fields[pv]=i),{mapValue:o}}(n,e):t instanceof Ao?Dv(t,e):t instanceof Co?Vv(t,e):function(s,i){const o=Pv(s,i),u=Gp(o)+Gp(s.Ae);return md(o)&&md(s.Ae)?Rv(u):Oh(s.serializer,u)}(t,e)}function mb(t,e,n){return t instanceof Ao?Dv(t,e):t instanceof Co?Vv(t,e):n}function Pv(t,e){return t instanceof bl?function(r){return md(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class El extends Zl{}class Ao extends Zl{constructor(e){super(),this.elements=e}}function Dv(t,e){const n=Mv(e);for(const r of t.elements)n.some(s=>Sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Co extends Zl{constructor(e){super(),this.elements=e}}function Vv(t,e){let n=Mv(e);for(const r of t.elements)n=n.filter(s=>!Sn(s,r));return{arrayValue:{values:n}}}class bl extends Zl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Gp(t){return Be(t.integerValue||t.doubleValue)}function Mv(t){return Ph(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pb(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ao&&s instanceof Ao||r instanceof Co&&s instanceof Co?qs(r.elements,s.elements,Sn):r instanceof bl&&s instanceof bl?Sn(r.Ae,s.Ae):r instanceof El&&s instanceof El}(t.transform,e.transform)}class gb{constructor(e,n){this.version=e,this.transformResults=n}}class an{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ua(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class eu{}function Ov(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lh(t.key,an.none()):new Oo(t.key,t.data,an.none());{const n=t.data,r=At.empty();let s=new Ze(lt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ar(t.key,r,new Ut(s.toArray()),an.none())}}function yb(t,e,n){t instanceof Oo?function(s,i,o){const u=s.value.clone(),c=Kp(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Ar?function(s,i,o){if(!Ua(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=Kp(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Lv(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function no(t,e,n,r){return t instanceof Oo?function(i,o,u,c){if(!Ua(i.precondition,o))return u;const h=i.value.clone(),m=Yp(i.fieldTransforms,c,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ar?function(i,o,u,c){if(!Ua(i.precondition,o))return u;const h=Yp(i.fieldTransforms,c,o),m=o.data;return m.setAll(Lv(i)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,u){return Ua(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function vb(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Pv(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function Qp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&qs(r,s,(i,o)=>pb(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Oo extends eu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ar extends eu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Kp(t,e,n){const r=new Map;Ee(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,mb(o,u,n[s]))}return r}function Yp(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,fb(i,o,e))}return r}class Lh extends eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xb extends eu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&yb(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=no(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=no(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=Ov(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pe())}isEqual(e){return this.batchId===e.batchId&&qs(this.mutations,e.mutations,(n,r)=>Qp(n,r))&&qs(this.baseMutations,e.baseMutations,(n,r)=>Qp(n,r))}}class Fh{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ee(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return lb}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Fh(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,ve;function bb(t){switch(t){case z.OK:return ie(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return ie(15467,{code:t})}}function Fv(t){if(t===void 0)return Ln("GRPC error has no .code"),z.UNKNOWN;switch(t){case We.OK:return z.OK;case We.CANCELLED:return z.CANCELLED;case We.UNKNOWN:return z.UNKNOWN;case We.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case We.INTERNAL:return z.INTERNAL;case We.UNAVAILABLE:return z.UNAVAILABLE;case We.UNAUTHENTICATED:return z.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case We.NOT_FOUND:return z.NOT_FOUND;case We.ALREADY_EXISTS:return z.ALREADY_EXISTS;case We.PERMISSION_DENIED:return z.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case We.ABORTED:return z.ABORTED;case We.OUT_OF_RANGE:return z.OUT_OF_RANGE;case We.UNIMPLEMENTED:return z.UNIMPLEMENTED;case We.DATA_LOSS:return z.DATA_LOSS;default:return ie(39323,{code:t})}}(ve=We||(We={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=new mr([4294967295,4294967295],0);function Xp(t){const e=Sb().encode(t),n=new ev;return n.update(e),new Uint8Array(n.digest())}function Jp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new mr([n,r],0),new mr([s,i],0)]}class Uh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zi(`Invalid padding: ${n}`);if(r<0)throw new zi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=mr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(mr.fromNumber(r)));return s.compare(Tb)===1&&(s=new mr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Xp(e),[r,s]=Jp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Uh(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.ge===0)return;const n=Xp(e),[r,s]=Jp(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Lo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new tu(oe.min(),s,new Fe(me),Fn(),pe())}}class Lo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Lo(r,n,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Uv{constructor(e,n){this.targetId=e,this.Ce=n}}class zv{constructor(e,n,r=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Zp{constructor(){this.ve=0,this.Fe=eg(),this.Me=dt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pe(),n=pe(),r=pe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ie(38017,{changeType:i})}}),new Lo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=eg()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Nb{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fn(),this.Je=wa(),this.He=wa(),this.Ye=new Fe(me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ie(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(gd(i))if(r===0){const o=new re(i.path);this.et(n,o,yt.newNoDocument(o,oe.min()))}else Ee(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const u=this.ut(e),c=u?this.ct(u,e,o):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=_r(r).toUint8Array()}catch(c){if(c instanceof hv)return Bs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Uh(o,s,i)}catch(c){return Bs(c instanceof zi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const u=this.ot(o);if(u){if(i.current&&gd(u.target)){const c=new re(u.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,yt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=pe();this.He.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new tu(e,n,this.Ye,this.je,r);return this.je=Fn(),this.Je=wa(),this.He=wa(),this.Ye=new Fe(me),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Zp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ze(me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ze(me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Zp),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function wa(){return new Fe(re.comparator)}function eg(){return new Fe(re.comparator)}const Ib={asc:"ASCENDING",desc:"DESCENDING"},Ab={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cb={and:"AND",or:"OR"};class kb{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xd(t,e){return t.useProto3Json||Kl(e)?e:{value:e}}function Sl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $v(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jb(t,e){return Sl(t,e.toTimestamp())}function _n(t){return Ee(!!t,49232),oe.fromTimestamp(function(n){const r=xr(n);return new je(r.seconds,r.nanos)}(t))}function zh(t,e){return _d(t,e).canonicalString()}function _d(t,e){const n=function(s){return new Ie(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Bv(t){const e=Ie.fromString(t);return Ee(Qv(e),10190,{key:e.toString()}),e}function wd(t,e){return zh(t.databaseId,e.path)}function sc(t,e){const n=Bv(e);if(n.get(1)!==t.databaseId.projectId)throw new K(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(Hv(n))}function qv(t,e){return zh(t.databaseId,e)}function Rb(t){const e=Bv(t);return e.length===4?Ie.emptyPath():Hv(e)}function Ed(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Hv(t){return Ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function tg(t,e,n){return{name:wd(t,e),fields:n.value.mapValue.fields}}function Pb(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ie(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,m){return h.useProto3Json?(Ee(m===void 0||typeof m=="string",58123),dt.fromBase64String(m||"")):(Ee(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),dt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(h){const m=h.code===void 0?z.UNKNOWN:Fv(h.code);return new K(m,h.message||"")}(o);n=new zv(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=sc(t,r.document.name),i=_n(r.document.updateTime),o=r.document.createTime?_n(r.document.createTime):oe.min(),u=new At({mapValue:{fields:r.document.fields}}),c=yt.newFoundDocument(s,i,o,u),h=r.targetIds||[],m=r.removedTargetIds||[];n=new za(h,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=sc(t,r.document),i=r.readTime?_n(r.readTime):oe.min(),o=yt.newNoDocument(s,i),u=r.removedTargetIds||[];n=new za([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=sc(t,r.document),i=r.removedTargetIds||[];n=new za([],i,s,null)}else{if(!("filter"in e))return ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Eb(s,i),u=r.targetId;n=new Uv(u,o)}}return n}function Db(t,e){let n;if(e instanceof Oo)n={update:tg(t,e.key,e.value)};else if(e instanceof Lh)n={delete:wd(t,e.key)};else if(e instanceof Ar)n={update:tg(t,e.key,e.data),updateMask:Bb(e.fieldMask)};else{if(!(e instanceof xb))return ie(16599,{Vt:e.type});n={verify:wd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof El)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ao)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Co)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof bl)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw ie(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:jb(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ie(27497)}(t,e.precondition)),n}function Vb(t,e){return t&&t.length>0?(Ee(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?_n(s.updateTime):_n(i);return o.isEqual(oe.min())&&(o=_n(i)),new gb(o,s.transformResults||[])}(n,e))):[]}function Mb(t,e){return{documents:[qv(t,e.path)]}}function Ob(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qv(t,s);const i=function(h){if(h.length!==0)return Gv(un.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(m=>function(g){return{field:hs(g.field),direction:Ub(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=xd(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function Lb(t){let e=Rb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ee(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(p){const g=Wv(p);return g instanceof un&&Ev(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(k){return new Io(fs(k.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(p){let g;return g=typeof p=="object"?p.value:p,Kl(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,N=p.values||[];return new wl(N,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,N=p.values||[];return new wl(N,g)}(n.endAt)),rb(e,s,o,i,u,"F",c,h)}function Fb(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Wv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fs(n.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=fs(n.unaryFilter.field);return Qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=fs(n.unaryFilter.field);return Qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fs(n.unaryFilter.field);return Qe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ie(61313);default:return ie(60726)}}(t):t.fieldFilter!==void 0?function(n){return Qe.create(fs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ie(58110);default:return ie(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(r=>Wv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ie(1026)}}(n.compositeFilter.op))}(t):ie(30097,{filter:t})}function Ub(t){return Ib[t]}function zb(t){return Ab[t]}function $b(t){return Cb[t]}function hs(t){return{fieldPath:t.canonicalString()}}function fs(t){return lt.fromServerFormat(t.fieldPath)}function Gv(t){return t instanceof Qe?function(n){if(n.op==="=="){if($p(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NAN"}};if(zp(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($p(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NOT_NAN"}};if(zp(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hs(n.field),op:zb(n.op),value:n.value}}}(t):t instanceof un?function(n){const r=n.getFilters().map(s=>Gv(s));return r.length===1?r[0]:{compositeFilter:{op:$b(n.op),filters:r}}}(t):ie(54877,{filter:t})}function Bb(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,r,s,i=oe.min(),o=oe.min(),u=dt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.yt=e}}function Hb(t){const e=Lb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.Cn=new Gb}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(vr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(vr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class Gb{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kv=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(Kv,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Gs(0)}static cr(){return new Gs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="LruGarbageCollector",Qb=1048576;function sg([t,e],[n,r]){const s=me(t,n);return s===0?me(e,r):s}class Kb{constructor(e){this.Ir=e,this.buffer=new Ze(sg),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();sg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Yb{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){X(rg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ti(n)?X(rg,"Ignoring IndexedDB error during garbage collection: ",n):await ei(n)}await this.Vr(3e5)})}}class Xb{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Ql.ce);const r=new Kb(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(ng)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ng):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,u,c,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,u=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),cs()<=xe.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${i} targets in `+(c-u)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-m}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Jb(t,e){return new Xb(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(){this.changes=new ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&no(r.mutation,s,Ut.empty(),je.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pe()){const s=Br();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ui();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Br();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Fn();const o=to(),u=function(){return to()}();return n.forEach((c,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof Ar)?i=i.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),no(m.mutation,h,m.mutation.getFieldMask(),je.now())):o.set(h.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>u.set(h,new eS(m,o.get(h)??null))),u))}recalculateAndSaveOverlays(e,n){const r=to();let s=new Fe((o,u)=>o-u),i=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let m=r.get(c)||Ut.empty();m=u.applyToLocalView(h,m),r.set(c,m);const p=(s.get(u.batchId)||pe()).add(c);s=s.insert(u.batchId,p)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,m=c.value,p=jv();m.forEach(g=>{if(!i.has(g)){const N=Ov(n.get(g),r.get(g));N!==null&&p.set(g,N),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(Br());let u=bo,c=i;return o.next(h=>B.forEach(h,(m,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),i.get(m)?B.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,pe())).next(m=>({batchId:u,changes:kv(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let s=Ui();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ui();return this.indexManager.getCollectionParents(e,i).next(u=>B.forEach(u,c=>{const h=function(p,g){return new ni(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,yt.newInvalidDocument(m)))});let u=Ui();return o.forEach((c,h)=>{const m=i.get(c);m!==void 0&&no(m.mutation,h,Ut.empty(),je.now()),Jl(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_n(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:Hb(s.bundledQuery),readTime:_n(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this.overlays=new Fe(re.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Br();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=Br(),i=n.length+1,o=new re(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Fe((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=i.get(h.largestBatchId);m===null&&(m=Br(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const u=Br(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>u.set(h,m)),!(u.size()>=s)););return B.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new wb(n,r));let i=this.qr.get(n);i===void 0&&(i=pe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this.Qr=new Ze(rt.$r),this.Ur=new Ze(rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new rt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new re(new Ie([])),r=new rt(n,e),s=new rt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new re(new Ie([])),r=new rt(n,e),s=new rt(n,e+1);let i=pe();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return re.comparator(e.key,n.key)||me(e.Yr,n.Yr)}static Kr(e,n){return me(e.Yr,n.Yr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(rt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _b(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.Zr=this.Zr.add(new rt(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?jh:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),s=new rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const u=this.Xr(o.Yr);i.push(u)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(me);return n.forEach(s=>{const i=new rt(s,0),o=new rt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],u=>{r=r.add(u.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;re.isDocumentKey(i)||(i=i.child(""));const o=new rt(new re(i),0);let u=new Ze(me);return this.Zr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.Yr)),!0)},o),B.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ee(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,s=>{const i=new rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new rt(n,0),s=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.ri=e,this.docs=function(){return new Fe(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(n))}getEntries(e,n){let r=Fn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():yt.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Fn();const o=n.path,u=new re(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||V2(D2(m),r)<=0||(s.has(m.key)||Jl(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ie(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aS(this)}getSize(e){return B.resolve(this.size)}}class aS extends Zb{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e){this.persistence=e,this.si=new ns(n=>Dh(n),Vh),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.oi=0,this._i=new $h,this.targetCount=0,this.ai=Gs.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Gs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ql(0),this.li=!1,this.li=!0,this.hi=new sS,this.referenceDelegate=e(this),this.Pi=new lS(this),this.indexManager=new Wb,this.remoteDocumentCache=function(s){return new oS(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new qb(n),this.Ii=new nS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new iS(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new uS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class uS extends O2{constructor(e){super(),this.currentSequenceNumber=e}}class Bh{constructor(e){this.persistence=e,this.Ri=new $h,this.Vi=null}static mi(e){return new Bh(e)}get fi(){if(this.Vi)return this.Vi;throw ie(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const s=re.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Tl{constructor(e,n){this.persistence=e,this.pi=new ns(r=>U2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Jb(this,n)}static mi(e,n){return new Tl(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(u=>{u||(r++,i.removeEntry(o,oe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=La(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=pe(),s=pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new qh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return nE()?8:L2(eE())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new cS;return this.Ss(e,n,o).next(u=>{if(i.result=u,this.Vs)return this.bs(e,n,o,u.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(cs()<=xe.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(cs()<=xe.DEBUG&&X("QueryEngine","Query:",ds(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(cs()<=xe.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(n))):B.resolve())}ys(e,n){if(Wp(n))return B.resolve(null);let r=xn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=vd(n,null,"F"),r=xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=pe(...i);return this.ps.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.Ds(n,u);return this.Cs(n,h,o,c.readTime)?this.ys(e,vd(n,null,"F")):this.vs(e,h,n,c)}))})))}ws(e,n,r,s){return Wp(n)||s.isEqual(oe.min())?B.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?B.resolve(null):(cs()<=xe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ds(n)),this.vs(e,o,n,P2(s,bo)).next(u=>u))})}Ds(e,n){let r=new Ze(Av(e));return n.forEach((s,i)=>{Jl(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return cs()<=xe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",ds(n)),this.ps.getDocumentsMatchingQuery(e,n,vr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="LocalStore",hS=3e8;class fS{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Fe(me),this.xs=new ns(i=>Dh(i),Vh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function mS(t,e,n,r){return new fS(t,e,n,r)}async function Xv(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=pe();for(const h of s){o.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of i){u.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:u}))})})}function pS(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,c,h,m){const p=h.batch,g=p.keys();let N=B.resolve();return g.forEach(k=>{N=N.next(()=>m.getEntry(c,k)).next(P=>{const D=h.docVersions.get(k);Ee(D!==null,48541),P.version.compareTo(D)<0&&(p.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),m.addEntry(P)))})}),N.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=pe();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Jv(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function gS(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const u=[];e.targetChanges.forEach((m,p)=>{const g=s.get(p);if(!g)return;u.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,p)));let N=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?N=N.withResumeToken(dt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):m.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(m.resumeToken,r)),s=s.insert(p,N),function(P,D,S){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=hS?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,N,m)&&u.push(n.Pi.updateTargetData(i,N))});let c=Fn(),h=pe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),u.push(yS(i,o,e.documentUpdates).next(m=>{c=m.ks,h=m.qs})),!r.isEqual(oe.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(m)}return B.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.Ms=s,i))}function yS(t,e,n){let r=pe(),s=pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Fn();return n.forEach((u,c)=>{const h=i.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):X(Hh,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{ks:o,qs:s}})}function vS(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xS(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new rr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function bd(t,e,n){const r=ae(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ti(o))throw o;X(Hh,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function ig(t,e,n){const r=ae(t);let s=oe.min(),i=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,m){const p=ae(c),g=p.xs.get(m);return g!==void 0?B.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,m)}(r,o,xn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:pe())).next(u=>(_S(r,ib(e),u),{documents:u,Qs:i})))}function _S(t,e,n){let r=t.Os.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class og{constructor(){this.activeTargetIds=db()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wS{constructor(){this.Mo=new og,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new og,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="ConnectivityMonitor";class lg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){X(ag,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){X(ag,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea=null;function Sd(){return Ea===null?Ea=function(){return 268435456+Math.round(2147483648*Math.random())}():Ea++,"0x"+Ea.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic="RestConnection",bS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===xl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Sd(),u=this.zo(e,n.toUriEncodedString());X(ic,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:h}=new URL(u),m=Ih(h);return this.Jo(e,u,c,r,m).then(p=>(X(ic,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Bs(ic,`RPC '${e}' ${o} failed with error: `,p,"url: ",u,"request:",r),p})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=bS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class NS extends SS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Sd();return new Promise((u,c)=>{const h=new tv;h.setWithCredentials(!0),h.listenOnce(nv.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Oa.NO_ERROR:const p=h.getResponseJson();X(mt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),u(p);break;case Oa.TIMEOUT:X(mt,`RPC '${e}' ${o} timed out`),c(new K(z.DEADLINE_EXCEEDED,"Request time out"));break;case Oa.HTTP_ERROR:const g=h.getStatus();if(X(mt,`RPC '${e}' ${o} failed with status:`,g,"response text:",h.getResponseText()),g>0){let N=h.getResponseJson();Array.isArray(N)&&(N=N[0]);const k=N==null?void 0:N.error;if(k&&k.status&&k.message){const P=function(S){const w=S.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(w)>=0?w:z.UNKNOWN}(k.status);c(new K(P,k.message))}else c(new K(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new K(z.UNAVAILABLE,"Connection failed."));break;default:ie(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{X(mt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);X(mt,`RPC '${e}' ${o} sending request:`,s),h.send(n,"POST",m,r,15)})}T_(e,n,r){const s=Sd(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iv(),u=sv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");X(mt,`Creating RPC '${e}' stream ${s}: ${m}`,c);const p=o.createWebChannel(m,c);this.I_(p);let g=!1,N=!1;const k=new TS({Yo:D=>{N?X(mt,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(g||(X(mt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),X(mt,`RPC '${e}' stream ${s} sending:`,D),p.send(D))},Zo:()=>p.close()}),P=(D,S,w)=>{D.listen(S,I=>{try{w(I)}catch(O){setTimeout(()=>{throw O},0)}})};return P(p,Fi.EventType.OPEN,()=>{N||(X(mt,`RPC '${e}' stream ${s} transport opened.`),k.o_())}),P(p,Fi.EventType.CLOSE,()=>{N||(N=!0,X(mt,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(p))}),P(p,Fi.EventType.ERROR,D=>{N||(N=!0,Bs(mt,`RPC '${e}' stream ${s} transport errored. Name:`,D.name,"Message:",D.message),k.a_(new K(z.UNAVAILABLE,"The operation could not be completed")))}),P(p,Fi.EventType.MESSAGE,D=>{var S;if(!N){const w=D.data[0];Ee(!!w,16349);const I=w,O=(I==null?void 0:I.error)||((S=I[0])==null?void 0:S.error);if(O){X(mt,`RPC '${e}' stream ${s} received error:`,O);const M=O.status;let F=function(_){const E=We[_];if(E!==void 0)return Fv(E)}(M),x=O.message;F===void 0&&(F=z.INTERNAL,x="Unknown error status: "+M+" with message "+O.message),N=!0,k.a_(new K(F,x)),p.close()}else X(mt,`RPC '${e}' stream ${s} received:`,w),k.u_(w)}}),P(u,rv.STAT_EVENT,D=>{D.stat===dd.PROXY?X(mt,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===dd.NOPROXY&&X(mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function oc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){return new kb(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="PersistentStream";class ex{constructor(e,n,r,s,i,o,u,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Ln(n.toString()),Ln("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new K(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return X(ug,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(X(ug,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IS extends ex{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Pb(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?_n(o.readTime):oe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ed(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=gd(c)?{documents:Mb(i,c)}:{query:Ob(i,c).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=$v(i,o.resumeToken);const h=xd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}else if(o.snapshotVersion.compareTo(oe.min())>0){u.readTime=Sl(i,o.snapshotVersion.toTimestamp());const h=xd(i,o.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=Fb(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ed(this.serializer),n.removeTarget=e,this.q_(n)}}class AS extends ex{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Vb(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ed(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Db(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{}class kS extends CS{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new K(z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,_d(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(z.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Ho(e,_d(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(z.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class jS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ln(n),this.aa=!1):X("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="RemoteStore";class RS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{rs(this)&&(X(Zr,"Restarting streams for network reachability change."),await async function(c){const h=ae(c);h.Ea.add(4),await Fo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await ru(h)}(this))})}),this.Ra=new jS(r,s)}}async function ru(t){if(rs(t))for(const e of t.da)await e(!0)}async function Fo(t){for(const e of t.da)await e(!1)}function tx(t,e){const n=ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Kh(n)?Qh(n):ri(n).O_()&&Gh(n,e))}function Wh(t,e){const n=ae(t),r=ri(n);n.Ia.delete(e),r.O_()&&nx(n,e),n.Ia.size===0&&(r.O_()?r.L_():rs(n)&&n.Ra.set("Unknown"))}function Gh(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ri(t).Y_(e)}function nx(t,e){t.Va.Ue(e),ri(t).Z_(e)}function Qh(t){t.Va=new Nb({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ri(t).start(),t.Ra.ua()}function Kh(t){return rs(t)&&!ri(t).x_()&&t.Ia.size>0}function rs(t){return ae(t).Ea.size===0}function rx(t){t.Va=void 0}async function PS(t){t.Ra.set("Online")}async function DS(t){t.Ia.forEach((e,n)=>{Gh(t,e)})}async function VS(t,e){rx(t),Kh(t)?(t.Ra.ha(e),Qh(t)):t.Ra.set("Unknown")}async function MS(t,e,n){if(t.Ra.set("Online"),e instanceof zv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.Va.removeTarget(u))}(t,e)}catch(r){X(Zr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nl(t,r)}else if(e instanceof za?t.Va.Ze(e):e instanceof Uv?t.Va.st(e):t.Va.tt(e),!n.isEqual(oe.min()))try{const r=await Jv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Va.Tt(o);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.Ia.get(h);m&&i.Ia.set(h,m.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,h)=>{const m=i.Ia.get(c);if(!m)return;i.Ia.set(c,m.withResumeToken(dt.EMPTY_BYTE_STRING,m.snapshotVersion)),nx(i,c);const p=new rr(m.target,c,h,m.sequenceNumber);Gh(i,p)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){X(Zr,"Failed to raise snapshot:",r),await Nl(t,r)}}async function Nl(t,e,n){if(!ti(e))throw e;t.Ea.add(1),await Fo(t),t.Ra.set("Offline"),n||(n=()=>Jv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X(Zr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ru(t)})}function sx(t,e){return e().catch(n=>Nl(t,n,e))}async function su(t){const e=ae(t),n=Er(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jh;for(;OS(e);)try{const s=await vS(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,LS(e,s)}catch(s){await Nl(e,s)}ix(e)&&ox(e)}function OS(t){return rs(t)&&t.Ta.length<10}function LS(t,e){t.Ta.push(e);const n=Er(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ix(t){return rs(t)&&!Er(t).x_()&&t.Ta.length>0}function ox(t){Er(t).start()}async function FS(t){Er(t).ra()}async function US(t){const e=Er(t);for(const n of t.Ta)e.ea(n.mutations)}async function zS(t,e,n){const r=t.Ta.shift(),s=Fh.from(r,e,n);await sx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await su(t)}async function $S(t,e){e&&Er(t).X_&&await async function(r,s){if(function(o){return bb(o)&&o!==z.ABORTED}(s.code)){const i=r.Ta.shift();Er(r).B_(),await sx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await su(r)}}(t,e),ix(t)&&ox(t)}async function cg(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),X(Zr,"RemoteStore received new credentials");const r=rs(n);n.Ea.add(3),await Fo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ru(n)}async function BS(t,e){const n=ae(t);e?(n.Ea.delete(2),await ru(n)):e||(n.Ea.add(2),await Fo(n),n.Ra.set("Unknown"))}function ri(t){return t.ma||(t.ma=function(n,r,s){const i=ae(n);return i.sa(),new IS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:PS.bind(null,t),t_:DS.bind(null,t),r_:VS.bind(null,t),H_:MS.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Kh(t)?Qh(t):t.Ra.set("Unknown")):(await t.ma.stop(),rx(t))})),t.ma}function Er(t){return t.fa||(t.fa=function(n,r,s){const i=ae(n);return i.sa(),new AS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:FS.bind(null,t),r_:$S.bind(null,t),ta:US.bind(null,t),na:zS.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await su(t)):(await t.fa.stop(),t.Ta.length>0&&(X(Zr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new Yh(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xh(t,e){if(Ln("AsyncQueue",`${e}: ${t}`),ti(t))return new K(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{static emptySet(e){return new Ps(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=Ui(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ps)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ps;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this.ga=new Fe(re.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qs{constructor(e,n,r,s,i,o,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Qs(e,n,Ps.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class HS{constructor(){this.queries=hg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=hg(),i.forEach((o,u)=>{for(const c of u.Sa)c.onError(r)})})(this,new K(z.ABORTED,"Firestore shutting down"))}}function hg(){return new ns(t=>Iv(t),Xl)}async function ax(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new qS,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Xh(o,`Initialization of query '${ds(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Jh(n)}async function lx(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function WS(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.Sa)u.Fa(s)&&(r=!0);o.wa=s}}r&&Jh(n)}function GS(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Jh(t){t.Ca.forEach(e=>{e.next()})}var Td,fg;(fg=Td||(Td={})).Ma="default",fg.Cache="cache";class ux{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Qs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Td.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.key=e}}class dx{constructor(e){this.key=e}}class QS{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pe(),this.mutatedKeys=pe(),this.eu=Av(e),this.tu=new Ps(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new dg,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,p)=>{const g=s.get(m),N=Jl(this.query,p)?p:null,k=!!g&&this.mutatedKeys.has(g.key),P=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let D=!1;g&&N?g.data.isEqual(N.data)?k!==P&&(r.track({type:3,doc:N}),D=!0):this.su(g,N)||(r.track({type:2,doc:N}),D=!0,(c&&this.eu(N,c)>0||h&&this.eu(N,h)<0)&&(u=!0)):!g&&N?(r.track({type:0,doc:N}),D=!0):g&&!N&&(r.track({type:1,doc:g}),D=!0,(c||h)&&(u=!0)),D&&(N?(o=o.add(N),i=P?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:u,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(N,k){const P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie(20277,{Rt:D})}};return P(N)-P(k)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,h=c!==this.Za;return this.Za=c,o.length!==0||h?{snapshot:new Qs(this.query,e.tu,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=pe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new dx(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new cx(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Qs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zh="SyncEngine";class KS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YS{constructor(e){this.key=e,this.hu=!1}}class XS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ns(u=>Iv(u),Xl),this.Iu=new Map,this.Eu=new Set,this.du=new Fe(re.comparator),this.Au=new Map,this.Ru=new $h,this.Vu={},this.mu=new Map,this.fu=Gs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function JS(t,e,n=!0){const r=yx(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await hx(r,e,n,!0),s}async function ZS(t,e){const n=yx(t);await hx(n,e,!0,!1)}async function hx(t,e,n,r){const s=await xS(t.localStore,xn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await eT(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&tx(t.remoteStore,s),u}async function eT(t,e,n,r,s){t.pu=(p,g,N)=>async function(P,D,S,w){let I=D.view.ru(S);I.Cs&&(I=await ig(P.localStore,D.query,!1).then(({documents:x})=>D.view.ru(x,I)));const O=w&&w.targetChanges.get(D.targetId),M=w&&w.targetMismatches.get(D.targetId)!=null,F=D.view.applyChanges(I,P.isPrimaryClient,O,M);return pg(P,D.targetId,F.au),F.snapshot}(t,p,g,N);const i=await ig(t.localStore,e,!0),o=new QS(e,i.Qs),u=o.ru(i.documents),c=Lo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(u,t.isPrimaryClient,c);pg(t,n,h.au);const m=new KS(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function tT(t,e,n){const r=ae(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Xl(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await bd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Wh(r.remoteStore,s.targetId),Nd(r,s.targetId)}).catch(ei)):(Nd(r,s.targetId),await bd(r.localStore,s.targetId,!0))}async function nT(t,e){const n=ae(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wh(n.remoteStore,r.targetId))}async function rT(t,e,n){const r=cT(t);try{const s=await function(o,u){const c=ae(o),h=je.now(),m=u.reduce((N,k)=>N.add(k.key),pe());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",N=>{let k=Fn(),P=pe();return c.Ns.getEntries(N,m).next(D=>{k=D,k.forEach((S,w)=>{w.isValidDocument()||(P=P.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(N,k)).next(D=>{p=D;const S=[];for(const w of u){const I=vb(w,p.get(w.key).overlayedDocument);I!=null&&S.push(new Ar(w.key,I,xv(I.value.mapValue),an.exists(!0)))}return c.mutationQueue.addMutationBatch(N,h,S,u)}).next(D=>{g=D;const S=D.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(N,D.batchId,S)})}).then(()=>({batchId:g.batchId,changes:kv(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let h=o.Vu[o.currentUser.toKey()];h||(h=new Fe(me)),h=h.insert(u,c),o.Vu[o.currentUser.toKey()]=h}(r,s.batchId,n),await Uo(r,s.changes),await su(r.remoteStore)}catch(s){const i=Xh(s,"Failed to persist write");n.reject(i)}}async function fx(t,e){const n=ae(t);try{const r=await gS(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ee(o.hu,14607):s.removedDocuments.size>0&&(Ee(o.hu,42227),o.hu=!1))}),await Uo(n,r,e)}catch(r){await ei(r)}}function mg(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=ae(o);c.onlineState=u;let h=!1;c.queries.forEach((m,p)=>{for(const g of p.Sa)g.va(u)&&(h=!0)}),h&&Jh(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sT(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Fe(re.comparator);o=o.insert(i,yt.newNoDocument(i,oe.min()));const u=pe().add(i),c=new tu(oe.min(),new Map,new Fe(me),o,u);await fx(r,c),r.du=r.du.remove(i),r.Au.delete(e),ef(r)}else await bd(r.localStore,e,!1).then(()=>Nd(r,e,n)).catch(ei)}async function iT(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await pS(n.localStore,e);px(n,r,null),mx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uo(n,s)}catch(s){await ei(s)}}async function oT(t,e,n){const r=ae(t);try{const s=await function(o,u){const c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return c.mutationQueue.lookupMutationBatch(h,u).next(p=>(Ee(p!==null,37113),m=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>c.localDocuments.getDocuments(h,m))})}(r.localStore,e);px(r,e,n),mx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Uo(r,s)}catch(s){await ei(s)}}function mx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function px(t,e,n){const r=ae(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Nd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||gx(t,r)})}function gx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Wh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ef(t))}function pg(t,e,n){for(const r of n)r instanceof cx?(t.Ru.addReference(r.key,e),aT(t,r)):r instanceof dx?(X(Zh,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||gx(t,r.key)):ie(19791,{wu:r})}function aT(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(X(Zh,"New document in limbo: "+n),t.Eu.add(r),ef(t))}function ef(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new re(Ie.fromString(e)),r=t.fu.next();t.Au.set(r,new YS(n)),t.du=t.du.insert(n,r),tx(t.remoteStore,new rr(xn(Mh(n.path)),r,"TargetPurposeLimboResolution",Ql.ce))}}async function Uo(t,e,n){const r=ae(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((u,c)=>{o.push(r.pu(c,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){s.push(h);const p=qh.As(c.targetId,h);i.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,h){const m=ae(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(h,g=>B.forEach(g.Es,N=>m.persistence.referenceDelegate.addReference(p,g.targetId,N)).next(()=>B.forEach(g.ds,N=>m.persistence.referenceDelegate.removeReference(p,g.targetId,N)))))}catch(p){if(!ti(p))throw p;X(Hh,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const N=m.Ms.get(g),k=N.snapshotVersion,P=N.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(g,P)}}}(r.localStore,i))}async function lT(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){X(Zh,"User change. New user:",e.toKey());const r=await Xv(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(u=>{u.forEach(c=>{c.reject(new K(z.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Uo(n,r.Ls)}}function uT(t,e){const n=ae(t),r=n.Au.get(e);if(r&&r.hu)return pe().add(r.key);{let s=pe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const u=n.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}function yx(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sT.bind(null,e),e.Pu.H_=WS.bind(null,e.eventManager),e.Pu.yu=GS.bind(null,e.eventManager),e}function cT(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oT.bind(null,e),e}class Il{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return mS(this.persistence,new dS,e.initialUser,this.serializer)}Cu(e){return new Yv(Bh.mi,this.serializer)}Du(e){return new wS}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Il.provider={build:()=>new Il};class dT extends Il{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ee(this.persistence.referenceDelegate instanceof Tl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Yb(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new Yv(r=>Tl.mi(r,n),this.serializer)}}class Id{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lT.bind(null,this.syncEngine),await BS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HS}()}createDatastore(e){const n=nu(e.databaseInfo.databaseId),r=function(i){return new NS(i)}(e.databaseInfo);return function(i,o,u,c){return new kS(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new RS(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>mg(this.syncEngine,n,0),function(){return lg.v()?new lg:new ES}())}createSyncEngine(e,n){return function(s,i,o,u,c,h,m){const p=new XS(s,i,o,u,c,h);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);X(Zr,"RemoteStore shutting down."),i.Ea.add(5),await Fo(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Id.provider={build:()=>new Id};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ln("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="FirestoreClient";class hT{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=kh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{X(br,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X(br,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ac(t,e){t.asyncQueue.verifyOperationInProgress(),X(br,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Xv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function gg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fT(t);X(br,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>cg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>cg(e.remoteStore,s)),t._onlineComponents=e}async function fT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X(br,"Using user provided OfflineComponentProvider");try{await ac(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===z.FAILED_PRECONDITION||s.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Bs("Error using user provided cache. Falling back to memory cache: "+n),await ac(t,new Il)}}else X(br,"Using default OfflineComponentProvider"),await ac(t,new dT(void 0));return t._offlineComponents}async function xx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X(br,"Using user provided OnlineComponentProvider"),await gg(t,t._uninitializedComponentsProvider._online)):(X(br,"Using default OnlineComponentProvider"),await gg(t,new Id))),t._onlineComponents}function mT(t){return xx(t).then(e=>e.syncEngine)}async function _x(t){const e=await xx(t),n=e.eventManager;return n.onListen=JS.bind(null,e.syncEngine),n.onUnlisten=tT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nT.bind(null,e.syncEngine),n}function pT(t,e,n={}){const r=new jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const m=new vx({next:g=>{m.Nu(),o.enqueueAndForget(()=>lx(i,p));const N=g.docs.has(u);!N&&g.fromCache?h.reject(new K(z.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&g.fromCache&&c&&c.source==="server"?h.reject(new K(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new ux(Mh(u.path),m,{includeMetadataChanges:!0,qa:!0});return ax(i,p)}(await _x(t),t.asyncQueue,e,n,r)),r.promise}function gT(t,e,n={}){const r=new jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,h){const m=new vx({next:g=>{m.Nu(),o.enqueueAndForget(()=>lx(i,p)),g.fromCache&&c.source==="server"?h.reject(new K(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new ux(u,m,{includeMetadataChanges:!0,qa:!0});return ax(i,p)}(await _x(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="firestore.googleapis.com",vg=!0;class xg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ex,this.ssl=vg}else this.host=e.host,this.ssl=e.ssl??vg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Kv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Qb)throw new K(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wx(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new E2;switch(r.type){case"firstParty":return new N2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=yg.get(n);r&&(X("ComponentProvider","Removing Datastore"),yg.delete(n),r.terminate())}(this),Promise.resolve()}}function yT(t,e,n,r={}){var h;t=bn(t,iu);const s=Ih(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(Kw(`https://${u}`),Zw("Firestore",!0)),i.host!==Ex&&i.host!==u&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:u,ssl:s,emulatorOptions:r};if(!pl(c,o)&&(t._setSettings(c),r.mockUserToken)){let m,p;if(typeof r.mockUserToken=="string")m=r.mockUserToken,p=pt.MOCK_USER;else{m=Yw(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new K(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new pt(g)}t._authCredentials=new b2(new av(m,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ss(this.firestore,e,this._query)}}class He{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new He(this.firestore,e,this._key)}toJSON(){return{type:He._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Mo(n,He._jsonSchema))return new He(e,r||null,new re(Ie.fromString(n.referencePath)))}}He._jsonSchemaVersion="firestore/documentReference/1.0",He._jsonSchema={type:Ke("string",He._jsonSchemaVersion),referencePath:Ke("string")};class pr extends ss{constructor(e,n,r){super(e,n,Mh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new He(this.firestore,null,new re(e))}withConverter(e){return new pr(this.firestore,e,this._path)}}function Mt(t,e,...n){if(t=Mn(t),lv("collection","path",e),t instanceof iu){const r=Ie.fromString(e,...n);return Rp(r),new pr(t,null,r)}{if(!(t instanceof He||t instanceof pr))throw new K(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return Rp(r),new pr(t.firestore,null,r)}}function Ve(t,e,...n){if(t=Mn(t),arguments.length===1&&(e=kh.newId()),lv("doc","path",e),t instanceof iu){const r=Ie.fromString(e,...n);return jp(r),new He(t,null,new re(r))}{if(!(t instanceof He||t instanceof pr))throw new K(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return jp(r),new He(t.firestore,t instanceof pr?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="AsyncQueue";class wg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zv(this,"async_queue_retry"),this._c=()=>{const r=oc();r&&X(_g,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=oc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=oc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new jn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ti(e))throw e;X(_g,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ln("INTERNAL UNHANDLED ERROR: ",Eg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Yh.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ie(47125,{Pc:Eg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Eg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class si extends iu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new wg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wg(e),this._firestoreClient=void 0,await e}}}function vT(t,e){const n=typeof t=="object"?t:u2(),r=typeof t=="string"?t:xl,s=s2(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Gw("firestore");i&&yT(s,...i)}return s}function tf(t){if(t._terminated)throw new K(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||xT(t),t._firestoreClient}function xT(t){var r,s,i;const e=t._freezeSettings(),n=function(u,c,h,m){return new B2(u,c,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,wx(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new hT(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kt(dt.fromBase64String(e))}catch(n){throw new K(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kt(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mo(e,Kt._jsonSchema))return Kt.fromBase64String(e.bytes)}}Kt._jsonSchemaVersion="firestore/bytes/1.0",Kt._jsonSchema={type:Ke("string",Kt._jsonSchemaVersion),bytes:Ke("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wn._jsonSchemaVersion}}static fromJSON(e){if(Mo(e,wn._jsonSchema))return new wn(e.latitude,e.longitude)}}wn._jsonSchemaVersion="firestore/geoPoint/1.0",wn._jsonSchema={type:Ke("string",wn._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:En._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mo(e,En._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new En(e.vectorValues);throw new K(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}En._jsonSchemaVersion="firestore/vectorValue/1.0",En._jsonSchema={type:Ke("string",En._jsonSchemaVersion),vectorValues:Ke("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=/^__.*__$/;class wT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new Oo(e,this.data,n,this.fieldTransforms)}}class bx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Sx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie(40011,{Ac:t})}}class rf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Al(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Sx(this.Ac)&&_T.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ET{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nu(e)}Cc(e,n,r,s=!1){return new rf({Ac:e,methodName:n,Dc:r,path:lt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sf(t){const e=t._freezeSettings(),n=nu(t._databaseId);return new ET(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bT(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);of("Data must be an object, but it was:",o,r);const u=Tx(r,o);let c,h;if(i.merge)c=new Ut(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const p of i.mergeFields){const g=Ad(e,p,n);if(!o.contains(g))throw new K(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Ix(m,g)||m.push(g)}c=new Ut(m),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new wT(new At(u),c,h)}class au extends nf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof au}}function ST(t,e,n,r){const s=t.Cc(1,e,n);of("Data must be an object, but it was:",s,r);const i=[],o=At.empty();Ir(r,(c,h)=>{const m=af(e,c,n);h=Mn(h);const p=s.yc(m);if(h instanceof au)i.push(m);else{const g=zo(h,p);g!=null&&(i.push(m),o.set(m,g))}});const u=new Ut(i);return new bx(o,u,s.fieldTransforms)}function TT(t,e,n,r,s,i){const o=t.Cc(1,e,n),u=[Ad(e,r,n)],c=[s];if(i.length%2!=0)throw new K(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)u.push(Ad(e,i[g])),c.push(i[g+1]);const h=[],m=At.empty();for(let g=u.length-1;g>=0;--g)if(!Ix(h,u[g])){const N=u[g];let k=c[g];k=Mn(k);const P=o.yc(N);if(k instanceof au)h.push(N);else{const D=zo(k,P);D!=null&&(h.push(N),m.set(N,D))}}const p=new Ut(h);return new bx(m,p,o.fieldTransforms)}function NT(t,e,n,r=!1){return zo(n,t.Cc(r?4:3,e))}function zo(t,e){if(Nx(t=Mn(t)))return of("Unsupported field value:",e,t),Tx(t,e);if(t instanceof nf)return function(r,s){if(!Sx(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=zo(u,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Mn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=je.fromDate(r);return{timestampValue:Sl(s.serializer,i)}}if(r instanceof je){const i=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sl(s.serializer,i)}}if(r instanceof wn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kt)return{bytesValue:$v(s.serializer,r._byteString)};if(r instanceof He){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zh(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof En)return function(o,u){return{mapValue:{fields:{[yv]:{stringValue:vv},[_l]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw u.Sc("VectorValues must only contain numeric values.");return Oh(u.serializer,h)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Gl(r)}`)}(t,e)}function Tx(t,e){const n={};return dv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ir(t,(r,s)=>{const i=zo(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Nx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof wn||t instanceof Kt||t instanceof He||t instanceof nf||t instanceof En)}function of(t,e,n){if(!Nx(n)||!uv(n)){const r=Gl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ad(t,e,n){if((e=Mn(e))instanceof ou)return e._internalPath;if(typeof e=="string")return af(t,e);throw Al("Field path arguments must be of type string or ",t,!1,void 0,n)}const IT=new RegExp("[~\\*/\\[\\]]");function af(t,e,n){if(e.search(IT)>=0)throw Al(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ou(...e.split("."))._internalPath}catch{throw Al(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Al(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new K(z.INVALID_ARGUMENT,u+t+c)}function Ix(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AT extends Ax{data(){return super.data()}}function lu(t,e){return typeof e=="string"?af(t,e):e instanceof ou?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lf{}class Cx extends lf{}function Kn(t,e,...n){let r=[];e instanceof lf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof uf).length,u=i.filter(c=>c instanceof uu).length;if(o>1||o>0&&u>0)throw new K(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class uu extends Cx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uu(e,n,r)}_apply(e){const n=this._parse(e);return kx(e._query,n),new ss(e.firestore,e.converter,yd(e._query,n))}_parse(e){const n=sf(e.firestore);return function(i,o,u,c,h,m,p){let g;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new K(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Tg(p,m);const k=[];for(const P of p)k.push(Sg(c,i,P));g={arrayValue:{values:k}}}else g=Sg(c,i,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Tg(p,m),g=NT(u,o,p,m==="in"||m==="not-in");return Qe.create(h,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ji(t,e,n){const r=e,s=lu("where",t);return uu._create(s,r,n)}class uf extends lf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new uf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)kx(o,c),o=yd(o,c)}(e._query,n),new ss(e.firestore,e.converter,yd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cf extends Cx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new cf(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Io(i,o)}(e._query,this._field,this._direction);return new ss(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ni(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function bg(t,e="asc"){const n=e,r=lu("orderBy",t);return cf._create(r,n)}function Sg(t,e,n){if(typeof(n=Mn(n))=="string"){if(n==="")throw new K(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nv(e)&&n.indexOf("/")!==-1)throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ie.fromString(n));if(!re.isDocumentKey(r))throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Up(t,new re(r))}if(n instanceof He)return Up(t,n._key);throw new K(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gl(n)}.`)}function Tg(t,e){if(!Array.isArray(t)||t.length===0)throw new K(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kx(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kT{convertValue(e,n="none"){switch(wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ir(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[_l].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Be(o.doubleValue));return new En(n)}convertGeoPoint(e){return new wn(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Yl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(So(e));default:return null}}convertTimestamp(e){const n=xr(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);Ee(Qv(r),9688,{name:e});const s=new To(r.get(1),r.get(3)),i=new re(r.popFirst(5));return s.isEqual(n)||Ln(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class $i{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wr extends Ax{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $a(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Wr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wr._jsonSchema={type:Ke("string",Wr._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class $a extends Wr{data(e={}){return super.data(e)}}class Ds{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new $i(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $a(this._firestore,this._userDataWriter,r.key,r,new $i(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new $a(s._firestore,s._userDataWriter,u.doc.key,u.doc,new $i(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new $a(s._firestore,s._userDataWriter,u.doc.key,u.doc,new $i(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return u.type!==0&&(h=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),m=o.indexOf(u.doc.key)),{type:RT(u.type),doc:c,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ds._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t){t=bn(t,He);const e=bn(t.firestore,si);return pT(tf(e),t._key).then(n=>PT(e,t,n))}Ds._jsonSchemaVersion="firestore/querySnapshot/1.0",Ds._jsonSchema={type:Ke("string",Ds._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class jx extends kT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,n)}}function Tt(t){t=bn(t,ss);const e=bn(t.firestore,si),n=tf(e),r=new jx(e);return CT(t._query),gT(n,t._query).then(s=>new Ds(e,r,t,s))}function Yn(t,e,n){t=bn(t,He);const r=bn(t.firestore,si),s=jT(t.converter,e,n);return df(r,[bT(sf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,an.none())])}function Ri(t,e,n,...r){t=bn(t,He);const s=bn(t.firestore,si),i=sf(s);let o;return o=typeof(e=Mn(e))=="string"||e instanceof ou?TT(i,"updateDoc",t._key,e,n,r):ST(i,"updateDoc",t._key,e),df(s,[o.toMutation(t._key,an.exists(!0))])}function Tn(t){return df(bn(t.firestore,si),[new Lh(t._key,an.none())])}function df(t,e){return function(r,s){const i=new jn;return r.asyncQueue.enqueueAndForget(async()=>rT(await mT(r),s,i)),i.promise}(tf(t),e)}function PT(t,e,n){const r=n.docs.get(e._key),s=new jx(t);return new Wr(t,s,e._key,r,new $i(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Zs=s})(l2),yl(new wo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new si(new S2(r.getProvider("auth-internal")),new I2(o,r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new K(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new To(h.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Rs(Ip,Ap,e),Rs(Ip,Ap,"esm2020")})();const Cd={apiKey:"AIzaSyAO32W5Qdmdbt9mtp_ScyQE2fO5bEYC3LU",authDomain:"yj-order.firebaseapp.com",projectId:"yj-order",storageBucket:"yj-order.firebasestorage.app",messagingSenderId:"399409684502",appId:"1:399409684502:web:33a5660e855671d3211537"},DT=Xy(Cd),de=vT(DT),VT=!!Cd.apiKey&&!!Cd.projectId,ye={ORDERS:"cofoodie_orders",MENU_CATEGORIES:"cofoodie_menus_v3",EMPLOYEES:"cofoodie_employees_v2",ANNOUNCEMENTS:"cofoodie_announcements",ADMIN_SETTINGS:"cofoodie_admin_settings",ADMIN_ACCOUNTS:"cofoodie_admin_accounts",SESSION:"cofoodie_session",SESSION_USER_ID:"cofoodie_session_user_id",FRONTEND_PASSWORD:"cofoodie_frontend_password"},MT=[],OT=[],LT=[],Pi=[{id:"default_admin",name:"",username:"admin",password:"password",isSuperAdmin:!0}],ba="24664941";class FT{get useCloud(){return VT}async getOrders(){if(this.useCloud)try{const n=Kn(Mt(de,"orders"),bg("timestamp","desc"));return(await Tt(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){return console.error("Fetch Orders Error:",n),[]}const e=localStorage.getItem(ye.ORDERS);return e?JSON.parse(e):[]}async saveOrder(e){if(this.useCloud){const{id:s,...i}=e;await Yn(Ve(de,"orders",s),i);return}const n=await this.getOrders(),r=n.findIndex(s=>s.id===e.id);r!==-1?n[r]=e:n.push(e),localStorage.setItem(ye.ORDERS,JSON.stringify(n))}async deleteOrder(e){if(this.useCloud){await Tn(Ve(de,"orders",e));return}let n=await this.getOrders();n=n.filter(r=>r.id!==e),localStorage.setItem(ye.ORDERS,JSON.stringify(n))}async updateOrderStatus(e,n){if(this.useCloud){const i=Ve(de,"orders",e);await Ri(i,{status:n});return}const r=await this.getOrders(),s=r.findIndex(i=>i.id===e);s!==-1&&(r[s].status=n,localStorage.setItem(ye.ORDERS,JSON.stringify(r)))}async toggleOrderPayment(e){if(this.useCloud){const s=Ve(de,"orders",e),i=await Ng(s);if(i.exists()){const o=i.data().isPaid;await Ri(s,{isPaid:!o})}else console.error(`Order with ID ${e} not found for payment toggle.`);return}const n=await this.getOrders(),r=n.findIndex(s=>s.id===e);r!==-1&&(n[r].isPaid=!n[r].isPaid,localStorage.setItem(ye.ORDERS,JSON.stringify(n)))}async deleteOrdersByContext(e,n){if(this.useCloud){try{const s=Kn(Mt(de,"orders"),ji("dateStr","==",e),ji("categoryLabel","==",n)),o=(await Tt(s)).docs.map(u=>Tn(Ve(de,"orders",u.id)));await Promise.all(o)}catch(s){console.error("Delete Orders Error:",s)}return}let r=await this.getOrders();r=r.filter(s=>!(s.dateStr===e&&s.categoryLabel===n)),localStorage.setItem(ye.ORDERS,JSON.stringify(r))}async getMenuCategories(){if(this.useCloud){const n=Kn(Mt(de,"menus"));return(await Tt(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(ye.MENU_CATEGORIES);return e?JSON.parse(e):MT}async saveMenuCategories(e){this.useCloud||localStorage.setItem(ye.MENU_CATEGORIES,JSON.stringify(e))}async addMenuCategory(e,n){if(this.useCloud){const i="MENU_"+Date.now();await Yn(Ve(de,"menus",i),{label:e,config:n});return}const r=await this.getMenuCategories(),s="MENU_"+Date.now();r.push({id:s,label:e,config:n}),await this.saveMenuCategories(r)}async updateMenuCategory(e,n,r){if(this.useCloud){await Ri(Ve(de,"menus",e),{label:n,config:r});return}const s=await this.getMenuCategories(),i=s.findIndex(o=>o.id===e);i!==-1&&(s[i].label=n,s[i].config=r,await this.saveMenuCategories(s))}async deleteMenuCategory(e){if(this.useCloud){await Tn(Ve(de,"menus",e));return}let n=await this.getMenuCategories();n=n.filter(r=>r.id!==e),await this.saveMenuCategories(n)}async getEmployees(){if(this.useCloud){const n=Kn(Mt(de,"employees"),bg("name"));return(await Tt(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(ye.EMPLOYEES);return e?JSON.parse(e):OT}async saveEmployees(e){this.useCloud||localStorage.setItem(ye.EMPLOYEES,JSON.stringify(e))}async addEmployee(e){if(this.useCloud){const{id:r,...s}=e;await Yn(Ve(de,"employees",r),s);return}const n=await this.getEmployees();n.push(e),await this.saveEmployees(n)}async updateEmployee(e){if(this.useCloud){await Ri(Ve(de,"employees",e.id),{name:e.name});return}const r=(await this.getEmployees()).map(s=>s.id===e.id?e:s);await this.saveEmployees(r)}async deleteEmployee(e){if(this.useCloud){await Tn(Ve(de,"employees",e));return}const r=(await this.getEmployees()).filter(s=>s.id!==e);await this.saveEmployees(r)}async getAnnouncements(){if(this.useCloud){const n=Kn(Mt(de,"announcements"));return(await Tt(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(ye.ANNOUNCEMENTS);return e?JSON.parse(e):LT}async saveAnnouncements(e){if(this.useCloud){for(const n of e)await Yn(Ve(de,"announcements",n.id),{content:n.content,isActive:n.isActive},{merge:!0});return}localStorage.setItem(ye.ANNOUNCEMENTS,JSON.stringify(e))}async getAdminSettings(){if(this.useCloud)return{isGoogleBound:!0,googleAccountName:"Firebase Mode",googleAccountType:"WORKSPACE"};const e=localStorage.getItem(ye.ADMIN_SETTINGS);return e?JSON.parse(e):{isGoogleBound:!1,googleAccountName:"",googleAccountType:"PERSONAL"}}async setGoogleBound(e,n="",r="PERSONAL"){const s={isGoogleBound:e,googleAccountName:n,googleAccountType:r};localStorage.setItem(ye.ADMIN_SETTINGS,JSON.stringify(s))}async checkDatabaseConnection(){if(this.useCloud)try{return await Tt(Mt(de,"admins")),!0}catch{return!1}return new Promise(e=>{setTimeout(()=>{e(!0)},1e3)})}async getAdminAccounts(){if(this.useCloud){const n=Kn(Mt(de,"admins")),s=(await Tt(n)).docs.map(i=>({id:i.id,...i.data()}));if(s.length===0){for(const i of Pi)await Yn(Ve(de,"admins",i.id),{...i});return Pi}return s}const e=localStorage.getItem(ye.ADMIN_ACCOUNTS);return e?JSON.parse(e):(localStorage.setItem(ye.ADMIN_ACCOUNTS,JSON.stringify(Pi)),Pi)}async saveAdminAccounts(e){this.useCloud||localStorage.setItem(ye.ADMIN_ACCOUNTS,JSON.stringify(e))}async verifyAdmin(e,n){if(this.useCloud){if(!de)return null;const i=Mt(de,"admins");if((await Tt(i)).empty){console.log("No admins found in DB, seeding default admins...");for(const m of Pi)await Yn(Ve(de,"admins",m.id),{...m})}const u=Kn(i,ji("username","==",e),ji("password","==",n)),c=await Tt(u);if(c.empty)return null;const h=c.docs[0];return{id:h.id,...h.data()}}return(await this.getAdminAccounts()).find(i=>i.username===e&&i.password===n)||null}async getAdminById(e){return(await this.getAdminAccounts()).find(r=>r.id===e)}async addAdminAccount(e){if(this.useCloud){const r=Kn(Mt(de,"admins"),ji("username","==",e.username));if(!(await Tt(r)).empty)throw new Error("");const{id:i,...o}=e;await Yn(Ve(de,"admins",i),o);return}const n=await this.getAdminAccounts();if(n.some(r=>r.username===e.username))throw new Error("");n.push(e),await this.saveAdminAccounts(n)}async updateAdminAccount(e){if(this.useCloud){const{id:s,...i}=e;await Ri(Ve(de,"admins",s),i);return}const n=await this.getAdminAccounts(),r=n.findIndex(s=>s.id===e.id);r!==-1&&(n[r]=e,await this.saveAdminAccounts(n))}async deleteAdminAccount(e){if(this.useCloud){await Tn(Ve(de,"admins",e));return}let n=await this.getAdminAccounts();n=n.filter(r=>r.id!==e),await this.saveAdminAccounts(n)}async getFrontendPassword(){if(this.useCloud){if(!de)return ba;try{const n=Ve(de,"settings","global"),r=await Ng(n);return r.exists()&&r.data().frontendPassword?r.data().frontendPassword:ba}catch(n){return console.error("Error fetching frontend password:",n),ba}}return localStorage.getItem(ye.FRONTEND_PASSWORD)||ba}async setFrontendPassword(e){if(this.useCloud){await Yn(Ve(de,"settings","global"),{frontendPassword:e},{merge:!0});return}localStorage.setItem(ye.FRONTEND_PASSWORD,e)}async clearAllData(){if(this.useCloud){const e=await Tt(Mt(de,"orders"));for(const i of e.docs)await Tn(Ve(de,"orders",i.id));const n=await Tt(Mt(de,"menus"));for(const i of n.docs)await Tn(Ve(de,"menus",i.id));const r=await Tt(Mt(de,"employees"));for(const i of r.docs)await Tn(Ve(de,"employees",i.id));const s=await Tt(Mt(de,"announcements"));for(const i of s.docs)await Tn(Ve(de,"announcements",i.id));return}localStorage.removeItem(ye.ORDERS),localStorage.removeItem(ye.MENU_CATEGORIES),localStorage.removeItem(ye.EMPLOYEES),localStorage.removeItem(ye.ANNOUNCEMENTS)}setSession(e,n,r=!1){const s=r?localStorage:sessionStorage,i=r?sessionStorage:localStorage;i.removeItem(ye.SESSION),i.removeItem(ye.SESSION_USER_ID),s.setItem(ye.SESSION,e),n&&s.setItem(ye.SESSION_USER_ID,n)}getSession(){let e=localStorage.getItem(ye.SESSION),n=localStorage.getItem(ye.SESSION_USER_ID);return e||(e=sessionStorage.getItem(ye.SESSION),n=sessionStorage.getItem(ye.SESSION_USER_ID)),{role:e,userId:n}}clearSession(){localStorage.removeItem(ye.SESSION),localStorage.removeItem(ye.SESSION_USER_ID),sessionStorage.removeItem(ye.SESSION),sessionStorage.removeItem(ye.SESSION_USER_ID)}}const UT=new FT,ee=UT;var Rx=(t=>(t.PENDING="PENDING",t.CONFIRMED="CONFIRMED",t.COMPLETED="COMPLETED",t.CANCELLED="CANCELLED",t))(Rx||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),se=(t,e)=>{const n=q.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...h},m)=>q.createElement("svg",{ref:m,...zT,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${$T(t)}`,u].join(" "),...h},[...e.map(([p,g])=>q.createElement(p,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=se("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=se("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=se("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=se("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=se("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=se("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=se("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=se("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=se("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=se("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=se("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=se("PauseCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=se("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=se("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=se("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=se("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=se("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=se("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=se("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=se("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=se("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=se("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=se("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=se("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),dc=[{label:"",badge:"bg-blue-100 text-blue-700",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200"},{label:"",badge:"bg-emerald-100 text-emerald-700",bg:"bg-emerald-100",text:"text-emerald-700",border:"border-emerald-200"},{label:"",badge:"bg-amber-100 text-amber-700",bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-200"},{label:"",badge:"bg-rose-100 text-rose-700",bg:"bg-rose-100",text:"text-rose-700",border:"border-rose-200"},{label:"",badge:"bg-violet-100 text-violet-700",bg:"bg-violet-100",text:"text-violet-700",border:"border-violet-200"}],kg=t=>{if(!t)return{badge:"bg-slate-100 text-slate-500",bg:"bg-slate-100",text:"text-slate-500",border:"border-slate-200"};const e=dc.find(r=>r.label===t);if(e)return e;const n=t.split("").reduce((r,s)=>r+s.charCodeAt(0),1)%dc.length;return dc[n]},pN=({onLogout:t,onGoToAdmin:e})=>{const[n,r]=q.useState([]),[s,i]=q.useState(""),[o,u]=q.useState("CARD"),[c,h]=q.useState(null),[m,p]=q.useState(null),[g,N]=q.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[k,P]=q.useState([]),[D,S]=q.useState(""),[w,I]=q.useState(""),[O,M]=q.useState(""),[F,x]=q.useState(""),[v,_]=q.useState("ALL"),[E,T]=q.useState([]),[C,b]=q.useState([]),[we,Pe]=q.useState([]),[xt,L]=q.useState(new Date),j=$=>{const le=new Date($),J=le.getDay(),Se=le.getDate()-J+(J===0?-6:1);return new Date(le.setDate(Se))},H=new Date().toISOString().split("T")[0];q.useEffect(()=>{const $=setInterval(()=>L(new Date),1e3);(async()=>{const[Se,A,U,G]=await Promise.all([ee.getMenuCategories(),ee.getEmployees(),ee.getAnnouncements(),ee.getOrders()]);r(Se);const te=Array.from(new Set(Se.map(Te=>Te.label)));if(te.length>0&&!s){const Te=te.includes("")?"":te[0];i(Te)}T(A),b(U.filter(Te=>Te.isActive)),Pe(G)})();const J=()=>{window.innerWidth>=1024&&N(!0)};return window.addEventListener("resize",J),()=>{clearInterval($),window.removeEventListener("resize",J)}},[]),q.useEffect(()=>{if(!s)return;const $=n.filter(J=>J.label===s),le=$.find(J=>J.config.date===H);if(le)h(le);else if($.length>0){const J=[...$].sort((Se,A)=>A.config.date.localeCompare(Se.config.date));h(J[0])}else h(null)},[s,n]);const Y=Array.from(new Set(n.map($=>$.label))),ne=n.filter($=>$.label===s),he=j(new Date),et=Array.from({length:5}).map(($,le)=>{const J=new Date(he);return J.setDate(he.getDate()+le),J.toISOString().split("T")[0]}),Ue=["","","","",""],Pt=[{active:"bg-blue-50 text-blue-800 border-blue-600",hover:"hover:bg-blue-50 hover:text-blue-600",border:"border-blue-600",badge:"bg-blue-100 text-blue-700"},{active:"bg-emerald-50 text-emerald-800 border-emerald-600",hover:"hover:bg-emerald-50 hover:text-emerald-600",border:"border-emerald-600",badge:"bg-emerald-100 text-emerald-700"},{active:"bg-amber-50 text-amber-800 border-amber-600",hover:"hover:bg-amber-50 hover:text-amber-600",border:"border-amber-600",badge:"bg-amber-100 text-amber-700"},{active:"bg-rose-50 text-rose-800 border-rose-600",hover:"hover:bg-rose-50 hover:text-rose-600",border:"border-rose-600",badge:"bg-rose-100 text-rose-700"},{active:"bg-violet-50 text-violet-800 border-violet-600",hover:"hover:bg-violet-50 hover:text-violet-600",border:"border-violet-600",badge:"bg-violet-100 text-violet-700"}],ge=c?c.config.date<H:!1,ce=()=>{if(!D){alert("");return}if(!w){alert("");return}if(!F){alert("");return}const $={id:Date.now().toString(),name:w,note:O,price:Number(F)};P([...k,$]),I(""),M(""),x("")},tt=async()=>{if(!D||k.length===0){alert("");return}const $=E.find(Se=>Se.id===D),le={id:Date.now().toString(),employeeName:$?$.name:"Unknown",items:k,totalAmount:k.reduce((Se,A)=>Se+A.price,0),timestamp:Date.now(),status:Rx.PENDING,dateStr:H,categoryLabel:s};await ee.saveOrder(le),alert(""),P([]),S("");const J=await ee.getOrders();Pe(J)},Ht=we.filter($=>$.dateStr===H).sort(($,le)=>le.timestamp-$.timestamp),Cr=Array.from(new Set(Ht.map($=>$.categoryLabel||""))),zn=Ht.filter($=>v==="ALL"||($.categoryLabel||"")===v),Dt=s===""||s===""||s===""||s==="",[cn,is]=q.useState(0);return q.useEffect(()=>{if(C.length<=1)return;const $=setInterval(()=>{is(le=>(le+1)%C.length)},5e3);return()=>clearInterval($)},[C]),l.jsxs("div",{className:"min-h-screen bg-slate-50 pb-16 flex flex-col",children:[l.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-40 flex-shrink-0",children:[l.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 flex justify-between items-center text-sm",children:[l.jsxs("div",{className:"font-mono flex items-center gap-2",children:[l.jsx(lc,{size:14}),xt.toLocaleDateString("zh-TW")," ",xt.toLocaleTimeString("zh-TW",{hour12:!1})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:e,className:"flex items-center gap-1 text-slate-300 hover:text-white text-xs transition-colors",children:[l.jsx(KT,{size:14})," "]}),l.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white text-xs",children:"Exit"})]})]}),l.jsx("div",{className:"bg-white text-orange-600 font-bold py-2 shadow-md border-b-2 border-orange-100 overflow-hidden relative h-10 flex items-center justify-center z-30",children:C.length>0?l.jsx("div",{className:"h-6 overflow-hidden relative w-full max-w-2xl mx-auto px-4",children:C.map(($,le)=>l.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-all duration-500 ease-in-out transform ${le===cn?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,children:l.jsxs("span",{className:"drop-shadow-sm flex items-center gap-2 truncate",children:[" ",$.content]})},le))}):l.jsx("span",{className:"text-sm opacity-80",children:""})}),l.jsx("div",{className:"text-center py-4 bg-white border-b border-slate-100",children:l.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:""})}),l.jsx("div",{className:"flex justify-center border-b border-slate-200 overflow-x-auto px-4 bg-white",children:Y.length===0?l.jsxs("div",{className:"p-4 text-slate-400 text-sm flex items-center gap-2",children:[l.jsx(GT,{size:16})," "]}):Y.map(($,le)=>{const J=Pt[le%Pt.length],Se=s===$;return l.jsx("button",{onClick:()=>{i($),u("CARD")},className:`px-6 md:px-8 py-3 text-lg font-bold rounded-t-lg transition-all whitespace-nowrap border-b-4 mx-1 ${Se?J.active:`border-transparent text-slate-500 bg-transparent ${J.hover}`}`,children:$},$)})})]}),l.jsxs("main",{className:"container mx-auto p-4 md:p-6 space-y-8 flex-grow",children:[l.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg shadow-sm border border-slate-200 cursor-pointer lg:cursor-auto select-none",onClick:()=>window.innerWidth<1024&&N(!g),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(jd,{className:"text-primary"}),s," - ",Dt?"":""]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"lg:hidden text-slate-400 flex items-center gap-1 text-xs",children:g?l.jsxs(l.Fragment,{children:[" ",l.jsx(HT,{size:20})]}):l.jsxs(l.Fragment,{children:[" ",l.jsx(qT,{size:20})]})}),l.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1 shadow-inner",onClick:$=>$.stopPropagation(),children:[l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded flex items-center gap-2 transition-colors ${o==="CARD"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,title:"",children:l.jsx(ii,{size:18})}),l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded flex items-center gap-2 transition-colors ${o==="LIST"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,title:"",children:l.jsx(XT,{size:18})})]})]})]}),g&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 duration-300",children:[Dt&&o==="CARD"&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:et.map(($,le)=>{const J=ne.find(G=>G.config.date===$),Se=$===H,A=(c==null?void 0:c.id)===(J==null?void 0:J.id);let U=!1;if($<H)U=!0;else if($===H&&(J!=null&&J.config.cutoffTime)){const G=new Date;`${G.getHours().toString().padStart(2,"0")}:${G.getMinutes().toString().padStart(2,"0")}`>J.config.cutoffTime&&(U=!0)}else $===H&&!(J!=null&&J.config.cutoffTime)&&(U=!1);return l.jsxs("div",{onClick:()=>J&&h(J),className:`relative flex flex-col rounded-xl overflow-hidden transition-all cursor-pointer border-2 ${Se?"border-amber-400 shadow-lg ring-2 ring-amber-100 scale-[1.02] z-10":"border-slate-200 hover:border-blue-300"} ${A?"ring-2 ring-primary":""} bg-white`,children:[l.jsxs("div",{className:`p-2 text-center font-bold text-sm ${Se?"bg-amber-400 text-white":"bg-slate-100 text-slate-600"}`,children:[Ue[le]," ",l.jsx("span",{className:"text-xs font-normal opacity-90 block",children:$.slice(5)})]}),l.jsx("div",{className:"flex-1 min-h-[140px] flex items-center justify-center bg-slate-50 relative group flex-col",children:J?l.jsxs(l.Fragment,{children:[J.config.imageUrl?l.jsx("img",{src:J.config.imageUrl,alt:"Menu",className:`w-full h-full object-cover absolute inset-0 ${U?"grayscale-[0.5] opacity-80":""}`}):l.jsxs("div",{className:"text-xs text-slate-400 flex flex-col items-center z-10",children:[l.jsx(ko,{size:24})," ",l.jsx("span",{children:""})]}),l.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-2 z-10",children:[l.jsx("div",{className:"text-white text-xs font-bold truncate",children:J.config.shopName}),J.config.cutoffTime&&l.jsxs("div",{className:"text-red-500 text-xs font-bold bg-white/90 px-1 rounded backdrop-blur-sm mt-1 inline-block",children:[": ",J.config.cutoffTime]})]}),U&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20 pointer-events-none",children:l.jsx("div",{className:"border-4 border-red-600 text-red-600 text-xl font-black px-4 py-2 rounded-lg -rotate-12 bg-white/80 shadow-lg tracking-widest backdrop-blur-sm",children:""})})]}):l.jsx("div",{className:"text-slate-300 text-xs",children:""})}),Se&&l.jsx("div",{className:"absolute top-1 right-1 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-full shadow animate-pulse z-20",children:"Today"})]},$)})}),Dt&&o==="LIST"&&l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsx("div",{className:"grid grid-cols-1 divide-y divide-slate-100",children:et.map(($,le)=>{const J=ne.find(U=>U.config.date===$),Se=$===H,A=(c==null?void 0:c.id)===(J==null?void 0:J.id);return l.jsxs("div",{onClick:()=>J&&h(J),className:`p-4 flex flex-col sm:flex-row sm:items-center gap-4 transition-all cursor-pointer relative ${Se?"bg-amber-50/60 hover:bg-amber-100/50":"hover:bg-slate-50"} ${A?"bg-blue-50/40 ring-1 ring-inset ring-primary":""}`,children:[Se&&l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 bg-amber-400"}),l.jsxs("div",{className:"sm:w-40 flex-shrink-0 flex items-center gap-2 pl-2",children:[l.jsx("div",{className:`font-bold text-lg ${Se?"text-amber-700":"text-slate-600"}`,children:Ue[le]}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs text-slate-400 font-mono",children:$}),Se&&l.jsx("span",{className:"inline-block px-1.5 py-0.5 rounded-full bg-red-500 text-white text-[10px] font-bold w-fit mt-0.5",children:"Today"})]})]}),l.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[l.jsxs("div",{className:"w-20 h-14 bg-slate-100 rounded overflow-hidden flex-shrink-0 border border-slate-200 shadow-sm relative",children:[J!=null&&J.config.imageUrl?l.jsx("img",{src:J.config.imageUrl,className:"w-full h-full object-cover",alt:"thumb"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(ko,{size:16})}),!J&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-50 text-[10px] text-slate-400",children:""})]}),l.jsx("div",{className:"flex-1 min-w-0",children:J?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"font-bold text-slate-800 text-base truncate",children:J.config.shopName}),J.config.cutoffTime?l.jsxs("div",{className:"text-xs font-bold text-red-600 flex items-center gap-1 mt-1",children:[l.jsx(lc,{size:12})," : ",J.config.cutoffTime]}):l.jsx("div",{className:"text-xs text-slate-400 mt-1",children:""})]}):l.jsx("span",{className:"text-slate-400 italic text-sm",children:"--  --"})})]}),l.jsx("div",{className:"text-right flex-shrink-0",children:J?l.jsx("button",{className:`px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition-all border ${A?"bg-primary text-white border-primary shadow-md":"bg-white border-slate-300 text-slate-600 hover:border-primary hover:text-primary"}`,children:A?"":""}):l.jsx("button",{disabled:!0,className:"px-4 py-2 rounded-lg text-sm text-slate-300 border border-slate-100 bg-slate-50 cursor-not-allowed",children:""})})]},$)})})}),!Dt&&o==="CARD"&&l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[ne.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-8",children:""}),ne.map($=>{const le=(c==null?void 0:c.id)===$.id;return l.jsxs("div",{onClick:()=>h($),className:`bg-white rounded-xl shadow-sm border transition-all cursor-pointer overflow-hidden group hover:shadow-md ${le?"border-primary ring-2 ring-primary/20":"border-slate-200 hover:border-blue-300"}`,children:[l.jsxs("div",{className:"aspect-video bg-slate-100 relative",children:[$.config.imageUrl?l.jsx("img",{src:$.config.imageUrl,alt:"item",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(jd,{size:32})}),l.jsx("div",{className:"absolute top-2 right-2 bg-white/90 backdrop-blur px-2 py-1 rounded text-xs font-bold shadow text-slate-700",children:$.config.date})]}),l.jsxs("div",{className:"p-3",children:[l.jsx("h3",{className:"font-bold text-slate-800 truncate",children:$.config.shopName}),$.config.cutoffTime&&l.jsxs("div",{className:"text-sm font-bold text-red-600 mt-1",children:[": ",$.config.date," ",$.config.cutoffTime]}),l.jsx("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:""})]})]},$.id)})]}),!Dt&&o==="LIST"&&l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 text-slate-600 font-semibold w-32",children:""}),l.jsx("th",{className:"p-4 text-slate-600 font-semibold",children:" / "}),l.jsx("th",{className:"p-4 text-slate-600 font-semibold text-right",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[ne.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"p-8 text-center text-slate-400",children:""})}),ne.sort(($,le)=>le.config.date.localeCompare($.config.date)).map($=>l.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${(c==null?void 0:c.id)===$.id?"bg-blue-50/50":""}`,children:[l.jsx("td",{className:"p-4 text-slate-600 font-mono text-sm",children:$.config.date}),l.jsxs("td",{className:"p-4",children:[l.jsx("div",{className:"font-bold text-slate-800",children:$.config.shopName}),$.config.cutoffTime&&l.jsxs("div",{className:"text-red-600 text-sm font-bold mt-1",children:[": ",$.config.date," ",$.config.cutoffTime]})]}),l.jsx("td",{className:"p-4 text-right",children:l.jsx("button",{onClick:()=>h($),className:"px-4 py-2 bg-white border border-slate-300 rounded text-sm font-medium hover:bg-primary hover:text-white hover:border-primary transition-colors shadow-sm",children:""})})]},$.id))]})]})})]}),c&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 pt-4",children:[l.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(lN,{className:"text-amber-400 fill-amber-400"})," ",c.config.shopName]}),c.config.cutoffTime&&l.jsxs("div",{className:"text-red-600 font-bold mt-1 flex items-center gap-1 animate-pulse",children:[l.jsx(lc,{size:16})," : ",c.config.date," ",c.config.cutoffTime]})]}),l.jsx("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded",children:c.config.date})]}),l.jsx("div",{className:"w-full bg-white rounded-xl shadow border border-slate-200 overflow-hidden cursor-zoom-in group relative",onClick:()=>c.config.imageUrl&&p(c.config.imageUrl),children:c.config.imageUrl?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:c.config.imageUrl,alt:"Menu Detail",className:"w-full h-auto max-h-[500px] object-contain"}),l.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all flex items-center justify-center",children:l.jsxs("div",{className:"opacity-0 group-hover:opacity-100 bg-white px-4 py-2 rounded-full shadow-lg font-bold flex items-center gap-2 transform translate-y-2 group-hover:translate-y-0 transition-all",children:[l.jsx(Ox,{size:18})," "]})})]}):l.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:""})})]}),l.jsxs("div",{className:"lg:col-span-7 bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden flex flex-col relative",children:[ge&&l.jsx("div",{className:"absolute inset-0 bg-slate-100/60 z-20 flex items-center justify-center backdrop-blur-[2px]",children:l.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl text-center border-2 border-red-100 max-w-sm",children:[l.jsx("div",{className:"bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:l.jsx(kl,{size:32})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:""}),l.jsx("p",{className:"text-slate-500",children:""})]})}),l.jsx("div",{className:`${ge?"bg-slate-400":"bg-slate-800"} text-white p-4 transition-colors`,children:l.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(aN,{size:20})," "]})}),l.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"1. "}),l.jsxs("select",{disabled:ge,value:D,onChange:$=>S($.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none disabled:bg-slate-100 disabled:text-slate-400",children:[l.jsx("option",{value:"",children:"--  --"}),E.map($=>l.jsx("option",{value:$.id,children:$.name},$.id))]})]}),l.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-100 space-y-3",children:[l.jsx("div",{className:"text-sm font-bold text-slate-700 border-b pb-2 mb-2",children:"2. "}),l.jsx("input",{disabled:ge,placeholder:" (: )",value:w,onChange:$=>I($.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsx("input",{disabled:ge,type:"number",placeholder:"",value:F,onChange:$=>x($.target.value===""?"":Number($.target.value)),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsx("input",{disabled:ge,placeholder:" (: )",value:O,onChange:$=>M($.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),l.jsxs("button",{disabled:ge,onClick:ce,className:"w-full py-2 bg-secondary text-white rounded hover:bg-slate-700 text-sm font-bold flex items-center justify-center gap-2 disabled:bg-slate-400 disabled:cursor-not-allowed",children:[l.jsx(rN,{size:16})," "]})]})]}),l.jsxs("div",{className:"flex flex-col bg-amber-50 rounded-lg border border-amber-100 p-4",children:[l.jsx("h3",{className:"text-sm font-bold text-amber-800 mb-3",children:""}),l.jsx("div",{className:"flex-1 overflow-y-auto max-h-[200px] space-y-2 mb-3 pr-1 custom-scrollbar",children:k.length===0?l.jsx("p",{className:"text-xs text-amber-600/60 text-center py-4",children:""}):k.map(($,le)=>l.jsxs("div",{className:"bg-white p-2 rounded shadow-sm flex justify-between items-start text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800",children:$.name}),$.note&&l.jsx("div",{className:"text-xs text-slate-500",children:$.note})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"font-medium",children:["$",$.price]}),l.jsx("button",{disabled:ge,onClick:()=>P(k.filter((J,Se)=>Se!==le)),className:"text-red-400 hover:text-red-600 disabled:text-slate-300",children:l.jsx(Vs,{size:14})})]})]},le))}),l.jsxs("div",{className:"pt-3 border-t border-amber-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),l.jsxs("span",{className:"text-xl font-bold text-primary",children:["$",k.reduce(($,le)=>$+le.price,0)]})]}),l.jsx("button",{onClick:tt,disabled:k.length===0||ge,className:`w-full py-3 rounded font-bold transition-all ${k.length>0&&!ge?"bg-primary text-white hover:bg-blue-700 shadow":"bg-slate-300 text-slate-500 cursor-not-allowed"}`,children:""}),l.jsx("p",{className:"text-xs text-red-500 font-bold mt-2 text-center",children:""})]})]})]})]})]}),l.jsxs("section",{className:"bg-white rounded-xl shadow border border-slate-200 overflow-hidden",children:[l.jsx("div",{className:"bg-slate-100 p-4 border-b border-slate-200",children:l.jsxs("h2",{className:"font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(YT,{size:20,className:"text-primary"})," "]})}),l.jsxs("div",{className:"p-3 border-b border-slate-100 flex gap-2 overflow-x-auto",children:[l.jsx("button",{onClick:()=>_("ALL"),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${v==="ALL"?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),Cr.map($=>{const le=v===$,J=kg($);return l.jsx("button",{onClick:()=>_($),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors border ${le?"bg-slate-800 text-white":`bg-white ${J.border} text-slate-500 hover:bg-slate-50`}`,children:$},$)})]}),l.jsx("div",{className:"p-0 divide-y divide-slate-100",children:zn.length===0?l.jsx("div",{className:"p-8 text-center text-slate-400",children:""}):zn.map($=>{const le=kg($.categoryLabel).badge;return l.jsxs("div",{className:"p-4 flex items-center gap-4 hover:bg-slate-50",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 flex-shrink-0",children:l.jsx(Mx,{size:16})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-slate-800",children:$.employeeName}),$.categoryLabel&&l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${le}`,children:$.categoryLabel})]}),l.jsx("span",{className:"text-xs text-slate-400 flex-shrink-0",children:new Date($.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})})]}),l.jsx("div",{className:"text-sm text-slate-600 truncate",children:$.items.map(J=>`${J.name}${J.note?`(${J.note})`:""}`).join(", ")})]})]},$.id)})})]})]}),l.jsx("footer",{className:"bg-slate-900 text-slate-400 py-6 text-center text-sm font-mono border-t border-slate-800",children:" 2025 Powered by 007"}),m&&l.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4 cursor-zoom-out backdrop-blur-sm",onClick:()=>p(null),children:[l.jsx("img",{src:m,alt:"Zoom",className:"max-w-full max-h-[90vh] rounded shadow-2xl animate-in fade-in zoom-in duration-200"}),l.jsx("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white",children:l.jsx(Vs,{size:32})})]}),l.jsx("style",{children:".custom-scrollbar::-webkit-scrollbar { width: 4px; } .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }"})]})},gN=()=>{const t=new Date,e=t.getDay(),n=e===0?-6:1-e,r=new Date(t);r.setDate(t.getDate()+n);const s=[];for(let i=0;i<5;i++){const o=new Date(r);o.setDate(r.getDate()+i),s.push(o.toISOString().split("T")[0])}return s},Lt=gN(),yN=[{id:"MENU_LUNCH_MON",label:"",config:{imageUrl:"./sample-images/bento_mon.svg",shopName:"",date:Lt[0],cutoffTime:"10:30",options:[{id:"opt_1",label:"",price:100},{id:"opt_2",label:"",price:110},{id:"opt_3",label:"",price:105},{id:"opt_4",label:"",price:120},{id:"opt_5",label:"",price:100}]}},{id:"MENU_LUNCH_TUE",label:"",config:{imageUrl:"./sample-images/bento_tue.svg",shopName:"",date:Lt[1],cutoffTime:"10:30",options:[{id:"opt_6",label:"",price:180},{id:"opt_7",label:"",price:150},{id:"opt_8",label:"",price:140},{id:"opt_9",label:"",price:160},{id:"opt_10",label:"",price:130}]}},{id:"MENU_LUNCH_WED",label:"",config:{imageUrl:"./sample-images/bento_wed.svg",shopName:"",date:Lt[2],cutoffTime:"10:30",options:[{id:"opt_11",label:"",price:180},{id:"opt_12",label:"",price:150},{id:"opt_13",label:"",price:160},{id:"opt_14",label:"",price:170},{id:"opt_15",label:"",price:140}]}},{id:"MENU_LUNCH_THU",label:"",config:{imageUrl:"./sample-images/bento_thu.svg",shopName:"",date:Lt[3],cutoffTime:"10:30",options:[{id:"opt_16",label:"",price:130},{id:"opt_17",label:"",price:140},{id:"opt_18",label:"",price:150},{id:"opt_19",label:"",price:120},{id:"opt_20",label:"",price:100}]}},{id:"MENU_LUNCH_FRI",label:"",config:{imageUrl:"./sample-images/bento_fri.svg",shopName:"",date:Lt[4],cutoffTime:"10:30",options:[{id:"opt_21",label:"",price:150},{id:"opt_22",label:"",price:180},{id:"opt_23",label:"",price:140},{id:"opt_24",label:"",price:160},{id:"opt_25",label:"",price:120}]}}],vN=[{id:"MENU_DRINK_MON",label:"",config:{imageUrl:"./sample-images/drink_mon.svg",shopName:"50",date:Lt[0],cutoffTime:"14:00",options:[{id:"drink_1",label:"",price:55},{id:"drink_2",label:"",price:35},{id:"drink_3",label:"",price:60},{id:"drink_4",label:"",price:35},{id:"drink_5",label:"",price:50},{id:"drink_6",label:"",price:65}]}},{id:"MENU_DRINK_TUE",label:"",config:{imageUrl:"./sample-images/drink_tue.svg",shopName:"",date:Lt[1],cutoffTime:"14:00",options:[{id:"drink_7",label:"",price:55},{id:"drink_8",label:"",price:70},{id:"drink_9",label:"",price:65},{id:"drink_10",label:"",price:80},{id:"drink_11",label:"",price:90}]}},{id:"MENU_DRINK_WED",label:"",config:{imageUrl:"./sample-images/drink_wed.svg",shopName:"",date:Lt[2],cutoffTime:"14:00",options:[{id:"drink_12",label:"",price:55},{id:"drink_13",label:"",price:75},{id:"drink_14",label:"",price:65},{id:"drink_15",label:"",price:40},{id:"drink_16",label:"",price:60}]}},{id:"MENU_DRINK_THU",label:"",config:{imageUrl:"./sample-images/drink_thu.svg",shopName:"",date:Lt[3],cutoffTime:"14:00",options:[{id:"drink_17",label:"",price:65},{id:"drink_18",label:"",price:65},{id:"drink_19",label:"",price:70},{id:"drink_20",label:"",price:60},{id:"drink_21",label:"",price:65}]}},{id:"MENU_DRINK_FRI",label:"",config:{imageUrl:"./sample-images/drink_fri.svg",shopName:"",date:Lt[4],cutoffTime:"14:00",options:[{id:"drink_22",label:"",price:35},{id:"drink_23",label:"",price:45},{id:"drink_24",label:"",price:60},{id:"drink_25",label:"",price:35},{id:"drink_26",label:"",price:55}]}}],xN=[{id:"MENU_GROUP_1",label:"",config:{imageUrl:"./sample-images/group_1.jpg",shopName:"",date:Lt[0],cutoffTime:"16:00",options:[{id:"group_1",label:" ()",price:150},{id:"group_2",label:" ()",price:170},{id:"group_3",label:" ()",price:160},{id:"group_4",label:" ()",price:190}]}},{id:"MENU_GROUP_2",label:"",config:{imageUrl:"./sample-images/group_2.jpg",shopName:"",date:Lt[2],cutoffTime:"16:00",options:[{id:"group_5",label:" ()",price:250},{id:"group_6",label:" ()",price:120},{id:"group_7",label:" ()",price:120},{id:"group_8",label:" ()",price:180}]}},{id:"MENU_GROUP_3",label:"",config:{imageUrl:"./sample-images/group_3.jpg",shopName:"",date:Lt[4],cutoffTime:"16:00",options:[{id:"group_9",label:" ()",price:150},{id:"group_10",label:" ()",price:150},{id:"group_11",label:" ()",price:150},{id:"group_12",label:" ()",price:150}]}}],_N=[...yN,...vN,...xN],wN=[{id:"EMP_001",name:""},{id:"EMP_002",name:""},{id:"EMP_003",name:""},{id:"EMP_004",name:""},{id:"EMP_005",name:""},{id:"EMP_006",name:""},{id:"EMP_007",name:""},{id:"EMP_008",name:""},{id:"EMP_009",name:""},{id:"EMP_010",name:""}],EN=[{id:"ANN_001",content:" ",isActive:!0},{id:"ANN_002",content:" ",isActive:!0},{id:"ANN_003",content:" ",isActive:!0},{id:"ANN_004",content:" ",isActive:!0},{id:"ANN_005",content:" ",isActive:!0}],bN=async()=>{console.log("Starting full database seed...");let t=0;try{if((await ee.getMenuCategories()).length===0){console.log("Seeding menus...");for(const s of _N)await ee.addMenuCategory(s.label,s.config);t++}else console.log("Menus already exist.");if((await ee.getEmployees()).length===0){console.log("Seeding employees...");for(const s of wN)await ee.addEmployee(s);t++}else console.log("Employees already exist.");(await ee.getAnnouncements()).length===0?(console.log("Seeding announcements..."),await ee.saveAnnouncements(EN),t++):console.log("Announcements already exist."),t>0?(console.log("Database seed completed!"),alert(`


 10
 13 (553)
 5`),window.location.reload()):alert(`

`)}catch(e){console.error("Seeding failed:",e),alert(" Console")}},hc=[{label:"",badge:"bg-blue-100 text-blue-700",bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-200",tab:"data-[state=active]:bg-blue-600"},{label:"",badge:"bg-emerald-100 text-emerald-700",bg:"bg-emerald-100",text:"text-emerald-700",border:"border-emerald-200",tab:"data-[state=active]:bg-emerald-600"},{label:"",badge:"bg-amber-100 text-amber-700",bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-200",tab:"data-[state=active]:bg-amber-600"},{label:"",badge:"bg-rose-100 text-rose-700",bg:"bg-rose-100",text:"text-rose-700",border:"border-rose-200",tab:"data-[state=active]:bg-rose-600"},{label:"",badge:"bg-violet-100 text-violet-700",bg:"bg-violet-100",text:"text-violet-700",border:"border-violet-200",tab:"data-[state=active]:bg-violet-600"}],Wt=t=>{if(!t)return{badge:"bg-slate-100 text-slate-500",bg:"bg-slate-100",text:"text-slate-500",border:"border-slate-200",tab:""};const e=hc.find(r=>r.label===t);if(e)return e;const n=t.split("").reduce((r,s)=>r+s.charCodeAt(0),0)%hc.length;return hc[n]},SN=({onLogout:t,onGoToFrontend:e,currentUser:n})=>{const[r,s]=q.useState("ORDERS"),[i,o]=q.useState({}),[u,c]=q.useState(!1);q.useEffect(()=>{ee.getAdminSettings().then(o)},[]);const h=async(g,N)=>{await ee.setGoogleBound(!0,g,N);const k=await ee.getAdminSettings();o(k)},m=()=>{switch(r){case"ORDERS":return l.jsx(jg,{});case"MENU":return l.jsx(TN,{});case"EMPLOYEES":return l.jsx(NN,{});case"ANNOUNCEMENTS":return l.jsx(IN,{});case"SYSTEM":return l.jsx(AN,{settings:i,onBind:h,currentUser:n});default:return l.jsx(jg,{})}},p=()=>{switch(r){case"ORDERS":return"";case"MENU":return"";case"EMPLOYEES":return"";case"ANNOUNCEMENTS":return"";case"SYSTEM":return"";default:return""}};return l.jsxs("div",{className:"flex h-screen bg-slate-100 relative overflow-hidden",children:[u&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>c(!1)}),l.jsxs("aside",{className:`fixed md:relative z-50 w-64 h-full bg-slate-900 text-white flex flex-col shadow-lg transition-transform duration-300 ease-in-out ${u?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:[l.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-xl font-bold tracking-wide",children:["",l.jsx("br",{}),""]}),l.jsx("p",{className:"text-xs text-slate-400 mt-2",children:""})]}),l.jsx("button",{onClick:()=>c(!1),className:"md:hidden text-slate-400 hover:text-white",children:l.jsx(Vs,{size:24})})]}),l.jsxs("div",{className:"px-6 py-4 flex items-center gap-3 bg-slate-800/50 border-b border-slate-800",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-slate-300 font-bold",children:n.name.charAt(0)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-bold text-white truncate",children:n.name}),l.jsxs("div",{className:"text-xs text-emerald-400 flex items-center gap-1",children:[l.jsx(Vx,{size:10})," ",n.isSuperAdmin?"":""]})]})]}),l.jsxs("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[l.jsx(Di,{icon:l.jsx(oN,{size:20}),label:"",active:r==="ORDERS",onClick:()=>{s("ORDERS"),c(!1)}}),l.jsx(Di,{icon:l.jsx(hN,{size:20}),label:"",active:r==="MENU",onClick:()=>{s("MENU"),c(!1)}}),l.jsx(Di,{icon:l.jsx(dN,{size:20}),label:"",active:r==="EMPLOYEES",onClick:()=>{s("EMPLOYEES"),c(!1)}}),l.jsx(Di,{icon:l.jsx(ZT,{size:20}),label:"",active:r==="ANNOUNCEMENTS",onClick:()=>{s("ANNOUNCEMENTS"),c(!1)}}),l.jsx(Di,{icon:l.jsx(sN,{size:20}),label:"",active:r==="SYSTEM",onClick:()=>{s("SYSTEM"),c(!1)}})]}),l.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-2",children:[l.jsxs("button",{onClick:e,className:"flex items-center gap-3 w-full px-4 py-2 text-slate-300 hover:text-white hover:bg-slate-800 rounded transition-colors",children:[l.jsx(jd,{size:20}),l.jsx("span",{children:""})]}),l.jsxs("button",{onClick:t,className:"flex items-center gap-3 w-full px-4 py-2 text-red-400 hover:bg-slate-800 rounded transition-colors",children:[l.jsx(JT,{size:20}),l.jsx("span",{children:""})]})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:[l.jsxs("header",{className:"md:hidden bg-slate-900 text-white p-4 flex items-center justify-between shadow-md shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>c(!0),className:"text-white hover:text-slate-300",children:l.jsx(eN,{size:24})}),l.jsx("h2",{className:"font-bold text-lg",children:p()})]}),l.jsx("div",{className:"text-xs text-slate-400",children:n.username})]}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 w-full bg-slate-100",children:m()})]})]})},Di=({icon:t,label:e,active:n,onClick:r})=>l.jsxs("button",{onClick:r,className:`flex items-center gap-3 w-full px-4 py-3 rounded transition-colors ${n?"bg-primary text-white shadow-md":"text-slate-300 hover:bg-slate-800"}`,children:[t,l.jsx("span",{className:"font-medium",children:e})]}),jg=()=>{const[t,e]=q.useState([]),[n,r]=q.useState([]),[s,i]=q.useState("TODAY"),[o,u]=q.useState("CARD"),[c,h]=q.useState(""),[m,p]=q.useState("WEEK"),[g,N]=q.useState(new Date),[k,P]=q.useState({start:"",end:""}),[D,S]=q.useState(null),w=q.useRef(null),I=q.useRef(null),[O,M]=q.useState([]),[F,x]=q.useState(null);q.useEffect(()=>{(async()=>{const[U,G]=await Promise.all([ee.getOrders(),ee.getMenuCategories()]);e(U),r(G);const te=Array.from(new Set(G.map(Te=>Te.label)));M(te)})()},[]);const v=new Date().toISOString().split("T")[0],_=A=>{const U=new Date(A),G=U.getDay(),te=U.getDate()-G+(G===0?-6:1);return new Date(U.setDate(te))},E=A=>{const U=_(A);return Array.from({length:5}).map((G,te)=>{const Te=new Date(U);return Te.setDate(U.getDate()+te),Te.toISOString().split("T")[0]})},T=A=>{const U=A.getFullYear(),G=A.getMonth(),te=new Date(U,G,1),Te=[];for(;te.getMonth()===G;)Te.push(new Date(te).toISOString().split("T")[0]),te.setDate(te.getDate()+1);return Te},C=A=>{const U=new Date(g);m==="WEEK"?U.setDate(U.getDate()+A*7):m==="MONTH"&&U.setMonth(U.getMonth()+A),N(U)},b=A=>c===""?!0:A.categoryLabel===c,we=t.filter(A=>A.dateStr===v).filter(b).sort((A,U)=>U.timestamp-A.timestamp),Pe=t.filter(A=>A.dateStr===v),xt=Pe.reduce((A,U)=>{const G=U.categoryLabel||"";return A[G]||(A[G]={amount:0,count:0}),A[G].amount+=U.totalAmount,A[G].count+=1,A},{}),L=Pe.reduce((A,U)=>A+U.totalAmount,0),j=Pe.length,Y=(()=>{let A=[];return m==="WEEK"?A=t.filter(U=>U.dateStr<v):m==="MONTH"?A=t.filter(U=>U.dateStr.startsWith(g.toISOString().slice(0,7))):A=k.start&&k.end?t.filter(U=>U.dateStr>=k.start&&U.dateStr<=k.end):[],A.filter(b)})(),ne=D?t.filter(A=>A.dateStr===D).filter(b):[],he=ne.reduce((A,U)=>A+U.totalAmount,0),et=A=>{var U,G,te;try{(U=A.current)==null||U.showPicker()}catch{(G=A.current)==null||G.focus(),(te=A.current)==null||te.click()}},Ue=(A,U)=>{if(!U)return;const G=n.find(te=>te.config.date===A&&te.label===U);return G==null?void 0:G.config.imageUrl},[Pt,ge]=q.useState(!1),[ce,tt]=q.useState(null),[Ht,Cr]=q.useState([]);q.useEffect(()=>{ee.getEmployees().then(Cr)},[]);const zn=async A=>{await ee.toggleOrderPayment(A),e(await ee.getOrders())},Dt=async A=>{window.confirm("")&&(await ee.deleteOrder(A),e(await ee.getOrders()),D&&S(null))},cn=A=>{tt(JSON.parse(JSON.stringify(A))),ge(!0)},is=async()=>{if(!ce)return;const A=ce.items.reduce((G,te)=>G+te.price,0),U={...ce,totalAmount:A};await ee.saveOrder(U),e(await ee.getOrders()),ge(!1),tt(null)},$=(A,U,G)=>{if(!ce)return;const te=[...ce.items];te[A]={...te[A],[U]:G},tt({...ce,items:te})},le=A=>{if(!ce)return;const U=ce.items.filter((G,te)=>te!==A);tt({...ce,items:U})},J=()=>{if(!ce)return;const A={id:Date.now().toString(),name:"",price:0,note:""};tt({...ce,items:[...ce.items,A]})},Se=()=>{var A;return!Pt||!ce?null:l.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[l.jsxs("div",{className:"bg-slate-900 text-white p-4 flex justify-between items-center",children:[l.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(Lr,{size:18})," "]}),l.jsx("button",{onClick:()=>ge(!1),className:"text-slate-400 hover:text-white",children:l.jsx(Vs,{size:24})})]}),l.jsxs("div",{className:"p-6 overflow-y-auto space-y-4 flex-1",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("select",{value:((A=Ht.find(U=>U.name===ce.employeeName))==null?void 0:A.id)||"",onChange:U=>{const G=Ht.find(te=>te.id===U.target.value);G&&tt({...ce,employeeName:G.name})},className:"w-full p-2 border border-slate-300 rounded",children:[l.jsx("option",{value:"",children:"..."}),Ht.map(U=>l.jsx("option",{value:U.id,children:U.name},U.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("select",{value:ce.status,onChange:U=>tt({...ce,status:U.target.value}),className:"w-full p-2 border border-slate-300 rounded",children:[l.jsx("option",{value:"PENDING",children:""}),l.jsx("option",{value:"CONFIRMED",children:""}),l.jsx("option",{value:"COMPLETED",children:""}),l.jsx("option",{value:"CANCELLED",children:""})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-sm font-bold text-slate-700",children:""}),l.jsxs("button",{onClick:J,className:"text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded font-bold hover:bg-emerald-200 flex items-center gap-1",children:[l.jsx(Bo,{size:12})," "]})]}),l.jsx("div",{className:"space-y-2",children:ce.items.map((U,G)=>l.jsxs("div",{className:"flex gap-2 items-start bg-slate-50 p-2 rounded border border-slate-200",children:[l.jsxs("div",{className:"flex-1 space-y-1",children:[l.jsx("input",{value:U.name,onChange:te=>$(G,"name",te.target.value),className:"w-full p-1 text-sm border border-slate-300 rounded",placeholder:""}),l.jsx("input",{value:U.note,onChange:te=>$(G,"note",te.target.value),className:"w-full p-1 text-xs border border-slate-300 rounded text-slate-500",placeholder:" ()"})]}),l.jsx("div",{className:"w-20",children:l.jsx("input",{type:"number",value:U.price,onChange:te=>$(G,"price",Number(te.target.value)),className:"w-full p-1 text-sm border border-slate-300 rounded text-right font-mono",placeholder:""})}),l.jsx("button",{onClick:()=>le(G),className:"p-1.5 text-slate-400 hover:text-red-500",children:l.jsx(Fr,{size:16})})]},G))})]}),l.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-600",children:":"}),l.jsxs("span",{className:"text-2xl font-bold text-primary",children:["$",ce.items.reduce((U,G)=>U+G.price,0)]})]})]}),l.jsxs("div",{className:"p-4 bg-slate-50 flex gap-4 border-t border-slate-200",children:[l.jsxs("button",{onClick:is,className:"flex-1 bg-primary text-white py-2 rounded font-bold hover:bg-blue-700 shadow-sm flex items-center justify-center gap-2",children:[l.jsx(hf,{size:18})," "]}),l.jsx("button",{onClick:()=>ge(!1),className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded font-bold hover:bg-slate-100",children:""})]})]})})};return l.jsxs("div",{className:"space-y-6 relative",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>i("TODAY"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${s==="TODAY"?"bg-primary text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:""}),l.jsx("button",{onClick:()=>i("HISTORY"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${s==="HISTORY"?"bg-primary text-white shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:""})]})]}),s==="TODAY"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-2",children:[l.jsxs("div",{className:"bg-slate-800 rounded-xl p-4 text-white shadow-md flex flex-col justify-between relative overflow-hidden",children:[l.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10",children:l.jsx(WT,{size:48})}),l.jsx("div",{className:"text-sm text-slate-400 font-bold mb-1",children:""}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-2xl font-bold tracking-tight",children:["$",L.toLocaleString()]}),l.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[j," "]})]})]}),O.map(A=>{const U=Wt(A),G=xt[A]||{amount:0,count:0};return l.jsxs("div",{className:`rounded-xl p-4 shadow-sm border flex flex-col justify-between ${U.bg} ${U.border}`,children:[l.jsxs("div",{className:"text-xs font-bold opacity-70 mb-1 flex items-center gap-1",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${U.tab.replace("data-[state=active]:","")}`}),A]}),l.jsxs("div",{children:[l.jsxs("div",{className:`text-xl font-bold ${U.text}`,children:["$",G.amount.toLocaleString()]}),l.jsxs("div",{className:"text-xs opacity-60 font-bold",children:[G.count," "]})]})]},A)})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-500 mr-2 flex items-center gap-1",children:[l.jsx(Cg,{size:14})," :"]}),l.jsx("button",{onClick:()=>h(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${c===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),O.map(A=>{const U=c===A,G=Wt(A);return l.jsx("button",{onClick:()=>h(A),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${U?`${G.bg} ${G.text} ${G.border}`:`bg-white ${G.border} text-slate-500 hover:${G.bg}`}`,children:A},A)})]}),l.jsx("div",{className:"flex justify-end md:justify-start",children:l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded ${o==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(ii,{size:18})}),l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded ${o==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx($o,{size:18})})]})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[l.jsx("div",{className:`${o==="LIST"?"md:hidden":""}`,children:l.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[we.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-8",children:""}),we.map(A=>{const U=Wt(A.categoryLabel),G=Ue(A.dateStr,A.categoryLabel);return l.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-bold text-lg",children:A.employeeName.charAt(0)}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-slate-700 leading-none text-base",children:A.employeeName}),A.categoryLabel&&l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${U.badge} w-fit mt-0.5`,children:A.categoryLabel})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>cn(A),className:"p-1.5 text-slate-400 hover:text-primary hover:bg-blue-50 rounded transition-colors",children:l.jsx(Lr,{size:16})}),l.jsx("button",{onClick:()=>Dt(A.id),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",children:l.jsx(Fr,{size:16})})]})]}),l.jsxs("div",{className:"flex gap-3 mb-3",children:[G&&l.jsxs("div",{className:"w-16 h-16 rounded-md bg-slate-100 overflow-hidden border border-slate-200 flex-shrink-0 cursor-zoom-in relative group",onClick:()=>x(G),children:[l.jsx("img",{src:G,alt:"Menu",className:"w-full h-full object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all flex items-center justify-center",children:l.jsx(Ox,{size:14,className:"text-white opacity-0 group-hover:opacity-100"})})]}),l.jsx("div",{className:"flex-1 space-y-1",children:A.items.map((te,Te)=>l.jsxs("div",{className:"text-sm text-slate-600 flex justify-between items-start",children:[l.jsxs("span",{children:[te.name," ",te.note&&l.jsxs("span",{className:"text-xs text-slate-400",children:["(",te.note,")"]})]}),l.jsxs("span",{className:"font-mono font-medium",children:["$",te.price]})]},Te))})]}),l.jsxs("div",{className:"pt-3 border-t border-slate-100 flex justify-between items-center",children:[l.jsx("div",{className:"flex flex-col",children:l.jsxs("span",{className:"font-bold text-primary text-xl",children:["$",A.totalAmount]})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>zn(A.id),className:`px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-1 transition-all ${A.isPaid?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[A.isPaid?l.jsx(kd,{size:14}):l.jsx(Ag,{size:14}),A.isPaid?"":""]}),l.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 text-xs rounded-full font-bold",children:A.status})]})]})]},A.id)})]})}),l.jsx("div",{className:`hidden ${o==="LIST"?"md:block":""}`,children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-semibold text-slate-600 w-24",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-right",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-center",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-center",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[we.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400",children:""})}),we.map(A=>{const U=Wt(A.categoryLabel),G=Ue(A.dateStr,A.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 text-slate-500 text-sm font-mono",children:new Date(A.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}),l.jsx("td",{className:"p-4",children:G?l.jsx("div",{className:"w-10 h-10 rounded bg-slate-100 border border-slate-200 overflow-hidden cursor-zoom-in",onClick:()=>x(G),children:l.jsx("img",{src:G,alt:"Menu",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-10 h-10 rounded bg-slate-50 border border-slate-100 flex items-center justify-center text-slate-300",children:l.jsx(ko,{size:16})})}),l.jsx("td",{className:"p-4 font-bold text-slate-700",children:A.employeeName}),l.jsx("td",{className:"p-4",children:A.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${U.badge}`,children:A.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsx("td",{className:"p-4 text-sm text-slate-600",children:A.items.map(te=>`${te.name}${te.note?`(${te.note})`:""}`).join(", ")}),l.jsxs("td",{className:"p-4 font-bold text-primary text-right",children:["$",A.totalAmount]}),l.jsx("td",{className:"p-4 text-center",children:l.jsxs("button",{onClick:()=>zn(A.id),className:`mx-auto px-3 py-1 rounded-full text-xs font-bold flex items-center justify-center gap-1 transition-all ${A.isPaid?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:[A.isPaid?l.jsx(kd,{size:12}):l.jsx(Ag,{size:12}),A.isPaid?"":""]})}),l.jsxs("td",{className:"p-4 text-center flex items-center justify-center gap-2",children:[l.jsx("button",{onClick:()=>cn(A),className:"p-1 text-slate-400 hover:text-primary",children:l.jsx(Lr,{size:16})}),l.jsx("button",{onClick:()=>Dt(A.id),className:"p-1 text-slate-400 hover:text-red-500",children:l.jsx(Fr,{size:16})})]})]},A.id)})]})]})})]})]}),s==="HISTORY"&&l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 items-center",children:[l.jsxs("span",{className:"text-sm font-bold text-slate-500 mr-2 flex items-center gap-1",children:[l.jsx(Cg,{size:14})," :"]}),l.jsx("button",{onClick:()=>h(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${c===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),O.map(A=>{const U=c===A,G=Wt(A);return l.jsx("button",{onClick:()=>h(A),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${U?`${G.bg} ${G.text} ${G.border}`:`bg-white ${G.border} text-slate-500 hover:${G.bg}`}`,children:A},A)})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[l.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1 self-start",children:[l.jsx("button",{onClick:()=>p("WEEK"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="WEEK"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""}),l.jsx("button",{onClick:()=>p("MONTH"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="MONTH"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""}),l.jsx("button",{onClick:()=>p("CUSTOM"),className:`px-3 py-1.5 text-sm rounded-md transition-all ${m==="CUSTOM"?"bg-white shadow text-slate-800":"text-slate-500"}`,children:""})]}),m!=="CUSTOM"?l.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>C(-1),className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Px,{size:18})}),l.jsx("span",{className:"font-mono font-bold text-slate-700",children:m==="WEEK"?`${_(g).toLocaleDateString()} - ${(()=>{const A=_(g);return A.setDate(A.getDate()+4),A.toLocaleDateString()})()}`:g.toLocaleDateString("zh-TW",{year:"numeric",month:"long"})}),l.jsx("button",{onClick:()=>C(1),className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Dx,{size:18})})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"relative group",onClick:()=>et(w),children:[l.jsx(Ba,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-primary transition-colors cursor-pointer",size:16}),l.jsx("input",{ref:w,type:"date",value:k.start,onClick:()=>et(w),onChange:A=>P(U=>({...U,start:A.target.value})),className:"pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary outline-none shadow-sm cursor-pointer hover:border-primary transition-colors w-40"})]}),l.jsx("span",{className:"text-slate-400 font-bold",children:"-"}),l.jsxs("div",{className:"relative group",onClick:()=>et(I),children:[l.jsx(Ba,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-hover:text-primary transition-colors cursor-pointer",size:16}),l.jsx("input",{ref:I,type:"date",value:k.end,onClick:()=>et(I),onChange:A=>P(U=>({...U,end:A.target.value})),className:"pl-10 pr-3 py-2 bg-white text-slate-900 border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary outline-none shadow-sm cursor-pointer hover:border-primary transition-colors w-40"})]})]})]}),m==="WEEK"&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:E(g).map((A,U)=>{const G=t.filter(Te=>Te.dateStr===A).filter(b),te=G.reduce((Te,oi)=>Te+oi.totalAmount,0);return l.jsxs("div",{className:`border rounded-lg p-3 ${A===v?"border-amber-400 bg-amber-50":"border-slate-200 bg-slate-50"}`,children:[l.jsxs("div",{className:"font-bold text-slate-700 mb-2 border-b border-slate-200 pb-1 flex justify-between",children:[l.jsx("span",{children:["","","","",""][U]}),l.jsx("span",{className:"text-xs font-normal text-slate-500",children:A.slice(5)})]}),G.length===0?l.jsx("div",{className:"text-xs text-slate-400 text-center py-4",children:""}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"text-xs text-slate-500",children:[": ",G.length]}),l.jsxs("div",{className:"text-sm font-bold text-primary",children:[": $",te]}),l.jsx("button",{onClick:()=>S(A),className:"w-full text-xs bg-white border border-slate-300 py-1 rounded hover:bg-slate-100 font-bold text-slate-600",children:""})]})]},A)})}),m==="MONTH"&&l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-2",children:T(g).map(A=>{const U=t.filter(Te=>Te.dateStr===A).filter(b),G=U.reduce((Te,oi)=>Te+oi.totalAmount,0),te=U.length>0;return l.jsxs("div",{onClick:()=>te&&S(A),className:`border rounded p-2 min-h-[80px] flex flex-col justify-between cursor-pointer transition-colors ${te?"bg-white border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-100 text-slate-300"}`,children:[l.jsx("div",{className:"text-xs font-mono text-right",children:A.slice(8)}),te&&l.jsxs("div",{children:[l.jsxs("div",{className:"text-xs font-bold text-slate-700",children:[U.length," "]}),l.jsxs("div",{className:"text-xs text-primary",children:["$",G]})]})]},A)})}),m==="CUSTOM"&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600 text-center",children:""}),l.jsx("th",{className:"p-3 font-semibold text-slate-600 text-center",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:Y.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-400",children:""})}):Y.map(A=>{const U=Wt(A.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-3 text-sm text-slate-500 font-mono",children:A.dateStr}),l.jsx("td",{className:"p-3 text-sm font-bold text-slate-700",children:A.employeeName}),l.jsx("td",{className:"p-3",children:A.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${U.badge}`,children:A.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsxs("td",{className:"p-3 text-sm text-slate-600",children:[A.items[0].name,"..."]}),l.jsxs("td",{className:"p-3 text-sm font-bold text-primary",children:["$",A.totalAmount]}),l.jsx("td",{className:"p-3 text-center",children:l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${A.isPaid?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:A.isPaid?"":""})}),l.jsxs("td",{className:"p-3 text-center flex items-center justify-center gap-2",children:[l.jsx("button",{onClick:()=>cn(A),className:"p-1 text-slate-400 hover:text-primary",children:l.jsx(Lr,{size:16})}),l.jsx("button",{onClick:()=>Dt(A.id),className:"p-1 text-slate-400 hover:text-red-500",children:l.jsx(Fr,{size:16})})]})]},A.id)})})]})})]}),D&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[80vh] flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"bg-slate-900 text-white p-4 flex justify-between items-center",children:[l.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:[l.jsx(Ba,{size:18})," ",D,"  ",c!==""&&l.jsxs("span",{className:"text-xs bg-slate-700 px-2 py-0.5 rounded ml-2",children:[": ",c]})]}),l.jsx("button",{onClick:()=>S(null),className:"text-slate-400 hover:text-white",children:l.jsx(Vs,{size:24})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-0",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-right",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-center",children:""}),l.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-center",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:ne.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:8,className:"p-8 text-center text-slate-400",children:""})}):ne.map(A=>{const U=Wt(A.categoryLabel),G=Ue(A.dateStr,A.categoryLabel);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 text-xs font-mono text-slate-500",children:new Date(A.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})}),l.jsx("td",{className:"p-4",children:G?l.jsx("div",{className:"w-8 h-8 rounded bg-slate-100 border border-slate-200 overflow-hidden cursor-zoom-in",onClick:()=>x(G),children:l.jsx("img",{src:G,alt:"Menu",className:"w-full h-full object-cover"})}):l.jsx("div",{className:"w-8 h-8 rounded bg-slate-50 border border-slate-100 flex items-center justify-center text-slate-300",children:l.jsx(ko,{size:14})})}),l.jsx("td",{className:"p-4 font-bold text-slate-800",children:A.employeeName}),l.jsx("td",{className:"p-4",children:A.categoryLabel?l.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${U.badge}`,children:A.categoryLabel}):l.jsx("span",{className:"text-xs text-slate-300",children:"-"})}),l.jsx("td",{className:"p-4 text-sm text-slate-600",children:A.items.map(te=>l.jsxs("div",{className:"flex gap-1",children:[l.jsx("span",{children:te.name}),te.note&&l.jsxs("span",{className:"text-xs text-slate-400",children:["(",te.note,")"]})]},te.name))}),l.jsxs("td",{className:"p-4 font-bold text-primary text-right",children:["$",A.totalAmount]}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("button",{onClick:()=>zn(A.id),className:`mx-auto px-2 py-0.5 rounded-full text-[10px] font-bold transition-all border ${A.isPaid?"bg-emerald-100 text-emerald-700 border-emerald-200 hover:bg-emerald-200":"bg-slate-100 text-slate-500 border-slate-200 hover:bg-slate-200"}`,children:A.isPaid?"":""})}),l.jsxs("td",{className:"p-4 text-center flex items-center justify-center gap-2",children:[l.jsx("button",{onClick:()=>cn(A),className:"p-1 text-slate-400 hover:text-primary",children:l.jsx(Lr,{size:16})}),l.jsx("button",{onClick:()=>Dt(A.id),className:"p-1 text-slate-400 hover:text-red-500",children:l.jsx(Fr,{size:16})})]})]},A.id)})})]})}),l.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-between items-center",children:[l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("span",{className:"text-sm text-slate-500",children:[" ",ne.length," "]}),l.jsxs("span",{className:"text-sm text-emerald-600 font-bold",children:[": $",ne.filter(A=>A.isPaid).reduce((A,U)=>A+U.totalAmount,0)]}),l.jsxs("span",{className:"text-sm text-slate-400",children:[": $",ne.filter(A=>!A.isPaid).reduce((A,U)=>A+U.totalAmount,0)]})]}),l.jsxs("div",{className:"text-lg font-bold text-slate-800",children:[": ",l.jsxs("span",{className:"text-primary",children:["$",he]})]})]})]})}),F&&l.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4 cursor-zoom-out backdrop-blur-sm",onClick:()=>x(null),children:[l.jsx("img",{src:F,alt:"Zoom",className:"max-w-full max-h-[90vh] rounded shadow-2xl animate-in fade-in zoom-in duration-200"}),l.jsx("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white",children:l.jsx(Vs,{size:32})})]}),l.jsx(Se,{})]})},TN=()=>{const[t,e]=q.useState([]),[n,r]=q.useState("ACTIVE"),[s,i]=q.useState(""),[o,u]=q.useState("CARD"),[c,h]=q.useState(!1),[m,p]=q.useState(null),[g,N]=q.useState(new Date),[k,P]=q.useState(""),[D,S]=q.useState({categoryLabel:"",shopName:"",date:new Date().toISOString().split("T")[0],cutoffTime:"",imageFile:null,imageUrl:""}),w=new Date().toISOString().split("T")[0];q.useEffect(()=>{ee.getMenuCategories().then(e)},[]);const I=async()=>{try{if(!D.shopName){alert("");return}let L=D.imageUrl;if(D.imageFile)try{L=await M(D.imageFile)}catch{alert("");return}if(L&&L.length>5e4){alert(" ( 50,000 )");return}const j={imageUrl:L,shopName:D.shopName,date:D.date,cutoffTime:D.cutoffTime};await O(j)}catch(L){console.error(L),alert(`
: `+L.message)}},O=async L=>{m?await ee.updateMenuCategory(m,D.categoryLabel,L):await ee.addMenuCategory(D.categoryLabel,L),e(await ee.getMenuCategories()),h(!1),_()},M=L=>new Promise((j,H)=>{const Y=new FileReader;Y.readAsDataURL(L),Y.onload=ne=>{var et;const he=new Image;he.src=(et=ne.target)==null?void 0:et.result,he.onload=()=>{let ge=he.width,ce=he.height;ge>ce?ge>400&&(ce*=400/ge,ge=400):ce>400&&(ge*=400/ce,ce=400);const tt=document.createElement("canvas");tt.width=ge,tt.height=ce;const Ht=tt.getContext("2d");if(!Ht){H(new Error("Canvas context not supported"));return}Ht.drawImage(he,0,0,ge,ce);const Cr=tt.toDataURL("image/jpeg",.5);j(Cr)},he.onerror=Ue=>H(Ue)},Y.onerror=ne=>H(ne)}),F=async L=>{const j=t.find(ne=>ne.id===L);if(!j)return;const Y=(await ee.getOrders()).filter(ne=>ne.dateStr===j.config.date&&ne.categoryLabel===j.label);if(Y.length>0){const ne=` ${j.config.date}${j.label} ${Y.length} 



`;confirm(ne)&&(await ee.deleteOrdersByContext(j.config.date,j.label),await ee.deleteMenuCategory(L),e(await ee.getMenuCategories()),alert(""))}else confirm("")&&(await ee.deleteMenuCategory(L),e(await ee.getMenuCategories()))},x=L=>{if(L.config.date<w){alert(`
`);return}h(!0),p(L.id),S({categoryLabel:L.label,shopName:L.config.shopName,date:L.config.date,cutoffTime:L.config.cutoffTime||"",imageUrl:L.config.imageUrl,imageFile:null})},v=L=>{h(!0),p(null),S({categoryLabel:L.label,shopName:L.config.shopName,date:w,cutoffTime:L.config.cutoffTime||"",imageUrl:L.config.imageUrl,imageFile:null})},_=()=>{p(null),S({categoryLabel:"",shopName:"",date:w,cutoffTime:"",imageFile:null,imageUrl:""})},E=L=>{const j=new Date(L),H=j.getDay(),Y=j.getDate()-H+(H===0?-6:1);return new Date(j.setDate(Y))},T=L=>{const j=E(L);return Array.from({length:5}).map((H,Y)=>{const ne=new Date(j);return ne.setDate(j.getDate()+Y),ne.toISOString().split("T")[0]})},C=Array.from(new Set(t.map(L=>L.label))),b=t.filter(L=>L.config.date>=w).filter(L=>s===""?!0:L.label===s),we=t.filter(L=>L.config.date<w),Pe=T(g),xt=we.filter(L=>Pe.includes(L.config.date));return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""})}),l.jsxs("div",{className:"flex border-b border-slate-200",children:[l.jsx("button",{onClick:()=>r("ACTIVE"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${n==="ACTIVE"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700"}`,children:" ()"}),l.jsx("button",{onClick:()=>r("HISTORY"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${n==="HISTORY"?"border-slate-500 text-slate-700":"border-transparent text-slate-500 hover:text-slate-700"}`,children:" ()"})]}),c?l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-2xl mx-auto",children:[l.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[l.jsx(Lr,{className:"text-primary"})," ",m?"":""]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"1.  (Tab)"}),l.jsxs("select",{value:D.categoryLabel,onChange:L=>S({...D,categoryLabel:L.target.value}),className:"w-full p-2.5 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",children:[C.length===0&&l.jsx("option",{value:"",children:" ()"}),C.map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"2. "}),l.jsx("input",{value:D.shopName,onChange:L=>S({...D,shopName:L.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",placeholder:": "})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"3. "}),l.jsx("input",{type:"date",value:D.date,onChange:L=>S({...D,date:L.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary"})]})]}),"              ",l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["4. ",D.categoryLabel===""?"":" ()"]}),D.categoryLabel===""?l.jsx("input",{type:"datetime-local",value:D.cutoffTime.replace(" ","T"),onChange:L=>{const H=L.target.value.replace("T"," ");S({...D,cutoffTime:H})},className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary"}):l.jsxs("select",{value:D.cutoffTime,onChange:L=>S({...D,cutoffTime:L.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded outline-none focus:ring-2 focus:ring-primary",children:[l.jsx("option",{value:"",children:""}),Array.from({length:21}).map((L,j)=>{const H=480+j*30,Y=Math.floor(H/60),ne=H%60,he=`${Y.toString().padStart(2,"0")}:${ne.toString().padStart(2,"0")}`;return l.jsx("option",{value:he,children:he},he)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"5. "}),l.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:bg-slate-50 transition-colors relative",children:[l.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/gif, image/bmp",onChange:L=>{var H;const j=(H=L.target.files)==null?void 0:H[0];if(j){if(j.size>2*1024*1024){alert(" 2MB");return}const Y=new FileReader;Y.onloadend=()=>{S({...D,imageFile:j,imageUrl:Y.result})},Y.readAsDataURL(j)}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),D.imageFile||D.imageUrl?l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("img",{src:D.imageUrl,alt:"Preview",className:"h-32 object-contain mb-2 rounded shadow-sm"}),l.jsx("div",{className:"text-sm text-slate-600 font-bold",children:D.imageFile?`: ${D.imageFile.name}`:""}),l.jsx("span",{className:"text-xs text-slate-500 mt-1",children:""})]}):l.jsxs("div",{className:"text-slate-400 flex flex-col items-center",children:[l.jsx(uN,{size:32,className:"mb-2"}),"   ",l.jsx("span",{className:"text-xs mt-1",children:"JPG, PNG, GIF, BMP (Max 2MB)"})]})]})]}),l.jsxs("div",{className:"flex gap-4 pt-4",children:[l.jsx("button",{onClick:I,className:"flex-1 bg-primary text-white py-2 rounded-lg font-bold hover:bg-blue-700 transition-colors shadow-sm",children:m?"":""}),l.jsx("button",{onClick:()=>{h(!1),_()},className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded-lg font-bold hover:bg-slate-50 transition-colors",children:""})]})]})]}):l.jsxs(l.Fragment,{children:[n==="ACTIVE"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col md:flex-row justify-between items-center gap-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>i(""),className:`px-4 py-1.5 rounded-full text-sm font-bold transition-all ${s===""?"bg-slate-800 text-white":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:""}),C.map(L=>{const j=s===L,H=Wt(L);return l.jsx("button",{onClick:()=>i(L),className:`px-4 py-1.5 rounded-full text-sm font-bold transition-all border-2 ${j?`${H.bg} ${H.text} ${H.border}`:`bg-white ${H.border} text-slate-500 hover:${H.bg}`}`,children:L},L)})]}),l.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[l.jsxs("button",{onClick:()=>{_(),h(!0)},className:"flex-1 md:flex-none flex items-center justify-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors shadow-sm font-bold",children:[l.jsx(Bo,{size:18})," "]}),l.jsxs("div",{className:"hidden md:flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>u("LIST"),className:`p-2 rounded ${o==="LIST"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx($o,{size:18})}),l.jsx("button",{onClick:()=>u("CARD"),className:`p-2 rounded ${o==="CARD"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(ii,{size:18})})]})]})]}),l.jsx("div",{className:`${o==="LIST"?"md:hidden":""}`,children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.length===0&&l.jsx("div",{className:"col-span-full text-center text-slate-400 py-12",children:""}),b.map(L=>{const j=Wt(L.label);return l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden group hover:shadow-md transition-all",children:[l.jsxs("div",{className:`px-4 py-2 border-b flex justify-between items-center ${j.bg} ${j.border}`,children:[l.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${j.badge}`,children:L.label}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>x(L),className:"p-1.5 bg-white rounded-full text-slate-500 hover:text-primary shadow-sm",children:l.jsx(Lr,{size:14})}),l.jsx("button",{onClick:()=>F(L.id),className:"p-1.5 bg-white rounded-full text-slate-500 hover:text-red-500 shadow-sm",children:l.jsx(Fr,{size:14})})]})]}),l.jsxs("div",{className:"aspect-video bg-slate-100 relative",children:[L.config.imageUrl?l.jsx("img",{src:L.config.imageUrl,alt:"Menu",className:"w-full h-full object-cover"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:l.jsx(ko,{size:32})}),l.jsxs("div",{className:"absolute bottom-0 inset-x-0 bg-gradient-to-t from-black/70 to-transparent p-3 text-white",children:[l.jsx("h4",{className:"font-bold truncate",children:L.config.shopName}),l.jsxs("div",{className:"text-xs opacity-90",children:[L.config.date," ",L.config.cutoffTime&&` ${L.config.cutoffTime} `]})]})]})]},L.id)})]})}),l.jsx("div",{className:`hidden ${o==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600",children:" / "}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 w-32",children:""}),l.jsx("th",{className:"p-4 font-semibold text-slate-600 text-right",children:""})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100",children:[b.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-400",children:""})}),b.map(L=>{const j=Wt(L.label);return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4",children:l.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${j.badge}`,children:L.label})}),l.jsxs("td",{className:"p-4",children:[l.jsx("div",{className:"font-bold text-slate-800",children:L.config.shopName}),l.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(Ba,{size:14})," ",L.config.date,L.config.cutoffTime&&l.jsxs("span",{className:"text-red-500 font-bold ml-2",children:["(",L.config.cutoffTime," )"]})]})]}),l.jsx("td",{className:"p-4",children:l.jsx("div",{className:"w-16 h-10 bg-slate-100 rounded overflow-hidden border border-slate-200",children:L.config.imageUrl?l.jsx("img",{src:L.config.imageUrl,className:"w-full h-full object-cover"}):null})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>x(L),className:"px-3 py-1.5 border border-slate-300 rounded text-sm hover:bg-primary hover:text-white hover:border-primary transition-colors",children:""}),l.jsx("button",{onClick:()=>F(L.id),className:"px-3 py-1.5 border border-slate-300 rounded text-sm hover:bg-red-500 hover:text-white hover:border-red-500 transition-colors",children:""})]})]},L.id)})]})]})})})]}),n==="HISTORY"&&l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 border-b border-slate-100 pb-4",children:[l.jsx("span",{className:"text-sm font-bold text-slate-500 flex items-center mr-2",children:":"}),l.jsx("button",{onClick:()=>P(""),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all ${k===""?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),C.map(L=>{const j=k===L,H=Wt(L);return l.jsx("button",{onClick:()=>P(L),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border-2 ${j?`${H.bg} ${H.text} ${H.border}`:`bg-white ${H.border} text-slate-500 hover:${H.bg}`}`,children:L},L)})]}),l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(QT,{size:18})," "]}),l.jsxs("div",{className:"flex items-center gap-4 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>{const L=new Date(g);L.setDate(L.getDate()-7),N(L)},className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Px,{size:18})}),l.jsxs("span",{className:"font-mono text-sm font-bold text-slate-700",children:[E(g).toLocaleDateString()," - ",(()=>{const L=E(g);return L.setDate(L.getDate()+4),L.toLocaleDateString()})()]}),l.jsx("button",{onClick:()=>{const L=new Date(g);L.setDate(L.getDate()+7),N(L)},className:"p-1 hover:bg-slate-200 rounded",children:l.jsx(Dx,{size:18})})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:T(g).map((L,j)=>{const H=xt.filter(Y=>Y.config.date===L&&(k===""||Y.label===k));return l.jsxs("div",{className:"border border-slate-200 rounded-lg bg-slate-50 min-h-[150px] flex flex-col",children:[l.jsxs("div",{className:"p-2 border-b border-slate-200 bg-white rounded-t-lg text-center",children:[l.jsx("div",{className:"text-sm font-bold text-slate-700",children:["","","","",""][j]}),l.jsx("div",{className:"text-xs text-slate-400",children:L})]}),l.jsx("div",{className:"p-2 space-y-2 flex-1",children:H.length===0?l.jsx("div",{className:"text-center text-xs text-slate-300 py-4",children:""}):H.map(Y=>{const ne=Wt(Y.label);return l.jsxs("div",{className:"bg-white border border-slate-200 rounded p-2 shadow-sm text-xs cursor-pointer hover:border-primary group hover:bg-blue-50 transition-colors",onClick:()=>v(Y),title:"",children:[l.jsx("div",{className:`inline-block px-1.5 py-0.5 rounded-full text-[10px] font-bold mb-1 ${ne.badge}`,children:Y.label}),l.jsx("div",{className:"font-bold text-slate-700 truncate",children:Y.config.shopName}),l.jsx("div",{className:"hidden group-hover:block text-[10px] text-primary mt-1 text-center font-bold",children:""})]},Y.id)})})]},L)})})]})]})]})},NN=()=>{const[t,e]=q.useState([]),[n,r]=q.useState({}),[s,i]=q.useState("CARD"),[o,u]=q.useState(!1),[c,h]=q.useState(null),[m,p]=q.useState(""),[g,N]=q.useState(null),[k,P]=q.useState(!1);q.useEffect(()=>{D()},[]);const D=async()=>{const _=await ee.getEmployees();e(_);const E=await ee.getOrders(),T=new Date().toISOString().slice(0,7),C={};_.forEach(b=>{const we=E.filter(Pe=>Pe.employeeName===b.name&&Pe.dateStr.startsWith(T)).length;C[b.id]=we}),r(C),P(!1)},S=async()=>{if(!m.trim()){alert("");return}c?await ee.updateEmployee({id:c,name:m}):await ee.addEmployee({id:Date.now().toString(),name:m}),D(),u(!1),p(""),h(null)},w=async _=>{confirm("")&&(await ee.deleteEmployee(_),D())},I=_=>{u(!0),h(_.id),p(_.name)},O=()=>{const _=[...t].sort((E,T)=>E.name.localeCompare(T.name,"zh-TW"));e(_),P(!0)},M=(_,E)=>{N(E),_.dataTransfer.effectAllowed="move"},F=(_,E)=>{if(_.preventDefault(),g===null||g===E)return;const T=[...t],C=T[g];T.splice(g,1),T.splice(E,0,C),e(T),N(E),P(!0)},x=()=>{N(null)},v=async()=>{await ee.saveEmployees(t),P(!1),alert("")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>i("CARD"),className:`p-2 rounded ${s==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(ii,{size:18})}),l.jsx("button",{onClick:()=>i("LIST"),className:`p-2 rounded ${s==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx($o,{size:18})})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-wrap gap-4 items-center justify-between",children:[k&&l.jsxs("button",{onClick:v,className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg font-bold shadow animate-pulse",children:[l.jsx(hf,{size:18})," "]}),l.jsxs("div",{className:"flex gap-2 ml-auto",children:[l.jsxs("button",{onClick:O,className:"flex items-center gap-2 bg-white border border-slate-300 px-4 py-2 rounded-lg hover:bg-slate-50 text-slate-700 font-medium",children:[l.jsx(BT,{size:16})," "]}),l.jsxs("button",{onClick:()=>{u(!0),h(null),p("")},className:"flex items-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 font-bold shadow-sm",children:[l.jsx(Bo,{size:18})," "]})]})]}),o&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-md mx-auto",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:c?"":""}),l.jsx("input",{value:m,onChange:_=>p(_.target.value),className:"w-full p-2 border border-slate-300 rounded mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:""}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:S,className:"flex-1 bg-primary text-white py-2 rounded font-bold",children:""}),l.jsx("button",{onClick:()=>u(!1),className:"flex-1 border border-slate-300 py-2 rounded font-bold",children:""})]})]}),l.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[l.jsx(mN,{size:12})," "]}),l.jsx("div",{className:`${s==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map((_,E)=>l.jsxs("div",{draggable:!o,onDragStart:T=>M(T,E),onDragOver:T=>F(T,E),onDragEnd:x,className:`relative p-4 rounded-xl border cursor-move transition-all flex flex-col items-center text-center ${E%2===0?"bg-white border-slate-200":"bg-blue-50 border-blue-200"} hover:shadow-md hover:scale-[1.02]`,children:[l.jsx("div",{className:"absolute top-2 right-2 text-slate-300",children:l.jsx(Cl,{size:16})}),l.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-bold text-lg mb-2",children:_.name.charAt(0)}),l.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:_.name}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:[l.jsx(Ig,{size:12})," : ",l.jsx("span",{className:"font-bold text-primary",children:n[_.id]||0})]}),l.jsxs("div",{className:"flex gap-2 mt-4 w-full",children:[l.jsx("button",{onClick:()=>I(_),className:"flex-1 py-1 text-xs border border-slate-300 rounded hover:bg-white text-slate-600",children:""}),l.jsx("button",{onClick:()=>w(_.id),className:"flex-1 py-1 text-xs border border-red-200 text-red-500 rounded hover:bg-red-50",children:""})]})]},_.id))})}),l.jsx("div",{className:`hidden ${s==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-16",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 text-right",children:""})]})}),l.jsx("tbody",{children:t.map((_,E)=>l.jsxs("tr",{draggable:!o,onDragStart:T=>M(T,E),onDragOver:T=>F(T,E),onDragEnd:x,className:`cursor-move transition-colors ${E%2===0?"bg-white":"bg-slate-50"} hover:bg-blue-50/50`,children:[l.jsx("td",{className:"p-4 text-slate-300",children:l.jsx(Cl,{size:20})}),l.jsx("td",{className:"p-4 font-bold text-slate-700 text-lg",children:_.name}),l.jsx("td",{className:"p-4",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ig,{size:16,className:"text-slate-400"}),l.jsx("span",{className:"font-bold text-primary",children:n[_.id]||0})]})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>I(_),className:"text-sm font-bold text-blue-600 hover:underline",children:""}),l.jsx("button",{onClick:()=>w(_.id),className:"text-sm font-bold text-red-500 hover:underline",children:""})]})]},_.id))})]})})})]})},IN=()=>{const[t,e]=q.useState([]),[n,r]=q.useState(!1),[s,i]=q.useState(null),[o,u]=q.useState(""),[c,h]=q.useState("CARD"),[m,p]=q.useState(null),[g,N]=q.useState(!1);q.useEffect(()=>{ee.getAnnouncements().then(e)},[]);const k=async()=>{if(!o.trim()){alert("");return}const M=[...t];if(s){const F=M.findIndex(x=>x.id===s);F!==-1&&(M[F].content=o)}else M.push({id:Date.now().toString(),content:o,isActive:!0});await ee.saveAnnouncements(M),e(M),r(!1),u(""),i(null)},P=async M=>{if(confirm("")){const F=t.filter(x=>x.id!==M);await ee.saveAnnouncements(F),e(F)}},D=async M=>{const F=t.map(x=>x.id===M?{...x,isActive:!x.isActive}:x);await ee.saveAnnouncements(F),e(F)},S=M=>{r(!0),i(M.id),u(M.content)},w=(M,F)=>{p(F),M.dataTransfer.effectAllowed="move"},I=(M,F)=>{if(M.preventDefault(),m===null||m===F)return;const x=[...t],v=x[m];x.splice(m,1),x.splice(F,0,v),e(x),p(F),N(!0)},O=async()=>{await ee.saveAnnouncements(t),N(!1),alert("")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),l.jsxs("div",{className:"hidden md:flex bg-white rounded-lg p-1 shadow-sm border border-slate-200",children:[l.jsx("button",{onClick:()=>h("CARD"),className:`p-2 rounded ${c==="CARD"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx(ii,{size:18})}),l.jsx("button",{onClick:()=>h("LIST"),className:`p-2 rounded ${c==="LIST"?"bg-slate-100 text-primary":"text-slate-400"}`,children:l.jsx($o,{size:18})})]})]}),l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex justify-between items-center",children:[g?l.jsxs("button",{onClick:O,className:"bg-primary text-white px-4 py-2 rounded-lg font-bold shadow animate-pulse flex items-center gap-2",children:[l.jsx(hf,{size:18})," "]}):l.jsx("div",{}),l.jsxs("button",{onClick:()=>{r(!0),i(null),u("")},className:"bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold hover:bg-emerald-600 flex items-center gap-2",children:[l.jsx(Bo,{size:18})," "]})]}),n&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200",children:[l.jsx("textarea",{value:o,onChange:M=>u(M.target.value),className:"w-full p-4 border border-slate-300 rounded-lg mb-4 focus:ring-2 focus:ring-primary outline-none",placeholder:"...",rows:3}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:k,className:"bg-primary text-white px-6 py-2 rounded font-bold",children:""}),l.jsx("button",{onClick:()=>r(!1),className:"border border-slate-300 px-6 py-2 rounded font-bold",children:""})]})]}),l.jsx("div",{className:`${c==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((M,F)=>l.jsxs("div",{draggable:!0,onDragStart:x=>w(x,F),onDragOver:x=>I(x,F),className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 cursor-move hover:shadow-md transition-all group",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("div",{className:"p-1 text-slate-300",children:l.jsx(Cl,{size:16})}),l.jsxs("button",{onClick:()=>D(M.id),className:`px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 ${M.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:[M.isActive?l.jsx(nN,{size:12}):l.jsx(tN,{size:12}),M.isActive?"":""]})]}),l.jsx("p",{className:"text-slate-700 font-medium mb-4 min-h-[3rem]",children:M.content}),l.jsxs("div",{className:"flex border-t border-slate-100 pt-3 gap-2",children:[l.jsx("button",{onClick:()=>S(M),className:"flex-1 py-1 text-sm bg-slate-50 text-slate-600 rounded hover:bg-slate-100",children:""}),l.jsx("button",{onClick:()=>P(M.id),className:"flex-1 py-1 text-sm bg-red-50 text-red-500 rounded hover:bg-red-100",children:""})]})]},M.id))})}),l.jsx("div",{className:`hidden ${c==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4 w-12"}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 w-32 text-center",children:""}),l.jsx("th",{className:"p-4 w-32 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:t.map((M,F)=>l.jsxs("tr",{draggable:!0,onDragStart:x=>w(x,F),onDragOver:x=>I(x,F),className:"hover:bg-slate-50 cursor-move",children:[l.jsx("td",{className:"p-4 text-slate-300",children:l.jsx(Cl,{size:20})}),l.jsx("td",{className:"p-4 text-slate-700 font-medium",children:M.content}),l.jsx("td",{className:"p-4 text-center",children:l.jsx("button",{onClick:()=>D(M.id),className:`px-3 py-1 rounded-full text-xs font-bold transition-all ${M.isActive?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:M.isActive?"":""})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[l.jsx("button",{onClick:()=>S(M),className:"text-blue-600 font-bold text-sm hover:underline",children:""}),l.jsx("button",{onClick:()=>P(M.id),className:"text-red-500 font-bold text-sm hover:underline",children:""})]})]},M.id))})]})})})]})},AN=({currentUser:t})=>{const[e,n]=q.useState("ACCOUNTS"),[r,s]=q.useState([]),[i,o]=q.useState("CARD"),[u,c]=q.useState(!1),[h,m]=q.useState(null),[p,g]=q.useState("CHECKING"),[N,k]=q.useState({name:"",username:"",password:""}),[P,D]=q.useState(""),[S,w]=q.useState(""),[I,O]=q.useState(!1),[M,F]=q.useState(!1),[x,v]=q.useState(!1);q.useEffect(()=>{ee.getAdminAccounts().then(s)},[]),q.useEffect(()=>{we()},[]);const _=async()=>{if(!N.name||!N.username||!N.password){alert("");return}try{if(h){const j=r.find(H=>H.id===h);j&&await ee.updateAdminAccount({...j,name:N.name,username:N.username,password:N.password})}else await ee.addAdminAccount({id:Date.now().toString(),name:N.name,username:N.username,password:N.password,isSuperAdmin:!1});s(await ee.getAdminAccounts()),c(!1),C()}catch(j){alert(j.message||"Error")}},E=async j=>{confirm("")&&(await ee.deleteAdminAccount(j),s(await ee.getAdminAccounts()))},T=j=>{c(!0),m(j.id),k({name:j.name,username:j.username,password:j.password})},C=()=>{m(null),k({name:"",username:"",password:""})},b=async()=>{if(!P||!S){alert("");return}if(P!==S){alert("");return}confirm("")&&(await ee.setFrontendPassword(P),alert(""),D(""),w(""))},we=async()=>{g("CHECKING");const j=await ee.checkDatabaseConnection();g(j?"SUCCESS":"ERROR")},Pe=j=>!!(t.isSuperAdmin||j.id===t.id),xt=j=>j.isSuperAdmin?!1:!!t.isSuperAdmin,L=async j=>{if(!t.isSuperAdmin){alert("");return}const H=prompt("");if(H!==null){if(H!==t.password){alert("");return}await j()}};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"flex justify-between items-center",children:l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""})}),l.jsxs("div",{className:"flex border-b border-slate-200",children:[l.jsx("button",{onClick:()=>n("ACCOUNTS"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${e==="ACCOUNTS"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700"}`,children:""}),l.jsx("button",{onClick:()=>n("INFO"),className:`px-6 py-3 font-bold border-b-2 transition-colors ${e==="INFO"?"border-slate-500 text-slate-700":"border-transparent text-slate-500 hover:text-slate-700"}`,children:""})]}),e==="ACCOUNTS"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex justify-between items-center",children:[l.jsxs("div",{className:"text-sm text-slate-500",children:["",l.jsxs("span",{className:"font-bold text-slate-800",children:[t.name," (",t.isSuperAdmin?"":"",")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>{C(),c(!0)},className:"bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold hover:bg-emerald-600 flex items-center gap-2",children:[l.jsx(Bo,{size:18})," "]}),l.jsxs("div",{className:"hidden md:flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[l.jsx("button",{onClick:()=>o("CARD"),className:`p-2 rounded ${i==="CARD"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx(ii,{size:18})}),l.jsx("button",{onClick:()=>o("LIST"),className:`p-2 rounded ${i==="LIST"?"bg-white shadow text-slate-800":"text-slate-400"}`,children:l.jsx($o,{size:18})})]})]})]}),u&&l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 max-w-lg mx-auto",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[l.jsx(cN,{className:"text-primary"})," ",h?"":""]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{value:N.name,onChange:j=>k({...N,name:j.target.value}),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsx("input",{value:N.username,onChange:j=>k({...N,username:j.target.value}),disabled:!!h&&N.username==="sysop",className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none disabled:bg-slate-100"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{value:N.password,onChange:j=>k({...N,password:j.target.value}),className:"w-full p-2 pr-10 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none",type:I?"text":"password",placeholder:""}),l.jsx("button",{type:"button",onClick:()=>O(!I),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:I?l.jsx(uc,{size:18}):l.jsx(cc,{size:18})})]})]}),l.jsxs("div",{className:"flex gap-4 mt-4",children:[l.jsx("button",{onClick:_,className:"flex-1 bg-primary text-white py-2 rounded-lg font-bold hover:bg-blue-700",children:""}),l.jsx("button",{onClick:()=>{c(!1),C()},className:"flex-1 bg-white text-slate-600 border border-slate-300 py-2 rounded-lg font-bold hover:bg-slate-50",children:""})]})]})]}),l.jsx("div",{className:`${i==="LIST"?"md:hidden":""}`,children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(j=>l.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${j.isSuperAdmin?"bg-indigo-600":"bg-slate-500"}`,children:j.name.charAt(0)}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-800",children:j.name}),l.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[l.jsx(Mx,{size:12})," ",j.username]})]})]}),j.isSuperAdmin&&l.jsx(Vx,{className:"text-amber-500",size:20})]}),l.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-100",children:[Pe(j)?l.jsx("button",{onClick:()=>T(j),className:"flex-1 py-1.5 text-sm bg-blue-50 text-blue-600 rounded hover:bg-blue-100 font-bold",children:"/"}):l.jsx("button",{disabled:!0,className:"flex-1 py-1.5 text-sm bg-slate-50 text-slate-300 rounded cursor-not-allowed",children:""}),xt(j)&&l.jsx("button",{onClick:()=>E(j.id),className:"px-3 py-1.5 text-sm bg-red-50 text-red-500 rounded hover:bg-red-100 font-bold",children:""})]})]},j.id))})}),l.jsx("div",{className:`hidden ${i==="LIST"?"md:block":""}`,children:l.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:l.jsxs("table",{className:"w-full text-left",children:[l.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4",children:""}),l.jsx("th",{className:"p-4 text-right",children:""})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(j=>l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"p-4 font-bold text-slate-700",children:j.name}),l.jsx("td",{className:"p-4 font-mono text-slate-600",children:j.username}),l.jsx("td",{className:"p-4",children:j.isSuperAdmin?l.jsx("span",{className:"text-xs font-bold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:""}):l.jsx("span",{className:"text-xs font-bold bg-slate-100 text-slate-600 px-2 py-1 rounded-full",children:""})}),l.jsxs("td",{className:"p-4 text-right space-x-2",children:[Pe(j)&&l.jsx("button",{onClick:()=>T(j),className:"text-blue-600 font-bold text-sm hover:underline",children:""}),xt(j)&&l.jsx("button",{onClick:()=>E(j.id),className:"text-red-500 font-bold text-sm hover:underline",children:""})]})]},j.id))})]})})}),l.jsxs("div",{className:"bg-red-50/50 p-6 rounded-xl shadow-sm border border-red-100 mt-8",children:[l.jsxs("h3",{className:"text-lg font-bold text-red-600 flex items-center gap-2 mb-4",children:[l.jsx(kl,{size:18})," "]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:M?"text":"password",value:P,onChange:j=>D(j.target.value),className:"w-full p-2 pr-10 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-red-500 outline-none",placeholder:""}),l.jsx("button",{type:"button",onClick:()=>F(!M),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:M?l.jsx(uc,{size:18}):l.jsx(cc,{size:18})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:x?"text":"password",value:S,onChange:j=>w(j.target.value),className:"w-full p-2 pr-10 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-red-500 outline-none",placeholder:""}),l.jsx("button",{type:"button",onClick:()=>v(!x),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:x?l.jsx(uc,{size:18}):l.jsx(cc,{size:18})})]})]}),l.jsx("div",{children:l.jsx("button",{onClick:b,className:"w-full bg-red-600 text-white py-2 rounded font-bold hover:bg-red-700 transition-colors shadow-sm",children:""})})]}),l.jsx("p",{className:"text-xs text-red-400 mt-2 font-bold",children:""})]})]}),e==="INFO"&&l.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[l.jsx(Sa,{className:"text-indigo-600"})," "]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"bg-orange-500 p-1 rounded-full text-white",children:l.jsx(Sa,{size:14})}),l.jsx("span",{className:"font-mono font-bold text-slate-800",children:"Firebase Mode"})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsx("span",{className:"font-bold text-slate-700",children:""}),p==="IDLE"&&l.jsx("span",{className:"text-slate-400 font-bold text-sm",children:""}),p==="CHECKING"&&l.jsx("span",{className:"text-blue-500 font-bold text-sm animate-pulse",children:"..."}),p==="SUCCESS"&&l.jsxs("span",{className:"text-emerald-600 font-bold text-sm flex items-center gap-1",children:[l.jsx(kd,{size:14})," "]}),p==="ERROR"&&l.jsxs("span",{className:"text-red-500 font-bold text-sm flex items-center gap-1",children:[l.jsx(fN,{size:14})," "]})]})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[l.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[l.jsx(Sa,{className:"text-indigo-600"})," "]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-slate-800 mb-1 font-bold",children:""}),l.jsx("p",{className:"text-xs text-slate-400",children:"353"})]}),l.jsxs("button",{onClick:()=>L(()=>bN()),className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-2 rounded-lg font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md flex items-center gap-2 whitespace-nowrap",children:[l.jsx(Sa,{size:16})," "]})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-red-600 mb-1 font-bold",children:""}),l.jsx("p",{className:"text-xs text-slate-400",children:""})]}),l.jsxs("button",{onClick:()=>L(async()=>{await ee.clearAllData(),alert(""),window.location.reload()}),className:"bg-white border-2 border-red-100 text-red-500 px-6 py-2 rounded-lg font-bold hover:bg-red-50 hover:border-red-200 transition-all flex items-center gap-2 whitespace-nowrap",children:[l.jsx(Fr,{size:16})," "]})]})]})]})]}),l.jsx("footer",{className:"bg-white border-t border-slate-200 mt-8 py-6 text-center text-sm font-mono text-slate-400",children:" 2025 Powered by 007"})]})},CN=()=>{const[t,e]=q.useState(!1),[n,r]=q.useState(!1),[s,i]=q.useState(void 0),[o,u]=q.useState(!0),[c,h]=q.useState(""),[m,p]=q.useState(""),[g,N]=q.useState(""),[k,P]=q.useState("USER"),[D,S]=q.useState(""),[w,I]=q.useState(!1);q.useEffect(()=>{(async()=>{const{role:v,userId:_}=ee.getSession();if(v==="USER")e(!0);else if(v==="ADMIN"&&_){const E=await ee.getAdminById(_);E?(r(!0),i(E)):ee.clearSession()}u(!1)})()},[]);const O=async x=>{x.preventDefault(),u(!0);const v=await ee.getFrontendPassword();u(!1),c===v?(e(!0),S(""),ee.setSession("USER",void 0,w)):S("")},M=async x=>{x.preventDefault(),u(!0);const v=await ee.verifyAdmin(m,g);u(!1),v?(r(!0),i(v),S(""),ee.setSession("ADMIN",v.id,w)):S("")},F=()=>{e(!1),r(!1),i(void 0),ee.clearSession(),h(""),N(""),p("")};return o?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:"Loading..."}):n&&s?l.jsx(SN,{currentUser:s,onLogout:F,onGoToFrontend:()=>{r(!1),e(!0)}}):t?l.jsx(pN,{onLogout:F,onGoToAdmin:()=>{F(),P("ADMIN")}}):l.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-800 to-slate-900 p-4",children:[l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden w-full max-w-md",children:[l.jsxs("div",{className:"flex text-sm font-bold text-center border-b bg-gray-50",children:[l.jsx("button",{onClick:()=>{P("USER"),S("")},className:`flex-1 py-4 uppercase tracking-wider transition-all border-t-4 ${k==="USER"?"bg-white text-primary border-primary":"bg-gray-100 text-gray-400 border-transparent hover:bg-gray-50"}`,children:""}),l.jsx("button",{onClick:()=>{P("ADMIN"),S("")},className:`flex-1 py-4 uppercase tracking-wider transition-all border-t-4 ${k==="ADMIN"?"bg-white text-slate-800 border-slate-800":"bg-gray-100 text-gray-400 border-transparent hover:bg-gray-50"}`,children:""})]}),l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),l.jsx("p",{className:"text-slate-500 text-sm",children:""})]}),D&&l.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded border border-red-200 text-center",children:D}),k==="USER"?l.jsxs("form",{onSubmit:O,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(kl,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"password",value:c,onChange:x=>h(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none",placeholder:"",autoComplete:"current-password"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember-user",type:"checkbox",checked:w,onChange:x=>I(x.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary bg-white"}),l.jsx("label",{htmlFor:"remember-user",className:"ml-2 block text-sm text-slate-600 cursor-pointer",children:" (Remember me)"})]}),l.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors",children:""})]}):l.jsxs("form",{onSubmit:M,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(iN,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"text",value:m,onChange:x=>p(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none",placeholder:"",autoComplete:"username"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),l.jsxs("div",{className:"relative",children:[l.jsx(kl,{className:"absolute left-3 top-3 text-slate-400",size:18}),l.jsx("input",{type:"password",value:g,onChange:x=>N(x.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none",placeholder:"",autoComplete:"current-password"})]})]}),l.jsxs("div",{className:"flex items-center pt-2",children:[l.jsx("input",{id:"remember-admin",type:"checkbox",checked:w,onChange:x=>I(x.target.checked),className:"w-4 h-4 text-slate-800 border-gray-300 rounded focus:ring-slate-800 bg-white"}),l.jsx("label",{htmlFor:"remember-admin",className:"ml-2 block text-sm text-slate-600 cursor-pointer",children:" (Remember me)"})]}),l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white py-3 rounded-lg font-bold hover:bg-slate-900 transition-colors mt-2",children:""})]})]})]}),l.jsx("div",{className:"fixed bottom-6 text-center w-full text-slate-500 text-xs font-mono opacity-60",children:" 2025 Powered by 007"})]})},Lx=document.getElementById("root");if(!Lx)throw new Error("Could not find root element to mount to");const kN=fc.createRoot(Lx);kN.render(l.jsx(T1.StrictMode,{children:l.jsx(CN,{})}));
