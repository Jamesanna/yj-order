(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function L0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cg={exports:{}},pl={},hg={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _o=Symbol.for("react.element"),j0=Symbol.for("react.portal"),F0=Symbol.for("react.fragment"),U0=Symbol.for("react.strict_mode"),z0=Symbol.for("react.profiler"),B0=Symbol.for("react.provider"),$0=Symbol.for("react.context"),q0=Symbol.for("react.forward_ref"),H0=Symbol.for("react.suspense"),W0=Symbol.for("react.memo"),G0=Symbol.for("react.lazy"),Ff=Symbol.iterator;function Q0(t){return t===null||typeof t!="object"?null:(t=Ff&&t[Ff]||t["@@iterator"],typeof t=="function"?t:null)}var dg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fg=Object.assign,pg={};function js(t,e,n){this.props=t,this.context=e,this.refs=pg,this.updater=n||dg}js.prototype.isReactComponent={};js.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};js.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mg(){}mg.prototype=js.prototype;function hh(t,e,n){this.props=t,this.context=e,this.refs=pg,this.updater=n||dg}var dh=hh.prototype=new mg;dh.constructor=hh;fg(dh,js.prototype);dh.isPureReactComponent=!0;var Uf=Array.isArray,gg=Object.prototype.hasOwnProperty,fh={current:null},yg={key:!0,ref:!0,__self:!0,__source:!0};function _g(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)gg.call(e,r)&&!yg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:_o,type:t,key:i,ref:a,props:s,_owner:fh.current}}function K0(t,e){return{$$typeof:_o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ph(t){return typeof t=="object"&&t!==null&&t.$$typeof===_o}function X0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zf=/\/+/g;function hu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?X0(""+t.key):e.toString(36)}function ha(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case _o:case j0:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+hu(a,0):r,Uf(s)?(n="",t!=null&&(n=t.replace(zf,"$&/")+"/"),ha(s,e,n,"",function(h){return h})):s!=null&&(ph(s)&&(s=K0(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(zf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Uf(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+hu(i,l);a+=ha(i,e,n,u,s)}else if(u=Q0(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+hu(i,l++),a+=ha(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Bo(t,e,n){if(t==null)return t;var r=[],s=0;return ha(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Y0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},da={transition:null},J0={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:da,ReactCurrentOwner:fh};function vg(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Bo,forEach:function(t,e,n){Bo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bo(t,function(){e++}),e},toArray:function(t){return Bo(t,function(e){return e})||[]},only:function(t){if(!ph(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=js;re.Fragment=F0;re.Profiler=z0;re.PureComponent=hh;re.StrictMode=U0;re.Suspense=H0;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J0;re.act=vg;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fg({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=fh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)gg.call(e,u)&&!yg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:_o,type:t.type,key:s,ref:i,props:r,_owner:a}};re.createContext=function(t){return t={$$typeof:$0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:B0,_context:t},t.Consumer=t};re.createElement=_g;re.createFactory=function(t){var e=_g.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:q0,render:t}};re.isValidElement=ph;re.lazy=function(t){return{$$typeof:G0,_payload:{_status:-1,_result:t},_init:Y0}};re.memo=function(t,e){return{$$typeof:W0,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=da.transition;da.transition={};try{t()}finally{da.transition=e}};re.unstable_act=vg;re.useCallback=function(t,e){return mt.current.useCallback(t,e)};re.useContext=function(t){return mt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};re.useEffect=function(t,e){return mt.current.useEffect(t,e)};re.useId=function(){return mt.current.useId()};re.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return mt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};re.useRef=function(t){return mt.current.useRef(t)};re.useState=function(t){return mt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return mt.current.useTransition()};re.version="18.3.1";hg.exports=re;var ne=hg.exports;const Z0=L0(ne);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1=ne,t1=Symbol.for("react.element"),n1=Symbol.for("react.fragment"),r1=Object.prototype.hasOwnProperty,s1=e1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i1={key:!0,ref:!0,__self:!0,__source:!0};function wg(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)r1.call(e,r)&&!i1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:t1,type:t,key:i,ref:a,props:s,_owner:s1.current}}pl.Fragment=n1;pl.jsx=wg;pl.jsxs=wg;cg.exports=pl;var _=cg.exports,Gu={},Eg={exports:{}},bt={},Tg={exports:{}},Sg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var Y=$.length;$.push(Q);e:for(;0<Y;){var ue=Y-1>>>1,Ee=$[ue];if(0<s(Ee,Q))$[ue]=Q,$[Y]=Ee,Y=ue;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],Y=$.pop();if(Y!==Q){$[0]=Y;e:for(var ue=0,Ee=$.length,Zt=Ee>>>1;ue<Zt;){var ht=2*(ue+1)-1,yt=$[ht],xt=ht+1,ze=$[xt];if(0>s(yt,Y))xt<Ee&&0>s(ze,yt)?($[ue]=ze,$[xt]=Y,ue=xt):($[ue]=yt,$[ht]=Y,ue=ht);else if(xt<Ee&&0>s(ze,Y))$[ue]=ze,$[xt]=Y,ue=xt;else break e}}return Q}function s($,Q){var Y=$.sortIndex-Q.sortIndex;return Y!==0?Y:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],f=1,m=null,g=3,C=!1,k=!1,V=!1,L=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x($){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=$)r(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(h)}}function D($){if(V=!1,x($),!k)if(n(u)!==null)k=!0,Pn(U);else{var Q=n(h);Q!==null&&Er(D,Q.startTime-$)}}function U($,Q){k=!1,V&&(V=!1,I(y),y=-1),C=!0;var Y=g;try{for(x(Q),m=n(u);m!==null&&(!(m.expirationTime>Q)||$&&!A());){var ue=m.callback;if(typeof ue=="function"){m.callback=null,g=m.priorityLevel;var Ee=ue(m.expirationTime<=Q);Q=t.unstable_now(),typeof Ee=="function"?m.callback=Ee:m===n(u)&&r(u),x(Q)}else r(u);m=n(u)}if(m!==null)var Zt=!0;else{var ht=n(h);ht!==null&&Er(D,ht.startTime-Q),Zt=!1}return Zt}finally{m=null,g=Y,C=!1}}var F=!1,v=null,y=-1,E=5,S=-1;function A(){return!(t.unstable_now()-S<E)}function R(){if(v!==null){var $=t.unstable_now();S=$;var Q=!0;try{Q=v(!0,$)}finally{Q?T():(F=!1,v=null)}}else F=!1}var T;if(typeof w=="function")T=function(){w(R)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,Ot=Ue.port2;Ue.port1.onmessage=R,T=function(){Ot.postMessage(null)}}else T=function(){L(R,0)};function Pn($){v=$,F||(F=!0,T())}function Er($,Q){y=L(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){k||C||(k=!0,Pn(U))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var Y=g;g=Q;try{return $()}finally{g=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Y=g;g=$;try{return Q()}finally{g=Y}},t.unstable_scheduleCallback=function($,Q,Y){var ue=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ue+Y:ue):Y=ue,$){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=Y+Ee,$={id:f++,callback:Q,priorityLevel:$,startTime:Y,expirationTime:Ee,sortIndex:-1},Y>ue?($.sortIndex=Y,e(h,$),n(u)===null&&$===n(h)&&(V?(I(y),y=-1):V=!0,Er(D,Y-ue))):($.sortIndex=Ee,e(u,$),k||C||(k=!0,Pn(U))),$},t.unstable_shouldYield=A,t.unstable_wrapCallback=function($){var Q=g;return function(){var Y=g;g=Q;try{return $.apply(this,arguments)}finally{g=Y}}}})(Sg);Tg.exports=Sg;var o1=Tg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a1=ne,Dt=o1;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ig=new Set,Hi={};function Hr(t,e){As(t,e),As(t+"Capture",e)}function As(t,e){for(Hi[t]=e,t=0;t<e.length;t++)Ig.add(e[t])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qu=Object.prototype.hasOwnProperty,l1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bf={},$f={};function u1(t){return Qu.call($f,t)?!0:Qu.call(Bf,t)?!1:l1.test(t)?$f[t]=!0:(Bf[t]=!0,!1)}function c1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function h1(t,e,n,r){if(e===null||typeof e>"u"||c1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var mh=/[\-:]([a-z])/g;function gh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mh,gh);tt[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mh,gh);tt[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mh,gh);tt[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function yh(t,e,n,r){var s=tt.hasOwnProperty(e)?tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(h1(e,n,s,r)&&(n=null),r||s===null?u1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var kn=a1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$o=Symbol.for("react.element"),ss=Symbol.for("react.portal"),is=Symbol.for("react.fragment"),_h=Symbol.for("react.strict_mode"),Ku=Symbol.for("react.profiler"),Ag=Symbol.for("react.provider"),xg=Symbol.for("react.context"),vh=Symbol.for("react.forward_ref"),Xu=Symbol.for("react.suspense"),Yu=Symbol.for("react.suspense_list"),wh=Symbol.for("react.memo"),$n=Symbol.for("react.lazy"),Cg=Symbol.for("react.offscreen"),qf=Symbol.iterator;function di(t){return t===null||typeof t!="object"?null:(t=qf&&t[qf]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,du;function Si(t){if(du===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);du=e&&e[1]||""}return`
`+du+t}var fu=!1;function pu(t,e){if(!t||fu)return"";fu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{fu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Si(t):""}function d1(t){switch(t.tag){case 5:return Si(t.type);case 16:return Si("Lazy");case 13:return Si("Suspense");case 19:return Si("SuspenseList");case 0:case 2:case 15:return t=pu(t.type,!1),t;case 11:return t=pu(t.type.render,!1),t;case 1:return t=pu(t.type,!0),t;default:return""}}function Ju(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case is:return"Fragment";case ss:return"Portal";case Ku:return"Profiler";case _h:return"StrictMode";case Xu:return"Suspense";case Yu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xg:return(t.displayName||"Context")+".Consumer";case Ag:return(t._context.displayName||"Context")+".Provider";case vh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wh:return e=t.displayName||null,e!==null?e:Ju(t.type)||"Memo";case $n:e=t._payload,t=t._init;try{return Ju(t(e))}catch{}}return null}function f1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ju(e);case 8:return e===_h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function p1(t){var e=Rg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qo(t){t._valueTracker||(t._valueTracker=p1(t))}function Ng(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Na(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zu(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=lr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kg(t,e){e=e.checked,e!=null&&yh(t,"checked",e,!1)}function ec(t,e){kg(t,e);var n=lr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?tc(t,e.type,n):e.hasOwnProperty("defaultValue")&&tc(t,e.type,lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function tc(t,e,n){(e!=="number"||Na(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ii=Array.isArray;function gs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+lr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function nc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(Ii(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:lr(n)}}function Pg(t,e){var n=lr(e.value),r=lr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ho,Dg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ho=Ho||document.createElement("div"),Ho.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ho.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m1=["Webkit","ms","Moz","O"];Object.keys(Pi).forEach(function(t){m1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pi[e]=Pi[t]})});function bg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pi.hasOwnProperty(t)&&Pi[t]?(""+e).trim():e+"px"}function Mg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=bg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var g1=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sc(t,e){if(e){if(g1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function ic(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oc=null;function Eh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ac=null,ys=null,_s=null;function Kf(t){if(t=Eo(t)){if(typeof ac!="function")throw Error(j(280));var e=t.stateNode;e&&(e=vl(e),ac(t.stateNode,t.type,e))}}function Og(t){ys?_s?_s.push(t):_s=[t]:ys=t}function Lg(){if(ys){var t=ys,e=_s;if(_s=ys=null,Kf(t),e)for(t=0;t<e.length;t++)Kf(e[t])}}function jg(t,e){return t(e)}function Fg(){}var mu=!1;function Ug(t,e,n){if(mu)return t(e,n);mu=!0;try{return jg(t,e,n)}finally{mu=!1,(ys!==null||_s!==null)&&(Fg(),Lg())}}function Gi(t,e){var n=t.stateNode;if(n===null)return null;var r=vl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var lc=!1;if(Tn)try{var fi={};Object.defineProperty(fi,"passive",{get:function(){lc=!0}}),window.addEventListener("test",fi,fi),window.removeEventListener("test",fi,fi)}catch{lc=!1}function y1(t,e,n,r,s,i,a,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Vi=!1,ka=null,Pa=!1,uc=null,_1={onError:function(t){Vi=!0,ka=t}};function v1(t,e,n,r,s,i,a,l,u){Vi=!1,ka=null,y1.apply(_1,arguments)}function w1(t,e,n,r,s,i,a,l,u){if(v1.apply(this,arguments),Vi){if(Vi){var h=ka;Vi=!1,ka=null}else throw Error(j(198));Pa||(Pa=!0,uc=h)}}function Wr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xf(t){if(Wr(t)!==t)throw Error(j(188))}function E1(t){var e=t.alternate;if(!e){if(e=Wr(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Xf(s),t;if(i===r)return Xf(s),e;i=i.sibling}throw Error(j(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function Bg(t){return t=E1(t),t!==null?$g(t):null}function $g(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$g(t);if(e!==null)return e;t=t.sibling}return null}var qg=Dt.unstable_scheduleCallback,Yf=Dt.unstable_cancelCallback,T1=Dt.unstable_shouldYield,S1=Dt.unstable_requestPaint,be=Dt.unstable_now,I1=Dt.unstable_getCurrentPriorityLevel,Th=Dt.unstable_ImmediatePriority,Hg=Dt.unstable_UserBlockingPriority,Va=Dt.unstable_NormalPriority,A1=Dt.unstable_LowPriority,Wg=Dt.unstable_IdlePriority,ml=null,an=null;function x1(t){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(ml,t,void 0,(t.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:N1,C1=Math.log,R1=Math.LN2;function N1(t){return t>>>=0,t===0?32:31-(C1(t)/R1|0)|0}var Wo=64,Go=4194304;function Ai(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Da(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Ai(l):(i&=a,i!==0&&(r=Ai(i)))}else a=n&~s,a!==0?r=Ai(a):i!==0&&(r=Ai(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qt(e),s=1<<n,r|=t[n],e&=~s;return r}function k1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Qt(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=k1(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function cc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gg(){var t=Wo;return Wo<<=1,!(Wo&4194240)&&(Wo=64),t}function gu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qt(e),t[e]=n}function V1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Qt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Sh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function Qg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Kg,Ih,Xg,Yg,Jg,hc=!1,Qo=[],Xn=null,Yn=null,Jn=null,Qi=new Map,Ki=new Map,Hn=[],D1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jf(t,e){switch(t){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":Qi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ki.delete(e.pointerId)}}function pi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Eo(e),e!==null&&Ih(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function b1(t,e,n,r,s){switch(e){case"focusin":return Xn=pi(Xn,t,e,n,r,s),!0;case"dragenter":return Yn=pi(Yn,t,e,n,r,s),!0;case"mouseover":return Jn=pi(Jn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Qi.set(i,pi(Qi.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ki.set(i,pi(Ki.get(i)||null,t,e,n,r,s)),!0}return!1}function Zg(t){var e=Pr(t.target);if(e!==null){var n=Wr(e);if(n!==null){if(e=n.tag,e===13){if(e=zg(n),e!==null){t.blockedOn=e,Jg(t.priority,function(){Xg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);oc=r,n.target.dispatchEvent(r),oc=null}else return e=Eo(n),e!==null&&Ih(e),t.blockedOn=n,!1;e.shift()}return!0}function Zf(t,e,n){fa(t)&&n.delete(e)}function M1(){hc=!1,Xn!==null&&fa(Xn)&&(Xn=null),Yn!==null&&fa(Yn)&&(Yn=null),Jn!==null&&fa(Jn)&&(Jn=null),Qi.forEach(Zf),Ki.forEach(Zf)}function mi(t,e){t.blockedOn===e&&(t.blockedOn=null,hc||(hc=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,M1)))}function Xi(t){function e(s){return mi(s,t)}if(0<Qo.length){mi(Qo[0],t);for(var n=1;n<Qo.length;n++){var r=Qo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xn!==null&&mi(Xn,t),Yn!==null&&mi(Yn,t),Jn!==null&&mi(Jn,t),Qi.forEach(e),Ki.forEach(e),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)Zg(n),n.blockedOn===null&&Hn.shift()}var vs=kn.ReactCurrentBatchConfig,ba=!0;function O1(t,e,n,r){var s=de,i=vs.transition;vs.transition=null;try{de=1,Ah(t,e,n,r)}finally{de=s,vs.transition=i}}function L1(t,e,n,r){var s=de,i=vs.transition;vs.transition=null;try{de=4,Ah(t,e,n,r)}finally{de=s,vs.transition=i}}function Ah(t,e,n,r){if(ba){var s=dc(t,e,n,r);if(s===null)xu(t,e,r,Ma,n),Jf(t,r);else if(b1(s,t,e,n,r))r.stopPropagation();else if(Jf(t,r),e&4&&-1<D1.indexOf(t)){for(;s!==null;){var i=Eo(s);if(i!==null&&Kg(i),i=dc(t,e,n,r),i===null&&xu(t,e,r,Ma,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else xu(t,e,r,null,n)}}var Ma=null;function dc(t,e,n,r){if(Ma=null,t=Eh(r),t=Pr(t),t!==null)if(e=Wr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ma=t,null}function ey(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I1()){case Th:return 1;case Hg:return 4;case Va:case A1:return 16;case Wg:return 536870912;default:return 16}default:return 16}}var Gn=null,xh=null,pa=null;function ty(){if(pa)return pa;var t,e=xh,n=e.length,r,s="value"in Gn?Gn.value:Gn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return pa=s.slice(t,1<r?1-r:void 0)}function ma(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ko(){return!0}function ep(){return!1}function Mt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ko:ep,this.isPropagationStopped=ep,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ko)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ko)},persist:function(){},isPersistent:Ko}),e}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ch=Mt(Fs),wo=Ae({},Fs,{view:0,detail:0}),j1=Mt(wo),yu,_u,gi,gl=Ae({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gi&&(gi&&t.type==="mousemove"?(yu=t.screenX-gi.screenX,_u=t.screenY-gi.screenY):_u=yu=0,gi=t),yu)},movementY:function(t){return"movementY"in t?t.movementY:_u}}),tp=Mt(gl),F1=Ae({},gl,{dataTransfer:0}),U1=Mt(F1),z1=Ae({},wo,{relatedTarget:0}),vu=Mt(z1),B1=Ae({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),$1=Mt(B1),q1=Ae({},Fs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),H1=Mt(q1),W1=Ae({},Fs,{data:0}),np=Mt(W1),G1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Q1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},K1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=K1[t])?!!e[t]:!1}function Rh(){return X1}var Y1=Ae({},wo,{key:function(t){if(t.key){var e=G1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ma(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Q1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rh,charCode:function(t){return t.type==="keypress"?ma(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ma(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),J1=Mt(Y1),Z1=Ae({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rp=Mt(Z1),ew=Ae({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rh}),tw=Mt(ew),nw=Ae({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),rw=Mt(nw),sw=Ae({},gl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iw=Mt(sw),ow=[9,13,27,32],Nh=Tn&&"CompositionEvent"in window,Di=null;Tn&&"documentMode"in document&&(Di=document.documentMode);var aw=Tn&&"TextEvent"in window&&!Di,ny=Tn&&(!Nh||Di&&8<Di&&11>=Di),sp=" ",ip=!1;function ry(t,e){switch(t){case"keyup":return ow.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var os=!1;function lw(t,e){switch(t){case"compositionend":return sy(e);case"keypress":return e.which!==32?null:(ip=!0,sp);case"textInput":return t=e.data,t===sp&&ip?null:t;default:return null}}function uw(t,e){if(os)return t==="compositionend"||!Nh&&ry(t,e)?(t=ty(),pa=xh=Gn=null,os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ny&&e.locale!=="ko"?null:e.data;default:return null}}var cw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cw[t.type]:e==="textarea"}function iy(t,e,n,r){Og(r),e=Oa(e,"onChange"),0<e.length&&(n=new Ch("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bi=null,Yi=null;function hw(t){gy(t,0)}function yl(t){var e=us(t);if(Ng(e))return t}function dw(t,e){if(t==="change")return e}var oy=!1;if(Tn){var wu;if(Tn){var Eu="oninput"in document;if(!Eu){var ap=document.createElement("div");ap.setAttribute("oninput","return;"),Eu=typeof ap.oninput=="function"}wu=Eu}else wu=!1;oy=wu&&(!document.documentMode||9<document.documentMode)}function lp(){bi&&(bi.detachEvent("onpropertychange",ay),Yi=bi=null)}function ay(t){if(t.propertyName==="value"&&yl(Yi)){var e=[];iy(e,Yi,t,Eh(t)),Ug(hw,e)}}function fw(t,e,n){t==="focusin"?(lp(),bi=e,Yi=n,bi.attachEvent("onpropertychange",ay)):t==="focusout"&&lp()}function pw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yl(Yi)}function mw(t,e){if(t==="click")return yl(e)}function gw(t,e){if(t==="input"||t==="change")return yl(e)}function yw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yt=typeof Object.is=="function"?Object.is:yw;function Ji(t,e){if(Yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Qu.call(e,s)||!Yt(t[s],e[s]))return!1}return!0}function up(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cp(t,e){var n=up(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=up(n)}}function ly(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ly(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uy(){for(var t=window,e=Na();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Na(t.document)}return e}function kh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _w(t){var e=uy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ly(n.ownerDocument.documentElement,n)){if(r!==null&&kh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=cp(n,i);var a=cp(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vw=Tn&&"documentMode"in document&&11>=document.documentMode,as=null,fc=null,Mi=null,pc=!1;function hp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pc||as==null||as!==Na(r)||(r=as,"selectionStart"in r&&kh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mi&&Ji(Mi,r)||(Mi=r,r=Oa(fc,"onSelect"),0<r.length&&(e=new Ch("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=as)))}function Xo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ls={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionend:Xo("Transition","TransitionEnd")},Tu={},cy={};Tn&&(cy=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function _l(t){if(Tu[t])return Tu[t];if(!ls[t])return t;var e=ls[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cy)return Tu[t]=e[n];return t}var hy=_l("animationend"),dy=_l("animationiteration"),fy=_l("animationstart"),py=_l("transitionend"),my=new Map,dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,e){my.set(t,e),Hr(e,[t])}for(var Su=0;Su<dp.length;Su++){var Iu=dp[Su],ww=Iu.toLowerCase(),Ew=Iu[0].toUpperCase()+Iu.slice(1);gr(ww,"on"+Ew)}gr(hy,"onAnimationEnd");gr(dy,"onAnimationIteration");gr(fy,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(py,"onTransitionEnd");As("onMouseEnter",["mouseout","mouseover"]);As("onMouseLeave",["mouseout","mouseover"]);As("onPointerEnter",["pointerout","pointerover"]);As("onPointerLeave",["pointerout","pointerover"]);Hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tw=new Set("cancel close invalid load scroll toggle".split(" ").concat(xi));function fp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,w1(r,e,void 0,t),t.currentTarget=null}function gy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;fp(s,l,h),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;fp(s,l,h),i=u}}}if(Pa)throw t=uc,Pa=!1,uc=null,t}function _e(t,e){var n=e[vc];n===void 0&&(n=e[vc]=new Set);var r=t+"__bubble";n.has(r)||(yy(e,t,2,!1),n.add(r))}function Au(t,e,n){var r=0;e&&(r|=4),yy(n,t,r,e)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function Zi(t){if(!t[Yo]){t[Yo]=!0,Ig.forEach(function(n){n!=="selectionchange"&&(Tw.has(n)||Au(n,!1,t),Au(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yo]||(e[Yo]=!0,Au("selectionchange",!1,e))}}function yy(t,e,n,r){switch(ey(e)){case 1:var s=O1;break;case 4:s=L1;break;default:s=Ah}n=s.bind(null,e,n,t),s=void 0,!lc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function xu(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Pr(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Ug(function(){var h=i,f=Eh(n),m=[];e:{var g=my.get(t);if(g!==void 0){var C=Ch,k=t;switch(t){case"keypress":if(ma(n)===0)break e;case"keydown":case"keyup":C=J1;break;case"focusin":k="focus",C=vu;break;case"focusout":k="blur",C=vu;break;case"beforeblur":case"afterblur":C=vu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=tp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=U1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=tw;break;case hy:case dy:case fy:C=$1;break;case py:C=rw;break;case"scroll":C=j1;break;case"wheel":C=iw;break;case"copy":case"cut":case"paste":C=H1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=rp}var V=(e&4)!==0,L=!V&&t==="scroll",I=V?g!==null?g+"Capture":null:g;V=[];for(var w=h,x;w!==null;){x=w;var D=x.stateNode;if(x.tag===5&&D!==null&&(x=D,I!==null&&(D=Gi(w,I),D!=null&&V.push(eo(w,D,x)))),L)break;w=w.return}0<V.length&&(g=new C(g,k,null,n,f),m.push({event:g,listeners:V}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",g&&n!==oc&&(k=n.relatedTarget||n.fromElement)&&(Pr(k)||k[Sn]))break e;if((C||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,C?(k=n.relatedTarget||n.toElement,C=h,k=k?Pr(k):null,k!==null&&(L=Wr(k),k!==L||k.tag!==5&&k.tag!==6)&&(k=null)):(C=null,k=h),C!==k)){if(V=tp,D="onMouseLeave",I="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(V=rp,D="onPointerLeave",I="onPointerEnter",w="pointer"),L=C==null?g:us(C),x=k==null?g:us(k),g=new V(D,w+"leave",C,n,f),g.target=L,g.relatedTarget=x,D=null,Pr(f)===h&&(V=new V(I,w+"enter",k,n,f),V.target=x,V.relatedTarget=L,D=V),L=D,C&&k)t:{for(V=C,I=k,w=0,x=V;x;x=Zr(x))w++;for(x=0,D=I;D;D=Zr(D))x++;for(;0<w-x;)V=Zr(V),w--;for(;0<x-w;)I=Zr(I),x--;for(;w--;){if(V===I||I!==null&&V===I.alternate)break t;V=Zr(V),I=Zr(I)}V=null}else V=null;C!==null&&pp(m,g,C,V,!1),k!==null&&L!==null&&pp(m,L,k,V,!0)}}e:{if(g=h?us(h):window,C=g.nodeName&&g.nodeName.toLowerCase(),C==="select"||C==="input"&&g.type==="file")var U=dw;else if(op(g))if(oy)U=gw;else{U=pw;var F=fw}else(C=g.nodeName)&&C.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(U=mw);if(U&&(U=U(t,h))){iy(m,U,n,f);break e}F&&F(t,g,h),t==="focusout"&&(F=g._wrapperState)&&F.controlled&&g.type==="number"&&tc(g,"number",g.value)}switch(F=h?us(h):window,t){case"focusin":(op(F)||F.contentEditable==="true")&&(as=F,fc=h,Mi=null);break;case"focusout":Mi=fc=as=null;break;case"mousedown":pc=!0;break;case"contextmenu":case"mouseup":case"dragend":pc=!1,hp(m,n,f);break;case"selectionchange":if(vw)break;case"keydown":case"keyup":hp(m,n,f)}var v;if(Nh)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else os?ry(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(ny&&n.locale!=="ko"&&(os||y!=="onCompositionStart"?y==="onCompositionEnd"&&os&&(v=ty()):(Gn=f,xh="value"in Gn?Gn.value:Gn.textContent,os=!0)),F=Oa(h,y),0<F.length&&(y=new np(y,t,null,n,f),m.push({event:y,listeners:F}),v?y.data=v:(v=sy(n),v!==null&&(y.data=v)))),(v=aw?lw(t,n):uw(t,n))&&(h=Oa(h,"onBeforeInput"),0<h.length&&(f=new np("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:h}),f.data=v))}gy(m,e)})}function eo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Oa(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Gi(t,n),i!=null&&r.unshift(eo(t,i,s)),i=Gi(t,e),i!=null&&r.push(eo(t,i,s))),t=t.return}return r}function Zr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pp(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=Gi(n,i),u!=null&&a.unshift(eo(n,u,l))):s||(u=Gi(n,i),u!=null&&a.push(eo(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Sw=/\r\n?/g,Iw=/\u0000|\uFFFD/g;function mp(t){return(typeof t=="string"?t:""+t).replace(Sw,`
`).replace(Iw,"")}function Jo(t,e,n){if(e=mp(e),mp(t)!==e&&n)throw Error(j(425))}function La(){}var mc=null,gc=null;function yc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _c=typeof setTimeout=="function"?setTimeout:void 0,Aw=typeof clearTimeout=="function"?clearTimeout:void 0,gp=typeof Promise=="function"?Promise:void 0,xw=typeof queueMicrotask=="function"?queueMicrotask:typeof gp<"u"?function(t){return gp.resolve(null).then(t).catch(Cw)}:_c;function Cw(t){setTimeout(function(){throw t})}function Cu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Xi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Xi(e)}function Zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Us=Math.random().toString(36).slice(2),on="__reactFiber$"+Us,to="__reactProps$"+Us,Sn="__reactContainer$"+Us,vc="__reactEvents$"+Us,Rw="__reactListeners$"+Us,Nw="__reactHandles$"+Us;function Pr(t){var e=t[on];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sn]||n[on]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yp(t);t!==null;){if(n=t[on])return n;t=yp(t)}return e}t=n,n=t.parentNode}return null}function Eo(t){return t=t[on]||t[Sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function us(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function vl(t){return t[to]||null}var wc=[],cs=-1;function yr(t){return{current:t}}function we(t){0>cs||(t.current=wc[cs],wc[cs]=null,cs--)}function ge(t,e){cs++,wc[cs]=t.current,t.current=e}var ur={},ct=yr(ur),St=yr(!1),jr=ur;function xs(t,e){var n=t.type.contextTypes;if(!n)return ur;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function It(t){return t=t.childContextTypes,t!=null}function ja(){we(St),we(ct)}function _p(t,e,n){if(ct.current!==ur)throw Error(j(168));ge(ct,e),ge(St,n)}function _y(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(j(108,f1(t)||"Unknown",s));return Ae({},n,r)}function Fa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ur,jr=ct.current,ge(ct,t),ge(St,St.current),!0}function vp(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=_y(t,e,jr),r.__reactInternalMemoizedMergedChildContext=t,we(St),we(ct),ge(ct,t)):we(St),ge(St,n)}var yn=null,wl=!1,Ru=!1;function vy(t){yn===null?yn=[t]:yn.push(t)}function kw(t){wl=!0,vy(t)}function _r(){if(!Ru&&yn!==null){Ru=!0;var t=0,e=de;try{var n=yn;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yn=null,wl=!1}catch(s){throw yn!==null&&(yn=yn.slice(t+1)),qg(Th,_r),s}finally{de=e,Ru=!1}}return null}var hs=[],ds=0,Ua=null,za=0,Lt=[],jt=0,Fr=null,_n=1,vn="";function Rr(t,e){hs[ds++]=za,hs[ds++]=Ua,Ua=t,za=e}function wy(t,e,n){Lt[jt++]=_n,Lt[jt++]=vn,Lt[jt++]=Fr,Fr=t;var r=_n;t=vn;var s=32-Qt(r)-1;r&=~(1<<s),n+=1;var i=32-Qt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,_n=1<<32-Qt(e)+s|n<<s|r,vn=i+t}else _n=1<<i|n<<s|r,vn=t}function Ph(t){t.return!==null&&(Rr(t,1),wy(t,1,0))}function Vh(t){for(;t===Ua;)Ua=hs[--ds],hs[ds]=null,za=hs[--ds],hs[ds]=null;for(;t===Fr;)Fr=Lt[--jt],Lt[jt]=null,vn=Lt[--jt],Lt[jt]=null,_n=Lt[--jt],Lt[jt]=null}var Vt=null,kt=null,Te=!1,Gt=null;function Ey(t,e){var n=Ut(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,kt=Zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fr!==null?{id:_n,overflow:vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ut(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,kt=null,!0):!1;default:return!1}}function Ec(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tc(t){if(Te){var e=kt;if(e){var n=e;if(!wp(t,e)){if(Ec(t))throw Error(j(418));e=Zn(n.nextSibling);var r=Vt;e&&wp(t,e)?Ey(r,n):(t.flags=t.flags&-4097|2,Te=!1,Vt=t)}}else{if(Ec(t))throw Error(j(418));t.flags=t.flags&-4097|2,Te=!1,Vt=t}}}function Ep(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function Zo(t){if(t!==Vt)return!1;if(!Te)return Ep(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yc(t.type,t.memoizedProps)),e&&(e=kt)){if(Ec(t))throw Ty(),Error(j(418));for(;e;)Ey(t,e),e=Zn(e.nextSibling)}if(Ep(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kt=Zn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kt=null}}else kt=Vt?Zn(t.stateNode.nextSibling):null;return!0}function Ty(){for(var t=kt;t;)t=Zn(t.nextSibling)}function Cs(){kt=Vt=null,Te=!1}function Dh(t){Gt===null?Gt=[t]:Gt.push(t)}var Pw=kn.ReactCurrentBatchConfig;function yi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function ea(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Tp(t){var e=t._init;return e(t._payload)}function Sy(t){function e(I,w){if(t){var x=I.deletions;x===null?(I.deletions=[w],I.flags|=16):x.push(w)}}function n(I,w){if(!t)return null;for(;w!==null;)e(I,w),w=w.sibling;return null}function r(I,w){for(I=new Map;w!==null;)w.key!==null?I.set(w.key,w):I.set(w.index,w),w=w.sibling;return I}function s(I,w){return I=rr(I,w),I.index=0,I.sibling=null,I}function i(I,w,x){return I.index=x,t?(x=I.alternate,x!==null?(x=x.index,x<w?(I.flags|=2,w):x):(I.flags|=2,w)):(I.flags|=1048576,w)}function a(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,w,x,D){return w===null||w.tag!==6?(w=Mu(x,I.mode,D),w.return=I,w):(w=s(w,x),w.return=I,w)}function u(I,w,x,D){var U=x.type;return U===is?f(I,w,x.props.children,D,x.key):w!==null&&(w.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===$n&&Tp(U)===w.type)?(D=s(w,x.props),D.ref=yi(I,w,x),D.return=I,D):(D=Ta(x.type,x.key,x.props,null,I.mode,D),D.ref=yi(I,w,x),D.return=I,D)}function h(I,w,x,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=Ou(x,I.mode,D),w.return=I,w):(w=s(w,x.children||[]),w.return=I,w)}function f(I,w,x,D,U){return w===null||w.tag!==7?(w=Or(x,I.mode,D,U),w.return=I,w):(w=s(w,x),w.return=I,w)}function m(I,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Mu(""+w,I.mode,x),w.return=I,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case $o:return x=Ta(w.type,w.key,w.props,null,I.mode,x),x.ref=yi(I,null,w),x.return=I,x;case ss:return w=Ou(w,I.mode,x),w.return=I,w;case $n:var D=w._init;return m(I,D(w._payload),x)}if(Ii(w)||di(w))return w=Or(w,I.mode,x,null),w.return=I,w;ea(I,w)}return null}function g(I,w,x,D){var U=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return U!==null?null:l(I,w,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case $o:return x.key===U?u(I,w,x,D):null;case ss:return x.key===U?h(I,w,x,D):null;case $n:return U=x._init,g(I,w,U(x._payload),D)}if(Ii(x)||di(x))return U!==null?null:f(I,w,x,D,null);ea(I,x)}return null}function C(I,w,x,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return I=I.get(x)||null,l(w,I,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case $o:return I=I.get(D.key===null?x:D.key)||null,u(w,I,D,U);case ss:return I=I.get(D.key===null?x:D.key)||null,h(w,I,D,U);case $n:var F=D._init;return C(I,w,x,F(D._payload),U)}if(Ii(D)||di(D))return I=I.get(x)||null,f(w,I,D,U,null);ea(w,D)}return null}function k(I,w,x,D){for(var U=null,F=null,v=w,y=w=0,E=null;v!==null&&y<x.length;y++){v.index>y?(E=v,v=null):E=v.sibling;var S=g(I,v,x[y],D);if(S===null){v===null&&(v=E);break}t&&v&&S.alternate===null&&e(I,v),w=i(S,w,y),F===null?U=S:F.sibling=S,F=S,v=E}if(y===x.length)return n(I,v),Te&&Rr(I,y),U;if(v===null){for(;y<x.length;y++)v=m(I,x[y],D),v!==null&&(w=i(v,w,y),F===null?U=v:F.sibling=v,F=v);return Te&&Rr(I,y),U}for(v=r(I,v);y<x.length;y++)E=C(v,I,y,x[y],D),E!==null&&(t&&E.alternate!==null&&v.delete(E.key===null?y:E.key),w=i(E,w,y),F===null?U=E:F.sibling=E,F=E);return t&&v.forEach(function(A){return e(I,A)}),Te&&Rr(I,y),U}function V(I,w,x,D){var U=di(x);if(typeof U!="function")throw Error(j(150));if(x=U.call(x),x==null)throw Error(j(151));for(var F=U=null,v=w,y=w=0,E=null,S=x.next();v!==null&&!S.done;y++,S=x.next()){v.index>y?(E=v,v=null):E=v.sibling;var A=g(I,v,S.value,D);if(A===null){v===null&&(v=E);break}t&&v&&A.alternate===null&&e(I,v),w=i(A,w,y),F===null?U=A:F.sibling=A,F=A,v=E}if(S.done)return n(I,v),Te&&Rr(I,y),U;if(v===null){for(;!S.done;y++,S=x.next())S=m(I,S.value,D),S!==null&&(w=i(S,w,y),F===null?U=S:F.sibling=S,F=S);return Te&&Rr(I,y),U}for(v=r(I,v);!S.done;y++,S=x.next())S=C(v,I,y,S.value,D),S!==null&&(t&&S.alternate!==null&&v.delete(S.key===null?y:S.key),w=i(S,w,y),F===null?U=S:F.sibling=S,F=S);return t&&v.forEach(function(R){return e(I,R)}),Te&&Rr(I,y),U}function L(I,w,x,D){if(typeof x=="object"&&x!==null&&x.type===is&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case $o:e:{for(var U=x.key,F=w;F!==null;){if(F.key===U){if(U=x.type,U===is){if(F.tag===7){n(I,F.sibling),w=s(F,x.props.children),w.return=I,I=w;break e}}else if(F.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===$n&&Tp(U)===F.type){n(I,F.sibling),w=s(F,x.props),w.ref=yi(I,F,x),w.return=I,I=w;break e}n(I,F);break}else e(I,F);F=F.sibling}x.type===is?(w=Or(x.props.children,I.mode,D,x.key),w.return=I,I=w):(D=Ta(x.type,x.key,x.props,null,I.mode,D),D.ref=yi(I,w,x),D.return=I,I=D)}return a(I);case ss:e:{for(F=x.key;w!==null;){if(w.key===F)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(I,w.sibling),w=s(w,x.children||[]),w.return=I,I=w;break e}else{n(I,w);break}else e(I,w);w=w.sibling}w=Ou(x,I.mode,D),w.return=I,I=w}return a(I);case $n:return F=x._init,L(I,w,F(x._payload),D)}if(Ii(x))return k(I,w,x,D);if(di(x))return V(I,w,x,D);ea(I,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(n(I,w.sibling),w=s(w,x),w.return=I,I=w):(n(I,w),w=Mu(x,I.mode,D),w.return=I,I=w),a(I)):n(I,w)}return L}var Rs=Sy(!0),Iy=Sy(!1),Ba=yr(null),$a=null,fs=null,bh=null;function Mh(){bh=fs=$a=null}function Oh(t){var e=Ba.current;we(Ba),t._currentValue=e}function Sc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ws(t,e){$a=t,bh=fs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function Bt(t){var e=t._currentValue;if(bh!==t)if(t={context:t,memoizedValue:e,next:null},fs===null){if($a===null)throw Error(j(308));fs=t,$a.dependencies={lanes:0,firstContext:t}}else fs=fs.next=t;return e}var Vr=null;function Lh(t){Vr===null?Vr=[t]:Vr.push(t)}function Ay(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Lh(e)):(n.next=s.next,s.next=n),e.interleaved=n,In(t,r)}function In(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qn=!1;function jh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function er(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,In(t,n)}return s=r.interleaved,s===null?(e.next=e,Lh(r)):(e.next=s.next,s.next=e),r.interleaved=e,In(t,n)}function ga(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sh(t,n)}}function Sp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qa(t,e,n,r){var s=t.updateQueue;qn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?i=h:a.next=h,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,f=h=u=null,l=i;do{var g=l.lane,C=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var k=t,V=l;switch(g=e,C=n,V.tag){case 1:if(k=V.payload,typeof k=="function"){m=k.call(C,m,g);break e}m=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=V.payload,g=typeof k=="function"?k.call(C,m,g):k,g==null)break e;m=Ae({},m,g);break e;case 2:qn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else C={eventTime:C,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=C,u=m):f=f.next=C,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);zr|=a,t.lanes=a,t.memoizedState=m}}function Ip(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(j(191,s));s.call(r)}}}var To={},ln=yr(To),no=yr(To),ro=yr(To);function Dr(t){if(t===To)throw Error(j(174));return t}function Fh(t,e){switch(ge(ro,e),ge(no,t),ge(ln,To),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rc(e,t)}we(ln),ge(ln,e)}function Ns(){we(ln),we(no),we(ro)}function Cy(t){Dr(ro.current);var e=Dr(ln.current),n=rc(e,t.type);e!==n&&(ge(no,t),ge(ln,n))}function Uh(t){no.current===t&&(we(ln),we(no))}var Se=yr(0);function Ha(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nu=[];function zh(){for(var t=0;t<Nu.length;t++)Nu[t]._workInProgressVersionPrimary=null;Nu.length=0}var ya=kn.ReactCurrentDispatcher,ku=kn.ReactCurrentBatchConfig,Ur=0,Ie=null,$e=null,Qe=null,Wa=!1,Oi=!1,so=0,Vw=0;function st(){throw Error(j(321))}function Bh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yt(t[n],e[n]))return!1;return!0}function $h(t,e,n,r,s,i){if(Ur=i,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ya.current=t===null||t.memoizedState===null?Ow:Lw,t=n(r,s),Oi){i=0;do{if(Oi=!1,so=0,25<=i)throw Error(j(301));i+=1,Qe=$e=null,e.updateQueue=null,ya.current=jw,t=n(r,s)}while(Oi)}if(ya.current=Ga,e=$e!==null&&$e.next!==null,Ur=0,Qe=$e=Ie=null,Wa=!1,e)throw Error(j(300));return t}function qh(){var t=so!==0;return so=0,t}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Ie.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function $t(){if($e===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Qe===null?Ie.memoizedState:Qe.next;if(e!==null)Qe=e,$e=t;else{if(t===null)throw Error(j(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Qe===null?Ie.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function io(t,e){return typeof e=="function"?e(t):e}function Pu(t){var e=$t(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,h=i;do{var f=h.lane;if((Ur&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,a=r):u=u.next=m,Ie.lanes|=f,zr|=f}h=h.next}while(h!==null&&h!==i);u===null?a=r:u.next=l,Yt(r,e.memoizedState)||(Tt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ie.lanes|=i,zr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Vu(t){var e=$t(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Yt(i,e.memoizedState)||(Tt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ry(){}function Ny(t,e){var n=Ie,r=$t(),s=e(),i=!Yt(r.memoizedState,s);if(i&&(r.memoizedState=s,Tt=!0),r=r.queue,Hh(Vy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,oo(9,Py.bind(null,n,r,s,e),void 0,null),Ke===null)throw Error(j(349));Ur&30||ky(n,e,s)}return s}function ky(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Py(t,e,n,r){e.value=n,e.getSnapshot=r,Dy(e)&&by(t)}function Vy(t,e,n){return n(function(){Dy(e)&&by(t)})}function Dy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yt(t,n)}catch{return!0}}function by(t){var e=In(t,1);e!==null&&Kt(e,t,1,-1)}function Ap(t){var e=rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:t},e.queue=t,t=t.dispatch=Mw.bind(null,Ie,t),[e.memoizedState,t]}function oo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function My(){return $t().memoizedState}function _a(t,e,n,r){var s=rn();Ie.flags|=t,s.memoizedState=oo(1|e,n,void 0,r===void 0?null:r)}function El(t,e,n,r){var s=$t();r=r===void 0?null:r;var i=void 0;if($e!==null){var a=$e.memoizedState;if(i=a.destroy,r!==null&&Bh(r,a.deps)){s.memoizedState=oo(e,n,i,r);return}}Ie.flags|=t,s.memoizedState=oo(1|e,n,i,r)}function xp(t,e){return _a(8390656,8,t,e)}function Hh(t,e){return El(2048,8,t,e)}function Oy(t,e){return El(4,2,t,e)}function Ly(t,e){return El(4,4,t,e)}function jy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Fy(t,e,n){return n=n!=null?n.concat([t]):null,El(4,4,jy.bind(null,e,t),n)}function Wh(){}function Uy(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zy(t,e){var n=$t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Bh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function By(t,e,n){return Ur&21?(Yt(n,e)||(n=Gg(),Ie.lanes|=n,zr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=n)}function Dw(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=ku.transition;ku.transition={};try{t(!1),e()}finally{de=n,ku.transition=r}}function $y(){return $t().memoizedState}function bw(t,e,n){var r=nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qy(t))Hy(e,n);else if(n=Ay(t,e,n,r),n!==null){var s=pt();Kt(n,t,r,s),Wy(n,e,r)}}function Mw(t,e,n){var r=nr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qy(t))Hy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Yt(l,a)){var u=e.interleaved;u===null?(s.next=s,Lh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Ay(t,e,s,r),n!==null&&(s=pt(),Kt(n,t,r,s),Wy(n,e,r))}}function qy(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function Hy(t,e){Oi=Wa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Wy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sh(t,n)}}var Ga={readContext:Bt,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useInsertionEffect:st,useLayoutEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useMutableSource:st,useSyncExternalStore:st,useId:st,unstable_isNewReconciler:!1},Ow={readContext:Bt,useCallback:function(t,e){return rn().memoizedState=[t,e===void 0?null:e],t},useContext:Bt,useEffect:xp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_a(4194308,4,jy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _a(4194308,4,t,e)},useInsertionEffect:function(t,e){return _a(4,2,t,e)},useMemo:function(t,e){var n=rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bw.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=rn();return t={current:t},e.memoizedState=t},useState:Ap,useDebugValue:Wh,useDeferredValue:function(t){return rn().memoizedState=t},useTransition:function(){var t=Ap(!1),e=t[0];return t=Dw.bind(null,t[1]),rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,s=rn();if(Te){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),Ke===null)throw Error(j(349));Ur&30||ky(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,xp(Vy.bind(null,r,i,t),[t]),r.flags|=2048,oo(9,Py.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=rn(),e=Ke.identifierPrefix;if(Te){var n=vn,r=_n;n=(r&~(1<<32-Qt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=so++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Vw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Lw={readContext:Bt,useCallback:Uy,useContext:Bt,useEffect:Hh,useImperativeHandle:Fy,useInsertionEffect:Oy,useLayoutEffect:Ly,useMemo:zy,useReducer:Pu,useRef:My,useState:function(){return Pu(io)},useDebugValue:Wh,useDeferredValue:function(t){var e=$t();return By(e,$e.memoizedState,t)},useTransition:function(){var t=Pu(io)[0],e=$t().memoizedState;return[t,e]},useMutableSource:Ry,useSyncExternalStore:Ny,useId:$y,unstable_isNewReconciler:!1},jw={readContext:Bt,useCallback:Uy,useContext:Bt,useEffect:Hh,useImperativeHandle:Fy,useInsertionEffect:Oy,useLayoutEffect:Ly,useMemo:zy,useReducer:Vu,useRef:My,useState:function(){return Vu(io)},useDebugValue:Wh,useDeferredValue:function(t){var e=$t();return $e===null?e.memoizedState=t:By(e,$e.memoizedState,t)},useTransition:function(){var t=Vu(io)[0],e=$t().memoizedState;return[t,e]},useMutableSource:Ry,useSyncExternalStore:Ny,useId:$y,unstable_isNewReconciler:!1};function Ht(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ic(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tl={isMounted:function(t){return(t=t._reactInternals)?Wr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pt(),s=nr(t),i=wn(r,s);i.payload=e,n!=null&&(i.callback=n),e=er(t,i,s),e!==null&&(Kt(e,t,s,r),ga(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pt(),s=nr(t),i=wn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=er(t,i,s),e!==null&&(Kt(e,t,s,r),ga(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pt(),r=nr(t),s=wn(n,r);s.tag=2,e!=null&&(s.callback=e),e=er(t,s,r),e!==null&&(Kt(e,t,r,n),ga(e,t,r))}};function Cp(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ji(n,r)||!Ji(s,i):!0}function Gy(t,e,n){var r=!1,s=ur,i=e.contextType;return typeof i=="object"&&i!==null?i=Bt(i):(s=It(e)?jr:ct.current,r=e.contextTypes,i=(r=r!=null)?xs(t,s):ur),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Rp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tl.enqueueReplaceState(e,e.state,null)}function Ac(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},jh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Bt(i):(i=It(e)?jr:ct.current,s.context=xs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ic(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Tl.enqueueReplaceState(s,s.state,null),qa(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ks(t,e){try{var n="",r=e;do n+=d1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Du(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function xc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Fw=typeof WeakMap=="function"?WeakMap:Map;function Qy(t,e,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ka||(Ka=!0,Oc=r),xc(t,e)},n}function Ky(t,e,n){n=wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){xc(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){xc(t,e),typeof r!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Np(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Fw;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Zw.bind(null,t,e,n),e.then(t,t))}function kp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wn(-1,1),e.tag=2,er(n,e,1))),n.lanes|=1),t)}var Uw=kn.ReactCurrentOwner,Tt=!1;function ft(t,e,n,r){e.child=t===null?Iy(e,null,n,r):Rs(e,t.child,n,r)}function Vp(t,e,n,r,s){n=n.render;var i=e.ref;return ws(e,s),r=$h(t,e,n,r,i,s),n=qh(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,An(t,e,s)):(Te&&n&&Ph(e),e.flags|=1,ft(t,e,r,s),e.child)}function Dp(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ed(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Xy(t,e,i,r,s)):(t=Ta(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ji,n(a,r)&&t.ref===e.ref)return An(t,e,s)}return e.flags|=1,t=rr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Xy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ji(i,r)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,An(t,e,s)}return Cc(t,e,n,r,s)}function Yy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(ms,Nt),Nt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(ms,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(ms,Nt),Nt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(ms,Nt),Nt|=r;return ft(t,e,s,n),e.child}function Jy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cc(t,e,n,r,s){var i=It(n)?jr:ct.current;return i=xs(e,i),ws(e,s),n=$h(t,e,n,r,i,s),r=qh(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,An(t,e,s)):(Te&&r&&Ph(e),e.flags|=1,ft(t,e,n,s),e.child)}function bp(t,e,n,r,s){if(It(n)){var i=!0;Fa(e)}else i=!1;if(ws(e,s),e.stateNode===null)va(t,e),Gy(e,n,r),Ac(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=Bt(h):(h=It(n)?jr:ct.current,h=xs(e,h));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Rp(e,a,r,h),qn=!1;var g=e.memoizedState;a.state=g,qa(e,r,a,s),u=e.memoizedState,l!==r||g!==u||St.current||qn?(typeof f=="function"&&(Ic(e,n,f,r),u=e.memoizedState),(l=qn||Cp(e,n,l,r,g,u,h))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=h,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,xy(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Ht(e.type,l),a.props=h,m=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Bt(u):(u=It(n)?jr:ct.current,u=xs(e,u));var C=n.getDerivedStateFromProps;(f=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Rp(e,a,r,u),qn=!1,g=e.memoizedState,a.state=g,qa(e,r,a,s);var k=e.memoizedState;l!==m||g!==k||St.current||qn?(typeof C=="function"&&(Ic(e,n,C,r),k=e.memoizedState),(h=qn||Cp(e,n,h,r,g,k,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,k,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,k,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=k),a.props=r,a.state=k,a.context=u,r=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Rc(t,e,n,r,i,s)}function Rc(t,e,n,r,s,i){Jy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&vp(e,n,!1),An(t,e,i);r=e.stateNode,Uw.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Rs(e,t.child,null,i),e.child=Rs(e,null,l,i)):ft(t,e,l,i),e.memoizedState=r.state,s&&vp(e,n,!0),e.child}function Zy(t){var e=t.stateNode;e.pendingContext?_p(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_p(t,e.context,!1),Fh(t,e.containerInfo)}function Mp(t,e,n,r,s){return Cs(),Dh(s),e.flags|=256,ft(t,e,n,r),e.child}var Nc={dehydrated:null,treeContext:null,retryLane:0};function kc(t){return{baseLanes:t,cachePool:null,transitions:null}}function e_(t,e,n){var r=e.pendingProps,s=Se.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(Se,s&1),t===null)return Tc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Al(a,r,0,null),t=Or(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=kc(n),e.memoizedState=Nc,t):Gh(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return zw(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=rr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=rr(l,i):(i=Or(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?kc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Nc,r}return i=t.child,t=i.sibling,r=rr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Gh(t,e){return e=Al({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ta(t,e,n,r){return r!==null&&Dh(r),Rs(e,t.child,null,n),t=Gh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zw(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Du(Error(j(422))),ta(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Al({mode:"visible",children:r.children},s,0,null),i=Or(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Rs(e,t.child,null,a),e.child.memoizedState=kc(a),e.memoizedState=Nc,i);if(!(e.mode&1))return ta(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(j(419)),r=Du(i,r,void 0),ta(t,e,a,r)}if(l=(a&t.childLanes)!==0,Tt||l){if(r=Ke,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,In(t,s),Kt(r,t,s,-1))}return Zh(),r=Du(Error(j(421))),ta(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,kt=Zn(s.nextSibling),Vt=e,Te=!0,Gt=null,t!==null&&(Lt[jt++]=_n,Lt[jt++]=vn,Lt[jt++]=Fr,_n=t.id,vn=t.overflow,Fr=e),e=Gh(e,r.children),e.flags|=4096,e)}function Op(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sc(t.return,e,n)}function bu(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function t_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ft(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Op(t,n,e);else if(t.tag===19)Op(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Se,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ha(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),bu(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ha(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}bu(e,!0,n,null,i);break;case"together":bu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function va(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function An(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Bw(t,e,n){switch(e.tag){case 3:Zy(e),Cs();break;case 5:Cy(e);break;case 1:It(e.type)&&Fa(e);break;case 4:Fh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(Ba,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?e_(t,e,n):(ge(Se,Se.current&1),t=An(t,e,n),t!==null?t.sibling:null);ge(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return t_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,Yy(t,e,n)}return An(t,e,n)}var n_,Pc,r_,s_;n_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pc=function(){};r_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Dr(ln.current);var i=null;switch(n){case"input":s=Zu(t,s),r=Zu(t,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=nc(t,s),r=nc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=La)}sc(n,r);var a;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Hi.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Hi.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&_e("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};s_=function(t,e,n,r){n!==r&&(e.flags|=4)};function _i(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $w(t,e,n){var r=e.pendingProps;switch(Vh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return It(e.type)&&ja(),it(e),null;case 3:return r=e.stateNode,Ns(),we(St),we(ct),zh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gt!==null&&(Fc(Gt),Gt=null))),Pc(t,e),it(e),null;case 5:Uh(e);var s=Dr(ro.current);if(n=e.type,t!==null&&e.stateNode!=null)r_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return it(e),null}if(t=Dr(ln.current),Zo(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[on]=e,r[to]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<xi.length;s++)_e(xi[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Hf(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":Gf(r,i),_e("invalid",r)}sc(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Jo(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Jo(r.textContent,l,t),s=["children",""+l]):Hi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&_e("scroll",r)}switch(n){case"input":qo(r),Wf(r,i,!0);break;case"textarea":qo(r),Qf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=La)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[on]=e,t[to]=r,n_(t,e,!1,!1),e.stateNode=t;e:{switch(a=ic(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<xi.length;s++)_e(xi[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":Hf(t,r),s=Zu(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),_e("invalid",t);break;case"textarea":Gf(t,r),s=nc(t,r),_e("invalid",t);break;default:s=r}sc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Mg(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Dg(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Wi(t,u):typeof u=="number"&&Wi(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hi.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",t):u!=null&&yh(t,i,u,a))}switch(n){case"input":qo(t),Wf(t,r,!1);break;case"textarea":qo(t),Qf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+lr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?gs(t,!!r.multiple,i,!1):r.defaultValue!=null&&gs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=La)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)s_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=Dr(ro.current),Dr(ln.current),Zo(e)){if(r=e.stateNode,n=e.memoizedProps,r[on]=e,(i=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:Jo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[on]=e,e.stateNode=r}return it(e),null;case 13:if(we(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&kt!==null&&e.mode&1&&!(e.flags&128))Ty(),Cs(),e.flags|=98560,i=!1;else if(i=Zo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(j(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(j(317));i[on]=e}else Cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),i=!1}else Gt!==null&&(Fc(Gt),Gt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?qe===0&&(qe=3):Zh())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return Ns(),Pc(t,e),t===null&&Zi(e.stateNode.containerInfo),it(e),null;case 10:return Oh(e.type._context),it(e),null;case 17:return It(e.type)&&ja(),it(e),null;case 19:if(we(Se),i=e.memoizedState,i===null)return it(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)_i(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ha(t),a!==null){for(e.flags|=128,_i(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Se,Se.current&1|2),e.child}t=t.sibling}i.tail!==null&&be()>Ps&&(e.flags|=128,r=!0,_i(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ha(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),_i(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Te)return it(e),null}else 2*be()-i.renderingStartTime>Ps&&n!==1073741824&&(e.flags|=128,r=!0,_i(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=be(),e.sibling=null,n=Se.current,ge(Se,r?n&1|2:n&1),e):(it(e),null);case 22:case 23:return Jh(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nt&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function qw(t,e){switch(Vh(e),e.tag){case 1:return It(e.type)&&ja(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ns(),we(St),we(ct),zh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Uh(e),null;case 13:if(we(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));Cs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Se),null;case 4:return Ns(),null;case 10:return Oh(e.type._context),null;case 22:case 23:return Jh(),null;case 24:return null;default:return null}}var na=!1,lt=!1,Hw=typeof WeakSet=="function"?WeakSet:Set,H=null;function ps(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pe(t,e,r)}else n.current=null}function Vc(t,e,n){try{n()}catch(r){Pe(t,e,r)}}var Lp=!1;function Ww(t,e){if(mc=ba,t=uy(),kh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,f=0,m=t,g=null;t:for(;;){for(var C;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(C=m.firstChild)!==null;)g=m,m=C;for(;;){if(m===t)break t;if(g===n&&++h===s&&(l=a),g===i&&++f===r&&(u=a),(C=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=C}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(gc={focusedElem:t,selectionRange:n},ba=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var V=k.memoizedProps,L=k.memoizedState,I=e.stateNode,w=I.getSnapshotBeforeUpdate(e.elementType===e.type?V:Ht(e.type,V),L);I.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(D){Pe(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return k=Lp,Lp=!1,k}function Li(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Vc(e,n,i)}s=s.next}while(s!==r)}}function Sl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function i_(t){var e=t.alternate;e!==null&&(t.alternate=null,i_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[on],delete e[to],delete e[vc],delete e[Rw],delete e[Nw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function o_(t){return t.tag===5||t.tag===3||t.tag===4}function jp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||o_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=La));else if(r!==4&&(t=t.child,t!==null))for(bc(t,e,n),t=t.sibling;t!==null;)bc(t,e,n),t=t.sibling}function Mc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mc(t,e,n),t=t.sibling;t!==null;)Mc(t,e,n),t=t.sibling}var Ye=null,Wt=!1;function Fn(t,e,n){for(n=n.child;n!==null;)a_(t,e,n),n=n.sibling}function a_(t,e,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(ml,n)}catch{}switch(n.tag){case 5:lt||ps(n,e);case 6:var r=Ye,s=Wt;Ye=null,Fn(t,e,n),Ye=r,Wt=s,Ye!==null&&(Wt?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(Wt?(t=Ye,n=n.stateNode,t.nodeType===8?Cu(t.parentNode,n):t.nodeType===1&&Cu(t,n),Xi(t)):Cu(Ye,n.stateNode));break;case 4:r=Ye,s=Wt,Ye=n.stateNode.containerInfo,Wt=!0,Fn(t,e,n),Ye=r,Wt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Vc(n,e,a),s=s.next}while(s!==r)}Fn(t,e,n);break;case 1:if(!lt&&(ps(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Pe(n,e,l)}Fn(t,e,n);break;case 21:Fn(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,Fn(t,e,n),lt=r):Fn(t,e,n);break;default:Fn(t,e,n)}}function Fp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Hw),e.forEach(function(r){var s=tE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ye=l.stateNode,Wt=!1;break e;case 3:Ye=l.stateNode.containerInfo,Wt=!0;break e;case 4:Ye=l.stateNode.containerInfo,Wt=!0;break e}l=l.return}if(Ye===null)throw Error(j(160));a_(i,a,s),Ye=null,Wt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Pe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)l_(e,t),e=e.sibling}function l_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qt(e,t),nn(t),r&4){try{Li(3,t,t.return),Sl(3,t)}catch(V){Pe(t,t.return,V)}try{Li(5,t,t.return)}catch(V){Pe(t,t.return,V)}}break;case 1:qt(e,t),nn(t),r&512&&n!==null&&ps(n,n.return);break;case 5:if(qt(e,t),nn(t),r&512&&n!==null&&ps(n,n.return),t.flags&32){var s=t.stateNode;try{Wi(s,"")}catch(V){Pe(t,t.return,V)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&kg(s,i),ic(l,a);var h=ic(l,i);for(a=0;a<u.length;a+=2){var f=u[a],m=u[a+1];f==="style"?Mg(s,m):f==="dangerouslySetInnerHTML"?Dg(s,m):f==="children"?Wi(s,m):yh(s,f,m,h)}switch(l){case"input":ec(s,i);break;case"textarea":Pg(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var C=i.value;C!=null?gs(s,!!i.multiple,C,!1):g!==!!i.multiple&&(i.defaultValue!=null?gs(s,!!i.multiple,i.defaultValue,!0):gs(s,!!i.multiple,i.multiple?[]:"",!1))}s[to]=i}catch(V){Pe(t,t.return,V)}}break;case 6:if(qt(e,t),nn(t),r&4){if(t.stateNode===null)throw Error(j(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(V){Pe(t,t.return,V)}}break;case 3:if(qt(e,t),nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xi(e.containerInfo)}catch(V){Pe(t,t.return,V)}break;case 4:qt(e,t),nn(t);break;case 13:qt(e,t),nn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Xh=be())),r&4&&Fp(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(h=lt)||f,qt(e,t),lt=h):qt(e,t),nn(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(m=H=f;H!==null;){switch(g=H,C=g.child,g.tag){case 0:case 11:case 14:case 15:Li(4,g,g.return);break;case 1:ps(g,g.return);var k=g.stateNode;if(typeof k.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(V){Pe(r,n,V)}}break;case 5:ps(g,g.return);break;case 22:if(g.memoizedState!==null){zp(m);continue}}C!==null?(C.return=g,H=C):zp(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=bg("display",a))}catch(V){Pe(t,t.return,V)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(V){Pe(t,t.return,V)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:qt(e,t),nn(t),r&4&&Fp(t);break;case 21:break;default:qt(e,t),nn(t)}}function nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(o_(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Wi(s,""),r.flags&=-33);var i=jp(t);Mc(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=jp(t);bc(t,l,a);break;default:throw Error(j(161))}}catch(u){Pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gw(t,e,n){H=t,u_(t)}function u_(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||na;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||lt;l=na;var h=lt;if(na=a,(lt=u)&&!h)for(H=s;H!==null;)a=H,u=a.child,a.tag===22&&a.memoizedState!==null?Bp(s):u!==null?(u.return=a,H=u):Bp(s);for(;i!==null;)H=i,u_(i),i=i.sibling;H=s,na=l,lt=h}Up(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Up(t)}}function Up(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Sl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ht(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ip(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ip(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Xi(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}lt||e.flags&512&&Dc(e)}catch(g){Pe(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function zp(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Bp(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sl(4,e)}catch(u){Pe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Pe(e,s,u)}}var i=e.return;try{Dc(e)}catch(u){Pe(e,i,u)}break;case 5:var a=e.return;try{Dc(e)}catch(u){Pe(e,a,u)}}}catch(u){Pe(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var Qw=Math.ceil,Qa=kn.ReactCurrentDispatcher,Qh=kn.ReactCurrentOwner,zt=kn.ReactCurrentBatchConfig,le=0,Ke=null,Le=null,et=0,Nt=0,ms=yr(0),qe=0,ao=null,zr=0,Il=0,Kh=0,ji=null,wt=null,Xh=0,Ps=1/0,gn=null,Ka=!1,Oc=null,tr=null,ra=!1,Qn=null,Xa=0,Fi=0,Lc=null,wa=-1,Ea=0;function pt(){return le&6?be():wa!==-1?wa:wa=be()}function nr(t){return t.mode&1?le&2&&et!==0?et&-et:Pw.transition!==null?(Ea===0&&(Ea=Gg()),Ea):(t=de,t!==0||(t=window.event,t=t===void 0?16:ey(t.type)),t):1}function Kt(t,e,n,r){if(50<Fi)throw Fi=0,Lc=null,Error(j(185));vo(t,n,r),(!(le&2)||t!==Ke)&&(t===Ke&&(!(le&2)&&(Il|=n),qe===4&&Wn(t,et)),At(t,r),n===1&&le===0&&!(e.mode&1)&&(Ps=be()+500,wl&&_r()))}function At(t,e){var n=t.callbackNode;P1(t,e);var r=Da(t,t===Ke?et:0);if(r===0)n!==null&&Yf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Yf(n),e===1)t.tag===0?kw($p.bind(null,t)):vy($p.bind(null,t)),xw(function(){!(le&6)&&_r()}),n=null;else{switch(Qg(r)){case 1:n=Th;break;case 4:n=Hg;break;case 16:n=Va;break;case 536870912:n=Wg;break;default:n=Va}n=y_(n,c_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function c_(t,e){if(wa=-1,Ea=0,le&6)throw Error(j(327));var n=t.callbackNode;if(Es()&&t.callbackNode!==n)return null;var r=Da(t,t===Ke?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ya(t,r);else{e=r;var s=le;le|=2;var i=d_();(Ke!==t||et!==e)&&(gn=null,Ps=be()+500,Mr(t,e));do try{Yw();break}catch(l){h_(t,l)}while(!0);Mh(),Qa.current=i,le=s,Le!==null?e=0:(Ke=null,et=0,e=qe)}if(e!==0){if(e===2&&(s=cc(t),s!==0&&(r=s,e=jc(t,s))),e===1)throw n=ao,Mr(t,0),Wn(t,r),At(t,be()),n;if(e===6)Wn(t,r);else{if(s=t.current.alternate,!(r&30)&&!Kw(s)&&(e=Ya(t,r),e===2&&(i=cc(t),i!==0&&(r=i,e=jc(t,i))),e===1))throw n=ao,Mr(t,0),Wn(t,r),At(t,be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:Nr(t,wt,gn);break;case 3:if(Wn(t,r),(r&130023424)===r&&(e=Xh+500-be(),10<e)){if(Da(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){pt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=_c(Nr.bind(null,t,wt,gn),e);break}Nr(t,wt,gn);break;case 4:if(Wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Qt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Qw(r/1960))-r,10<r){t.timeoutHandle=_c(Nr.bind(null,t,wt,gn),r);break}Nr(t,wt,gn);break;case 5:Nr(t,wt,gn);break;default:throw Error(j(329))}}}return At(t,be()),t.callbackNode===n?c_.bind(null,t):null}function jc(t,e){var n=ji;return t.current.memoizedState.isDehydrated&&(Mr(t,e).flags|=256),t=Ya(t,e),t!==2&&(e=wt,wt=n,e!==null&&Fc(e)),t}function Fc(t){wt===null?wt=t:wt.push.apply(wt,t)}function Kw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Yt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wn(t,e){for(e&=~Kh,e&=~Il,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qt(e),r=1<<n;t[n]=-1,e&=~r}}function $p(t){if(le&6)throw Error(j(327));Es();var e=Da(t,0);if(!(e&1))return At(t,be()),null;var n=Ya(t,e);if(t.tag!==0&&n===2){var r=cc(t);r!==0&&(e=r,n=jc(t,r))}if(n===1)throw n=ao,Mr(t,0),Wn(t,e),At(t,be()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nr(t,wt,gn),At(t,be()),null}function Yh(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Ps=be()+500,wl&&_r())}}function Br(t){Qn!==null&&Qn.tag===0&&!(le&6)&&Es();var e=le;le|=1;var n=zt.transition,r=de;try{if(zt.transition=null,de=1,t)return t()}finally{de=r,zt.transition=n,le=e,!(le&6)&&_r()}}function Jh(){Nt=ms.current,we(ms)}function Mr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Aw(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch(Vh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ja();break;case 3:Ns(),we(St),we(ct),zh();break;case 5:Uh(r);break;case 4:Ns();break;case 13:we(Se);break;case 19:we(Se);break;case 10:Oh(r.type._context);break;case 22:case 23:Jh()}n=n.return}if(Ke=t,Le=t=rr(t.current,null),et=Nt=e,qe=0,ao=null,Kh=Il=zr=0,wt=ji=null,Vr!==null){for(e=0;e<Vr.length;e++)if(n=Vr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Vr=null}return t}function h_(t,e){do{var n=Le;try{if(Mh(),ya.current=Ga,Wa){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Wa=!1}if(Ur=0,Qe=$e=Ie=null,Oi=!1,so=0,Qh.current=null,n===null||n.return===null){qe=1,ao=e,Le=null;break}e:{var i=t,a=n.return,l=n,u=e;if(e=et,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=l,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var C=kp(a);if(C!==null){C.flags&=-257,Pp(C,a,l,i,e),C.mode&1&&Np(i,h,e),e=C,u=h;var k=e.updateQueue;if(k===null){var V=new Set;V.add(u),e.updateQueue=V}else k.add(u);break e}else{if(!(e&1)){Np(i,h,e),Zh();break e}u=Error(j(426))}}else if(Te&&l.mode&1){var L=kp(a);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Pp(L,a,l,i,e),Dh(ks(u,l));break e}}i=u=ks(u,l),qe!==4&&(qe=2),ji===null?ji=[i]:ji.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=Qy(i,u,e);Sp(i,I);break e;case 1:l=u;var w=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(tr===null||!tr.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=Ky(i,l,e);Sp(i,D);break e}}i=i.return}while(i!==null)}p_(n)}catch(U){e=U,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function d_(){var t=Qa.current;return Qa.current=Ga,t===null?Ga:t}function Zh(){(qe===0||qe===3||qe===2)&&(qe=4),Ke===null||!(zr&268435455)&&!(Il&268435455)||Wn(Ke,et)}function Ya(t,e){var n=le;le|=2;var r=d_();(Ke!==t||et!==e)&&(gn=null,Mr(t,e));do try{Xw();break}catch(s){h_(t,s)}while(!0);if(Mh(),le=n,Qa.current=r,Le!==null)throw Error(j(261));return Ke=null,et=0,qe}function Xw(){for(;Le!==null;)f_(Le)}function Yw(){for(;Le!==null&&!T1();)f_(Le)}function f_(t){var e=g_(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?p_(t):Le=e,Qh.current=null}function p_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qw(n,e),n!==null){n.flags&=32767,Le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Le=null;return}}else if(n=$w(n,e,Nt),n!==null){Le=n;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=t}while(e!==null);qe===0&&(qe=5)}function Nr(t,e,n){var r=de,s=zt.transition;try{zt.transition=null,de=1,Jw(t,e,n,r)}finally{zt.transition=s,de=r}return null}function Jw(t,e,n,r){do Es();while(Qn!==null);if(le&6)throw Error(j(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(V1(t,i),t===Ke&&(Le=Ke=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ra||(ra=!0,y_(Va,function(){return Es(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=zt.transition,zt.transition=null;var a=de;de=1;var l=le;le|=4,Qh.current=null,Ww(t,n),l_(n,t),_w(gc),ba=!!mc,gc=mc=null,t.current=n,Gw(n),S1(),le=l,de=a,zt.transition=i}else t.current=n;if(ra&&(ra=!1,Qn=t,Xa=s),i=t.pendingLanes,i===0&&(tr=null),x1(n.stateNode),At(t,be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ka)throw Ka=!1,t=Oc,Oc=null,t;return Xa&1&&t.tag!==0&&Es(),i=t.pendingLanes,i&1?t===Lc?Fi++:(Fi=0,Lc=t):Fi=0,_r(),null}function Es(){if(Qn!==null){var t=Qg(Xa),e=zt.transition,n=de;try{if(zt.transition=null,de=16>t?16:t,Qn===null)var r=!1;else{if(t=Qn,Qn=null,Xa=0,le&6)throw Error(j(331));var s=le;for(le|=4,H=t.current;H!==null;){var i=H,a=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(H=h;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:Li(8,f,i)}var m=f.child;if(m!==null)m.return=f,H=m;else for(;H!==null;){f=H;var g=f.sibling,C=f.return;if(i_(f),f===h){H=null;break}if(g!==null){g.return=C,H=g;break}H=C}}}var k=i.alternate;if(k!==null){var V=k.child;if(V!==null){k.child=null;do{var L=V.sibling;V.sibling=null,V=L}while(V!==null)}}H=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,H=a;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Li(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,H=I;break e}H=i.return}}var w=t.current;for(H=w;H!==null;){a=H;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,H=x;else e:for(a=w;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Sl(9,l)}}catch(U){Pe(l,l.return,U)}if(l===a){H=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,H=D;break e}H=l.return}}if(le=s,_r(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(ml,t)}catch{}r=!0}return r}finally{de=n,zt.transition=e}}return!1}function qp(t,e,n){e=ks(n,e),e=Qy(t,e,1),t=er(t,e,1),e=pt(),t!==null&&(vo(t,1,e),At(t,e))}function Pe(t,e,n){if(t.tag===3)qp(t,t,n);else for(;e!==null;){if(e.tag===3){qp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tr===null||!tr.has(r))){t=ks(n,t),t=Ky(e,t,1),e=er(e,t,1),t=pt(),e!==null&&(vo(e,1,t),At(e,t));break}}e=e.return}}function Zw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(et&n)===n&&(qe===4||qe===3&&(et&130023424)===et&&500>be()-Xh?Mr(t,0):Kh|=n),At(t,e)}function m_(t,e){e===0&&(t.mode&1?(e=Go,Go<<=1,!(Go&130023424)&&(Go=4194304)):e=1);var n=pt();t=In(t,e),t!==null&&(vo(t,e,n),At(t,n))}function eE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),m_(t,n)}function tE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),m_(t,n)}var g_;g_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||St.current)Tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tt=!1,Bw(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,Te&&e.flags&1048576&&wy(e,za,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;va(t,e),t=e.pendingProps;var s=xs(e,ct.current);ws(e,n),s=$h(null,e,r,t,s,n);var i=qh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,It(r)?(i=!0,Fa(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jh(e),s.updater=Tl,e.stateNode=s,s._reactInternals=e,Ac(e,r,t,n),e=Rc(null,e,r,!0,i,n)):(e.tag=0,Te&&i&&Ph(e),ft(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(va(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rE(r),t=Ht(r,t),s){case 0:e=Cc(null,e,r,t,n);break e;case 1:e=bp(null,e,r,t,n);break e;case 11:e=Vp(null,e,r,t,n);break e;case 14:e=Dp(null,e,r,Ht(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ht(r,s),Cc(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ht(r,s),bp(t,e,r,s,n);case 3:e:{if(Zy(e),t===null)throw Error(j(387));r=e.pendingProps,i=e.memoizedState,s=i.element,xy(t,e),qa(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ks(Error(j(423)),e),e=Mp(t,e,r,n,s);break e}else if(r!==s){s=ks(Error(j(424)),e),e=Mp(t,e,r,n,s);break e}else for(kt=Zn(e.stateNode.containerInfo.firstChild),Vt=e,Te=!0,Gt=null,n=Iy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cs(),r===s){e=An(t,e,n);break e}ft(t,e,r,n)}e=e.child}return e;case 5:return Cy(e),t===null&&Tc(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,yc(r,s)?a=null:i!==null&&yc(r,i)&&(e.flags|=32),Jy(t,e),ft(t,e,a,n),e.child;case 6:return t===null&&Tc(e),null;case 13:return e_(t,e,n);case 4:return Fh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Rs(e,null,r,n):ft(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ht(r,s),Vp(t,e,r,s,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,ge(Ba,r._currentValue),r._currentValue=a,i!==null)if(Yt(i.value,a)){if(i.children===s.children&&!St.current){e=An(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=wn(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Sc(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(j(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Sc(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ft(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ws(e,n),s=Bt(s),r=r(s),e.flags|=1,ft(t,e,r,n),e.child;case 14:return r=e.type,s=Ht(r,e.pendingProps),s=Ht(r.type,s),Dp(t,e,r,s,n);case 15:return Xy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ht(r,s),va(t,e),e.tag=1,It(r)?(t=!0,Fa(e)):t=!1,ws(e,n),Gy(e,r,s),Ac(e,r,s,n),Rc(null,e,r,!0,t,n);case 19:return t_(t,e,n);case 22:return Yy(t,e,n)}throw Error(j(156,e.tag))};function y_(t,e){return qg(t,e)}function nE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(t,e,n,r){return new nE(t,e,n,r)}function ed(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rE(t){if(typeof t=="function")return ed(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vh)return 11;if(t===wh)return 14}return 2}function rr(t,e){var n=t.alternate;return n===null?(n=Ut(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ta(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")ed(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case is:return Or(n.children,s,i,e);case _h:a=8,s|=8;break;case Ku:return t=Ut(12,n,e,s|2),t.elementType=Ku,t.lanes=i,t;case Xu:return t=Ut(13,n,e,s),t.elementType=Xu,t.lanes=i,t;case Yu:return t=Ut(19,n,e,s),t.elementType=Yu,t.lanes=i,t;case Cg:return Al(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ag:a=10;break e;case xg:a=9;break e;case vh:a=11;break e;case wh:a=14;break e;case $n:a=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=Ut(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Or(t,e,n,r){return t=Ut(7,t,r,e),t.lanes=n,t}function Al(t,e,n,r){return t=Ut(22,t,r,e),t.elementType=Cg,t.lanes=n,t.stateNode={isHidden:!1},t}function Mu(t,e,n){return t=Ut(6,t,null,e),t.lanes=n,t}function Ou(t,e,n){return e=Ut(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gu(0),this.expirationTimes=gu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function td(t,e,n,r,s,i,a,l,u){return t=new sE(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ut(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jh(i),t}function iE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ss,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function __(t){if(!t)return ur;t=t._reactInternals;e:{if(Wr(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(It(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(It(n))return _y(t,n,e)}return e}function v_(t,e,n,r,s,i,a,l,u){return t=td(n,r,!0,t,s,i,a,l,u),t.context=__(null),n=t.current,r=pt(),s=nr(n),i=wn(r,s),i.callback=e??null,er(n,i,s),t.current.lanes=s,vo(t,s,r),At(t,r),t}function xl(t,e,n,r){var s=e.current,i=pt(),a=nr(s);return n=__(n),e.context===null?e.context=n:e.pendingContext=n,e=wn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=er(s,e,a),t!==null&&(Kt(t,s,a,i),ga(t,s,a)),a}function Ja(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function nd(t,e){Hp(t,e),(t=t.alternate)&&Hp(t,e)}function oE(){return null}var w_=typeof reportError=="function"?reportError:function(t){console.error(t)};function rd(t){this._internalRoot=t}Cl.prototype.render=rd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));xl(t,e,null,null)};Cl.prototype.unmount=rd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Br(function(){xl(null,t,null,null)}),e[Sn]=null}};function Cl(t){this._internalRoot=t}Cl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hn.length&&e!==0&&e<Hn[n].priority;n++);Hn.splice(n,0,t),n===0&&Zg(t)}};function sd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wp(){}function aE(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Ja(a);i.call(h)}}var a=v_(e,r,t,0,null,!1,!1,"",Wp);return t._reactRootContainer=a,t[Sn]=a.current,Zi(t.nodeType===8?t.parentNode:t),Br(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Ja(u);l.call(h)}}var u=td(t,0,!1,null,null,!1,!1,"",Wp);return t._reactRootContainer=u,t[Sn]=u.current,Zi(t.nodeType===8?t.parentNode:t),Br(function(){xl(e,u,n,r)}),u}function Nl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Ja(a);l.call(u)}}xl(e,a,t,s)}else a=aE(n,e,t,s,r);return Ja(a)}Kg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ai(e.pendingLanes);n!==0&&(Sh(e,n|1),At(e,be()),!(le&6)&&(Ps=be()+500,_r()))}break;case 13:Br(function(){var r=In(t,1);if(r!==null){var s=pt();Kt(r,t,1,s)}}),nd(t,1)}};Ih=function(t){if(t.tag===13){var e=In(t,134217728);if(e!==null){var n=pt();Kt(e,t,134217728,n)}nd(t,134217728)}};Xg=function(t){if(t.tag===13){var e=nr(t),n=In(t,e);if(n!==null){var r=pt();Kt(n,t,e,r)}nd(t,e)}};Yg=function(){return de};Jg=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};ac=function(t,e,n){switch(e){case"input":if(ec(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=vl(r);if(!s)throw Error(j(90));Ng(r),ec(r,s)}}}break;case"textarea":Pg(t,n);break;case"select":e=n.value,e!=null&&gs(t,!!n.multiple,e,!1)}};jg=Yh;Fg=Br;var lE={usingClientEntryPoint:!1,Events:[Eo,us,vl,Og,Lg,Yh]},vi={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uE={bundleType:vi.bundleType,version:vi.version,rendererPackageName:vi.rendererPackageName,rendererConfig:vi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bg(t),t===null?null:t.stateNode},findFiberByHostInstance:vi.findFiberByHostInstance||oE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sa.isDisabled&&sa.supportsFiber)try{ml=sa.inject(uE),an=sa}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lE;bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sd(e))throw Error(j(200));return iE(t,e,null,n)};bt.createRoot=function(t,e){if(!sd(t))throw Error(j(299));var n=!1,r="",s=w_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=td(t,1,!1,null,null,n,!1,r,s),t[Sn]=e.current,Zi(t.nodeType===8?t.parentNode:t),new rd(e)};bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=Bg(e),t=t===null?null:t.stateNode,t};bt.flushSync=function(t){return Br(t)};bt.hydrate=function(t,e,n){if(!Rl(e))throw Error(j(200));return Nl(null,t,e,!0,n)};bt.hydrateRoot=function(t,e,n){if(!sd(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=w_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=v_(e,null,t,1,n??null,s,!1,i,a),t[Sn]=e.current,Zi(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Cl(e)};bt.render=function(t,e,n){if(!Rl(e))throw Error(j(200));return Nl(null,t,e,!1,n)};bt.unmountComponentAtNode=function(t){if(!Rl(t))throw Error(j(40));return t._reactRootContainer?(Br(function(){Nl(null,null,t,!1,function(){t._reactRootContainer=null,t[Sn]=null})}),!0):!1};bt.unstable_batchedUpdates=Yh;bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rl(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Nl(t,e,n,!1,r)};bt.version="18.3.1-next-f1338f8080-20240426";function E_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E_)}catch(t){console.error(t)}}E_(),Eg.exports=bt;var cE=Eg.exports,Gp=cE;Gu.createRoot=Gp.createRoot,Gu.hydrateRoot=Gp.hydrateRoot;const hE=()=>{};var Qp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},S_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,C=h&63;u||(C=64,a||(g=64)),r.push(n[f],n[m],n[g],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(T_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new fE;const g=i<<2|l>>4;if(r.push(g),h!==64){const C=l<<4&240|h>>2;if(r.push(C),m!==64){const k=h<<6&192|m;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pE=function(t){const e=T_(t);return S_.encodeByteArray(e,!0)},Za=function(t){return pE(t).replace(/\./g,"")},mE=function(t){try{return S_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=()=>gE().__FIREBASE_DEFAULTS__,_E=()=>{if(typeof process>"u"||typeof Qp>"u")return;const t=Qp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mE(t[1]);return e&&JSON.parse(e)},id=()=>{try{return hE()||yE()||_E()||vE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wE=t=>{var e,n;return(n=(e=id())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},EE=t=>{const e=wE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},I_=()=>{var t;return(t=id())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function SE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Za(JSON.stringify(n)),Za(JSON.stringify(a)),""].join(".")}const Ui={};function AE(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ui))Ui[e]?t.emulator.push(e):t.prod.push(e);return t}function xE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Kp=!1;function CE(t,e){if(typeof window>"u"||typeof document>"u"||!od(window.location.host)||Ui[t]===e||Ui[t]||Kp)return;Ui[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=AE().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,C){g.setAttribute("width","24"),g.setAttribute("id",C),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Kp=!0,a()},g}function f(g,C){g.setAttribute("id",C),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=xE(r),C=n("text"),k=document.getElementById(C)||document.createElement("span"),V=n("learnmore"),L=document.getElementById(V)||document.createElement("a"),I=n("preprendIcon"),w=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const x=g.element;l(x),f(L,V);const D=h();u(w,I),x.append(w,k,L,D),document.body.appendChild(x)}i?(k.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NE(){var e;const t=(e=id())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kE(){return!NE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PE(){try{return typeof indexedDB=="object"}catch{return!1}}function VE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="FirebaseError";class zs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DE,Object.setPrototypeOf(this,zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A_.prototype.create)}}class A_{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?bE(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new zs(s,l,r)}}function bE(t,e){return t.replace(ME,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ME=/\{\$([^}]+)}/g;function el(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Xp(i)&&Xp(a)){if(!el(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Xp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t){return t&&t._delegate?t._delegate:t}class lo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new TE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jE(e))try{this.getOrInitializeService({instanceIdentifier:kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kr){return this.instances.has(e)}getOptions(e=kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=kr){return this.component?this.component.multipleInstances?e:kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LE(t){return t===kr?void 0:t}function jE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const UE={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},zE=ae.INFO,BE={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},$E=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=BE[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class x_{constructor(e){this.name=e,this._logLevel=zE,this._logHandler=$E,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const qE=(t,e)=>e.some(n=>t instanceof n);let Yp,Jp;function HE(){return Yp||(Yp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WE(){return Jp||(Jp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C_=new WeakMap,Uc=new WeakMap,R_=new WeakMap,Lu=new WeakMap,ad=new WeakMap;function GE(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(sr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&C_.set(n,t)}).catch(()=>{}),ad.set(e,t),e}function QE(t){if(Uc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Uc.set(t,e)}let zc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Uc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KE(t){zc=t(zc)}function XE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ju(this),e,...n);return R_.set(r,e.sort?e.sort():[e]),sr(r)}:WE().includes(t)?function(...e){return t.apply(ju(this),e),sr(C_.get(this))}:function(...e){return sr(t.apply(ju(this),e))}}function YE(t){return typeof t=="function"?XE(t):(t instanceof IDBTransaction&&QE(t),qE(t,HE())?new Proxy(t,zc):t)}function sr(t){if(t instanceof IDBRequest)return GE(t);if(Lu.has(t))return Lu.get(t);const e=YE(t);return e!==t&&(Lu.set(t,e),ad.set(e,t)),e}const ju=t=>ad.get(t);function JE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=sr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(sr(a.result),u.oldVersion,u.newVersion,sr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const ZE=["get","getKey","getAll","getAllKeys","count"],eT=["put","add","delete","clear"],Fu=new Map;function Zp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fu.get(e))return Fu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=eT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ZE.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Fu.set(e,i),i}KE(t=>({...t,get:(e,n,r)=>Zp(e,n)||t.get(e,n,r),has:(e,n)=>!!Zp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bc="@firebase/app",em="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new x_("@firebase/app"),rT="@firebase/app-compat",sT="@firebase/analytics-compat",iT="@firebase/analytics",oT="@firebase/app-check-compat",aT="@firebase/app-check",lT="@firebase/auth",uT="@firebase/auth-compat",cT="@firebase/database",hT="@firebase/data-connect",dT="@firebase/database-compat",fT="@firebase/functions",pT="@firebase/functions-compat",mT="@firebase/installations",gT="@firebase/installations-compat",yT="@firebase/messaging",_T="@firebase/messaging-compat",vT="@firebase/performance",wT="@firebase/performance-compat",ET="@firebase/remote-config",TT="@firebase/remote-config-compat",ST="@firebase/storage",IT="@firebase/storage-compat",AT="@firebase/firestore",xT="@firebase/ai",CT="@firebase/firestore-compat",RT="firebase",NT="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="[DEFAULT]",kT={[Bc]:"fire-core",[rT]:"fire-core-compat",[iT]:"fire-analytics",[sT]:"fire-analytics-compat",[aT]:"fire-app-check",[oT]:"fire-app-check-compat",[lT]:"fire-auth",[uT]:"fire-auth-compat",[cT]:"fire-rtdb",[hT]:"fire-data-connect",[dT]:"fire-rtdb-compat",[fT]:"fire-fn",[pT]:"fire-fn-compat",[mT]:"fire-iid",[gT]:"fire-iid-compat",[yT]:"fire-fcm",[_T]:"fire-fcm-compat",[vT]:"fire-perf",[wT]:"fire-perf-compat",[ET]:"fire-rc",[TT]:"fire-rc-compat",[ST]:"fire-gcs",[IT]:"fire-gcs-compat",[AT]:"fire-fst",[CT]:"fire-fst-compat",[xT]:"fire-vertex","fire-js":"fire-js",[RT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=new Map,PT=new Map,qc=new Map;function tm(t,e){try{t.container.addComponent(e)}catch(n){Cn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nl(t){const e=t.name;if(qc.has(e))return Cn.debug(`There were multiple attempts to register component ${e}.`),!1;qc.set(e,t);for(const n of tl.values())tm(n,t);for(const n of PT.values())tm(n,t);return!0}function VT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function DT(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ir=new A_("app","Firebase",bT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=NT;function N_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:$c,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ir.create("bad-app-name",{appName:String(s)});if(n||(n=I_()),!n)throw ir.create("no-options");const i=tl.get(s);if(i){if(el(n,i.options)&&el(r,i.config))return i;throw ir.create("duplicate-app",{appName:s})}const a=new FE(s);for(const u of qc.values())a.addComponent(u);const l=new MT(n,r,a);return tl.set(s,l),l}function LT(t=$c){const e=tl.get(t);if(!e&&t===$c&&I_())return N_();if(!e)throw ir.create("no-app",{appName:t});return e}function Ts(t,e,n){let r=kT[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cn.warn(a.join(" "));return}nl(new lo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="firebase-heartbeat-database",FT=1,uo="firebase-heartbeat-store";let Uu=null;function k_(){return Uu||(Uu=JE(jT,FT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uo)}catch(n){console.warn(n)}}}}).catch(t=>{throw ir.create("idb-open",{originalErrorMessage:t.message})})),Uu}async function UT(t){try{const n=(await k_()).transaction(uo),r=await n.objectStore(uo).get(P_(t));return await n.done,r}catch(e){if(e instanceof zs)Cn.warn(e.message);else{const n=ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cn.warn(n.message)}}}async function nm(t,e){try{const r=(await k_()).transaction(uo,"readwrite");await r.objectStore(uo).put(e,P_(t)),await r.done}catch(n){if(n instanceof zs)Cn.warn(n.message);else{const r=ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cn.warn(r.message)}}}function P_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=1024,BT=30;class $T{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>BT){const a=WT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rm(),{heartbeatsToSend:r,unsentEntries:s}=qT(this._heartbeatsCache.heartbeats),i=Za(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Cn.warn(n),""}}}function rm(){return new Date().toISOString().substring(0,10)}function qT(t,e=zT){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),sm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),sm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PE()?VE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function sm(t){return Za(JSON.stringify({version:2,heartbeats:t})).length}function WT(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){nl(new lo("platform-logger",e=>new tT(e),"PRIVATE")),nl(new lo("heartbeat",e=>new $T(e),"PRIVATE")),Ts(Bc,em,t),Ts(Bc,em,"esm2020"),Ts("fire-js","")}GT("");var QT="firebase",KT="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ts(QT,KT,"app");var im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var or,V_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,y){function E(){}E.prototype=y.prototype,v.F=y.prototype,v.prototype=new E,v.prototype.constructor=v,v.D=function(S,A,R){for(var T=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)T[Ue-2]=arguments[Ue];return y.prototype[A].apply(S,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,y,E){E||(E=0);const S=Array(16);if(typeof y=="string")for(var A=0;A<16;++A)S[A]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(A=0;A<16;++A)S[A]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=v.g[0],E=v.g[1],A=v.g[2];let R=v.g[3],T;T=y+(R^E&(A^R))+S[0]+3614090360&4294967295,y=E+(T<<7&4294967295|T>>>25),T=R+(A^y&(E^A))+S[1]+3905402710&4294967295,R=y+(T<<12&4294967295|T>>>20),T=A+(E^R&(y^E))+S[2]+606105819&4294967295,A=R+(T<<17&4294967295|T>>>15),T=E+(y^A&(R^y))+S[3]+3250441966&4294967295,E=A+(T<<22&4294967295|T>>>10),T=y+(R^E&(A^R))+S[4]+4118548399&4294967295,y=E+(T<<7&4294967295|T>>>25),T=R+(A^y&(E^A))+S[5]+1200080426&4294967295,R=y+(T<<12&4294967295|T>>>20),T=A+(E^R&(y^E))+S[6]+2821735955&4294967295,A=R+(T<<17&4294967295|T>>>15),T=E+(y^A&(R^y))+S[7]+4249261313&4294967295,E=A+(T<<22&4294967295|T>>>10),T=y+(R^E&(A^R))+S[8]+1770035416&4294967295,y=E+(T<<7&4294967295|T>>>25),T=R+(A^y&(E^A))+S[9]+2336552879&4294967295,R=y+(T<<12&4294967295|T>>>20),T=A+(E^R&(y^E))+S[10]+4294925233&4294967295,A=R+(T<<17&4294967295|T>>>15),T=E+(y^A&(R^y))+S[11]+2304563134&4294967295,E=A+(T<<22&4294967295|T>>>10),T=y+(R^E&(A^R))+S[12]+1804603682&4294967295,y=E+(T<<7&4294967295|T>>>25),T=R+(A^y&(E^A))+S[13]+4254626195&4294967295,R=y+(T<<12&4294967295|T>>>20),T=A+(E^R&(y^E))+S[14]+2792965006&4294967295,A=R+(T<<17&4294967295|T>>>15),T=E+(y^A&(R^y))+S[15]+1236535329&4294967295,E=A+(T<<22&4294967295|T>>>10),T=y+(A^R&(E^A))+S[1]+4129170786&4294967295,y=E+(T<<5&4294967295|T>>>27),T=R+(E^A&(y^E))+S[6]+3225465664&4294967295,R=y+(T<<9&4294967295|T>>>23),T=A+(y^E&(R^y))+S[11]+643717713&4294967295,A=R+(T<<14&4294967295|T>>>18),T=E+(R^y&(A^R))+S[0]+3921069994&4294967295,E=A+(T<<20&4294967295|T>>>12),T=y+(A^R&(E^A))+S[5]+3593408605&4294967295,y=E+(T<<5&4294967295|T>>>27),T=R+(E^A&(y^E))+S[10]+38016083&4294967295,R=y+(T<<9&4294967295|T>>>23),T=A+(y^E&(R^y))+S[15]+3634488961&4294967295,A=R+(T<<14&4294967295|T>>>18),T=E+(R^y&(A^R))+S[4]+3889429448&4294967295,E=A+(T<<20&4294967295|T>>>12),T=y+(A^R&(E^A))+S[9]+568446438&4294967295,y=E+(T<<5&4294967295|T>>>27),T=R+(E^A&(y^E))+S[14]+3275163606&4294967295,R=y+(T<<9&4294967295|T>>>23),T=A+(y^E&(R^y))+S[3]+4107603335&4294967295,A=R+(T<<14&4294967295|T>>>18),T=E+(R^y&(A^R))+S[8]+1163531501&4294967295,E=A+(T<<20&4294967295|T>>>12),T=y+(A^R&(E^A))+S[13]+2850285829&4294967295,y=E+(T<<5&4294967295|T>>>27),T=R+(E^A&(y^E))+S[2]+4243563512&4294967295,R=y+(T<<9&4294967295|T>>>23),T=A+(y^E&(R^y))+S[7]+1735328473&4294967295,A=R+(T<<14&4294967295|T>>>18),T=E+(R^y&(A^R))+S[12]+2368359562&4294967295,E=A+(T<<20&4294967295|T>>>12),T=y+(E^A^R)+S[5]+4294588738&4294967295,y=E+(T<<4&4294967295|T>>>28),T=R+(y^E^A)+S[8]+2272392833&4294967295,R=y+(T<<11&4294967295|T>>>21),T=A+(R^y^E)+S[11]+1839030562&4294967295,A=R+(T<<16&4294967295|T>>>16),T=E+(A^R^y)+S[14]+4259657740&4294967295,E=A+(T<<23&4294967295|T>>>9),T=y+(E^A^R)+S[1]+2763975236&4294967295,y=E+(T<<4&4294967295|T>>>28),T=R+(y^E^A)+S[4]+1272893353&4294967295,R=y+(T<<11&4294967295|T>>>21),T=A+(R^y^E)+S[7]+4139469664&4294967295,A=R+(T<<16&4294967295|T>>>16),T=E+(A^R^y)+S[10]+3200236656&4294967295,E=A+(T<<23&4294967295|T>>>9),T=y+(E^A^R)+S[13]+681279174&4294967295,y=E+(T<<4&4294967295|T>>>28),T=R+(y^E^A)+S[0]+3936430074&4294967295,R=y+(T<<11&4294967295|T>>>21),T=A+(R^y^E)+S[3]+3572445317&4294967295,A=R+(T<<16&4294967295|T>>>16),T=E+(A^R^y)+S[6]+76029189&4294967295,E=A+(T<<23&4294967295|T>>>9),T=y+(E^A^R)+S[9]+3654602809&4294967295,y=E+(T<<4&4294967295|T>>>28),T=R+(y^E^A)+S[12]+3873151461&4294967295,R=y+(T<<11&4294967295|T>>>21),T=A+(R^y^E)+S[15]+530742520&4294967295,A=R+(T<<16&4294967295|T>>>16),T=E+(A^R^y)+S[2]+3299628645&4294967295,E=A+(T<<23&4294967295|T>>>9),T=y+(A^(E|~R))+S[0]+4096336452&4294967295,y=E+(T<<6&4294967295|T>>>26),T=R+(E^(y|~A))+S[7]+1126891415&4294967295,R=y+(T<<10&4294967295|T>>>22),T=A+(y^(R|~E))+S[14]+2878612391&4294967295,A=R+(T<<15&4294967295|T>>>17),T=E+(R^(A|~y))+S[5]+4237533241&4294967295,E=A+(T<<21&4294967295|T>>>11),T=y+(A^(E|~R))+S[12]+1700485571&4294967295,y=E+(T<<6&4294967295|T>>>26),T=R+(E^(y|~A))+S[3]+2399980690&4294967295,R=y+(T<<10&4294967295|T>>>22),T=A+(y^(R|~E))+S[10]+4293915773&4294967295,A=R+(T<<15&4294967295|T>>>17),T=E+(R^(A|~y))+S[1]+2240044497&4294967295,E=A+(T<<21&4294967295|T>>>11),T=y+(A^(E|~R))+S[8]+1873313359&4294967295,y=E+(T<<6&4294967295|T>>>26),T=R+(E^(y|~A))+S[15]+4264355552&4294967295,R=y+(T<<10&4294967295|T>>>22),T=A+(y^(R|~E))+S[6]+2734768916&4294967295,A=R+(T<<15&4294967295|T>>>17),T=E+(R^(A|~y))+S[13]+1309151649&4294967295,E=A+(T<<21&4294967295|T>>>11),T=y+(A^(E|~R))+S[4]+4149444226&4294967295,y=E+(T<<6&4294967295|T>>>26),T=R+(E^(y|~A))+S[11]+3174756917&4294967295,R=y+(T<<10&4294967295|T>>>22),T=A+(y^(R|~E))+S[2]+718787259&4294967295,A=R+(T<<15&4294967295|T>>>17),T=E+(R^(A|~y))+S[9]+3951481745&4294967295,v.g[0]=v.g[0]+y&4294967295,v.g[1]=v.g[1]+(A+(T<<21&4294967295|T>>>11))&4294967295,v.g[2]=v.g[2]+A&4294967295,v.g[3]=v.g[3]+R&4294967295}r.prototype.v=function(v,y){y===void 0&&(y=v.length);const E=y-this.blockSize,S=this.C;let A=this.h,R=0;for(;R<y;){if(A==0)for(;R<=E;)s(this,v,R),R+=this.blockSize;if(typeof v=="string"){for(;R<y;)if(S[A++]=v.charCodeAt(R++),A==this.blockSize){s(this,S),A=0;break}}else for(;R<y;)if(S[A++]=v[R++],A==this.blockSize){s(this,S),A=0;break}}this.h=A,this.o+=y},r.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var y=1;y<v.length-8;++y)v[y]=0;y=this.o*8;for(var E=v.length-8;E<v.length;++E)v[E]=y&255,y/=256;for(this.v(v),v=Array(16),y=0,E=0;E<4;++E)for(let S=0;S<32;S+=8)v[y++]=this.g[E]>>>S&255;return v};function i(v,y){var E=l;return Object.prototype.hasOwnProperty.call(E,v)?E[v]:E[v]=y(v)}function a(v,y){this.h=y;const E=[];let S=!0;for(let A=v.length-1;A>=0;A--){const R=v[A]|0;S&&R==y||(E[A]=R,S=!1)}this.g=E}var l={};function u(v){return-128<=v&&v<128?i(v,function(y){return new a([y|0],y<0?-1:0)}):new a([v|0],v<0?-1:0)}function h(v){if(isNaN(v)||!isFinite(v))return m;if(v<0)return L(h(-v));const y=[];let E=1;for(let S=0;v>=E;S++)y[S]=v/E|0,E*=4294967296;return new a(y,0)}function f(v,y){if(v.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(v.charAt(0)=="-")return L(f(v.substring(1),y));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=h(Math.pow(y,8));let S=m;for(let R=0;R<v.length;R+=8){var A=Math.min(8,v.length-R);const T=parseInt(v.substring(R,R+A),y);A<8?(A=h(Math.pow(y,A)),S=S.j(A).add(h(T))):(S=S.j(E),S=S.add(h(T)))}return S}var m=u(0),g=u(1),C=u(16777216);t=a.prototype,t.m=function(){if(V(this))return-L(this).m();let v=0,y=1;for(let E=0;E<this.g.length;E++){const S=this.i(E);v+=(S>=0?S:4294967296+S)*y,y*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(k(this))return"0";if(V(this))return"-"+L(this).toString(v);const y=h(Math.pow(v,6));var E=this;let S="";for(;;){const A=D(E,y).g;E=I(E,A.j(y));let R=((E.g.length>0?E.g[0]:E.h)>>>0).toString(v);if(E=A,k(E))return R+S;for(;R.length<6;)R="0"+R;S=R+S}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function k(v){if(v.h!=0)return!1;for(let y=0;y<v.g.length;y++)if(v.g[y]!=0)return!1;return!0}function V(v){return v.h==-1}t.l=function(v){return v=I(this,v),V(v)?-1:k(v)?0:1};function L(v){const y=v.g.length,E=[];for(let S=0;S<y;S++)E[S]=~v.g[S];return new a(E,~v.h).add(g)}t.abs=function(){return V(this)?L(this):this},t.add=function(v){const y=Math.max(this.g.length,v.g.length),E=[];let S=0;for(let A=0;A<=y;A++){let R=S+(this.i(A)&65535)+(v.i(A)&65535),T=(R>>>16)+(this.i(A)>>>16)+(v.i(A)>>>16);S=T>>>16,R&=65535,T&=65535,E[A]=T<<16|R}return new a(E,E[E.length-1]&-2147483648?-1:0)};function I(v,y){return v.add(L(y))}t.j=function(v){if(k(this)||k(v))return m;if(V(this))return V(v)?L(this).j(L(v)):L(L(this).j(v));if(V(v))return L(this.j(L(v)));if(this.l(C)<0&&v.l(C)<0)return h(this.m()*v.m());const y=this.g.length+v.g.length,E=[];for(var S=0;S<2*y;S++)E[S]=0;for(S=0;S<this.g.length;S++)for(let A=0;A<v.g.length;A++){const R=this.i(S)>>>16,T=this.i(S)&65535,Ue=v.i(A)>>>16,Ot=v.i(A)&65535;E[2*S+2*A]+=T*Ot,w(E,2*S+2*A),E[2*S+2*A+1]+=R*Ot,w(E,2*S+2*A+1),E[2*S+2*A+1]+=T*Ue,w(E,2*S+2*A+1),E[2*S+2*A+2]+=R*Ue,w(E,2*S+2*A+2)}for(v=0;v<y;v++)E[v]=E[2*v+1]<<16|E[2*v];for(v=y;v<2*y;v++)E[v]=0;return new a(E,0)};function w(v,y){for(;(v[y]&65535)!=v[y];)v[y+1]+=v[y]>>>16,v[y]&=65535,y++}function x(v,y){this.g=v,this.h=y}function D(v,y){if(k(y))throw Error("division by zero");if(k(v))return new x(m,m);if(V(v))return y=D(L(v),y),new x(L(y.g),L(y.h));if(V(y))return y=D(v,L(y)),new x(L(y.g),y.h);if(v.g.length>30){if(V(v)||V(y))throw Error("slowDivide_ only works with positive integers.");for(var E=g,S=y;S.l(v)<=0;)E=U(E),S=U(S);var A=F(E,1),R=F(S,1);for(S=F(S,2),E=F(E,2);!k(S);){var T=R.add(S);T.l(v)<=0&&(A=A.add(E),R=T),S=F(S,1),E=F(E,1)}return y=I(v,A.j(y)),new x(A,y)}for(A=m;v.l(y)>=0;){for(E=Math.max(1,Math.floor(v.m()/y.m())),S=Math.ceil(Math.log(E)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),R=h(E),T=R.j(y);V(T)||T.l(v)>0;)E-=S,R=h(E),T=R.j(y);k(R)&&(R=g),A=A.add(R),v=I(v,T)}return new x(A,v)}t.B=function(v){return D(this,v).h},t.and=function(v){const y=Math.max(this.g.length,v.g.length),E=[];for(let S=0;S<y;S++)E[S]=this.i(S)&v.i(S);return new a(E,this.h&v.h)},t.or=function(v){const y=Math.max(this.g.length,v.g.length),E=[];for(let S=0;S<y;S++)E[S]=this.i(S)|v.i(S);return new a(E,this.h|v.h)},t.xor=function(v){const y=Math.max(this.g.length,v.g.length),E=[];for(let S=0;S<y;S++)E[S]=this.i(S)^v.i(S);return new a(E,this.h^v.h)};function U(v){const y=v.g.length+1,E=[];for(let S=0;S<y;S++)E[S]=v.i(S)<<1|v.i(S-1)>>>31;return new a(E,v.h)}function F(v,y){const E=y>>5;y%=32;const S=v.g.length-E,A=[];for(let R=0;R<S;R++)A[R]=y>0?v.i(R+E)>>>y|v.i(R+E+1)<<32-y:v.i(R+E);return new a(A,v.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,V_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=f,or=a}).apply(typeof im<"u"?im:typeof self<"u"?self:typeof window<"u"?window:{});var ia=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D_,Ci,b_,Sa,Hc,M_,O_,L_;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof ia=="object"&&ia];for(var c=0;c<o.length;++c){var d=o[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)e:{var d=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in d))break e;d=d[N]}o=o[o.length-1],p=d[o],c=c(p),c!=p&&c!=null&&e(d,o,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(c){var d=[],p;for(p in c)Object.prototype.hasOwnProperty.call(c,p)&&d.push([p,c[p]]);return d}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function u(o,c,d){return o.call.apply(o.bind,arguments)}function h(o,c,d){return h=u,h.apply(null,arguments)}function f(o,c){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function m(o,c){function d(){}d.prototype=c.prototype,o.Z=c.prototype,o.prototype=new d,o.prototype.constructor=o,o.Ob=function(p,N,P){for(var z=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)z[Z-2]=arguments[Z];return c.prototype[N].apply(p,z)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function C(o){const c=o.length;if(c>0){const d=Array(c);for(let p=0;p<c;p++)d[p]=o[p];return d}return[]}function k(o,c){for(let p=1;p<arguments.length;p++){const N=arguments[p];var d=typeof N;if(d=d!="object"?d:N?Array.isArray(N)?"array":d:"null",d=="array"||d=="object"&&typeof N.length=="number"){d=o.length||0;const P=N.length||0;o.length=d+P;for(let z=0;z<P;z++)o[d+z]=N[z]}else o.push(N)}}class V{constructor(c,d){this.i=c,this.j=d,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function L(o){a.setTimeout(()=>{throw o},0)}function I(){var o=v;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class w{constructor(){this.h=this.g=null}add(c,d){const p=x.get();p.set(c,d),this.h?this.h.next=p:this.g=p,this.h=p}}var x=new V(()=>new D,o=>o.reset());class D{constructor(){this.next=this.g=this.h=null}set(c,d){this.h=c,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let U,F=!1,v=new w,y=()=>{const o=Promise.resolve(void 0);U=()=>{o.then(E)}};function E(){for(var o;o=I();){try{o.h.call(o.g)}catch(d){L(d)}var c=x;c.j(o),c.h<100&&(c.h++,o.next=c.g,c.g=o)}F=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};a.addEventListener("test",d,c),a.removeEventListener("test",d,c)}catch{}return o}();function T(o){return/^[\s\xa0]*$/.test(o)}function Ue(o,c){A.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,c)}m(Ue,A),Ue.prototype.init=function(o,c){const d=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget,c||(d=="mouseover"?c=o.fromElement:d=="mouseout"&&(c=o.toElement)),this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ot="closure_listenable_"+(Math.random()*1e6|0),Pn=0;function Er(o,c,d,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=d,this.capture=!!p,this.ha=N,this.key=++Pn,this.da=this.fa=!1}function $(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Q(o,c,d){for(const p in o)c.call(d,o[p],p,o)}function Y(o,c){for(const d in o)c.call(void 0,o[d],d,o)}function ue(o){const c={};for(const d in o)c[d]=o[d];return c}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zt(o,c){let d,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(d in p)o[d]=p[d];for(let P=0;P<Ee.length;P++)d=Ee[P],Object.prototype.hasOwnProperty.call(p,d)&&(o[d]=p[d])}}function ht(o){this.src=o,this.g={},this.h=0}ht.prototype.add=function(o,c,d,p,N){const P=o.toString();o=this.g[P],o||(o=this.g[P]=[],this.h++);const z=xt(o,c,p,N);return z>-1?(c=o[z],d||(c.fa=!1)):(c=new Er(c,this.src,P,!!p,N),c.fa=d,o.push(c)),c};function yt(o,c){const d=c.type;if(d in o.g){var p=o.g[d],N=Array.prototype.indexOf.call(p,c,void 0),P;(P=N>=0)&&Array.prototype.splice.call(p,N,1),P&&($(c),o.g[d].length==0&&(delete o.g[d],o.h--))}}function xt(o,c,d,p){for(let N=0;N<o.length;++N){const P=o[N];if(!P.da&&P.listener==c&&P.capture==!!d&&P.ha==p)return N}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Qs={};function No(o,c,d,p,N){if(Array.isArray(c)){for(let P=0;P<c.length;P++)No(o,c[P],d,p,N);return null}return d=rt(d),o&&o[Ot]?o.J(c,d,l(p)?!!p.capture:!1,N):ko(o,c,d,!1,p,N)}function ko(o,c,d,p,N,P){if(!c)throw Error("Invalid event type");const z=l(N)?!!N.capture:!!N;let Z=W(o);if(Z||(o[ze]=Z=new ht(o)),d=Z.add(c,d,p,z,P),d.proxy)return d;if(p=Gl(),d.proxy=p,p.src=o,p.listener=d,o.addEventListener)R||(N=z),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(O(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Gl(){function o(d){return c.call(o.src,o.listener,d)}const c=ee;return o}function Ks(o,c,d,p,N){if(Array.isArray(c))for(var P=0;P<c.length;P++)Ks(o,c[P],d,p,N);else p=l(p)?!!p.capture:!!p,d=rt(d),o&&o[Ot]?(o=o.i,P=String(c).toString(),P in o.g&&(c=o.g[P],d=xt(c,d,p,N),d>-1&&($(c[d]),Array.prototype.splice.call(c,d,1),c.length==0&&(delete o.g[P],o.h--)))):o&&(o=W(o))&&(c=o.g[c.toString()],o=-1,c&&(o=xt(c,d,p,N)),(d=o>-1?c[o]:null)&&mn(d))}function mn(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Ot])yt(c.i,o);else{var d=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(d,p,o.capture):c.detachEvent?c.detachEvent(O(d),p):c.addListener&&c.removeListener&&c.removeListener(p),(d=W(c))?(yt(d,o),d.h==0&&(d.src=null,c[ze]=null)):$(o)}}}function O(o){return o in Qs?Qs[o]:Qs[o]="on"+o}function ee(o,c){if(o.da)o=!0;else{c=new Ue(c,this);const d=o.listener,p=o.ha||o.src;o.fa&&mn(o),o=d.call(p,c)}return o}function W(o){return o=o[ze],o instanceof ht?o:null}var he="__closure_events_fn_"+(Math.random()*1e9>>>0);function rt(o){return typeof o=="function"?o:(o[he]||(o[he]=function(c){return o.handleEvent(c)}),o[he])}function Re(){S.call(this),this.i=new ht(this),this.M=this,this.G=null}m(Re,S),Re.prototype[Ot]=!0,Re.prototype.removeEventListener=function(o,c,d,p){Ks(this,o,c,d,p)};function Xe(o,c){var d,p=o.G;if(p)for(d=[];p;p=p.G)d.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new A(c,o);else if(c instanceof A)c.target=c.target||o;else{var N=c;c=new A(p,o),Zt(c,N)}N=!0;let P,z;if(d)for(z=d.length-1;z>=0;z--)P=c.g=d[z],N=Vn(P,p,!0,c)&&N;if(P=c.g=o,N=Vn(P,p,!0,c)&&N,N=Vn(P,p,!1,c)&&N,d)for(z=0;z<d.length;z++)P=c.g=d[z],N=Vn(P,p,!1,c)&&N}Re.prototype.N=function(){if(Re.Z.N.call(this),this.i){var o=this.i;for(const c in o.g){const d=o.g[c];for(let p=0;p<d.length;p++)$(d[p]);delete o.g[c],o.h--}}this.G=null},Re.prototype.J=function(o,c,d,p){return this.i.add(String(o),c,!1,d,p)},Re.prototype.K=function(o,c,d,p){return this.i.add(String(o),c,!0,d,p)};function Vn(o,c,d,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();let N=!0;for(let P=0;P<c.length;++P){const z=c[P];if(z&&!z.da&&z.capture==d){const Z=z.listener,Be=z.ha||z.src;z.fa&&yt(o.i,z),N=Z.call(Be,p)!==!1&&N}}return N&&!p.defaultPrevented}function Tr(o,c){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(o,c||0)}function qd(o){o.g=Tr(()=>{o.g=null,o.i&&(o.i=!1,qd(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class d0 extends S{constructor(c,d){super(),this.m=c,this.l=d,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:qd(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xs(o){S.call(this),this.h=o,this.g={}}m(Xs,S);var Hd=[];function Wd(o){Q(o.g,function(c,d){this.g.hasOwnProperty(d)&&mn(c)},o),o.g={}}Xs.prototype.N=function(){Xs.Z.N.call(this),Wd(this)},Xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ql=a.JSON.stringify,f0=a.JSON.parse,p0=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Gd(){}function Qd(){}var Ys={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kl(){A.call(this,"d")}m(Kl,A);function Xl(){A.call(this,"c")}m(Xl,A);var Sr={},Kd=null;function Po(){return Kd=Kd||new Re}Sr.Ia="serverreachability";function Xd(o){A.call(this,Sr.Ia,o)}m(Xd,A);function Js(o){const c=Po();Xe(c,new Xd(c))}Sr.STAT_EVENT="statevent";function Yd(o,c){A.call(this,Sr.STAT_EVENT,o),this.stat=c}m(Yd,A);function dt(o){const c=Po();Xe(c,new Yd(c,o))}Sr.Ja="timingevent";function Jd(o,c){A.call(this,Sr.Ja,o),this.size=c}m(Jd,A);function Zs(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},c)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function m0(o,c,d,p,N,P){o.info(function(){if(o.g)if(P){var z="",Z=P.split("&");for(let pe=0;pe<Z.length;pe++){var Be=Z[pe].split("=");if(Be.length>1){const We=Be[0];Be=Be[1];const tn=We.split("_");z=tn.length>=2&&tn[1]=="type"?z+(We+"="+Be+"&"):z+(We+"=redacted&")}}}else z=null;else z=P;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+d+`
`+z})}function g0(o,c,d,p,N,P,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+d+`
`+P+" "+z})}function Xr(o,c,d,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+_0(o,d)+(p?" "+p:"")})}function y0(o,c){o.info(function(){return"TIMEOUT: "+c})}ei.prototype.info=function(){};function _0(o,c){if(!o.g)return c;if(!c)return null;try{const P=JSON.parse(c);if(P){for(o=0;o<P.length;o++)if(Array.isArray(P[o])){var d=P[o];if(!(d.length<2)){var p=d[1];if(Array.isArray(p)&&!(p.length<1)){var N=p[0];if(N!="noop"&&N!="stop"&&N!="close")for(let z=1;z<p.length;z++)p[z]=""}}}}return Ql(P)}catch{return c}}var Vo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ef;function Yl(){}m(Yl,Gd),Yl.prototype.g=function(){return new XMLHttpRequest},ef=new Yl;function ti(o){return encodeURIComponent(String(o))}function v0(o){var c=1;o=o.split(":");const d=[];for(;c>0&&o.length;)d.push(o.shift()),c--;return o.length&&d.push(o.join(":")),d}function Dn(o,c,d,p){this.j=o,this.i=c,this.l=d,this.S=p||1,this.V=new Xs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new tf}function tf(){this.i=null,this.g="",this.h=!1}var nf={},Jl={};function Zl(o,c,d){o.M=1,o.A=bo(en(c)),o.u=d,o.R=!0,rf(o,null)}function rf(o,c){o.F=Date.now(),Do(o),o.B=en(o.A);var d=o.B,p=o.S;Array.isArray(p)||(p=[String(p)]),yf(d.i,"t",p),o.C=0,d=o.j.L,o.h=new tf,o.g=Mf(o.j,d?c:null,!o.u),o.P>0&&(o.O=new d0(h(o.Y,o,o.g),o.P)),c=o.V,d=o.g,p=o.ba;var N="readystatechange";Array.isArray(N)||(N&&(Hd[0]=N.toString()),N=Hd);for(let P=0;P<N.length;P++){const z=No(d,N[P],p||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.J?ue(o.J):{},o.u?(o.v||(o.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,c)):(o.v="GET",o.g.ea(o.B,o.v,null,c)),Js(),m0(o.i,o.v,o.B,o.l,o.S,o.u)}Dn.prototype.ba=function(o){o=o.target;const c=this.O;c&&On(o)==3?c.j():this.Y(o)},Dn.prototype.Y=function(o){try{if(o==this.g)e:{const Z=On(this.g),Be=this.g.ya(),pe=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||If(this.g)))){this.K||Z!=4||Be==7||(Be==8||pe<=0?Js(3):Js(2)),eu(this);var c=this.g.ca();this.X=c;var d=w0(this);if(this.o=c==200,g0(this.i,this.v,this.B,this.l,this.S,Z,c),this.o){if(this.U&&!this.L){t:{if(this.g){var p,N=this.g;if((p=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(p)){var P=p;break t}}P=null}if(o=P)Xr(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tu(this,o);else{this.o=!1,this.m=3,dt(12),Ir(this),ni(this);break e}}if(this.R){o=!0;let We;for(;!this.K&&this.C<d.length;)if(We=E0(this,d),We==Jl){Z==4&&(this.m=4,dt(14),o=!1),Xr(this.i,this.l,null,"[Incomplete Response]");break}else if(We==nf){this.m=4,dt(15),Xr(this.i,this.l,d,"[Invalid Chunk]"),o=!1;break}else Xr(this.i,this.l,We,null),tu(this,We);if(sf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||d.length!=0||this.h.h||(this.m=1,dt(16),o=!1),this.o=this.o&&o,!o)Xr(this.i,this.l,d,"[Invalid Chunked Response]"),Ir(this),ni(this);else if(d.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),uu(z),z.P=!0,dt(11))}}else Xr(this.i,this.l,d,null),tu(this,d);Z==4&&Ir(this),this.o&&!this.K&&(Z==4?Pf(this.j,this):(this.o=!1,Do(this)))}else M0(this.g),c==400&&d.indexOf("Unknown SID")>0?(this.m=3,dt(12)):(this.m=0,dt(13)),Ir(this),ni(this)}}}catch{}finally{}};function w0(o){if(!sf(o))return o.g.la();const c=If(o.g);if(c==="")return"";let d="";const p=c.length,N=On(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Ir(o),ni(o),"";o.h.i=new a.TextDecoder}for(let P=0;P<p;P++)o.h.h=!0,d+=o.h.i.decode(c[P],{stream:!(N&&P==p-1)});return c.length=0,o.h.g+=d,o.C=0,o.h.g}function sf(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function E0(o,c){var d=o.C,p=c.indexOf(`
`,d);return p==-1?Jl:(d=Number(c.substring(d,p)),isNaN(d)?nf:(p+=1,p+d>c.length?Jl:(c=c.slice(p,p+d),o.C=p+d,c)))}Dn.prototype.cancel=function(){this.K=!0,Ir(this)};function Do(o){o.T=Date.now()+o.H,of(o,o.H)}function of(o,c){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Zs(h(o.aa,o),c)}function eu(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Dn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(y0(this.i,this.B),this.M!=2&&(Js(),dt(17)),Ir(this),this.m=2,ni(this)):of(this,this.T-o)};function ni(o){o.j.I==0||o.K||Pf(o.j,o)}function Ir(o){eu(o);var c=o.O;c&&typeof c.dispose=="function"&&c.dispose(),o.O=null,Wd(o.V),o.g&&(c=o.g,o.g=null,c.abort(),c.dispose())}function tu(o,c){try{var d=o.j;if(d.I!=0&&(d.g==o||nu(d.h,o))){if(!o.L&&nu(d.h,o)&&d.I==3){try{var p=d.Ba.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<o.F)Fo(d),Lo(d);else break e;lu(d),dt(18)}}else d.xa=N[1],0<d.xa-d.K&&N[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Zs(h(d.Va,d),6e3));uf(d.h)<=1&&d.ta&&(d.ta=void 0)}else xr(d,11)}else if((o.L||d.g==o)&&Fo(d),!T(c))for(N=d.Ba.g.parse(c),c=0;c<N.length;c++){let pe=N[c];const We=pe[0];if(!(We<=d.K))if(d.K=We,pe=pe[1],d.I==2)if(pe[0]=="c"){d.M=pe[1],d.ba=pe[2];const tn=pe[3];tn!=null&&(d.ka=tn,d.j.info("VER="+d.ka));const Cr=pe[4];Cr!=null&&(d.za=Cr,d.j.info("SVER="+d.za));const Ln=pe[5];Ln!=null&&typeof Ln=="number"&&Ln>0&&(p=1.5*Ln,d.O=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;const jn=o.g;if(jn){const zo=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var P=p.h;P.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(ru(P,P.h),P.h=null))}if(p.G){const cu=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;cu&&(p.wa=cu,ye(p.J,p.G,cu))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-o.F,d.j.info("Handshake RTT: "+d.T+"ms")),p=d;var z=o;if(p.na=bf(p,p.L?p.ba:null,p.W),z.L){cf(p.h,z);var Z=z,Be=p.O;Be&&(Z.H=Be),Z.D&&(eu(Z),Do(Z)),p.g=z}else Nf(p);d.i.length>0&&jo(d)}else pe[0]!="stop"&&pe[0]!="close"||xr(d,7);else d.I==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?xr(d,7):au(d):pe[0]!="noop"&&d.l&&d.l.qa(pe),d.A=0)}}Js(4)}catch{}}var T0=class{constructor(o,c){this.g=o,this.map=c}};function af(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function lf(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function uf(o){return o.h?1:o.g?o.g.size:0}function nu(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function ru(o,c){o.g?o.g.add(c):o.h=c}function cf(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}af.prototype.cancel=function(){if(this.i=hf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function hf(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const d of o.g.values())c=c.concat(d.G);return c}return C(o.i)}var df=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function S0(o,c){if(o){o=o.split("&");for(let d=0;d<o.length;d++){const p=o[d].indexOf("=");let N,P=null;p>=0?(N=o[d].substring(0,p),P=o[d].substring(p+1)):N=o[d],c(N,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function bn(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;o instanceof bn?(this.l=o.l,ri(this,o.j),this.o=o.o,this.g=o.g,si(this,o.u),this.h=o.h,su(this,_f(o.i)),this.m=o.m):o&&(c=String(o).match(df))?(this.l=!1,ri(this,c[1]||"",!0),this.o=ii(c[2]||""),this.g=ii(c[3]||"",!0),si(this,c[4]),this.h=ii(c[5]||"",!0),su(this,c[6]||"",!0),this.m=ii(c[7]||"")):(this.l=!1,this.i=new ai(null,this.l))}bn.prototype.toString=function(){const o=[];var c=this.j;c&&o.push(oi(c,ff,!0),":");var d=this.g;return(d||c=="file")&&(o.push("//"),(c=this.o)&&o.push(oi(c,ff,!0),"@"),o.push(ti(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&o.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(oi(d,d.charAt(0)=="/"?x0:A0,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",oi(d,R0)),o.join("")},bn.prototype.resolve=function(o){const c=en(this);let d=!!o.j;d?ri(c,o.j):d=!!o.o,d?c.o=o.o:d=!!o.g,d?c.g=o.g:d=o.u!=null;var p=o.h;if(d)si(c,o.u);else if(d=!!o.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var N=c.h.lastIndexOf("/");N!=-1&&(p=c.h.slice(0,N+1)+p)}if(N=p,N==".."||N==".")p="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){p=N.lastIndexOf("/",0)==0,N=N.split("/");const P=[];for(let z=0;z<N.length;){const Z=N[z++];Z=="."?p&&z==N.length&&P.push(""):Z==".."?((P.length>1||P.length==1&&P[0]!="")&&P.pop(),p&&z==N.length&&P.push("")):(P.push(Z),p=!0)}p=P.join("/")}else p=N}return d?c.h=p:d=o.i.toString()!=="",d?su(c,_f(o.i)):d=!!o.m,d&&(c.m=o.m),c};function en(o){return new bn(o)}function ri(o,c,d){o.j=d?ii(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function si(o,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);o.u=c}else o.u=null}function su(o,c,d){c instanceof ai?(o.i=c,N0(o.i,o.l)):(d||(c=oi(c,C0)),o.i=new ai(c,o.l))}function ye(o,c,d){o.i.set(c,d)}function bo(o){return ye(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function ii(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function oi(o,c,d){return typeof o=="string"?(o=encodeURI(o).replace(c,I0),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function I0(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var ff=/[#\/\?@]/g,A0=/[#\?:]/g,x0=/[#\?]/g,C0=/[#\?@]/g,R0=/#/g;function ai(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Ar(o){o.g||(o.g=new Map,o.h=0,o.i&&S0(o.i,function(c,d){o.add(decodeURIComponent(c.replace(/\+/g," ")),d)}))}t=ai.prototype,t.add=function(o,c){Ar(this),this.i=null,o=Yr(this,o);let d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(c),this.h+=1,this};function pf(o,c){Ar(o),c=Yr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function mf(o,c){return Ar(o),c=Yr(o,c),o.g.has(c)}t.forEach=function(o,c){Ar(this),this.g.forEach(function(d,p){d.forEach(function(N){o.call(c,N,p,this)},this)},this)};function gf(o,c){Ar(o);let d=[];if(typeof c=="string")mf(o,c)&&(d=d.concat(o.g.get(Yr(o,c))));else for(o=Array.from(o.g.values()),c=0;c<o.length;c++)d=d.concat(o[c]);return d}t.set=function(o,c){return Ar(this),this.i=null,o=Yr(this,o),mf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=gf(this,o),o.length>0?String(o[0]):c):c};function yf(o,c,d){pf(o,c),d.length>0&&(o.i=null,o.g.set(Yr(o,c),C(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(let p=0;p<c.length;p++){var d=c[p];const N=ti(d);d=gf(this,d);for(let P=0;P<d.length;P++){let z=N;d[P]!==""&&(z+="="+ti(d[P])),o.push(z)}}return this.i=o.join("&")};function _f(o){const c=new ai;return c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),c}function Yr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function N0(o,c){c&&!o.j&&(Ar(o),o.i=null,o.g.forEach(function(d,p){const N=p.toLowerCase();p!=N&&(pf(this,p),yf(this,N,d))},o)),o.j=c}function k0(o,c){const d=new ei;if(a.Image){const p=new Image;p.onload=f(Mn,d,"TestLoadImage: loaded",!0,c,p),p.onerror=f(Mn,d,"TestLoadImage: error",!1,c,p),p.onabort=f(Mn,d,"TestLoadImage: abort",!1,c,p),p.ontimeout=f(Mn,d,"TestLoadImage: timeout",!1,c,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function P0(o,c){const d=new ei,p=new AbortController,N=setTimeout(()=>{p.abort(),Mn(d,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(P=>{clearTimeout(N),P.ok?Mn(d,"TestPingServer: ok",!0,c):Mn(d,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),Mn(d,"TestPingServer: error",!1,c)})}function Mn(o,c,d,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(d)}catch{}}function V0(){this.g=new p0}function iu(o){this.i=o.Sb||null,this.h=o.ab||!1}m(iu,Gd),iu.prototype.g=function(){return new Mo(this.i,this.h)};function Mo(o,c){Re.call(this),this.H=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Mo,Re),t=Mo.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=c,this.readyState=1,ui(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(c.body=o),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vf(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function vf(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?li(this):ui(this),this.readyState==3&&vf(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,li(this))},t.Na=function(o){this.g&&(this.response=o,li(this))},t.ga=function(){this.g&&li(this)};function li(o){o.readyState=4,o.l=null,o.j=null,o.B=null,ui(o)}t.setRequestHeader=function(o,c){this.A.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var d=c.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=c.next();return o.join(`\r
`)};function ui(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function wf(o){let c="";return Q(o,function(d,p){c+=p,c+=":",c+=d,c+=`\r
`}),c}function ou(o,c,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=wf(d),typeof o=="string"?d!=null&&ti(d):ye(o,c,d))}function Ne(o){Re.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ne,Re);var D0=/^https?$/i,b0=["POST","PUT"];t=Ne.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,c,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ef.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(P){Ef(this,P);return}if(o=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)d.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const P of p.keys())d.set(P,p.get(P));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(P=>P.toLowerCase()=="content-type"),N=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(b0,c,void 0)>=0)||p||N||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,z]of d)this.g.setRequestHeader(P,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(P){Ef(this,P)}};function Ef(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.o=5,Tf(o),Oo(o)}function Tf(o){o.A||(o.A=!0,Xe(o,"complete"),Xe(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,Xe(this,"complete"),Xe(this,"abort"),Oo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oo(this,!0)),Ne.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sf(this):this.Xa())},t.Xa=function(){Sf(this)};function Sf(o){if(o.h&&typeof i<"u"){if(o.v&&On(o)==4)setTimeout(o.Ca.bind(o),0);else if(Xe(o,"readystatechange"),On(o)==4){o.h=!1;try{const P=o.ca();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var d;if(!(d=c)){var p;if(p=P===0){let z=String(o.D).match(df)[1]||null;!z&&a.self&&a.self.location&&(z=a.self.location.protocol.slice(0,-1)),p=!D0.test(z?z.toLowerCase():"")}d=p}if(d)Xe(o,"complete"),Xe(o,"success");else{o.o=6;try{var N=On(o)>2?o.g.statusText:""}catch{N=""}o.l=N+" ["+o.ca()+"]",Tf(o)}}finally{Oo(o)}}}}function Oo(o,c){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const d=o.g;o.g=null,c||Xe(o,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function On(o){return o.g?o.g.readyState:0}t.ca=function(){try{return On(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),f0(c)}};function If(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function M0(o){const c={};o=(o.g&&On(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(T(o[p]))continue;var d=v0(o[p]);const N=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const P=c[N]||[];c[N]=P,P.push(d)}Y(c,function(p){return p.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ci(o,c,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||c}function Af(o){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ci("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ci("baseRetryDelayMs",5e3,o),this.Za=ci("retryDelaySeedMs",1e4,o),this.Ta=ci("forwardChannelMaxRetries",2,o),this.va=ci("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new af(o&&o.concurrentRequestLimit),this.Ba=new V0,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Af.prototype,t.ka=8,t.I=1,t.connect=function(o,c,d,p){dt(0),this.W=o,this.H=c||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.J=bf(this,null,this.W),jo(this)};function au(o){if(xf(o),o.I==3){var c=o.V++,d=en(o.J);if(ye(d,"SID",o.M),ye(d,"RID",c),ye(d,"TYPE","terminate"),hi(o,d),c=new Dn(o,o.j,c),c.M=2,c.A=bo(en(d)),d=!1,a.navigator&&a.navigator.sendBeacon)try{d=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!d&&a.Image&&(new Image().src=c.A,d=!0),d||(c.g=Mf(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Do(c)}Df(o)}function Lo(o){o.g&&(uu(o),o.g.cancel(),o.g=null)}function xf(o){Lo(o),o.v&&(a.clearTimeout(o.v),o.v=null),Fo(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function jo(o){if(!lf(o.h)&&!o.m){o.m=!0;var c=o.Ea;U||y(),F||(U(),F=!0),v.add(c,o),o.D=0}}function O0(o,c){return uf(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=c.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Zs(h(o.Ea,o,c),Vf(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const N=new Dn(this,this.j,o);let P=this.o;if(this.U&&(P?(P=ue(P),Zt(P,this.U)):P=this.U),this.u!==null||this.R||(N.J=P,P=null),this.S)e:{for(var c=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(c+=p,c>4096){c=d;break e}if(c===4096||d===this.i.length-1){c=d+1;break e}}c=1e3}else c=1e3;c=Rf(this,N,c),d=en(this.J),ye(d,"RID",o),ye(d,"CVER",22),this.G&&ye(d,"X-HTTP-Session-Id",this.G),hi(this,d),P&&(this.R?c="headers="+ti(wf(P))+"&"+c:this.u&&ou(d,this.u,P)),ru(this.h,N),this.Ra&&ye(d,"TYPE","init"),this.S?(ye(d,"$req",c),ye(d,"SID","null"),N.U=!0,Zl(N,d,null)):Zl(N,d,c),this.I=2}}else this.I==3&&(o?Cf(this,o):this.i.length==0||lf(this.h)||Cf(this))};function Cf(o,c){var d;c?d=c.l:d=o.V++;const p=en(o.J);ye(p,"SID",o.M),ye(p,"RID",d),ye(p,"AID",o.K),hi(o,p),o.u&&o.o&&ou(p,o.u,o.o),d=new Dn(o,o.j,d,o.D+1),o.u===null&&(d.J=o.o),c&&(o.i=c.G.concat(o.i)),c=Rf(o,d,1e3),d.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),ru(o.h,d),Zl(d,p,c)}function hi(o,c){o.H&&Q(o.H,function(d,p){ye(c,p,d)}),o.l&&Q({},function(d,p){ye(c,p,d)})}function Rf(o,c,d){d=Math.min(o.i.length,d);const p=o.l?h(o.l.Ka,o.l,o):null;e:{var N=o.i;let Z=-1;for(;;){const Be=["count="+d];Z==-1?d>0?(Z=N[0].g,Be.push("ofs="+Z)):Z=0:Be.push("ofs="+Z);let pe=!0;for(let We=0;We<d;We++){var P=N[We].g;const tn=N[We].map;if(P-=Z,P<0)Z=Math.max(0,N[We].g-100),pe=!1;else try{P="req"+P+"_"||"";try{var z=tn instanceof Map?tn:Object.entries(tn);for(const[Cr,Ln]of z){let jn=Ln;l(Ln)&&(jn=Ql(Ln)),Be.push(P+Cr+"="+encodeURIComponent(jn))}}catch(Cr){throw Be.push(P+"type="+encodeURIComponent("_badmap")),Cr}}catch{p&&p(tn)}}if(pe){z=Be.join("&");break e}}z=void 0}return o=o.i.splice(0,d),c.G=o,z}function Nf(o){if(!o.g&&!o.v){o.Y=1;var c=o.Da;U||y(),F||(U(),F=!0),v.add(c,o),o.A=0}}function lu(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Zs(h(o.Da,o),Vf(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,kf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Zs(h(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dt(10),Lo(this),kf(this))};function uu(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function kf(o){o.g=new Dn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var c=en(o.na);ye(c,"RID","rpc"),ye(c,"SID",o.M),ye(c,"AID",o.K),ye(c,"CI",o.F?"0":"1"),!o.F&&o.ia&&ye(c,"TO",o.ia),ye(c,"TYPE","xmlhttp"),hi(o,c),o.u&&o.o&&ou(c,o.u,o.o),o.O&&(o.g.H=o.O);var d=o.g;o=o.ba,d.M=1,d.A=bo(en(c)),d.u=null,d.R=!0,rf(d,o)}t.Va=function(){this.C!=null&&(this.C=null,Lo(this),lu(this),dt(19))};function Fo(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Pf(o,c){var d=null;if(o.g==c){Fo(o),uu(o),o.g=null;var p=2}else if(nu(o.h,c))d=c.G,cf(o.h,c),p=1;else return;if(o.I!=0){if(c.o)if(p==1){d=c.u?c.u.length:0,c=Date.now()-c.F;var N=o.D;p=Po(),Xe(p,new Jd(p,d)),jo(o)}else Nf(o);else if(N=c.m,N==3||N==0&&c.X>0||!(p==1&&O0(o,c)||p==2&&lu(o)))switch(d&&d.length>0&&(c=o.h,c.i=c.i.concat(d)),N){case 1:xr(o,5);break;case 4:xr(o,10);break;case 3:xr(o,6);break;default:xr(o,2)}}}function Vf(o,c){let d=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(d*=2),d*c}function xr(o,c){if(o.j.info("Error code "+c),c==2){var d=h(o.bb,o),p=o.Ua;const N=!p;p=new bn(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ri(p,"https"),bo(p),N?k0(p.toString(),d):P0(p.toString(),d)}else dt(2);o.I=0,o.l&&o.l.pa(c),Df(o),xf(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function Df(o){if(o.I=0,o.ja=[],o.l){const c=hf(o.h);(c.length!=0||o.i.length!=0)&&(k(o.ja,c),k(o.ja,o.i),o.h.i.length=0,C(o.i),o.i.length=0),o.l.oa()}}function bf(o,c,d){var p=d instanceof bn?en(d):new bn(d);if(p.g!="")c&&(p.g=c+"."+p.g),si(p,p.u);else{var N=a.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;const P=new bn(null);p&&ri(P,p),c&&(P.g=c),N&&si(P,N),d&&(P.h=d),p=P}return d=o.G,c=o.wa,d&&c&&ye(p,d,c),ye(p,"VER",o.ka),hi(o,p),p}function Mf(o,c,d){if(c&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Aa&&!o.ma?new Ne(new iu({ab:d})):new Ne(o.ma),c.Fa(o.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Of(){}t=Of.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Uo(){}Uo.prototype.g=function(o,c){return new Ct(o,c)};function Ct(o,c){Re.call(this),this.g=new Af(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(o?o["X-WebChannel-Client-Profile"]=c.sa:o={"X-WebChannel-Client-Profile":c.sa}),this.g.U=o,(o=c&&c.Qb)&&!T(o)&&(this.g.u=o),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!T(c)&&(this.g.G=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Jr(this)}m(Ct,Re),Ct.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){au(this.g)},Ct.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.v&&(d={},d.__data__=Ql(o),o=d);c.i.push(new T0(c.Ya++,o)),c.I==3&&jo(c)},Ct.prototype.N=function(){this.g.l=null,delete this.j,au(this.g),delete this.g,Ct.Z.N.call(this)};function Lf(o){Kl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const d in c){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}m(Lf,Kl);function jf(){Xl.call(this),this.status=1}m(jf,Xl);function Jr(o){this.g=o}m(Jr,Of),Jr.prototype.ra=function(){Xe(this.g,"a")},Jr.prototype.qa=function(o){Xe(this.g,new Lf(o))},Jr.prototype.pa=function(o){Xe(this.g,new jf)},Jr.prototype.oa=function(){Xe(this.g,"b")},Uo.prototype.createWebChannel=Uo.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,L_=function(){return new Uo},O_=function(){return Po()},M_=Sr,Hc={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vo.NO_ERROR=0,Vo.TIMEOUT=8,Vo.HTTP_ERROR=6,Sa=Vo,Zd.COMPLETE="complete",b_=Zd,Qd.EventType=Ys,Ys.OPEN="a",Ys.CLOSE="b",Ys.ERROR="c",Ys.MESSAGE="d",Re.prototype.listen=Re.prototype.J,Ci=Qd,Ne.prototype.listenOnce=Ne.prototype.K,Ne.prototype.getLastError=Ne.prototype.Ha,Ne.prototype.getLastErrorCode=Ne.prototype.ya,Ne.prototype.getStatus=Ne.prototype.ca,Ne.prototype.getResponseJson=Ne.prototype.La,Ne.prototype.getResponseText=Ne.prototype.la,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Fa,D_=Ne}).apply(typeof ia<"u"?ia:typeof self<"u"?self:typeof window<"u"?window:{});const om="@firebase/firestore",am="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let at=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bs="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new x_("@firebase/firestore");function es(){return $r.logLevel}function q(t,...e){if($r.logLevel<=ae.DEBUG){const n=e.map(ld);$r.debug(`Firestore (${Bs}): ${t}`,...n)}}function Rn(t,...e){if($r.logLevel<=ae.ERROR){const n=e.map(ld);$r.error(`Firestore (${Bs}): ${t}`,...n)}}function Vs(t,...e){if($r.logLevel<=ae.WARN){const n=e.map(ld);$r.warn(`Firestore (${Bs}): ${t}`,...n)}}function ld(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,j_(t,r,n)}function j_(t,e,n){let r=`FIRESTORE (${Bs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Rn(r),new Error(r)}function ce(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||j_(e,s,r)}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends zs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class YT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class JT{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new En;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new En,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new En)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new F_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new at(e)}}class ZT{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class eS{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ZT(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,DT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ce(this.o===void 0,3512);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new lm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new lm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=nS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function Wc(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return zu(s)===zu(i)?se(s,i):zu(s)?1:-1}return se(t.length,e.length)}const rS=55296,sS=57343;function zu(t){const e=t.charCodeAt(0);return e>=rS&&e<=sS}function Ds(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="__name__";class sn{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&K(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=sn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return se(e.length,n.length)}static compareSegments(e,n){const r=sn.isNumericId(e),s=sn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?sn.extractNumericId(e).compare(sn.extractNumericId(n)):Wc(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return or.fromString(e.substring(4,e.length-2))}}class me extends sn{construct(e,n,r){return new me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new me(n)}static emptyPath(){return new me([])}}const iS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends sn{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return iS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===um}static keyField(){return new Ze([um])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new B(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(me.fromString(e))}static fromName(e){return new G(me.fromString(e).popFirst(5))}static empty(){return new G(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new me(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t,e,n){if(!n)throw new B(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oS(t,e,n,r){if(e===!0&&r===!0)throw new B(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cm(t){if(!G.isDocumentKey(t))throw new B(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hm(t){if(G.isDocumentKey(t))throw new B(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function z_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function kl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K(12329,{type:typeof t})}function fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kl(t);throw new B(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e){const n={typeString:t};return e&&(n.value=e),n}function So(t,e){if(!z_(t))throw new B(b.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new B(b.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=-62135596800,fm=1e6;class ve{static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fm);return new ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dm)throw new B(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fm}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(So(e,ve._jsonSchema))return new ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ve._jsonSchemaVersion="firestore/timestamp/1.0",ve._jsonSchema={type:Fe("string",ve._jsonSchemaVersion),seconds:Fe("number"),nanoseconds:Fe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new ve(0,0))}static max(){return new X(new ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=-1;function aS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new ve(n+1,0):new ve(n,r));return new cr(s,G.empty(),e)}function lS(t){return new cr(t.readTime,t.key,co)}class cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cr(X.min(),G.empty(),co)}static max(){return new cr(X.max(),G.empty(),co)}}function uS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==cS)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new M((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(f=>{a[h]=f,++l,l===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new M((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function dS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=-1;function Vl(t){return t==null}function rl(t){return t===0&&1/t==-1/0}function fS(t){return typeof t=="number"&&Number.isInteger(t)&&!rl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="";function pS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=pm(e)),e=mS(t.get(n),e);return pm(e)}function mS(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case B_:n+="";break;default:n+=i}}return n}function pm(t){return t+B_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oa(this.root,e,this.comparator,!1)}getReverseIterator(){return new oa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oa(this.root,e,this.comparator,!0)}}class oa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gm(this.data.getIterator())}getIteratorFrom(e){return new gm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class gm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Pt([])}unionWith(e){let n=new He(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ds(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new q_("Invalid base64 string: "+i):i}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const gS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hr(t){if(ce(!!t,39018),typeof t=="string"){let e=0;const n=gS.exec(t);if(ce(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dr(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="server_timestamp",W_="__type__",G_="__previous_value__",Q_="__local_write_time__";function hd(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[W_])==null?void 0:r.stringValue)===H_}function Dl(t){const e=t.mapValue.fields[G_];return hd(e)?Dl(e):e}function ho(t){const e=hr(t.mapValue.fields[Q_].timestampValue);return new ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n,r,s,i,a,l,u,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=f}}const sl="(default)";class fo{constructor(e,n){this.projectId=e,this.database=n||sl}static empty(){return new fo("","")}get isDefaultDatabase(){return this.database===sl}isEqual(e){return e instanceof fo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="__type__",_S="__max__",aa={mapValue:{}},X_="__vector__",il="value";function fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hd(t)?4:wS(t)?9007199254740991:vS(t)?10:11:K(28295,{value:t})}function pn(t,e){if(t===e)return!0;const n=fr(t);if(n!==fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ho(t).isEqual(ho(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=hr(s.timestampValue),l=hr(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return dr(s.bytesValue).isEqual(dr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return De(s.geoPointValue.latitude)===De(i.geoPointValue.latitude)&&De(s.geoPointValue.longitude)===De(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return De(s.integerValue)===De(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=De(s.doubleValue),l=De(i.doubleValue);return a===l?rl(a)===rl(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Ds(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(mm(a)!==mm(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!pn(a[u],l[u])))return!1;return!0}(t,e);default:return K(52216,{left:t})}}function po(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function bs(t,e){if(t===e)return 0;const n=fr(t),r=fr(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=De(i.integerValue||i.doubleValue),u=De(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return ym(t.timestampValue,e.timestampValue);case 4:return ym(ho(t),ho(e));case 5:return Wc(t.stringValue,e.stringValue);case 6:return function(i,a){const l=dr(i),u=dr(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const f=se(l[h],u[h]);if(f!==0)return f}return se(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=se(De(i.latitude),De(a.latitude));return l!==0?l:se(De(i.longitude),De(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _m(t.arrayValue,e.arrayValue);case 10:return function(i,a){var g,C,k,V;const l=i.fields||{},u=a.fields||{},h=(g=l[il])==null?void 0:g.arrayValue,f=(C=u[il])==null?void 0:C.arrayValue,m=se(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((V=f==null?void 0:f.values)==null?void 0:V.length)||0);return m!==0?m:_m(h,f)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===aa.mapValue&&a===aa.mapValue)return 0;if(i===aa.mapValue)return 1;if(a===aa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=a.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=Wc(u[m],f[m]);if(g!==0)return g;const C=bs(l[u[m]],h[f[m]]);if(C!==0)return C}return se(u.length,f.length)}(t.mapValue,e.mapValue);default:throw K(23264,{he:n})}}function ym(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=hr(t),r=hr(e),s=se(n.seconds,r.seconds);return s!==0?s:se(n.nanos,r.nanos)}function _m(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=bs(n[s],r[s]);if(i)return i}return se(n.length,r.length)}function Ms(t){return Gc(t)}function Gc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return dr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Gc(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Gc(n.fields[a])}`;return s+"}"}(t.mapValue):K(61005,{value:t})}function Ia(t){switch(fr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dl(t);return e?16+Ia(e):16;case 5:return 2*t.stringValue.length;case 6:return dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ia(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return vr(r.fields,(i,a)=>{s+=i.length+Ia(a)}),s}(t.mapValue);default:throw K(13486,{value:t})}}function vm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Qc(t){return!!t&&"integerValue"in t}function dd(t){return!!t&&"arrayValue"in t}function wm(t){return!!t&&"nullValue"in t}function Em(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Aa(t){return!!t&&"mapValue"in t}function vS(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[K_])==null?void 0:r.stringValue)===X_}function zi(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return vr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=zi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zi(t.arrayValue.values[n]);return e}return{...t}}function wS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===_S}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.value=e}static empty(){return new Et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Aa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zi(n)}setAll(e){let n=Ze.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=zi(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Aa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Aa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){vr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Et(zi(this.value))}}function Y_(t){const e=[];return vr(t.fields,(n,r)=>{const s=new Ze([n]);if(Aa(r)){const i=Y_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Pt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new ut(e,0,X.min(),X.min(),X.min(),Et.empty(),0)}static newFoundDocument(e,n,r,s){return new ut(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new ut(e,2,n,X.min(),X.min(),Et.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,X.min(),X.min(),Et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this.position=e,this.inclusive=n}}function Tm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(a.referenceValue),n.key):r=bs(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Sm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n="asc"){this.field=e,this.dir=n}}function ES(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{}class je extends J_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new SS(e,n,r):n==="array-contains"?new xS(e,r):n==="in"?new CS(e,r):n==="not-in"?new RS(e,r):n==="array-contains-any"?new NS(e,r):new je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new IS(e,r):new AS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bs(n,this.value)):n!==null&&fr(this.value)===fr(n)&&this.matchesComparison(bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends J_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Jt(e,n)}matches(e){return Z_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Z_(t){return t.op==="and"}function ev(t){return TS(t)&&Z_(t)}function TS(t){for(const e of t.filters)if(e instanceof Jt)return!1;return!0}function Kc(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+Ms(t.value);if(ev(t))return t.filters.map(e=>Kc(e)).join(",");{const e=t.filters.map(n=>Kc(n)).join(",");return`${t.op}(${e})`}}function tv(t,e){return t instanceof je?function(r,s){return s instanceof je&&r.op===s.op&&r.field.isEqual(s.field)&&pn(r.value,s.value)}(t,e):t instanceof Jt?function(r,s){return s instanceof Jt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&tv(a,s.filters[l]),!0):!1}(t,e):void K(19439)}function nv(t){return t instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${Ms(n.value)}`}(t):t instanceof Jt?function(n){return n.op.toString()+" {"+n.getFilters().map(nv).join(" ,")+"}"}(t):"Filter"}class SS extends je{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class IS extends je{constructor(e,n){super(e,"in",n),this.keys=rv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AS extends je{constructor(e,n){super(e,"not-in",n),this.keys=rv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class xS extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dd(n)&&po(n.arrayValue,this.value)}}class CS extends je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&po(this.value.arrayValue,n)}}class RS extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(po(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!po(this.value.arrayValue,n)}}class NS extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>po(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function Im(t,e=null,n=[],r=[],s=null,i=null,a=null){return new kS(t,e,n,r,s,i,a)}function fd(t){const e=J(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Kc(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ms(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ms(r)).join(",")),e.Te=n}return e.Te}function pd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ES(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sm(t.startAt,e.startAt)&&Sm(t.endAt,e.endAt)}function Xc(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function PS(t,e,n,r,s,i,a,l){return new Hs(t,e,n,r,s,i,a,l)}function md(t){return new Hs(t)}function Am(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sv(t){return t.collectionGroup!==null}function Bi(t){const e=J(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new He(Ze.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new mo(i,r))}),n.has(Ze.keyField().canonicalString())||e.Ie.push(new mo(Ze.keyField(),r))}return e.Ie}function un(t){const e=J(t);return e.Ee||(e.Ee=VS(e,Bi(t))),e.Ee}function VS(t,e){if(t.limitType==="F")return Im(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new mo(s.field,i)});const n=t.endAt?new ol(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ol(t.startAt.position,t.startAt.inclusive):null;return Im(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Yc(t,e){const n=t.filters.concat([e]);return new Hs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Jc(t,e,n){return new Hs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bl(t,e){return pd(un(t),un(e))&&t.limitType===e.limitType}function iv(t){return`${fd(un(t))}|lt:${t.limitType}`}function ts(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>nv(s)).join(", ")}]`),Vl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ms(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ms(s)).join(",")),`Target(${r})`}(un(t))}; limitType=${t.limitType})`}function Ml(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Bi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,u){const h=Tm(a,l,u);return a.inclusive?h<=0:h<0}(r.startAt,Bi(r),s)||r.endAt&&!function(a,l,u){const h=Tm(a,l,u);return a.inclusive?h>=0:h>0}(r.endAt,Bi(r),s))}(t,e)}function DS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ov(t){return(e,n)=>{let r=!1;for(const s of Bi(t)){const i=bS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function bS(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,a,l){const u=a.data.field(i),h=l.data.field(i);return u!==null&&h!==null?bs(u,h):K(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=new xe(G.comparator);function Nn(){return MS}const av=new xe(G.comparator);function Ri(...t){let e=av;for(const n of t)e=e.insert(n.key,n);return e}function lv(t){let e=av;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function br(){return $i()}function uv(){return $i()}function $i(){return new Gr(t=>t.toString(),(t,e)=>t.isEqual(e))}const OS=new xe(G.comparator),LS=new He(G.comparator);function ie(...t){let e=LS;for(const n of t)e=e.add(n);return e}const jS=new He(se);function FS(){return jS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rl(e)?"-0":e}}function cv(t){return{integerValue:""+t}}function US(t,e){return fS(e)?cv(e):gd(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this._=void 0}}function zS(t,e,n){return t instanceof al?function(s,i){const a={fields:{[W_]:{stringValue:H_},[Q_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&hd(i)&&(i=Dl(i)),i&&(a.fields[G_]=i),{mapValue:a}}(n,e):t instanceof go?dv(t,e):t instanceof yo?fv(t,e):function(s,i){const a=hv(s,i),l=xm(a)+xm(s.Ae);return Qc(a)&&Qc(s.Ae)?cv(l):gd(s.serializer,l)}(t,e)}function BS(t,e,n){return t instanceof go?dv(t,e):t instanceof yo?fv(t,e):n}function hv(t,e){return t instanceof ll?function(r){return Qc(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class al extends Ol{}class go extends Ol{constructor(e){super(),this.elements=e}}function dv(t,e){const n=pv(e);for(const r of t.elements)n.some(s=>pn(s,r))||n.push(r);return{arrayValue:{values:n}}}class yo extends Ol{constructor(e){super(),this.elements=e}}function fv(t,e){let n=pv(e);for(const r of t.elements)n=n.filter(s=>!pn(s,r));return{arrayValue:{values:n}}}class ll extends Ol{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function xm(t){return De(t.integerValue||t.doubleValue)}function pv(t){return dd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $S(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof go&&s instanceof go||r instanceof yo&&s instanceof yo?Ds(r.elements,s.elements,pn):r instanceof ll&&s instanceof ll?pn(r.Ae,s.Ae):r instanceof al&&s instanceof al}(t.transform,e.transform)}class qS{constructor(e,n){this.version=e,this.transformResults=n}}class Xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xt}static exists(e){return new Xt(void 0,e)}static updateTime(e){return new Xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ll{}function mv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yd(t.key,Xt.none()):new Io(t.key,t.data,Xt.none());{const n=t.data,r=Et.empty();let s=new He(Ze.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new wr(t.key,r,new Pt(s.toArray()),Xt.none())}}function HS(t,e,n){t instanceof Io?function(s,i,a){const l=s.value.clone(),u=Rm(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof wr?function(s,i,a){if(!xa(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Rm(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(gv(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function qi(t,e,n,r){return t instanceof Io?function(i,a,l,u){if(!xa(i.precondition,a))return l;const h=i.value.clone(),f=Nm(i.fieldTransforms,u,a);return h.setAll(f),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof wr?function(i,a,l,u){if(!xa(i.precondition,a))return l;const h=Nm(i.fieldTransforms,u,a),f=a.data;return f.setAll(gv(i)),f.setAll(h),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,l){return xa(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function WS(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=hv(r.transform,s||null);i!=null&&(n===null&&(n=Et.empty()),n.set(r.field,i))}return n||null}function Cm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ds(r,s,(i,a)=>$S(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Io extends Ll{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wr extends Ll{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function gv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Rm(t,e,n){const r=new Map;ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,BS(a,l,n[s]))}return r}function Nm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,zS(i,a,e))}return r}class yd extends Ll{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GS extends Ll{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&HS(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uv();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=mv(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Ds(this.mutations,e.mutations,(n,r)=>Cm(n,r))&&Ds(this.baseMutations,e.baseMutations,(n,r)=>Cm(n,r))}}class _d{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return OS}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new _d(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,oe;function YS(t){switch(t){case b.OK:return K(64938);case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0;default:return K(15467,{code:t})}}function yv(t){if(t===void 0)return Rn("GRPC error has no .code"),b.UNKNOWN;switch(t){case Oe.OK:return b.OK;case Oe.CANCELLED:return b.CANCELLED;case Oe.UNKNOWN:return b.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return b.INTERNAL;case Oe.UNAVAILABLE:return b.UNAVAILABLE;case Oe.UNAUTHENTICATED:return b.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case Oe.NOT_FOUND:return b.NOT_FOUND;case Oe.ALREADY_EXISTS:return b.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return b.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case Oe.ABORTED:return b.ABORTED;case Oe.OUT_OF_RANGE:return b.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return b.UNIMPLEMENTED;case Oe.DATA_LOSS:return b.DATA_LOSS;default:return K(39323,{code:t})}}(oe=Oe||(Oe={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=new or([4294967295,4294967295],0);function km(t){const e=JS().encode(t),n=new V_;return n.update(e),new Uint8Array(n.digest())}function Pm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new or([n,r],0),new or([s,i],0)]}class vd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ni(`Invalid padding: ${n}`);if(r<0)throw new Ni(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ni(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ni(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=or.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(or.fromNumber(r)));return s.compare(ZS)===1&&(s=new or([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=km(e),[r,s]=Pm(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new vd(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=km(e),[r,s]=Pm(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ni extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ao.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new jl(X.min(),s,new xe(se),Nn(),ie())}}class Ao{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ao(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class _v{constructor(e,n){this.targetId=e,this.Ce=n}}class vv{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Vm{constructor(){this.ve=0,this.Fe=Dm(),this.Me=nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ie(),n=ie(),r=ie();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:K(38017,{changeType:i})}}),new Ao(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Dm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nn(),this.Je=la(),this.He=la(),this.Ye=new xe(se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:K(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Xc(i))if(r===0){const a=new G(i.path);this.et(n,a,ut.newNoDocument(a,X.min()))}else ce(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=dr(r).toUint8Array()}catch(u){if(u instanceof q_)return Vs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new vd(a,s,i)}catch(u){return Vs(u instanceof Ni?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Xc(l.target)){const u=new G(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ut.newNoDocument(u,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=ie();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new jl(e,n,this.Ye,this.je,r);return this.je=Nn(),this.Je=la(),this.He=la(),this.Ye=new xe(se),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Vm,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new He(se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new He(se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function la(){return new xe(G.comparator)}function Dm(){return new xe(G.comparator)}const tI={asc:"ASCENDING",desc:"DESCENDING"},nI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rI={and:"AND",or:"OR"};class sI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zc(t,e){return t.useProto3Json||Vl(e)?e:{value:e}}function ul(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iI(t,e){return ul(t,e.toTimestamp())}function cn(t){return ce(!!t,49232),X.fromTimestamp(function(n){const r=hr(n);return new ve(r.seconds,r.nanos)}(t))}function wd(t,e){return eh(t,e).canonicalString()}function eh(t,e){const n=function(s){return new me(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ev(t){const e=me.fromString(t);return ce(xv(e),10190,{key:e.toString()}),e}function th(t,e){return wd(t.databaseId,e.path)}function Bu(t,e){const n=Ev(e);if(n.get(1)!==t.databaseId.projectId)throw new B(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(Sv(n))}function Tv(t,e){return wd(t.databaseId,e)}function oI(t){const e=Ev(t);return e.length===4?me.emptyPath():Sv(e)}function nh(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Sv(t){return ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bm(t,e,n){return{name:th(t,e),fields:n.value.mapValue.fields}}function aI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:K(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,f){return h.useProto3Json?(ce(f===void 0||typeof f=="string",58123),nt.fromBase64String(f||"")):(ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),nt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const f=h.code===void 0?b.UNKNOWN:yv(h.code);return new B(f,h.message||"")}(a);n=new vv(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Bu(t,r.document.name),i=cn(r.document.updateTime),a=r.document.createTime?cn(r.document.createTime):X.min(),l=new Et({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(s,i,a,l),h=r.targetIds||[],f=r.removedTargetIds||[];n=new Ca(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Bu(t,r.document),i=r.readTime?cn(r.readTime):X.min(),a=ut.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ca([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Bu(t,r.document),i=r.removedTargetIds||[];n=new Ca([],i,s,null)}else{if(!("filter"in e))return K(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new XS(s,i),l=r.targetId;n=new _v(l,a)}}return n}function lI(t,e){let n;if(e instanceof Io)n={update:bm(t,e.key,e.value)};else if(e instanceof yd)n={delete:th(t,e.key)};else if(e instanceof wr)n={update:bm(t,e.key,e.data),updateMask:yI(e.fieldMask)};else{if(!(e instanceof GS))return K(16599,{Vt:e.type});n={verify:th(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof al)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof go)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof yo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ll)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw K(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:iI(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:K(27497)}(t,e.precondition)),n}function uI(t,e){return t&&t.length>0?(ce(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?cn(s.updateTime):cn(i);return a.isEqual(X.min())&&(a=cn(i)),new qS(a,s.transformResults||[])}(n,e))):[]}function cI(t,e){return{documents:[Tv(t,e.path)]}}function hI(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Tv(t,s);const i=function(h){if(h.length!==0)return Av(Jt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(f=>function(g){return{field:ns(g.field),direction:pI(g.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Zc(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function dI(t){let e=oI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=Iv(m);return g instanceof Jt&&ev(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(k){return new mo(rs(k.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Vl(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,C=m.values||[];return new ol(C,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,C=m.values||[];return new ol(C,g)}(n.endAt)),PS(e,s,a,i,l,"F",u,h)}function fI(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Iv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=rs(n.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=rs(n.unaryFilter.field);return je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=rs(n.unaryFilter.field);return je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=rs(n.unaryFilter.field);return je.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}}(t):t.fieldFilter!==void 0?function(n){return je.create(rs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jt.create(n.compositeFilter.filters.map(r=>Iv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K(1026)}}(n.compositeFilter.op))}(t):K(30097,{filter:t})}function pI(t){return tI[t]}function mI(t){return nI[t]}function gI(t){return rI[t]}function ns(t){return{fieldPath:t.canonicalString()}}function rs(t){return Ze.fromServerFormat(t.fieldPath)}function Av(t){return t instanceof je?function(n){if(n.op==="=="){if(Em(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NAN"}};if(wm(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Em(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NOT_NAN"}};if(wm(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ns(n.field),op:mI(n.op),value:n.value}}}(t):t instanceof Jt?function(n){const r=n.getFilters().map(s=>Av(s));return r.length===1?r[0]:{compositeFilter:{op:gI(n.op),filters:r}}}(t):K(54877,{filter:t})}function yI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r,s,i=X.min(),a=X.min(),l=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Kn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.yt=e}}function vI(t){const e=dI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.Cn=new EI}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(cr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class EI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new He(me.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new He(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cv=41943040;class vt{static withCacheSize(e){return new vt(e,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vt.DEFAULT_COLLECTION_PERCENTILE=10,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vt.DEFAULT=new vt(Cv,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vt.DISABLED=new vt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Os(0)}static cr(){return new Os(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="LruGarbageCollector",TI=1048576;function Lm([t,e],[n,r]){const s=se(t,n);return s===0?se(e,r):s}class SI{constructor(e){this.Ir=e,this.buffer=new He(Lm),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Lm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class II{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(Om,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qs(n)?q(Om,"Ignoring IndexedDB error during garbage collection: ",n):await $s(n)}await this.Vr(3e5)})}}class AI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Pl.ce);const r=new SI(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Mm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mm):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),es()<=ae.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function xI(t,e){return new AI(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.changes=new Gr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&qi(r.mutation,s,Pt.empty(),ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=br();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Ri();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=br();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Nn();const a=$i(),l=function(){return $i()}();return n.forEach((u,h)=>{const f=r.get(h.key);s.has(h.key)&&(f===void 0||f.mutation instanceof wr)?i=i.insert(h.key,h):f!==void 0?(a.set(h.key,f.mutation.getFieldMask()),qi(f.mutation,h,f.mutation.getFieldMask(),ve.now())):a.set(h.key,Pt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,f)=>a.set(h,f)),n.forEach((h,f)=>l.set(h,new RI(f,a.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=$i();let s=new xe((a,l)=>a-l),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||Pt.empty();f=l.applyToLocalView(h,f),r.set(u,f);const m=(s.get(l.batchId)||ie()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,f=u.value,m=uv();f.forEach(g=>{if(!i.has(g)){const C=mv(n.get(g),r.get(g));C!==null&&m.set(g,C),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return M.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return G.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(br());let l=co,u=i;return a.next(h=>M.forEach(h,(f,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ie())).next(f=>({batchId:l,changes:lv(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=Ri();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Ri();return this.indexManager.getCollectionParents(e,i).next(l=>M.forEach(l,u=>{const h=function(m,g){return new Hs(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(f=>{f.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,h)=>{const f=h.getKey();a.get(f)===null&&(a=a.insert(f,ut.newInvalidDocument(f)))});let l=Ri();return a.forEach((u,h)=>{const f=i.get(u);f!==void 0&&qi(f.mutation,h,Pt.empty(),ve.now()),Ml(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:cn(s.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:vI(s.bundledQuery),readTime:cn(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.overlays=new xe(G.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=br();return M.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=br(),i=n.length+1,a=new G(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new xe((h,f)=>h-f);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=i.get(h.largestBatchId);f===null&&(f=br(),i=i.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const l=br(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>l.set(h,f)),!(l.size()>=s)););return M.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new KS(n,r));let i=this.qr.get(n);i===void 0&&(i=ie(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(){this.Qr=new He(Ge.$r),this.Ur=new He(Ge.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ge(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ge(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new G(new me([])),r=new Ge(n,e),s=new Ge(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new G(new me([])),r=new Ge(n,e),s=new Ge(n,e+1);let i=ie();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Ge(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ge{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||se(e.Yr,n.Yr)}static Kr(e,n){return se(e.Yr,n.Yr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new He(Ge.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new QS(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Ge(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?cd:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ge(n,0),s=new Ge(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(se);return n.forEach(s=>{const i=new Ge(s,0),a=new Ge(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const a=new Ge(new G(i),0);let l=new He(se);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Yr)),!0)},a),M.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,s=>{const i=new Ge(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ge(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.ri=e,this.docs=function(){return new xe(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=Nn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ut.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Nn();const a=n.path,l=new G(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||uS(lS(f),r)<=0||(s.has(f.key)||Ml(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){K(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new MI(this)}getSize(e){return M.resolve(this.size)}}class MI extends CI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.persistence=e,this.si=new Gr(n=>fd(n),pd),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.oi=0,this._i=new Ed,this.targetCount=0,this.ai=Os.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Os(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n){this.ui={},this.overlays={},this.ci=new Pl(0),this.li=!1,this.li=!0,this.hi=new VI,this.referenceDelegate=e(this),this.Pi=new OI(this),this.indexManager=new wI,this.remoteDocumentCache=function(s){return new bI(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new _I(n),this.Ii=new kI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new DI(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new LI(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class LI extends hS{constructor(e){super(),this.currentSequenceNumber=e}}class Td{constructor(e){this.persistence=e,this.Ri=new Ed,this.Vi=null}static mi(e){return new Td(e)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{const s=G.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class cl{constructor(e,n){this.persistence=e,this.pi=new Gr(r=>pS(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=xI(this,n)}static mi(e,n){return new cl(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,X.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ia(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Sd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return kE()?8:dS(RE())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new jI;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(es()<=ae.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(es()<=ae.DEBUG&&q("QueryEngine","Query:",ts(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(es()<=ae.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,un(n))):M.resolve())}ys(e,n){if(Am(n))return M.resolve(null);let r=un(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Jc(n,null,"F"),r=un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ie(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,l);return this.Cs(n,h,a,u.readTime)?this.ys(e,Jc(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,s){return Am(n)||s.isEqual(X.min())?M.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?M.resolve(null):(es()<=ae.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ts(n)),this.vs(e,a,n,aS(s,co)).next(l=>l))})}Ds(e,n){let r=new He(ov(e));return n.forEach((s,i)=>{Ml(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return es()<=ae.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ts(n)),this.ps.getDocumentsMatchingQuery(e,n,cr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="LocalStore",UI=3e8;class zI{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new xe(se),this.xs=new Gr(i=>fd(i),pd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function BI(t,e,n,r){return new zI(t,e,n,r)}async function Nv(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let u=ie();for(const h of s){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of i){l.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:l}))})})}function $I(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,h,f){const m=h.batch,g=m.keys();let C=M.resolve();return g.forEach(k=>{C=C.next(()=>f.getEntry(u,k)).next(V=>{const L=h.docVersions.get(k);ce(L!==null,48541),V.version.compareTo(L)<0&&(m.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),f.addEntry(V)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ie();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function kv(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function qI(t,e){const n=J(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,m)));let C=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?C=C.withResumeToken(nt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(f.resumeToken,r)),s=s.insert(m,C),function(V,L,I){return V.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=UI?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(g,C,f)&&l.push(n.Pi.updateTargetData(i,C))});let u=Nn(),h=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(HI(i,a,e.documentUpdates).next(f=>{u=f.ks,h=f.qs})),!r.isEqual(X.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return M.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Ms=s,i))}function HI(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Nn();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):q(Id,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:s}})}function WI(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=cd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GI(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new Kn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function rh(t,e,n){const r=J(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!qs(a))throw a;q(Id,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function jm(t,e,n){const r=J(t);let s=X.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,f){const m=J(u),g=m.xs.get(f);return g!==void 0?M.resolve(m.Ms.get(g)):m.Pi.getTargetData(h,f)}(r,a,un(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:X.min(),n?i:ie())).next(l=>(QI(r,DS(e),l),{documents:l,Qs:i})))}function QI(t,e,n){let r=t.Os.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Fm{constructor(){this.activeTargetIds=FS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KI{constructor(){this.Mo=new Fm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Fm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="ConnectivityMonitor";class zm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(Um,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(Um,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ua=null;function sh(){return ua===null?ua=function(){return 268435456+Math.round(2147483648*Math.random())}():ua++,"0x"+ua.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u="RestConnection",YI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===sl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=sh(),l=this.zo(e,n.toUriEncodedString());q($u,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:h}=new URL(l),f=od(h);return this.Jo(e,l,u,r,f).then(m=>(q($u,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Vs($u,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=YI[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot="WebChannelConnection";class eA extends JI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=sh();return new Promise((l,u)=>{const h=new D_;h.setWithCredentials(!0),h.listenOnce(b_.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Sa.NO_ERROR:const m=h.getResponseJson();q(ot,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case Sa.TIMEOUT:q(ot,`RPC '${e}' ${a} timed out`),u(new B(b.DEADLINE_EXCEEDED,"Request time out"));break;case Sa.HTTP_ERROR:const g=h.getStatus();if(q(ot,`RPC '${e}' ${a} failed with status:`,g,"response text:",h.getResponseText()),g>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const k=C==null?void 0:C.error;if(k&&k.status&&k.message){const V=function(I){const w=I.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(w)>=0?w:b.UNKNOWN}(k.status);u(new B(V,k.message))}else u(new B(b.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new B(b.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{q(ot,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(s);q(ot,`RPC '${e}' ${a} sending request:`,s),h.send(n,"POST",f,r,15)})}T_(e,n,r){const s=sh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=L_(),l=O_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");q(ot,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=a.createWebChannel(f,u);this.I_(m);let g=!1,C=!1;const k=new ZI({Yo:L=>{C?q(ot,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(g||(q(ot,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),q(ot,`RPC '${e}' stream ${s} sending:`,L),m.send(L))},Zo:()=>m.close()}),V=(L,I,w)=>{L.listen(I,x=>{try{w(x)}catch(D){setTimeout(()=>{throw D},0)}})};return V(m,Ci.EventType.OPEN,()=>{C||(q(ot,`RPC '${e}' stream ${s} transport opened.`),k.o_())}),V(m,Ci.EventType.CLOSE,()=>{C||(C=!0,q(ot,`RPC '${e}' stream ${s} transport closed`),k.a_(),this.E_(m))}),V(m,Ci.EventType.ERROR,L=>{C||(C=!0,Vs(ot,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),k.a_(new B(b.UNAVAILABLE,"The operation could not be completed")))}),V(m,Ci.EventType.MESSAGE,L=>{var I;if(!C){const w=L.data[0];ce(!!w,16349);const x=w,D=(x==null?void 0:x.error)||((I=x[0])==null?void 0:I.error);if(D){q(ot,`RPC '${e}' stream ${s} received error:`,D);const U=D.status;let F=function(E){const S=Oe[E];if(S!==void 0)return yv(S)}(U),v=D.message;F===void 0&&(F=b.INTERNAL,v="Unknown error status: "+U+" with message "+D.message),C=!0,k.a_(new B(F,v)),m.close()}else q(ot,`RPC '${e}' stream ${s} received:`,w),k.u_(w)}}),V(l,M_.STAT_EVENT,L=>{L.stat===Hc.PROXY?q(ot,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===Hc.NOPROXY&&q(ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function qu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t){return new sI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="PersistentStream";class Vv{constructor(e,n,r,s,i,a,l,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Pv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(Rn(n.toString()),Rn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new B(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(Bm,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(q(Bm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tA extends Vv{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=aI(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?X.min():a.readTime?cn(a.readTime):X.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=nh(this.serializer),n.addTarget=function(i,a){let l;const u=a.target;if(l=Xc(u)?{documents:cI(i,u)}:{query:hI(i,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=wv(i,a.resumeToken);const h=Zc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(X.min())>0){l.readTime=ul(i,a.snapshotVersion.toTimestamp());const h=Zc(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=fI(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=nh(this.serializer),n.removeTarget=e,this.q_(n)}}class nA extends Vv{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=uI(e.writeResults,e.commitTime),r=cn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=nh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lI(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{}class sA extends rA{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new B(b.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,eh(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(b.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,eh(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(b.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class iA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rn(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="RemoteStore";class oA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Qr(this)&&(q(qr,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.Ea.add(4),await xo(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Ul(h)}(this))})}),this.Ra=new iA(r,s)}}async function Ul(t){if(Qr(t))for(const e of t.da)await e(!0)}async function xo(t){for(const e of t.da)await e(!1)}function Dv(t,e){const n=J(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Rd(n)?Cd(n):Ws(n).O_()&&xd(n,e))}function Ad(t,e){const n=J(t),r=Ws(n);n.Ia.delete(e),r.O_()&&bv(n,e),n.Ia.size===0&&(r.O_()?r.L_():Qr(n)&&n.Ra.set("Unknown"))}function xd(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ws(t).Y_(e)}function bv(t,e){t.Va.Ue(e),Ws(t).Z_(e)}function Cd(t){t.Va=new eI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ws(t).start(),t.Ra.ua()}function Rd(t){return Qr(t)&&!Ws(t).x_()&&t.Ia.size>0}function Qr(t){return J(t).Ea.size===0}function Mv(t){t.Va=void 0}async function aA(t){t.Ra.set("Online")}async function lA(t){t.Ia.forEach((e,n)=>{xd(t,e)})}async function uA(t,e){Mv(t),Rd(t)?(t.Ra.ha(e),Cd(t)):t.Ra.set("Unknown")}async function cA(t,e,n){if(t.Ra.set("Online"),e instanceof vv&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){q(qr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hl(t,r)}else if(e instanceof Ca?t.Va.Ze(e):e instanceof _v?t.Va.st(e):t.Va.tt(e),!n.isEqual(X.min()))try{const r=await kv(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(h);f&&i.Ia.set(h,f.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(nt.EMPTY_BYTE_STRING,f.snapshotVersion)),bv(i,u);const m=new Kn(f.target,u,h,f.sequenceNumber);xd(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){q(qr,"Failed to raise snapshot:",r),await hl(t,r)}}async function hl(t,e,n){if(!qs(e))throw e;t.Ea.add(1),await xo(t),t.Ra.set("Offline"),n||(n=()=>kv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(qr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ul(t)})}function Ov(t,e){return e().catch(n=>hl(t,n,e))}async function zl(t){const e=J(t),n=pr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:cd;for(;hA(e);)try{const s=await WI(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,dA(e,s)}catch(s){await hl(e,s)}Lv(e)&&jv(e)}function hA(t){return Qr(t)&&t.Ta.length<10}function dA(t,e){t.Ta.push(e);const n=pr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Lv(t){return Qr(t)&&!pr(t).x_()&&t.Ta.length>0}function jv(t){pr(t).start()}async function fA(t){pr(t).ra()}async function pA(t){const e=pr(t);for(const n of t.Ta)e.ea(n.mutations)}async function mA(t,e,n){const r=t.Ta.shift(),s=_d.from(r,e,n);await Ov(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zl(t)}async function gA(t,e){e&&pr(t).X_&&await async function(r,s){if(function(a){return YS(a)&&a!==b.ABORTED}(s.code)){const i=r.Ta.shift();pr(r).B_(),await Ov(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await zl(r)}}(t,e),Lv(t)&&jv(t)}async function $m(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),q(qr,"RemoteStore received new credentials");const r=Qr(n);n.Ea.add(3),await xo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ul(n)}async function yA(t,e){const n=J(t);e?(n.Ea.delete(2),await Ul(n)):e||(n.Ea.add(2),await xo(n),n.Ra.set("Unknown"))}function Ws(t){return t.ma||(t.ma=function(n,r,s){const i=J(n);return i.sa(),new tA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:aA.bind(null,t),t_:lA.bind(null,t),r_:uA.bind(null,t),H_:cA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Rd(t)?Cd(t):t.Ra.set("Unknown")):(await t.ma.stop(),Mv(t))})),t.ma}function pr(t){return t.fa||(t.fa=function(n,r,s){const i=J(n);return i.sa(),new nA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:fA.bind(null,t),r_:gA.bind(null,t),ta:pA.bind(null,t),na:mA.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await zl(t)):(await t.fa.stop(),t.Ta.length>0&&(q(qr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Nd(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kd(t,e){if(Rn("AsyncQueue",`${e}: ${t}`),qs(t))return new B(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{static emptySet(e){return new Ss(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Ri(),this.sortedSet=new xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ss)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ss;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.ga=new xe(G.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):K(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ls{constructor(e,n,r,s,i,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ls(e,n,Ss.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class vA{constructor(){this.queries=Hm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=J(n),i=s.queries;s.queries=Hm(),i.forEach((a,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new B(b.ABORTED,"Firestore shutting down"))}}function Hm(){return new Gr(t=>iv(t),bl)}async function Fv(t,e){const n=J(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new _A,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=kd(a,`Initialization of query '${ts(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Pd(n)}async function Uv(t,e){const n=J(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wA(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&Pd(n)}function EA(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Pd(t){t.Ca.forEach(e=>{e.next()})}var ih,Wm;(Wm=ih||(ih={})).Ma="default",Wm.Cache="cache";class zv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ls(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ls.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ih.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e){this.key=e}}class $v{constructor(e){this.key=e}}class TA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ie(),this.mutatedKeys=ie(),this.eu=ov(e),this.tu=new Ss(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new qm,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),C=Ml(this.query,m)?m:null,k=!!g&&this.mutatedKeys.has(g.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let L=!1;g&&C?g.data.isEqual(C.data)?k!==V&&(r.track({type:3,doc:C}),L=!0):this.su(g,C)||(r.track({type:2,doc:C}),L=!0,(u&&this.eu(C,u)>0||h&&this.eu(C,h)<0)&&(l=!0)):!g&&C?(r.track({type:0,doc:C}),L=!0):g&&!C&&(r.track({type:1,doc:g}),L=!0,(u||h)&&(l=!0)),L&&(C?(a=a.add(C),i=V?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((f,m)=>function(C,k){const V=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K(20277,{Rt:L})}};return V(C)-V(k)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new Ls(this.query,e.tu,i,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new $v(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Bv(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ls.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vd="SyncEngine";class SA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class IA{constructor(e){this.key=e,this.hu=!1}}class AA{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Gr(l=>iv(l),bl),this.Iu=new Map,this.Eu=new Set,this.du=new xe(G.comparator),this.Au=new Map,this.Ru=new Ed,this.Vu={},this.mu=new Map,this.fu=Os.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xA(t,e,n=!0){const r=Kv(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await qv(r,e,n,!0),s}async function CA(t,e){const n=Kv(t);await qv(n,e,!0,!1)}async function qv(t,e,n,r){const s=await GI(t.localStore,un(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await RA(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Dv(t.remoteStore,s),l}async function RA(t,e,n,r,s){t.pu=(m,g,C)=>async function(V,L,I,w){let x=L.view.ru(I);x.Cs&&(x=await jm(V.localStore,L.query,!1).then(({documents:v})=>L.view.ru(v,x)));const D=w&&w.targetChanges.get(L.targetId),U=w&&w.targetMismatches.get(L.targetId)!=null,F=L.view.applyChanges(x,V.isPrimaryClient,D,U);return Qm(V,L.targetId,F.au),F.snapshot}(t,m,g,C);const i=await jm(t.localStore,e,!0),a=new TA(e,i.Qs),l=a.ru(i.documents),u=Ao.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,u);Qm(t,n,h.au);const f=new SA(e,n,a);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function NA(t,e,n){const r=J(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!bl(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ad(r.remoteStore,s.targetId),oh(r,s.targetId)}).catch($s)):(oh(r,s.targetId),await rh(r.localStore,s.targetId,!0))}async function kA(t,e){const n=J(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ad(n.remoteStore,r.targetId))}async function PA(t,e,n){const r=jA(t);try{const s=await function(a,l){const u=J(a),h=ve.now(),f=l.reduce((C,k)=>C.add(k.key),ie());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",C=>{let k=Nn(),V=ie();return u.Ns.getEntries(C,f).next(L=>{k=L,k.forEach((I,w)=>{w.isValidDocument()||(V=V.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(C,k)).next(L=>{m=L;const I=[];for(const w of l){const x=WS(w,m.get(w.key).overlayedDocument);x!=null&&I.push(new wr(w.key,x,Y_(x.value.mapValue),Xt.exists(!0)))}return u.mutationQueue.addMutationBatch(C,h,I,l)}).next(L=>{g=L;const I=L.applyToLocalDocumentSet(m,V);return u.documentOverlayCache.saveOverlays(C,L.batchId,I)})}).then(()=>({batchId:g.batchId,changes:lv(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new xe(se)),h=h.insert(l,u),a.Vu[a.currentUser.toKey()]=h}(r,s.batchId,n),await Co(r,s.changes),await zl(r.remoteStore)}catch(s){const i=kd(s,"Failed to persist write");n.reject(i)}}async function Hv(t,e){const n=J(t);try{const r=await qI(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ce(a.hu,14607):s.removedDocuments.size>0&&(ce(a.hu,42227),a.hu=!1))}),await Co(n,r,e)}catch(r){await $s(r)}}function Gm(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.va(l)&&(h=!0)}),h&&Pd(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VA(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new xe(G.comparator);a=a.insert(i,ut.newNoDocument(i,X.min()));const l=ie().add(i),u=new jl(X.min(),new Map,new xe(se),a,l);await Hv(r,u),r.du=r.du.remove(i),r.Au.delete(e),Dd(r)}else await rh(r.localStore,e,!1).then(()=>oh(r,e,n)).catch($s)}async function DA(t,e){const n=J(t),r=e.batch.batchId;try{const s=await $I(n.localStore,e);Gv(n,r,null),Wv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Co(n,s)}catch(s){await $s(s)}}async function bA(t,e,n){const r=J(t);try{const s=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(ce(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);Gv(r,e,n),Wv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Co(r,s)}catch(s){await $s(s)}}function Wv(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Gv(t,e,n){const r=J(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function oh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Qv(t,r)})}function Qv(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ad(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Dd(t))}function Qm(t,e,n){for(const r of n)r instanceof Bv?(t.Ru.addReference(r.key,e),MA(t,r)):r instanceof $v?(q(Vd,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Qv(t,r.key)):K(19791,{wu:r})}function MA(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(q(Vd,"New document in limbo: "+n),t.Eu.add(r),Dd(t))}function Dd(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(me.fromString(e)),r=t.fu.next();t.Au.set(r,new IA(n)),t.du=t.du.insert(n,r),Dv(t.remoteStore,new Kn(un(md(n.path)),r,"TargetPurposeLimboResolution",Pl.ce))}}async function Co(t,e,n){const r=J(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{a.push(r.pu(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Sd.As(u.targetId,h);i.push(m)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(u,h){const f=J(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>M.forEach(h,g=>M.forEach(g.Es,C=>f.persistence.referenceDelegate.addReference(m,g.targetId,C)).next(()=>M.forEach(g.ds,C=>f.persistence.referenceDelegate.removeReference(m,g.targetId,C)))))}catch(m){if(!qs(m))throw m;q(Id,"Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const C=f.Ms.get(g),k=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(k);f.Ms=f.Ms.insert(g,V)}}}(r.localStore,i))}async function OA(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){q(Vd,"User change. New user:",e.toKey());const r=await Nv(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new B(b.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Co(n,r.Ls)}}function LA(t,e){const n=J(t),r=n.Au.get(e);if(r&&r.hu)return ie().add(r.key);{let s=ie();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Kv(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VA.bind(null,e),e.Pu.H_=wA.bind(null,e.eventManager),e.Pu.yu=EA.bind(null,e.eventManager),e}function jA(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bA.bind(null,e),e}class dl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return BI(this.persistence,new FI,e.initialUser,this.serializer)}Cu(e){return new Rv(Td.mi,this.serializer)}Du(e){return new KI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dl.provider={build:()=>new dl};class FA extends dl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ce(this.persistence.referenceDelegate instanceof cl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new II(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?vt.withCacheSize(this.cacheSizeBytes):vt.DEFAULT;return new Rv(r=>cl.mi(r,n),this.serializer)}}class ah{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OA.bind(null,this.syncEngine),await yA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vA}()}createDatastore(e){const n=Fl(e.databaseInfo.databaseId),r=function(i){return new eA(i)}(e.databaseInfo);return function(i,a,l,u){return new sA(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new oA(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Gm(this.syncEngine,n,0),function(){return zm.v()?new zm:new XI}())}createSyncEngine(e,n){return function(s,i,a,l,u,h,f){const m=new AA(s,i,a,l,u,h);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=J(s);q(qr,"RemoteStore shutting down."),i.Ea.add(5),await xo(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ah.provider={build:()=>new ah};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="FirestoreClient";class UA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=at.UNAUTHENTICATED,this.clientId=ud.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{q(mr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(q(mr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hu(t,e){t.asyncQueue.verifyOperationInProgress(),q(mr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Nv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Km(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zA(t);q(mr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>$m(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>$m(e.remoteStore,s)),t._onlineComponents=e}async function zA(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(mr,"Using user provided OfflineComponentProvider");try{await Hu(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===b.FAILED_PRECONDITION||s.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Vs("Error using user provided cache. Falling back to memory cache: "+n),await Hu(t,new dl)}}else q(mr,"Using default OfflineComponentProvider"),await Hu(t,new FA(void 0));return t._offlineComponents}async function Yv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(mr,"Using user provided OnlineComponentProvider"),await Km(t,t._uninitializedComponentsProvider._online)):(q(mr,"Using default OnlineComponentProvider"),await Km(t,new ah))),t._onlineComponents}function BA(t){return Yv(t).then(e=>e.syncEngine)}async function Jv(t){const e=await Yv(t),n=e.eventManager;return n.onListen=xA.bind(null,e.syncEngine),n.onUnlisten=NA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kA.bind(null,e.syncEngine),n}function $A(t,e,n={}){const r=new En;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,h){const f=new Xv({next:g=>{f.Nu(),a.enqueueAndForget(()=>Uv(i,m));const C=g.docs.has(l);!C&&g.fromCache?h.reject(new B(b.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&g.fromCache&&u&&u.source==="server"?h.reject(new B(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new zv(md(l.path),f,{includeMetadataChanges:!0,qa:!0});return Fv(i,m)}(await Jv(t),t.asyncQueue,e,n,r)),r.promise}function qA(t,e,n={}){const r=new En;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,h){const f=new Xv({next:g=>{f.Nu(),a.enqueueAndForget(()=>Uv(i,m)),g.fromCache&&u.source==="server"?h.reject(new B(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new zv(l,f,{includeMetadataChanges:!0,qa:!0});return Fv(i,m)}(await Jv(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="firestore.googleapis.com",Ym=!0;class Jm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=e0,this.ssl=Ym}else this.host=e.host,this.ssl=e.ssl??Ym;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Cv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TI)throw new B(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zv(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new B(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new B(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new B(b.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bl{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XT;switch(r.type){case"firstParty":return new eS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xm.get(n);r&&(q("ComponentProvider","Removing Datastore"),Xm.delete(n),r.terminate())}(this),Promise.resolve()}}function HA(t,e,n,r={}){var h;t=fn(t,Bl);const s=od(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(SE(`https://${l}`),CE("Firestore",!0)),i.host!==e0&&i.host!==l&&Vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!el(u,a)&&(t._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=at.MOCK_USER;else{f=IE(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new at(g)}t._authCredentials=new YT(new F_(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kr(this.firestore,e,this._query)}}class Me{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Me(this.firestore,e,this._key)}toJSON(){return{type:Me._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(So(n,Me._jsonSchema))return new Me(e,r||null,new G(me.fromString(n.referencePath)))}}Me._jsonSchemaVersion="firestore/documentReference/1.0",Me._jsonSchema={type:Fe("string",Me._jsonSchemaVersion),referencePath:Fe("string")};class ar extends Kr{constructor(e,n,r){super(e,n,md(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new G(e))}withConverter(e){return new ar(this.firestore,e,this._path)}}function Rt(t,e,...n){if(t=xn(t),U_("collection","path",e),t instanceof Bl){const r=me.fromString(e,...n);return hm(r),new ar(t,null,r)}{if(!(t instanceof Me||t instanceof ar))throw new B(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return hm(r),new ar(t.firestore,null,r)}}function ke(t,e,...n){if(t=xn(t),arguments.length===1&&(e=ud.newId()),U_("doc","path",e),t instanceof Bl){const r=me.fromString(e,...n);return cm(r),new Me(t,null,new G(r))}{if(!(t instanceof Me||t instanceof ar))throw new B(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return cm(r),new Me(t.firestore,t instanceof ar?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="AsyncQueue";class eg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Pv(this,"async_queue_retry"),this._c=()=>{const r=qu();r&&q(Zm,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=qu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new En;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qs(e))throw e;q(Zm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Rn("INTERNAL UNHANDLED ERROR: ",tg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Nd.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&K(47125,{Pc:tg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function tg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Gs extends Bl{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new eg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eg(e),this._firestoreClient=void 0,await e}}}function WA(t,e){const n=typeof t=="object"?t:LT(),r=typeof t=="string"?t:sl,s=VT(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=EE("firestore");i&&HA(s,...i)}return s}function bd(t){if(t._terminated)throw new B(b.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GA(t),t._firestoreClient}function GA(t){var r,s,i;const e=t._freezeSettings(),n=function(l,u,h,f){return new yS(l,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Zv(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new UA(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ft(nt.fromBase64String(e))}catch(n){throw new B(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ft(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ft._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(So(e,Ft._jsonSchema))return Ft.fromBase64String(e.bytes)}}Ft._jsonSchemaVersion="firestore/bytes/1.0",Ft._jsonSchema={type:Fe("string",Ft._jsonSchemaVersion),bytes:Fe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hn._jsonSchemaVersion}}static fromJSON(e){if(So(e,hn._jsonSchema))return new hn(e.latitude,e.longitude)}}hn._jsonSchemaVersion="firestore/geoPoint/1.0",hn._jsonSchema={type:Fe("string",hn._jsonSchemaVersion),latitude:Fe("number"),longitude:Fe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:dn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(So(e,dn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new dn(e.vectorValues);throw new B(b.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}dn._jsonSchemaVersion="firestore/vectorValue/1.0",dn._jsonSchema={type:Fe("string",dn._jsonSchemaVersion),vectorValues:Fe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=/^__.*__$/;class KA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Io(e,this.data,n,this.fieldTransforms)}}class t0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function n0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:t})}}class Od{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Od({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return fl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(n0(this.Ac)&&QA.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class XA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fl(e)}Cc(e,n,r,s=!1){return new Od({Ac:e,methodName:n,Dc:r,path:Ze.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ld(t){const e=t._freezeSettings(),n=Fl(t._databaseId);return new XA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function YA(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);jd("Data must be an object, but it was:",a,r);const l=r0(r,a);let u,h;if(i.merge)u=new Pt(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=lh(e,m,n);if(!a.contains(g))throw new B(b.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);i0(f,g)||f.push(g)}u=new Pt(f),h=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=a.fieldTransforms;return new KA(new Et(l),u,h)}class ql extends Md{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ql}}function JA(t,e,n,r){const s=t.Cc(1,e,n);jd("Data must be an object, but it was:",s,r);const i=[],a=Et.empty();vr(r,(u,h)=>{const f=Fd(e,u,n);h=xn(h);const m=s.yc(f);if(h instanceof ql)i.push(f);else{const g=Ro(h,m);g!=null&&(i.push(f),a.set(f,g))}});const l=new Pt(i);return new t0(a,l,s.fieldTransforms)}function ZA(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[lh(e,r,n)],u=[s];if(i.length%2!=0)throw new B(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(lh(e,i[g])),u.push(i[g+1]);const h=[],f=Et.empty();for(let g=l.length-1;g>=0;--g)if(!i0(h,l[g])){const C=l[g];let k=u[g];k=xn(k);const V=a.yc(C);if(k instanceof ql)h.push(C);else{const L=Ro(k,V);L!=null&&(h.push(C),f.set(C,L))}}const m=new Pt(h);return new t0(f,m,a.fieldTransforms)}function ex(t,e,n,r=!1){return Ro(n,t.Cc(r?4:3,e))}function Ro(t,e){if(s0(t=xn(t)))return jd("Unsupported field value:",e,t),r0(t,e);if(t instanceof Md)return function(r,s){if(!n0(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let u=Ro(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return US(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ve.fromDate(r);return{timestampValue:ul(s.serializer,i)}}if(r instanceof ve){const i=new ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ul(s.serializer,i)}}if(r instanceof hn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ft)return{bytesValue:wv(s.serializer,r._byteString)};if(r instanceof Me){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:wd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof dn)return function(a,l){return{mapValue:{fields:{[K_]:{stringValue:X_},[il]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return gd(l.serializer,h)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${kl(r)}`)}(t,e)}function r0(t,e){const n={};return $_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vr(t,(r,s)=>{const i=Ro(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function s0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ve||t instanceof hn||t instanceof Ft||t instanceof Me||t instanceof Md||t instanceof dn)}function jd(t,e,n){if(!s0(n)||!z_(n)){const r=kl(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function lh(t,e,n){if((e=xn(e))instanceof $l)return e._internalPath;if(typeof e=="string")return Fd(t,e);throw fl("Field path arguments must be of type string or ",t,!1,void 0,n)}const tx=new RegExp("[~\\*/\\[\\]]");function Fd(t,e,n){if(e.search(tx)>=0)throw fl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $l(...e.split("."))._internalPath}catch{throw fl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fl(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new B(b.INVALID_ARGUMENT,l+t+u)}function i0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Hl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nx extends o0{data(){return super.data()}}function Hl(t,e){return typeof e=="string"?Fd(t,e):e instanceof $l?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ud{}class a0 extends Ud{}function Un(t,e,...n){let r=[];e instanceof Ud&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof zd).length,l=i.filter(u=>u instanceof Wl).length;if(a>1||a>0&&l>0)throw new B(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Wl extends a0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wl(e,n,r)}_apply(e){const n=this._parse(e);return l0(e._query,n),new Kr(e.firestore,e.converter,Yc(e._query,n))}_parse(e){const n=Ld(e.firestore);return function(i,a,l,u,h,f,m){let g;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){sg(m,f);const k=[];for(const V of m)k.push(rg(u,i,V));g={arrayValue:{values:k}}}else g=rg(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||sg(m,f),g=ex(l,a,m,f==="in"||f==="not-in");return je.create(h,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wi(t,e,n){const r=e,s=Hl("where",t);return Wl._create(s,r,n)}class zd extends Ud{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zd(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Jt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)l0(a,u),a=Yc(a,u)}(e._query,n),new Kr(e.firestore,e.converter,Yc(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bd extends a0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Bd(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new B(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mo(i,a)}(e._query,this._field,this._direction);return new Kr(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Hs(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ng(t,e="asc"){const n=e,r=Hl("orderBy",t);return Bd._create(r,n)}function rg(t,e,n){if(typeof(n=xn(n))=="string"){if(n==="")throw new B(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sv(e)&&n.indexOf("/")!==-1)throw new B(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(me.fromString(n));if(!G.isDocumentKey(r))throw new B(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vm(t,new G(r))}if(n instanceof Me)return vm(t,n._key);throw new B(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kl(n)}.`)}function sg(t,e){if(!Array.isArray(t)||t.length===0)throw new B(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function l0(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sx{convertValue(e,n="none"){switch(fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[il].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>De(a.doubleValue));return new dn(n)}convertGeoPoint(e){return new hn(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Dl(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ho(e));default:return null}}convertTimestamp(e){const n=hr(e);return new ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=me.fromString(e);ce(xv(r),9688,{name:e});const s=new fo(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||Rn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ki{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lr extends o0{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ra(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Hl("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(b.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Lr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Lr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lr._jsonSchema={type:Fe("string",Lr._jsonSchemaVersion),bundleSource:Fe("string","DocumentSnapshot"),bundleName:Fe("string"),bundle:Fe("string")};class Ra extends Lr{data(e={}){return super.data(e)}}class Is{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ki(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ra(this._firestore,this._userDataWriter,r.key,r,new ki(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Ra(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ki(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Ra(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ki(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,f=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),f=a.indexOf(l.doc.key)),{type:ox(l.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(b.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Is._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ud.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ox(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t){t=fn(t,Me);const e=fn(t.firestore,Gs);return $A(bd(e),t._key).then(n=>ax(e,t,n))}Is._jsonSchemaVersion="firestore/querySnapshot/1.0",Is._jsonSchema={type:Fe("string",Is._jsonSchemaVersion),bundleSource:Fe("string","QuerySnapshot"),bundleName:Fe("string"),bundle:Fe("string")};class u0 extends sx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ft(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,n)}}function _t(t){t=fn(t,Kr);const e=fn(t.firestore,Gs),n=bd(e),r=new u0(e);return rx(t._query),qA(n,t._query).then(s=>new Is(e,r,t,s))}function zn(t,e,n){t=fn(t,Me);const r=fn(t.firestore,Gs),s=ix(t.converter,e,n);return $d(r,[YA(Ld(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Xt.none())])}function Ei(t,e,n,...r){t=fn(t,Me);const s=fn(t.firestore,Gs),i=Ld(s);let a;return a=typeof(e=xn(e))=="string"||e instanceof $l?ZA(i,"updateDoc",t._key,e,n,r):JA(i,"updateDoc",t._key,e),$d(s,[a.toMutation(t._key,Xt.exists(!0))])}function Bn(t){return $d(fn(t.firestore,Gs),[new yd(t._key,Xt.none())])}function $d(t,e){return function(r,s){const i=new En;return r.asyncQueue.enqueueAndForget(async()=>PA(await BA(r),s,i)),i.promise}(bd(t),e)}function ax(t,e,n){const r=n.docs.get(e._key),s=new u0(t);return new Lr(t,s,e._key,r,new ki(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Bs=s})(OT),nl(new lo("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Gs(new JT(r.getProvider("auth-internal")),new tS(a,r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new B(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fo(h.options.projectId,f)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Ts(om,am,e),Ts(om,am,"esm2020")})();const uh={apiKey:"AIzaSyAO32W5Qdmdbt9mtp_ScyQE2fO5bEYC3LU",authDomain:"yj-order.firebaseapp.com",projectId:"yj-order",storageBucket:"yj-order.firebasestorage.app",messagingSenderId:"399409684502",appId:"1:399409684502:web:33a5660e855671d3211537"},lx=N_(uh),te=WA(lx),ux=!!uh.apiKey&&!!uh.projectId,fe={ORDERS:"cofoodie_orders",MENU_CATEGORIES:"cofoodie_menus_v3",EMPLOYEES:"cofoodie_employees_v2",ANNOUNCEMENTS:"cofoodie_announcements",ADMIN_SETTINGS:"cofoodie_admin_settings",ADMIN_ACCOUNTS:"cofoodie_admin_accounts",SESSION:"cofoodie_session",SESSION_USER_ID:"cofoodie_session_user_id",FRONTEND_PASSWORD:"cofoodie_frontend_password"},cx=[],hx=[],dx=[],Ti=[{id:"default_admin",name:"",username:"admin",password:"password",isSuperAdmin:!0}],ca="24664941";class fx{get useCloud(){return ux}async getOrders(){if(this.useCloud)try{const n=Un(Rt(te,"orders"),ng("timestamp","desc"));return(await _t(n)).docs.map(s=>({id:s.id,...s.data()}))}catch(n){return console.error("Fetch Orders Error:",n),[]}const e=localStorage.getItem(fe.ORDERS);return e?JSON.parse(e):[]}async saveOrder(e){if(this.useCloud){const{id:r,...s}=e;await zn(ke(te,"orders",r),s);return}const n=await this.getOrders();n.push(e),localStorage.setItem(fe.ORDERS,JSON.stringify(n))}async updateOrderStatus(e,n){if(this.useCloud){const i=ke(te,"orders",e);await Ei(i,{status:n});return}const r=await this.getOrders(),s=r.findIndex(i=>i.id===e);s!==-1&&(r[s].status=n,localStorage.setItem(fe.ORDERS,JSON.stringify(r)))}async toggleOrderPayment(e){if(this.useCloud){const s=ke(te,"orders",e),i=await ig(s);if(i.exists()){const a=i.data().isPaid;await Ei(s,{isPaid:!a})}else console.error(`Order with ID ${e} not found for payment toggle.`);return}const n=await this.getOrders(),r=n.findIndex(s=>s.id===e);r!==-1&&(n[r].isPaid=!n[r].isPaid,localStorage.setItem(fe.ORDERS,JSON.stringify(n)))}async deleteOrdersByContext(e,n){if(this.useCloud){try{const s=Un(Rt(te,"orders"),wi("dateStr","==",e),wi("categoryLabel","==",n)),a=(await _t(s)).docs.map(l=>Bn(ke(te,"orders",l.id)));await Promise.all(a)}catch(s){console.error("Delete Orders Error:",s)}return}let r=await this.getOrders();r=r.filter(s=>!(s.dateStr===e&&s.categoryLabel===n)),localStorage.setItem(fe.ORDERS,JSON.stringify(r))}async getMenuCategories(){if(this.useCloud){const n=Un(Rt(te,"menus"));return(await _t(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(fe.MENU_CATEGORIES);return e?JSON.parse(e):cx}async saveMenuCategories(e){this.useCloud||localStorage.setItem(fe.MENU_CATEGORIES,JSON.stringify(e))}async addMenuCategory(e,n){if(this.useCloud){const i="MENU_"+Date.now();await zn(ke(te,"menus",i),{label:e,config:n});return}const r=await this.getMenuCategories(),s="MENU_"+Date.now();r.push({id:s,label:e,config:n}),await this.saveMenuCategories(r)}async updateMenuCategory(e,n,r){if(this.useCloud){await Ei(ke(te,"menus",e),{label:n,config:r});return}const s=await this.getMenuCategories(),i=s.findIndex(a=>a.id===e);i!==-1&&(s[i].label=n,s[i].config=r,await this.saveMenuCategories(s))}async deleteMenuCategory(e){if(this.useCloud){await Bn(ke(te,"menus",e));return}let n=await this.getMenuCategories();n=n.filter(r=>r.id!==e),await this.saveMenuCategories(n)}async getEmployees(){if(this.useCloud){const n=Un(Rt(te,"employees"),ng("name"));return(await _t(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(fe.EMPLOYEES);return e?JSON.parse(e):hx}async saveEmployees(e){this.useCloud||localStorage.setItem(fe.EMPLOYEES,JSON.stringify(e))}async addEmployee(e){if(this.useCloud){const{id:r,...s}=e;await zn(ke(te,"employees",r),s);return}const n=await this.getEmployees();n.push(e),await this.saveEmployees(n)}async updateEmployee(e){if(this.useCloud){await Ei(ke(te,"employees",e.id),{name:e.name});return}const r=(await this.getEmployees()).map(s=>s.id===e.id?e:s);await this.saveEmployees(r)}async deleteEmployee(e){if(this.useCloud){await Bn(ke(te,"employees",e));return}const r=(await this.getEmployees()).filter(s=>s.id!==e);await this.saveEmployees(r)}async getAnnouncements(){if(this.useCloud){const n=Un(Rt(te,"announcements"));return(await _t(n)).docs.map(s=>({id:s.id,...s.data()}))}const e=localStorage.getItem(fe.ANNOUNCEMENTS);return e?JSON.parse(e):dx}async saveAnnouncements(e){if(this.useCloud){for(const n of e)await zn(ke(te,"announcements",n.id),{content:n.content,isActive:n.isActive},{merge:!0});return}localStorage.setItem(fe.ANNOUNCEMENTS,JSON.stringify(e))}async getAdminSettings(){if(this.useCloud)return{isGoogleBound:!0,googleAccountName:"Firebase Mode",googleAccountType:"WORKSPACE"};const e=localStorage.getItem(fe.ADMIN_SETTINGS);return e?JSON.parse(e):{isGoogleBound:!1,googleAccountName:"",googleAccountType:"PERSONAL"}}async setGoogleBound(e,n="",r="PERSONAL"){const s={isGoogleBound:e,googleAccountName:n,googleAccountType:r};localStorage.setItem(fe.ADMIN_SETTINGS,JSON.stringify(s))}async checkDatabaseConnection(){if(this.useCloud)try{return await _t(Rt(te,"admins")),!0}catch{return!1}return new Promise(e=>{setTimeout(()=>{e(!0)},1e3)})}async getAdminAccounts(){if(this.useCloud){const n=Un(Rt(te,"admins")),s=(await _t(n)).docs.map(i=>({id:i.id,...i.data()}));if(s.length===0){for(const i of Ti)await zn(ke(te,"admins",i.id),{...i});return Ti}return s}const e=localStorage.getItem(fe.ADMIN_ACCOUNTS);return e?JSON.parse(e):(localStorage.setItem(fe.ADMIN_ACCOUNTS,JSON.stringify(Ti)),Ti)}async saveAdminAccounts(e){this.useCloud||localStorage.setItem(fe.ADMIN_ACCOUNTS,JSON.stringify(e))}async verifyAdmin(e,n){if(this.useCloud){if(!te)return null;const i=Rt(te,"admins");if((await _t(i)).empty){console.log("No admins found in DB, seeding default admins...");for(const f of Ti)await zn(ke(te,"admins",f.id),{...f})}const l=Un(i,wi("username","==",e),wi("password","==",n)),u=await _t(l);if(u.empty)return null;const h=u.docs[0];return{id:h.id,...h.data()}}return(await this.getAdminAccounts()).find(i=>i.username===e&&i.password===n)||null}async getAdminById(e){return(await this.getAdminAccounts()).find(r=>r.id===e)}async addAdminAccount(e){if(this.useCloud){const r=Un(Rt(te,"admins"),wi("username","==",e.username));if(!(await _t(r)).empty)throw new Error("");const{id:i,...a}=e;await zn(ke(te,"admins",i),a);return}const n=await this.getAdminAccounts();if(n.some(r=>r.username===e.username))throw new Error("");n.push(e),await this.saveAdminAccounts(n)}async updateAdminAccount(e){if(this.useCloud){const{id:s,...i}=e;await Ei(ke(te,"admins",s),i);return}const n=await this.getAdminAccounts(),r=n.findIndex(s=>s.id===e.id);r!==-1&&(n[r]=e,await this.saveAdminAccounts(n))}async deleteAdminAccount(e){if(this.useCloud){await Bn(ke(te,"admins",e));return}let n=await this.getAdminAccounts();n=n.filter(r=>r.id!==e),await this.saveAdminAccounts(n)}async getFrontendPassword(){if(this.useCloud){if(!te)return ca;try{const n=ke(te,"settings","global"),r=await ig(n);return r.exists()&&r.data().frontendPassword?r.data().frontendPassword:ca}catch(n){return console.error("Error fetching frontend password:",n),ca}}return localStorage.getItem(fe.FRONTEND_PASSWORD)||ca}async setFrontendPassword(e){if(this.useCloud){await zn(ke(te,"settings","global"),{frontendPassword:e},{merge:!0});return}localStorage.setItem(fe.FRONTEND_PASSWORD,e)}async clearAllData(){if(this.useCloud){const e=await _t(Rt(te,"orders"));for(const i of e.docs)await Bn(ke(te,"orders",i.id));const n=await _t(Rt(te,"menus"));for(const i of n.docs)await Bn(ke(te,"menus",i.id));const r=await _t(Rt(te,"employees"));for(const i of r.docs)await Bn(ke(te,"employees",i.id));const s=await _t(Rt(te,"announcements"));for(const i of s.docs)await Bn(ke(te,"announcements",i.id));return}localStorage.removeItem(fe.ORDERS),localStorage.removeItem(fe.MENU_CATEGORIES),localStorage.removeItem(fe.EMPLOYEES),localStorage.removeItem(fe.ANNOUNCEMENTS)}setSession(e,n){localStorage.setItem(fe.SESSION,e),n&&localStorage.setItem(fe.SESSION_USER_ID,n)}getSession(){const e=localStorage.getItem(fe.SESSION),n=localStorage.getItem(fe.SESSION_USER_ID);return{role:e,userId:n}}clearSession(){localStorage.removeItem(fe.SESSION),localStorage.removeItem(fe.SESSION_USER_ID)}}const px=new fx,Ve=px;var c0=(t=>(t.PENDING="PENDING",t.CONFIRMED="CONFIRMED",t.COMPLETED="COMPLETED",t.CANCELLED="CANCELLED",t))(c0||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ce=(t,e)=>{const n=ne.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:u,...h},f)=>ne.createElement("svg",{ref:f,...mx,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${gx(t)}`,l].join(" "),...h},[...e.map(([m,g])=>ne.createElement(m,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=Ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=Ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=Ce("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=Ce("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=Ce("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=Ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=Ce("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=Ce("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=Ce("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=Ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=Ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=Ce("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=Ce("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=Ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=Ce("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=Ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=Ce("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=Ce("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),bx=({onLogout:t,onGoToAdmin:e})=>{const[n,r]=ne.useState([]),[s,i]=ne.useState(""),[a,l]=ne.useState("CARD"),[u,h]=ne.useState(null),[f,m]=ne.useState(null),[g,C]=ne.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[k,V]=ne.useState([]),[L,I]=ne.useState(""),[w,x]=ne.useState(""),[D,U]=ne.useState(""),[F,v]=ne.useState(""),[y,E]=ne.useState("ALL"),[S,A]=ne.useState([]),[R,T]=ne.useState([]),[Ue,Ot]=ne.useState([]),[Pn,Er]=ne.useState(new Date),$=O=>{const ee=new Date(O),W=ee.getDay(),he=ee.getDate()-W+(W===0?-6:1);return new Date(ee.setDate(he))},Q=new Date().toISOString().split("T")[0];ne.useEffect(()=>{const O=setInterval(()=>Er(new Date),1e3);(async()=>{const[he,rt,Re,Xe]=await Promise.all([Ve.getMenuCategories(),Ve.getEmployees(),Ve.getAnnouncements(),Ve.getOrders()]);r(he);const Vn=Array.from(new Set(he.map(Tr=>Tr.label)));if(Vn.length>0&&!s){const Tr=Vn.includes("")?"":Vn[0];i(Tr)}A(rt),T(Re.filter(Tr=>Tr.isActive)),Ot(Xe)})();const W=()=>{window.innerWidth>=1024&&C(!0)};return window.addEventListener("resize",W),()=>{clearInterval(O),window.removeEventListener("resize",W)}},[]),ne.useEffect(()=>{if(!s)return;const O=n.filter(W=>W.label===s),ee=O.find(W=>W.config.date===Q);if(ee)h(ee);else if(O.length>0){const W=[...O].sort((he,rt)=>rt.config.date.localeCompare(he.config.date));h(W[0])}else h(null)},[s,n]);const Y=Array.from(new Set(n.map(O=>O.label))),ue=n.filter(O=>O.label===s),Ee=$(new Date),Zt=Array.from({length:5}).map((O,ee)=>{const W=new Date(Ee);return W.setDate(Ee.getDate()+ee),W.toISOString().split("T")[0]}),ht=["","","","",""],yt=[{active:"bg-blue-50 text-blue-800 border-blue-600",hover:"hover:bg-blue-50 hover:text-blue-600",border:"border-blue-600",badge:"bg-blue-100 text-blue-700"},{active:"bg-emerald-50 text-emerald-800 border-emerald-600",hover:"hover:bg-emerald-50 hover:text-emerald-600",border:"border-emerald-600",badge:"bg-emerald-100 text-emerald-700"},{active:"bg-amber-50 text-amber-800 border-amber-600",hover:"hover:bg-amber-50 hover:text-amber-600",border:"border-amber-600",badge:"bg-amber-100 text-amber-700"},{active:"bg-rose-50 text-rose-800 border-rose-600",hover:"hover:bg-rose-50 hover:text-rose-600",border:"border-rose-600",badge:"bg-rose-100 text-rose-700"},{active:"bg-violet-50 text-violet-800 border-violet-600",hover:"hover:bg-violet-50 hover:text-violet-600",border:"border-violet-600",badge:"bg-violet-100 text-violet-700"}],xt=O=>{if(!O)return"bg-slate-100 text-slate-500";const ee=Y.indexOf(O);if(ee!==-1)return yt[ee%yt.length].badge;const W=O.split("").reduce((he,rt)=>he+rt.charCodeAt(0),0);return yt[W%yt.length].badge},ze=u?u.config.date<Q:!1,Qs=()=>{if(!L){alert("");return}if(!w){alert("");return}if(!F){alert("");return}const O={id:Date.now().toString(),name:w,note:D,price:Number(F)};V([...k,O]),x(""),U(""),v("")},No=async()=>{if(!L||k.length===0){alert("");return}const O=S.find(he=>he.id===L),ee={id:Date.now().toString(),employeeName:O?O.name:"Unknown",items:k,totalAmount:k.reduce((he,rt)=>he+rt.price,0),timestamp:Date.now(),status:c0.PENDING,dateStr:Q,categoryLabel:s};await Ve.saveOrder(ee),alert(""),V([]),I("");const W=await Ve.getOrders();Ot(W)},ko=Ue.filter(O=>O.dateStr===Q).sort((O,ee)=>ee.timestamp-O.timestamp),Gl=Array.from(new Set(ko.map(O=>O.categoryLabel||""))),Ks=ko.filter(O=>y==="ALL"||(O.categoryLabel||"")===y),mn=s===""||s===""||s===""||s==="";return _.jsxs("div",{className:"min-h-screen bg-slate-50 pb-32",children:[_.jsxs("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:[_.jsxs("div",{className:"bg-slate-900 text-white px-4 py-2 flex justify-between items-center text-sm",children:[_.jsxs("div",{className:"font-mono flex items-center gap-2",children:[_.jsx(Wu,{size:14}),Pn.toLocaleDateString("zh-TW")," ",Pn.toLocaleTimeString("zh-TW",{hour12:!1})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsxs("button",{onClick:e,className:"flex items-center gap-1 text-slate-300 hover:text-white text-xs transition-colors",children:[_.jsx(Ex,{size:14})," "]}),_.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white text-xs",children:"Exit"})]})]}),_.jsx("div",{className:"bg-gradient-to-r from-amber-400 via-orange-500 to-amber-400 text-white font-bold overflow-hidden whitespace-nowrap py-2 shadow-inner",children:_.jsx("div",{className:"inline-block animate-marquee pl-full",children:R.map((O,ee)=>_.jsxs("span",{className:"mx-8 drop-shadow-sm",children:[" ",O.content]},ee))})}),_.jsx("div",{className:"text-center py-4 bg-white border-b border-slate-100",children:_.jsx("h1",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:""})}),_.jsx("div",{className:"flex justify-center border-b border-slate-200 overflow-x-auto px-4 bg-white",children:Y.length===0?_.jsxs("div",{className:"p-4 text-slate-400 text-sm flex items-center gap-2",children:[_.jsx(wx,{size:16})," "]}):Y.map((O,ee)=>{const W=yt[ee%yt.length],he=s===O;return _.jsx("button",{onClick:()=>{i(O),l("CARD")},className:`px-6 md:px-8 py-3 text-lg font-bold rounded-t-lg transition-all whitespace-nowrap border-b-4 mx-1 ${he?W.active:`border-transparent text-slate-500 bg-transparent ${W.hover}`}`,children:O},O)})})]}),_.jsxs("main",{className:"container mx-auto p-4 md:p-6 space-y-8",children:[_.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg shadow-sm border border-slate-200 cursor-pointer lg:cursor-auto select-none",onClick:()=>window.innerWidth<1024&&C(!g),children:[_.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[_.jsx(lg,{className:"text-primary"}),s," - ",mn?"":""]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"lg:hidden text-slate-400 flex items-center gap-1 text-xs",children:g?_.jsxs(_.Fragment,{children:[" ",_.jsx(vx,{size:20})]}):_.jsxs(_.Fragment,{children:[" ",_.jsx(_x,{size:20})]})}),_.jsxs("div",{className:"flex bg-slate-100 rounded-lg p-1 shadow-inner",onClick:O=>O.stopPropagation(),children:[_.jsx("button",{onClick:()=>l("CARD"),className:`p-2 rounded flex items-center gap-2 transition-colors ${a==="CARD"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,title:"",children:_.jsx(Tx,{size:18})}),_.jsx("button",{onClick:()=>l("LIST"),className:`p-2 rounded flex items-center gap-2 transition-colors ${a==="LIST"?"bg-white text-primary shadow-sm":"text-slate-400 hover:text-slate-600"}`,title:"",children:_.jsx(Ix,{size:18})})]})]})]}),g&&_.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 duration-300",children:[mn&&a==="CARD"&&_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Zt.map((O,ee)=>{const W=ue.find(Re=>Re.config.date===O),he=O===Q,rt=(u==null?void 0:u.id)===(W==null?void 0:W.id);return _.jsxs("div",{onClick:()=>W&&h(W),className:`relative flex flex-col rounded-xl overflow-hidden transition-all cursor-pointer border-2 ${he?"border-amber-400 shadow-lg ring-2 ring-amber-100 scale-[1.02] z-10":"border-slate-200 hover:border-blue-300"} ${rt?"ring-2 ring-primary":""} bg-white`,children:[_.jsxs("div",{className:`p-2 text-center font-bold text-sm ${he?"bg-amber-400 text-white":"bg-slate-100 text-slate-600"}`,children:[ht[ee]," ",_.jsx("span",{className:"text-xs font-normal opacity-90 block",children:O.slice(5)})]}),_.jsx("div",{className:"flex-1 min-h-[140px] flex items-center justify-center bg-slate-50 relative group flex-col",children:W?_.jsxs(_.Fragment,{children:[W.config.imageUrl?_.jsx("img",{src:W.config.imageUrl,alt:"Menu",className:"w-full h-full object-cover absolute inset-0"}):_.jsxs("div",{className:"text-xs text-slate-400 flex flex-col items-center z-10",children:[_.jsx(ag,{size:24})," ",_.jsx("span",{children:""})]}),_.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-2 z-10",children:[_.jsx("div",{className:"text-white text-xs font-bold truncate",children:W.config.shopName}),W.config.cutoffTime&&_.jsxs("div",{className:"text-red-500 text-xs font-bold bg-white/90 px-1 rounded backdrop-blur-sm mt-1 inline-block",children:[": ",W.config.cutoffTime]})]})]}):_.jsx("div",{className:"text-slate-300 text-xs",children:""})}),he&&_.jsx("div",{className:"absolute top-1 right-1 bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-full shadow animate-pulse z-20",children:"Today"})]},O)})}),mn&&a==="LIST"&&_.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:_.jsx("div",{className:"grid grid-cols-1 divide-y divide-slate-100",children:Zt.map((O,ee)=>{const W=ue.find(Re=>Re.config.date===O),he=O===Q,rt=(u==null?void 0:u.id)===(W==null?void 0:W.id);return _.jsxs("div",{onClick:()=>W&&h(W),className:`p-4 flex flex-col sm:flex-row sm:items-center gap-4 transition-all cursor-pointer relative ${he?"bg-amber-50/60 hover:bg-amber-100/50":"hover:bg-slate-50"} ${rt?"bg-blue-50/40 ring-1 ring-inset ring-primary":""}`,children:[he&&_.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 bg-amber-400"}),_.jsxs("div",{className:"sm:w-40 flex-shrink-0 flex items-center gap-2 pl-2",children:[_.jsx("div",{className:`font-bold text-lg ${he?"text-amber-700":"text-slate-600"}`,children:ht[ee]}),_.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"text-xs text-slate-400 font-mono",children:O}),he&&_.jsx("span",{className:"inline-block px-1.5 py-0.5 rounded-full bg-red-500 text-white text-[10px] font-bold w-fit mt-0.5",children:"Today"})]})]}),_.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[_.jsxs("div",{className:"w-20 h-14 bg-slate-100 rounded overflow-hidden flex-shrink-0 border border-slate-200 shadow-sm relative",children:[W!=null&&W.config.imageUrl?_.jsx("img",{src:W.config.imageUrl,className:"w-full h-full object-cover",alt:"thumb"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:_.jsx(ag,{size:16})}),!W&&_.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-50 text-[10px] text-slate-400",children:""})]}),_.jsx("div",{className:"flex-1 min-w-0",children:W?_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"font-bold text-slate-800 text-base truncate",children:W.config.shopName}),W.config.cutoffTime?_.jsxs("div",{className:"text-xs font-bold text-red-600 flex items-center gap-1 mt-1",children:[_.jsx(Wu,{size:12})," : ",W.config.cutoffTime]}):_.jsx("div",{className:"text-xs text-slate-400 mt-1",children:""})]}):_.jsx("span",{className:"text-slate-400 italic text-sm",children:"--  --"})})]}),_.jsx("div",{className:"text-right flex-shrink-0",children:W?_.jsx("button",{className:`px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition-all border ${rt?"bg-primary text-white border-primary shadow-md":"bg-white border-slate-300 text-slate-600 hover:border-primary hover:text-primary"}`,children:rt?"":""}):_.jsx("button",{disabled:!0,className:"px-4 py-2 rounded-lg text-sm text-slate-300 border border-slate-100 bg-slate-50 cursor-not-allowed",children:""})})]},O)})})}),!mn&&a==="CARD"&&_.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[ue.length===0&&_.jsx("div",{className:"col-span-full text-center text-slate-400 py-8",children:""}),ue.map(O=>{const ee=(u==null?void 0:u.id)===O.id;return _.jsxs("div",{onClick:()=>h(O),className:`bg-white rounded-xl shadow-sm border transition-all cursor-pointer overflow-hidden group hover:shadow-md ${ee?"border-primary ring-2 ring-primary/20":"border-slate-200 hover:border-blue-300"}`,children:[_.jsxs("div",{className:"aspect-video bg-slate-100 relative",children:[O.config.imageUrl?_.jsx("img",{src:O.config.imageUrl,alt:"item",className:"w-full h-full object-cover"}):_.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:_.jsx(lg,{size:32})}),_.jsx("div",{className:"absolute top-2 right-2 bg-white/90 backdrop-blur px-2 py-1 rounded text-xs font-bold shadow text-slate-700",children:O.config.date})]}),_.jsxs("div",{className:"p-3",children:[_.jsx("h3",{className:"font-bold text-slate-800 truncate",children:O.config.shopName}),O.config.cutoffTime&&_.jsxs("div",{className:"text-sm font-bold text-red-600 mt-1",children:[": ",O.config.date," ",O.config.cutoffTime]}),_.jsx("div",{className:"text-xs text-slate-500 mt-1 flex items-center gap-1",children:""})]})]},O.id)})]}),!mn&&a==="LIST"&&_.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:_.jsxs("table",{className:"w-full text-left",children:[_.jsx("thead",{className:"bg-slate-50 border-b border-slate-100",children:_.jsxs("tr",{children:[_.jsx("th",{className:"p-4 text-slate-600 font-semibold w-32",children:""}),_.jsx("th",{className:"p-4 text-slate-600 font-semibold",children:" / "}),_.jsx("th",{className:"p-4 text-slate-600 font-semibold text-right",children:""})]})}),_.jsxs("tbody",{className:"divide-y divide-slate-100",children:[ue.length===0&&_.jsx("tr",{children:_.jsx("td",{colSpan:3,className:"p-8 text-center text-slate-400",children:""})}),ue.sort((O,ee)=>ee.config.date.localeCompare(O.config.date)).map(O=>_.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${(u==null?void 0:u.id)===O.id?"bg-blue-50/50":""}`,children:[_.jsx("td",{className:"p-4 text-slate-600 font-mono text-sm",children:O.config.date}),_.jsxs("td",{className:"p-4",children:[_.jsx("div",{className:"font-bold text-slate-800",children:O.config.shopName}),O.config.cutoffTime&&_.jsxs("div",{className:"text-red-600 text-sm font-bold mt-1",children:[": ",O.config.date," ",O.config.cutoffTime]})]}),_.jsx("td",{className:"p-4 text-right",children:_.jsx("button",{onClick:()=>h(O),className:"px-4 py-2 bg-white border border-slate-300 rounded text-sm font-medium hover:bg-primary hover:text-white hover:border-primary transition-colors shadow-sm",children:""})})]},O.id))]})]})})]}),u&&_.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 pt-4",children:[_.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[_.jsxs("div",{className:"flex justify-between items-end",children:[_.jsxs("div",{children:[_.jsxs("h3",{className:"text-lg font-bold text-slate-700 flex items-center gap-2",children:[_.jsx(Nx,{className:"text-amber-400 fill-amber-400"})," ",u.config.shopName]}),u.config.cutoffTime&&_.jsxs("div",{className:"text-red-600 font-bold mt-1 flex items-center gap-1 animate-pulse",children:[_.jsx(Wu,{size:16})," : ",u.config.date," ",u.config.cutoffTime]})]}),_.jsx("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded",children:u.config.date})]}),_.jsx("div",{className:"w-full bg-white rounded-xl shadow border border-slate-200 overflow-hidden cursor-zoom-in group relative",onClick:()=>u.config.imageUrl&&m(u.config.imageUrl),children:u.config.imageUrl?_.jsxs(_.Fragment,{children:[_.jsx("img",{src:u.config.imageUrl,alt:"Menu Detail",className:"w-full h-auto max-h-[500px] object-contain"}),_.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all flex items-center justify-center",children:_.jsxs("div",{className:"opacity-0 group-hover:opacity-100 bg-white px-4 py-2 rounded-full shadow-lg font-bold flex items-center gap-2 transform translate-y-2 group-hover:translate-y-0 transition-all",children:[_.jsx(Dx,{size:18})," "]})})]}):_.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:""})})]}),_.jsxs("div",{className:"lg:col-span-7 bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden flex flex-col relative",children:[ze&&_.jsx("div",{className:"absolute inset-0 bg-slate-100/60 z-20 flex items-center justify-center backdrop-blur-[2px]",children:_.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-xl text-center border-2 border-red-100 max-w-sm",children:[_.jsx("div",{className:"bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:_.jsx(ch,{size:32})}),_.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:""}),_.jsx("p",{className:"text-slate-500",children:""})]})}),_.jsx("div",{className:`${ze?"bg-slate-400":"bg-slate-800"} text-white p-4 transition-colors`,children:_.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[_.jsx(Rx,{size:20})," "]})}),_.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6 flex-1",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"1. "}),_.jsxs("select",{disabled:ze,value:L,onChange:O=>I(O.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none disabled:bg-slate-100 disabled:text-slate-400",children:[_.jsx("option",{value:"",children:"--  --"}),S.map(O=>_.jsx("option",{value:O.id,children:O.name},O.id))]})]}),_.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-100 space-y-3",children:[_.jsx("div",{className:"text-sm font-bold text-slate-700 border-b pb-2 mb-2",children:"2. "}),_.jsx("input",{disabled:ze,placeholder:" (: )",value:w,onChange:O=>x(O.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),_.jsx("input",{disabled:ze,type:"number",placeholder:"",value:F,onChange:O=>v(O.target.value===""?"":Number(O.target.value)),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),_.jsx("input",{disabled:ze,placeholder:" (: )",value:D,onChange:O=>U(O.target.value),className:"w-full p-2 bg-white border border-slate-300 rounded focus:ring-2 focus:ring-primary outline-none text-sm disabled:bg-slate-100"}),_.jsxs("button",{disabled:ze,onClick:Qs,className:"w-full py-2 bg-secondary text-white rounded hover:bg-slate-700 text-sm font-bold flex items-center justify-center gap-2 disabled:bg-slate-400 disabled:cursor-not-allowed",children:[_.jsx(Ax,{size:16})," "]})]})]}),_.jsxs("div",{className:"flex flex-col bg-amber-50 rounded-lg border border-amber-100 p-4",children:[_.jsx("h3",{className:"text-sm font-bold text-amber-800 mb-3",children:""}),_.jsx("div",{className:"flex-1 overflow-y-auto max-h-[200px] space-y-2 mb-3 pr-1 custom-scrollbar",children:k.length===0?_.jsx("p",{className:"text-xs text-amber-600/60 text-center py-4",children:""}):k.map((O,ee)=>_.jsxs("div",{className:"bg-white p-2 rounded shadow-sm flex justify-between items-start text-sm",children:[_.jsxs("div",{children:[_.jsx("div",{className:"font-bold text-slate-800",children:O.name}),O.note&&_.jsx("div",{className:"text-xs text-slate-500",children:O.note})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("span",{className:"font-medium",children:["$",O.price]}),_.jsx("button",{disabled:ze,onClick:()=>V(k.filter((W,he)=>he!==ee)),className:"text-red-400 hover:text-red-600 disabled:text-slate-300",children:_.jsx(ug,{size:14})})]})]},ee))}),_.jsxs("div",{className:"pt-3 border-t border-amber-200",children:[_.jsxs("div",{className:"flex justify-between items-center mb-3",children:[_.jsx("span",{className:"font-bold text-slate-700",children:""}),_.jsxs("span",{className:"text-xl font-bold text-primary",children:["$",k.reduce((O,ee)=>O+ee.price,0)]})]}),_.jsx("button",{onClick:No,disabled:k.length===0||ze,className:`w-full py-3 rounded font-bold transition-all ${k.length>0&&!ze?"bg-primary text-white hover:bg-blue-700 shadow":"bg-slate-300 text-slate-500 cursor-not-allowed"}`,children:""}),_.jsx("p",{className:"text-xs text-red-500 font-bold mt-2 text-center",children:""})]})]})]})]})]}),_.jsxs("section",{className:"bg-white rounded-xl shadow border border-slate-200 overflow-hidden",children:[_.jsx("div",{className:"bg-slate-100 p-4 border-b border-slate-200",children:_.jsxs("h2",{className:"font-bold text-slate-800 flex items-center gap-2",children:[_.jsx(Sx,{size:20,className:"text-primary"})," "]})}),_.jsxs("div",{className:"p-3 border-b border-slate-100 flex gap-2 overflow-x-auto",children:[_.jsx("button",{onClick:()=>E("ALL"),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors ${y==="ALL"?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:""}),Gl.map(O=>{const ee=y===O;return _.jsx("button",{onClick:()=>E(O),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-colors border ${ee?"bg-slate-800 text-white":"bg-white border-slate-200 text-slate-500 hover:bg-slate-50"}`,children:O},O)})]}),_.jsx("div",{className:"p-0 divide-y divide-slate-100",children:Ks.length===0?_.jsx("div",{className:"p-8 text-center text-slate-400",children:""}):Ks.map(O=>{const ee=xt(O.categoryLabel);return _.jsxs("div",{className:"p-4 flex items-center gap-4 hover:bg-slate-50",children:[_.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 flex-shrink-0",children:_.jsx(Px,{size:16})}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex justify-between mb-1",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"font-bold text-slate-800",children:O.employeeName}),O.categoryLabel&&_.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${ee}`,children:O.categoryLabel})]}),_.jsx("span",{className:"text-xs text-slate-400 flex-shrink-0",children:new Date(O.timestamp).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit",hour12:!1})})]}),_.jsx("div",{className:"text-sm text-slate-600 truncate",children:O.items.map(W=>`${W.name}${W.note?`(${W.note})`:""}`).join(", ")})]})]},O.id)})})]})]}),f&&_.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4 cursor-zoom-out backdrop-blur-sm",onClick:()=>m(null),children:[_.jsx("img",{src:f,alt:"Zoom",className:"max-w-full max-h-[90vh] rounded shadow-2xl animate-in fade-in zoom-in duration-200"}),_.jsx("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white",children:_.jsx(ug,{size:32})})]}),_.jsx("style",{children:"@keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } } .animate-marquee { animation: marquee 20s linear infinite; } .pl-full { padding-left: 100%; } .custom-scrollbar::-webkit-scrollbar { width: 4px; } .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }"})]})},Mx=[{id:"MENU_001",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&auto=format&fit=crop&q=60",shopName:"",date:new Date().toISOString().split("T")[0],cutoffTime:"10:30",options:[{id:"opt_1",label:"",price:100},{id:"opt_2",label:"",price:110},{id:"opt_3",label:"",price:120},{id:"opt_4",label:"",price:130},{id:"opt_5",label:"",price:90}]}},{id:"MENU_002",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1513558161293-cdaf765ed2fd?w=800&auto=format&fit=crop&q=60",shopName:"50 ()",date:new Date().toISOString().split("T")[0],cutoffTime:"14:00",options:[{id:"drink_1",label:" (L)",price:35},{id:"drink_2",label:" (L)",price:55},{id:"drink_3",label:" (M)",price:60},{id:"drink_4",label:" (L)",price:35},{id:"drink_5",label:" (L)",price:50},{id:"drink_6",label:" (L)",price:65}]}},{id:"MENU_003",label:"",config:{imageUrl:"https://images.unsplash.com/photo-1511920170033-f8396924c348?w=800&auto=format&fit=crop&q=60",shopName:"",date:new Date().toISOString().split("T")[0],cutoffTime:"15:00",options:[{id:"tea_1",label:" ()",price:110},{id:"tea_2",label:" ()",price:135},{id:"tea_3",label:" ()",price:155},{id:"tea_4",label:" ()",price:145},{id:"tea_5",label:" ()",price:125}]}}],Ox=[{id:"EMP_001",name:""},{id:"EMP_002",name:""},{id:"EMP_003",name:""},{id:"EMP_004",name:""},{id:"EMP_005",name:""}],Lx=[{id:"ANN_001",content:" ",isActive:!0},{id:"ANN_002",content:"  10:30 ",isActive:!0},{id:"ANN_003",content:" ",isActive:!0}],jx=async()=>{console.log("Starting full database seed...");let t=0;try{if((await Ve.getMenuCategories()).length===0){console.log("Seeding menus...");for(const s of Mx)await Ve.addMenuCategory(s.label,s.config);t++}else console.log("Menus already exist.");if((await Ve.getEmployees()).length===0){console.log("Seeding employees...");for(const s of Ox)await Ve.addEmployee(s);t++}else console.log("Employees already exist.");(await Ve.getAnnouncements()).length===0?(console.log("Seeding announcements..."),await Ve.saveAnnouncements(Lx),t++):console.log("Announcements already exist."),t>0?(console.log("Database seed completed!"),alert(`
`),window.location.reload()):alert(`
`)}catch(e){console.error("Seeding failed:",e),alert(" Console")}},Fx=t=>async n=>{if(!t.isSuperAdmin){alert("");return}const r=prompt("");if(r!==null){if(r!==t.password){alert("");return}await n()}},Ux=({currentUser:t})=>{const[e,n]=ne.useState("IDLE"),[r,s]=ne.useState(null),i=Fx(t),a=async()=>{n("CHECKING");const u=await Ve.checkDatabaseConnection();n(u?"SUCCESS":"ERROR"),s(new Date)},l=async()=>{await Ve.clearAllData(),alert(""),window.location.reload()};return _.jsxs("div",{className:"space-y-6",children:[_.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[_.jsx(og,{className:"text-indigo-600"})," "]}),_.jsxs("div",{className:"flex items-center space-x-4",children:[_.jsx("span",{className:"font-medium",children:""}),_.jsx("span",{className:"bg-orange-500 text-white px-2 py-1 rounded",children:"Google Firestore"})]}),_.jsxs("div",{className:"flex items-center space-x-4",children:[_.jsx("span",{className:"font-medium",children:""}),e==="IDLE"&&_.jsx("span",{className:"text-gray-500",children:""}),e==="CHECKING"&&_.jsx("span",{className:"text-blue-500 animate-pulse",children:""}),e==="SUCCESS"&&_.jsxs("span",{className:"text-emerald-600 flex items-center gap-1",children:[_.jsx(yx,{size:14})," "]}),e==="ERROR"&&_.jsxs("span",{className:"text-red-500 flex items-center gap-1",children:[_.jsx(Vx,{size:14})," "]}),_.jsxs("button",{onClick:a,disabled:e==="CHECKING",className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 flex items-center gap-2",children:[_.jsx(xx,{size:16,className:e==="CHECKING"?"animate-spin":""})," "]})]}),r&&_.jsxs("div",{className:"text-xs text-gray-400",children:[": ",r.toLocaleTimeString()]}),_.jsxs("div",{className:"flex space-x-4",children:[_.jsxs("button",{onClick:()=>i(()=>jx()),className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-2 rounded hover:from-indigo-700 hover:to-purple-700 flex items-center gap-2",children:[_.jsx(og,{size:16})," "]}),_.jsxs("button",{onClick:()=>i(l),className:"bg-white border border-red-200 text-red-600 px-4 py-2 rounded hover:bg-red-50 flex items-center gap-2",children:[_.jsx(kx,{size:16})," "]})]})]})},zx=({onLogout:t,onGoToFrontend:e,currentUser:n})=>_.jsxs("div",{className:"p-6",children:[_.jsxs("header",{className:"flex justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:""}),_.jsxs("div",{className:"flex space-x-2",children:[_.jsx("button",{onClick:e,className:"bg-gray-200 px-3 py-1 rounded",children:""}),_.jsx("button",{onClick:t,className:"bg-red-500 text-white px-3 py-1 rounded",children:""})]})]}),_.jsx(Ux,{currentUser:n})]}),Bx=()=>{const[t,e]=ne.useState(!1),[n,r]=ne.useState(!1),[s,i]=ne.useState(void 0),[a,l]=ne.useState(!0),[u,h]=ne.useState(""),[f,m]=ne.useState(""),[g,C]=ne.useState(""),[k,V]=ne.useState("USER"),[L,I]=ne.useState(""),[w,x]=ne.useState(!1);ne.useEffect(()=>{(async()=>{const{role:y,userId:E}=Ve.getSession();if(y==="USER")e(!0);else if(y==="ADMIN"&&E){const S=await Ve.getAdminById(E);S?(r(!0),i(S)):Ve.clearSession()}l(!1)})()},[]);const D=async v=>{v.preventDefault(),l(!0);const y=await Ve.getFrontendPassword();l(!1),u===y?(e(!0),I(""),w&&Ve.setSession("USER")):I("")},U=async v=>{v.preventDefault(),l(!0);const y=await Ve.verifyAdmin(f,g);l(!1),y?(r(!0),i(y),I(""),w&&Ve.setSession("ADMIN",y.id)):I("")},F=()=>{e(!1),r(!1),i(void 0),Ve.clearSession(),h(""),C(""),m("")};return a?_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:"Loading..."}):n&&s?_.jsx(zx,{currentUser:s,onLogout:F,onGoToFrontend:()=>{r(!1),e(!0)}}):t?_.jsx(bx,{onLogout:F,onGoToAdmin:()=>{F(),V("ADMIN")}}):_.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-800 to-slate-900 p-4",children:_.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden w-full max-w-md",children:[_.jsxs("div",{className:"flex text-sm font-bold text-center border-b bg-gray-50",children:[_.jsx("button",{onClick:()=>{V("USER"),I("")},className:`flex-1 py-4 uppercase tracking-wider transition-all border-t-4 ${k==="USER"?"bg-white text-primary border-primary":"bg-gray-100 text-gray-400 border-transparent hover:bg-gray-50"}`,children:""}),_.jsx("button",{onClick:()=>{V("ADMIN"),I("")},className:`flex-1 py-4 uppercase tracking-wider transition-all border-t-4 ${k==="ADMIN"?"bg-white text-slate-800 border-slate-800":"bg-gray-100 text-gray-400 border-transparent hover:bg-gray-50"}`,children:""})]}),_.jsxs("div",{className:"p-8",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-2",children:""}),_.jsx("p",{className:"text-slate-500 text-sm",children:""})]}),L&&_.jsx("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded border border-red-200 text-center",children:L}),k==="USER"?_.jsxs("form",{onSubmit:D,className:"space-y-6",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),_.jsxs("div",{className:"relative",children:[_.jsx(ch,{className:"absolute left-3 top-3 text-slate-400",size:18}),_.jsx("input",{type:"password",value:u,onChange:v=>h(v.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none",placeholder:"",autoComplete:"current-password"})]})]}),_.jsxs("div",{className:"flex items-center",children:[_.jsx("input",{id:"remember-user",type:"checkbox",checked:w,onChange:v=>x(v.target.checked),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary bg-white"}),_.jsx("label",{htmlFor:"remember-user",className:"ml-2 block text-sm text-slate-600 cursor-pointer",children:" (Remember me)"})]}),_.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition-colors",children:""})]}):_.jsxs("form",{onSubmit:U,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),_.jsxs("div",{className:"relative",children:[_.jsx(Cx,{className:"absolute left-3 top-3 text-slate-400",size:18}),_.jsx("input",{type:"text",value:f,onChange:v=>m(v.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none",placeholder:"",autoComplete:"username"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),_.jsxs("div",{className:"relative",children:[_.jsx(ch,{className:"absolute left-3 top-3 text-slate-400",size:18}),_.jsx("input",{type:"password",value:g,onChange:v=>C(v.target.value),className:"pl-10 w-full p-2.5 bg-white border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-slate-500 outline-none",placeholder:"",autoComplete:"current-password"})]})]}),_.jsxs("div",{className:"flex items-center pt-2",children:[_.jsx("input",{id:"remember-admin",type:"checkbox",checked:w,onChange:v=>x(v.target.checked),className:"w-4 h-4 text-slate-800 border-gray-300 rounded focus:ring-slate-800 bg-white"}),_.jsx("label",{htmlFor:"remember-admin",className:"ml-2 block text-sm text-slate-600 cursor-pointer",children:" (Remember me)"})]}),_.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white py-3 rounded-lg font-bold hover:bg-slate-900 transition-colors mt-2",children:""})]})]})]})})},h0=document.getElementById("root");if(!h0)throw new Error("Could not find root element to mount to");const $x=Gu.createRoot(h0);$x.render(_.jsx(Z0.StrictMode,{children:_.jsx(Bx,{})}));
